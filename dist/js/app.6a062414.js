(function(){var e={5358:function(e,t,o){var a={"./af":2190,"./af.js":2190,"./ar":7218,"./ar-dz":5785,"./ar-dz.js":5785,"./ar-kw":9417,"./ar-kw.js":9417,"./ar-ly":6904,"./ar-ly.js":6904,"./ar-ma":8617,"./ar-ma.js":8617,"./ar-ps":1318,"./ar-ps.js":1318,"./ar-sa":2699,"./ar-sa.js":2699,"./ar-tn":6789,"./ar-tn.js":6789,"./ar.js":7218,"./az":3050,"./az.js":3050,"./be":8316,"./be.js":8316,"./bg":310,"./bg.js":310,"./bm":8884,"./bm.js":8884,"./bn":3469,"./bn-bd":6672,"./bn-bd.js":6672,"./bn.js":3469,"./bo":9118,"./bo.js":9118,"./br":3113,"./br.js":3113,"./bs":3626,"./bs.js":3626,"./ca":921,"./ca.js":921,"./cs":7799,"./cs.js":7799,"./cv":2828,"./cv.js":2828,"./cy":3521,"./cy.js":3521,"./da":6962,"./da.js":6962,"./de":3294,"./de-at":6158,"./de-at.js":6158,"./de-ch":5960,"./de-ch.js":5960,"./de.js":3294,"./dv":7963,"./dv.js":7963,"./el":1051,"./el.js":1051,"./en-au":998,"./en-au.js":998,"./en-ca":5931,"./en-ca.js":5931,"./en-gb":5930,"./en-gb.js":5930,"./en-ie":8081,"./en-ie.js":8081,"./en-il":1594,"./en-il.js":1594,"./en-in":3904,"./en-in.js":3904,"./en-nz":1507,"./en-nz.js":1507,"./en-sg":9409,"./en-sg.js":9409,"./eo":2177,"./eo.js":2177,"./es":4805,"./es-do":1536,"./es-do.js":1536,"./es-mx":9791,"./es-mx.js":9791,"./es-us":6098,"./es-us.js":6098,"./es.js":4805,"./et":6240,"./et.js":6240,"./eu":391,"./eu.js":391,"./fa":612,"./fa.js":612,"./fi":4220,"./fi.js":4220,"./fil":5570,"./fil.js":5570,"./fo":5466,"./fo.js":5466,"./fr":4461,"./fr-ca":6306,"./fr-ca.js":6306,"./fr-ch":7081,"./fr-ch.js":7081,"./fr.js":4461,"./fy":3484,"./fy.js":3484,"./ga":6957,"./ga.js":6957,"./gd":2978,"./gd.js":2978,"./gl":9866,"./gl.js":9866,"./gom-deva":5011,"./gom-deva.js":5011,"./gom-latn":4724,"./gom-latn.js":4724,"./gu":1601,"./gu.js":1601,"./he":9802,"./he.js":9802,"./hi":9358,"./hi.js":9358,"./hr":3907,"./hr.js":3907,"./hu":218,"./hu.js":218,"./hy-am":533,"./hy-am.js":533,"./id":2844,"./id.js":2844,"./is":7353,"./is.js":7353,"./it":6364,"./it-ch":774,"./it-ch.js":774,"./it.js":6364,"./ja":6008,"./ja.js":6008,"./jv":8221,"./jv.js":8221,"./ka":2417,"./ka.js":2417,"./kk":2071,"./kk.js":2071,"./km":6149,"./km.js":6149,"./kn":4572,"./kn.js":4572,"./ko":659,"./ko.js":659,"./ku":6285,"./ku-kmr":9398,"./ku-kmr.js":9398,"./ku.js":6285,"./ky":1609,"./ky.js":1609,"./lb":119,"./lb.js":119,"./lo":1748,"./lo.js":1748,"./lt":1973,"./lt.js":1973,"./lv":1347,"./lv.js":1347,"./me":3023,"./me.js":3023,"./mi":5747,"./mi.js":5747,"./mk":4341,"./mk.js":4341,"./ml":3840,"./ml.js":3840,"./mn":2058,"./mn.js":2058,"./mr":9182,"./mr.js":9182,"./ms":5197,"./ms-my":9136,"./ms-my.js":9136,"./ms.js":5197,"./mt":6408,"./mt.js":6408,"./my":1683,"./my.js":1683,"./nb":3141,"./nb.js":3141,"./ne":9344,"./ne.js":9344,"./nl":4703,"./nl-be":4641,"./nl-be.js":4641,"./nl.js":4703,"./nn":9873,"./nn.js":9873,"./oc-lnc":1217,"./oc-lnc.js":1217,"./pa-in":4612,"./pa-in.js":4612,"./pl":4457,"./pl.js":4457,"./pt":1089,"./pt-br":9146,"./pt-br.js":9146,"./pt.js":1089,"./ro":5950,"./ro.js":5950,"./ru":7292,"./ru.js":7292,"./sd":6774,"./sd.js":6774,"./se":7493,"./se.js":7493,"./si":3761,"./si.js":3761,"./sk":9711,"./sk.js":9711,"./sl":8558,"./sl.js":8558,"./sq":8633,"./sq.js":8633,"./sr":688,"./sr-cyrl":7903,"./sr-cyrl.js":7903,"./sr.js":688,"./ss":1991,"./ss.js":1991,"./sv":7020,"./sv.js":7020,"./sw":5891,"./sw.js":5891,"./ta":5714,"./ta.js":5714,"./te":206,"./te.js":206,"./tet":4768,"./tet.js":4768,"./tg":8276,"./tg.js":8276,"./th":7977,"./th.js":7977,"./tk":6928,"./tk.js":6928,"./tl-ph":8046,"./tl-ph.js":8046,"./tlh":1361,"./tlh.js":1361,"./tr":4367,"./tr.js":4367,"./tzl":627,"./tzl.js":627,"./tzm":2636,"./tzm-latn":8148,"./tzm-latn.js":8148,"./tzm.js":2636,"./ug-cn":1204,"./ug-cn.js":1204,"./uk":461,"./uk.js":461,"./ur":1366,"./ur.js":1366,"./uz":3454,"./uz-latn":8374,"./uz-latn.js":8374,"./uz.js":3454,"./vi":8572,"./vi.js":8572,"./x-pseudo":464,"./x-pseudo.js":464,"./yo":3709,"./yo.js":3709,"./zh-cn":5873,"./zh-cn.js":5873,"./zh-hk":7549,"./zh-hk.js":7549,"./zh-mo":2240,"./zh-mo.js":2240,"./zh-tw":405,"./zh-tw.js":405};function r(e){var t=n(e);return o(t)}function n(e){if(!o.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=n,e.exports=r,r.id=5358},7538:function(e,t,o){"use strict";var a={};o.r(a),o.d(a,{Ap:function(){return oo},hL:function(){return ao}});var r=o(5130),n=o(6768);const s={id:"app"},i={class:"navbar navbar-expand-lg navbar-dark bg-primary"},l={class:"container-fluid"},c=(0,n.Lk)("a",{class:"navbar-brand",href:"#"},"M.A.R.Y.",-1),d=(0,n.Lk)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNavDropdown","aria-controls":"navbarNavDropdown","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,n.Lk)("span",{class:"navbar-toggler-icon"})],-1),u={class:"collapse navbar-collapse",id:"navbarNavDropdown"},m={class:"navbar-nav"},h={class:"nav-item dropdown"},p=(0,n.Lk)("a",{class:"nav-link dropdown-toggle",href:"#",id:"navbarDropdownMenuLink",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}," New Entry ",-1),y={class:"dropdown-menu","aria-labelledby":"navbarDropdownMenuLink"},g={class:"nav-item"},f={class:"nav-item"},v={class:"nav-item"},b={class:"nav-item"},k={class:"nav-item dropdown"},_=(0,n.Lk)("a",{class:"nav-link dropdown-toggle",href:"#",id:"navbarDropdownMenuLink",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}," Configuration ",-1),C={class:"dropdown-menu","aria-labelledby":"navbarDropdownMenuLink"};function D(e,t,o,a,r,D){const L=(0,n.g2)("router-link"),E=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.CE)("div",s,[(0,n.Lk)("nav",i,[(0,n.Lk)("div",l,[c,d,(0,n.Lk)("div",u,[(0,n.Lk)("ul",m,[(0,n.Lk)("li",h,[p,(0,n.Lk)("ul",y,[(0,n.bF)(L,{class:"dropdown-item",to:"/"},{default:(0,n.k6)((()=>[(0,n.eW)("Standard Entry")])),_:1}),(0,n.bF)(L,{class:"dropdown-item",to:"/create-vehicle-entry"},{default:(0,n.k6)((()=>[(0,n.eW)("Vehicle Entry")])),_:1})])]),(0,n.Lk)("li",g,[(0,n.bF)(L,{class:"nav-link",to:"/view-entries"},{default:(0,n.k6)((()=>[(0,n.eW)("Stored and Not Classified")])),_:1})]),(0,n.Lk)("li",f,[(0,n.bF)(L,{class:"nav-link",to:"/approved-classification-entries"},{default:(0,n.k6)((()=>[(0,n.eW)("Classification Okay")])),_:1})]),(0,n.Lk)("li",v,[(0,n.bF)(L,{class:"nav-link",to:"/partial-storage-entries"},{default:(0,n.k6)((()=>[(0,n.eW)("Partial Storage ")])),_:1})]),(0,n.Lk)("li",b,[(0,n.bF)(L,{class:"nav-link",to:"/full-storage-entries"},{default:(0,n.k6)((()=>[(0,n.eW)("Full Storage ")])),_:1})]),(0,n.Lk)("li",k,[_,(0,n.Lk)("ul",C,[(0,n.bF)(L,{class:"dropdown-item",to:"/buyers"},{default:(0,n.k6)((()=>[(0,n.eW)("Importers")])),_:1}),(0,n.bF)(L,{class:"dropdown-item",to:"/sellers"},{default:(0,n.k6)((()=>[(0,n.eW)("Shippers")])),_:1}),(0,n.bF)(L,{class:"dropdown-item",to:"/declarants"},{default:(0,n.k6)((()=>[(0,n.eW)("Declarants")])),_:1}),(0,n.bF)(L,{class:"dropdown-item",to:"/vessels"},{default:(0,n.k6)((()=>[(0,n.eW)("Vessels")])),_:1}),(0,n.bF)(L,{class:"dropdown-item",to:"/rate-of-exchange"},{default:(0,n.k6)((()=>[(0,n.eW)("Rates Of Exchnage")])),_:1})])])])])])]),(0,n.bF)(E)])}var L={name:"App",components:{}},E=o(1241);const F=(0,E.A)(L,[["render",D]]);var I=F,x=o(1387),T=o(4232);const S={id:"app"},A={class:"page-header-info-container"},w={class:"badge-container"},O={key:1},N=(0,n.Lk)("h2",null,"New Entry",-1),P={class:"row"},R=(0,n.Lk)("div",{class:"col-md-5"},null,-1),V={class:"col-md-2"},U=(0,n.Lk)("div",{class:"col-md-5"},null,-1),B={class:"row"},$={class:"col-md-6"},M={class:"col-md-6"},W={key:0},j=(0,n.Lk)("h3",null,"Entry Summary",-1),X=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Number of Lines Read"),(0,n.Lk)("th",null,"Total Invoices Value")])],-1),G=["disabled"];function q(e,t,o,a,s,i){const l=(0,n.g2)("VerifyDocumentData"),c=(0,n.g2)("CustomsEntryForm"),d=(0,n.g2)("DocumentTableView");return(0,n.uX)(),(0,n.CE)("div",S,[(0,n.Lk)("div",A,[(0,n.Lk)("div",null,[(0,n.Lk)("button",{type:"button",class:"btn btn-primary upload-button",onClick:t[0]||(t[0]=(...e)=>i.verifyInvoiceData&&i.verifyInvoiceData(...e))}," Invoice Split Screen "),(0,n.Lk)("button",{type:"button",class:"btn btn-primary upload-button",onClick:t[1]||(t[1]=(...e)=>i.mergeAndOpenPDFs&&i.mergeAndOpenPDFs(...e))}," Open Invoices "),(0,n.Lk)("button",{type:"button",class:"btn btn-primary upload-button",onClick:t[2]||(t[2]=(...e)=>i.openWaybill&&i.openWaybill(...e))}," Open Waybill ")]),(0,n.Lk)("div",null,[(0,n.Lk)("div",w,[(0,n.Lk)("h3",null,[(0,n.Lk)("span",{class:(0,T.C4)(["badge",{"bg-success":"Classification Completed"===i.classificationStatus,"bg-warning text-dark":"Classification In Progress"===i.classificationStatus,"bg-danger":"Not Classified"===i.classificationStatus},"fixed-badge"])},(0,T.v_)(this.classificationStatus),3)])])])]),s.displayDocumentVerificationView?((0,n.uX)(),(0,n.Wv)(l,{key:0,invoices:s.invoiceDataArray,customsEntryForm:s.customsEntryForm,pdfFiles:s.pdfFiles},null,8,["invoices","customsEntryForm","pdfFiles"])):(0,n.Q3)("",!0),s.displayDocumentVerificationView?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",O,[N,(0,n.Lk)("div",P,[R,(0,n.Lk)("div",V,[(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[3]||(t[3]=e=>s.referenceNumber=e),placeholder:"Enter Reference Number",onInput:t[4]||(t[4]=(...e)=>i.validateInput&&i.validateInput(...e))},null,544),[[r.Jo,s.referenceNumber]])]),U]),(0,n.Lk)("div",null,[(0,n.Lk)("div",{class:"dropzone",onDragover:t[10]||(t[10]=(0,r.D$)(((...e)=>i.dragOver&&i.dragOver(...e)),["prevent"])),onDragenter:t[11]||(t[11]=(0,r.D$)(((...e)=>i.dragEnter&&i.dragEnter(...e)),["prevent"])),onDragleave:t[12]||(t[12]=(0,r.D$)(((...e)=>i.dragLeave&&i.dragLeave(...e)),["prevent"])),onDrop:t[13]||(t[13]=(0,r.D$)(((...t)=>e.handleDrop&&e.handleDrop(...t)),["prevent"]))},[(0,n.eW)(" Please Upload Commercial Invoices "),(0,n.Lk)("input",{type:"file",multiple:"",onChange:t[5]||(t[5]=(...e)=>i.handleFileUpload&&i.handleFileUpload(...e)),style:{display:"none"},accept:"application/pdf",ref:"invoices"},null,544),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[6]||(t[6]=e=>i.triggerFileInput("invoices"))}," Choose Files for Invoices "),(0,n.Lk)("input",{type:"file",onChange:t[7]||(t[7]=(...e)=>i.handleWaybillUpload&&i.handleWaybillUpload(...e)),style:{display:"none"},accept:"application/pdf",ref:"waybill"},null,544),(0,n.Lk)("button",{type:"button",class:"btn btn-primary upload-button",onClick:t[8]||(t[8]=e=>i.triggerFileInput("waybill"))}," Choose Files for Waybills "),(0,n.Lk)("button",{type:"button",class:"btn btn-success upload-button",onClick:t[9]||(t[9]=e=>i.uploadInvoicesAndWaybills("https://mawi-updraded-api.wonderfulflower-f4234c00.eastus.azurecontainerapps.io/analyze-invoices-OCR-LLM","CLAUDE_LLM"))}," Upload Files LLM ")],32),(0,n.Lk)("div",B,[(0,n.Lk)("div",$,[(0,n.Lk)("ul",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.selectedFiles,((e,t)=>((0,n.uX)(),(0,n.CE)("li",{key:t},(0,T.v_)(e.name),1)))),128))])]),(0,n.Lk)("div",M,[(0,n.Lk)("ul",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.waybillFiles,((e,t)=>((0,n.uX)(),(0,n.CE)("li",{key:t},(0,T.v_)(e.name),1)))),128))])])])]),(0,n.bF)(c,{customsEntryForm:s.customsEntryForm,onUpdateCustomsEntryForm:t[14]||(t[14]=e=>s.customsEntryForm=e)},null,8,["customsEntryForm"]),(0,n.bF)(d,{invoiceDataArray:s.invoiceDataArray,customsEntryForm:s.customsEntryForm,documentVerificationFormat:!1,linesToBeDeleted:s.linesToBeDeleted},null,8,["invoiceDataArray","customsEntryForm","linesToBeDeleted"]),s.selectedFiles.length?((0,n.uX)(),(0,n.CE)("div",W,[j,(0,n.Lk)("table",null,[X,(0,n.Lk)("tbody",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("td",null,(0,T.v_)(this.totalNumberOfLines),1),(0,n.Lk)("td",null,(0,T.v_)(this.totalFOBValue),1)]),(0,n.Lk)("tr",null,[(0,n.Lk)("td",null,[(0,n.Lk)("button",{type:"button",class:"btn btn-primary",disabled:i.entryButtonDisabled,onClick:t[15]||(t[15]=e=>i.createInvoices(s.invoiceDataArray))}," Save Entry ",8,G)])])])])])):(0,n.Q3)("",!0)]))])}o(4114),o(6573),o(8100),o(7936),o(7467),o(4732),o(9577),o(4603),o(7566),o(8721);var J=o(4373);const Y="https://mawifrontentcontainerapp.whitestone-99c262a0.eastus.azurecontainerapps.io/api/",z="https://mawi-updraded-api.wonderfulflower-f4234c00.eastus.azurecontainerapps.io/",H=async(e,t,o=null)=>{try{const a=await(0,J.A)({method:e,url:t,data:o});return a.data}catch(a){throw console.error("API error:",a),a}},K=async e=>await H("post",`${Y}commercial_invoices`,e),Q=async e=>await H("post",`${Y}commercial_invoices_vehicles`,e),Z=async e=>{try{const t=await(0,J.A)({url:`${Y}entry-details/${e}`,method:"GET"});return t.data}catch(t){throw console.error("API error:",t),t}},ee=async e=>{try{const t=await(0,J.A)({url:`${Y}commercial-invoices-with-lines-with-vehicles/${e}`,method:"GET"});return t.data}catch(t){throw console.error("API error:",t),t}},te=async e=>{try{const t=await(0,J.A)({url:`${Y}generate-customs-declaration`,method:"POST",responseType:"blob",data:e});return t.data}catch(t){throw console.error("API error:",t),t}},oe=async()=>{try{const e=await(0,J.A)({url:`${Y}blank-valuation-form-trinidad`,method:"GET",responseType:"blob"});return e.data}catch(e){throw console.error("API error:",e),e}},ae=async e=>{try{const t=await(0,J.A)({url:`${Y}generate-pre-signed-valuation-form`,method:"POST",responseType:"blob",data:e});return t.data}catch(t){throw console.error("API error:",t),t}},re=async e=>{try{const t=await(0,J.A)({url:`${Y}generate-pre-signed-valuation-form-v2`,method:"POST",responseType:"blob",data:e});return t.data}catch(t){throw console.error("API error:",t),t}},ne=async e=>{try{const t=await(0,J.A)({url:`${Y}customs-declaration`,method:"POST",data:e});return t.data}catch(t){throw console.error("API error:",t),t}},se=async e=>{console.log(e);try{const t=await(0,J.A)({url:`${Y}customs-declaration/${e}`,method:"GET"});return t}catch(t){throw console.error("API error:",t),t}},ie=async()=>{try{const e=await(0,J.A)({url:`${Y}buyers`,method:"GET"});return e.data}catch(e){throw console.error("API error:",e),e}},le=async()=>{try{const e=await(0,J.A)({url:`${Y}declarants`,method:"GET"});return console.log(e),e.data}catch(e){throw console.error("API error:",e),e}},ce=async()=>{try{const e=await(0,J.A)({url:`${Y}customs-entry-declarants`,method:"GET"});return e.data}catch(e){throw console.error("API error:",e),e}},de=async()=>{try{const e=await(0,J.A)({url:`${Y}shippers`,method:"GET"});return e.data}catch(e){throw console.error("API error:",e),e}},ue=async(e,t)=>{try{const o=await(0,J.A)({url:`${Y}customs-declaration/${e}`,method:"PUT",data:t});return o}catch(o){throw console.error("API error:",o),o}},me=async()=>{try{const e=await fetch("https://restcountries.com/v3/all"),t=await e.json();return t.map((e=>({name:e.name.common,code:e.cca2})))}catch(e){console.error("Failed to fetch countries:",e)}},he=async e=>{try{const t=await(0,J.A)({url:`${Y}buyers`,method:"POST",data:e});return t}catch(t){throw console.error("API error:",t),t}},pe=async e=>{try{const t=await(0,J.A)({url:`${Y}buyers/${e.id}`,method:"PUT",data:e});return t}catch(t){throw console.error("API error:",t),t}},ye=async e=>{try{const t=await(0,J.A)({url:`${Y}shippers/${e.id}`,method:"PUT",data:e});return t}catch(t){throw console.error("API error:",t),t}},ge=async e=>{try{const t=await(0,J.A)({url:`${Y}declarants/${e.id}`,method:"PUT",data:e});return t}catch(t){throw console.error("API error:",t),t}},fe=async e=>{try{const t=await(0,J.A)({url:`${Y}shippers`,method:"POST",data:e});return t}catch(t){throw console.error("API error:",t),t}},ve=async e=>{try{const t=await(0,J.A)({url:`${Y}declarants`,method:"POST",data:e});return t}catch(t){throw console.error("API error:",t),t}},be=async e=>{try{const t=await(0,J.A)({url:`${Y}cpc-codes/${e}`,method:"GET"});return t.data}catch(t){throw console.error("API error:",t),t}},ke=async()=>{try{const e=await(0,J.A)({url:`${Y}npc_codes`,method:"GET"});return e.data}catch(e){throw console.error("API error:",e),e}},_e=async()=>{try{const e=await(0,J.A)({url:`${Y}npc_codes_with_cpc`,method:"GET"});return e.data}catch(e){throw console.error("API error:",e),e}},Ce=async()=>{try{const e=await(0,J.A)({url:`${Y}ports/TT`,method:"GET"});return e.data}catch(e){throw console.error("API error:",e),e}},De=async()=>{try{const e=await(0,J.A)({url:`${Y}rates-of-exchange/TTD`,method:"GET"});return e.data}catch(e){throw console.error("API error:",e),e}},Le=async e=>{try{const t=await(0,J.A)({url:`${Y}exchange-rates/TTD/${e}`,method:"GET"});return t.data}catch(t){throw console.error("API error:",t),t}},Ee=async e=>{try{const t=await(0,J.A)({url:`${Y}rates-of-exchange`,method:"POST",data:e});return t}catch(t){throw console.error("API error:",t),t}},Fe=async()=>{try{const e=await(0,J.A)({url:`${Y}vessels`,method:"GET"});return e.data}catch(e){throw console.error("API error:",e),e}},Ie=async e=>{try{const t=await(0,J.A)({url:`${Y}vessels`,method:"POST",data:e});return t}catch(t){throw console.error("API error:",t),t}},xe=async e=>{try{const t=await(0,J.A)({url:`${Y}vessels/${e.id}`,method:"PUT",data:e});return t}catch(t){throw console.error("API error:",t),t}},Te=async(e,t)=>{let o=`${z}generate-worksheet-json`;"summarized"===t&&(o+="?merge_invoices=True");try{const t=await(0,J.A)({url:o,method:"POST",responseType:"blob",data:e});return t.data}catch(a){throw console.error("API error:",a),a}},Se=async e=>{try{const t=await(0,J.A)({url:`${z}generate-asycuda-toyota-xml`,method:"POST",responseType:"blob",data:e});return t.data}catch(t){throw console.error("API error:",t),t}},Ae=async e=>{try{const t=await(0,J.A)({url:`${z}generate-toyota-worksheet`,method:"POST",responseType:"blob",data:e});return t.data}catch(t){throw console.error("API error:",t),t}},we=async e=>{try{const t=await(0,J.A)({url:`${z}generate-asycuda-xml-json`,method:"POST",responseType:"blob",data:e});return t.data}catch(t){throw console.error("API error:",t),t}},Oe=async e=>{try{const t=await(0,J.A)({url:`${z}commodity-codes/${e}`,method:"GET"});return t.data}catch(t){throw console.error("API error:",t),t}},Ne=async e=>{try{const t=await(0,J.A)({url:`${Y}deposit-form`,method:"POST",responseType:"blob",data:e});return t.data}catch(t){throw console.error("API error:",t),t}},Pe=async e=>{try{const t=await(0,J.A)({url:`${Y}generate-sconner-bl`,method:"POST",responseType:"blob",data:e});return t.data}catch(t){throw console.error("API error:",t),t}},Re=async e=>{try{const t=await(0,J.A)({url:`${Y}tt-c84`,method:"POST",responseType:"blob",data:e});return t.data}catch(t){throw console.error("API error:",t),t}},Ve=async e=>{try{const t=await(0,J.A)({url:`${Y}overtime-form`,method:"POST",responseType:"blob",data:e});return t.data}catch(t){throw console.error("API error:",t),t}},Ue=async e=>{try{const t=await(0,J.A)({url:`${Y}special-exemptions-declarations/${e}`,method:"GET"});return t.data}catch(t){throw console.error("API error:",t),t}},Be=async e=>{try{const t=await(0,J.A)({url:`${z}analyze-toyota-documents-LLM`,method:"POST",data:e});return t.data}catch(t){throw console.error("API error:",t),t}},$e=async e=>{try{const t=await(0,J.A)({url:`${z}classify-items`,method:"POST",data:e});return t.data}catch(t){if(t.response&&404===t.response.status||500===t.response.status)return null;throw console.error("API error:",t),t}},Me=async e=>{try{const t=await(0,J.A)({url:`${Y}generate-caricom`,method:"POST",responseType:"blob",data:e});return t.data}catch(t){throw console.error("API error:",t),t}},We=async(e,t)=>{try{const o=await(0,J.A)({url:`${Y}customs-entry/${e}`,method:"PUT",data:t});return o.data}catch(o){throw console.error("API error:",o),o}},je=async(e,t)=>{try{const o=await(0,J.A)({url:`${Y}waybill/${e}`,method:"PUT",data:t});return o.data}catch(o){throw console.error("API error:",o),o}},Xe=async e=>{try{const t=await J.A.post(`${Y}upload-invoices`,e,{headers:{"Content-Type":"multipart/form-data"}});return t.data}catch(t){throw console.error("API error:",t),t}},Ge=async e=>{console.log("DB Connector",e);try{const t=await(0,J.A)({url:`${Y}invoice-lines/`,method:"DELETE",data:e});return t.data}catch(t){throw console.error("API error:",t),t}},qe=async e=>{try{return await(0,J.A)({url:`${Y}check-entry-number/${e}`,method:"GET"}),!0}catch(t){if(t.response&&409===t.response.status)return!1;throw console.error("API error:",t),t}},Je=async()=>{try{const e=await(0,J.A)({url:`${Y}trade_agreements`,method:"GET"});return e.data}catch(e){throw console.error("API error:",e),e}},Ye=async e=>{try{const t=await(0,J.A)({url:`${Y}invoice-ai-performance`,method:"POST",data:e});return t.data}catch(t){throw console.error("API error:",t),t}},ze=async e=>{try{const t=await(0,J.A)({url:`${Y}classification-performance`,method:"POST",data:e});return t.data}catch(t){throw console.error("API error:",t),t}},He=async e=>{try{const t=await(0,J.A)({url:`${Y}invoice-lines`,method:"POST",data:e});return t.data}catch(t){throw console.error("API error:",t),t}},Ke=async e=>{try{const t=await(0,J.A)({url:"https://gabrielle-flask.azurewebsites.net/read_waybill",method:"POST",data:e});return t.data}catch(t){throw console.error("API error:",t),t}},Qe=async e=>{try{const t=await(0,J.A)({url:`${z}analyze-waybill-OCR-LLM`,method:"POST",data:e});return t.data}catch(t){throw console.error("API error:",t),t}},Ze=async e=>{try{const t=await(0,J.A)({url:`${Y}update-classification-accuracy-performance-metrics`,method:"PUT",data:e});return t.data}catch(t){throw console.error("API error:",t),t}},et=async e=>{try{const t=await(0,J.A)({url:`${Y}get-commodity-supplier-description`,method:"POST",data:e});return t.data}catch(t){throw console.error("API error:",t),t}},tt=async e=>{try{const t=await(0,J.A)({url:`${Y}commercial_invoices-with-performance-metrics`,method:"POST",data:e});return t.data}catch(t){throw console.error("API error:",t),t}},ot=async e=>{try{const t=await(0,J.A)({url:`${Y}generate-invoice-breakdown-excel`,method:"POST",responseType:"blob",data:e});return t.data}catch(t){throw console.error("API error:",t),t}};var at=o(5172),rt=o.n(at),nt=o(1475),st=o(9207),it=o(9155);const lt=(e,t,o,a,r,n,s,i,l,c,d,u,m,h,p,y,g,f,v,b,k,_,C,D,L=null,E="")=>{console.log("Reference Number: ",e);const F={relieved:L,reference_number:e,country:t,declarant:{name:o,tin:a},regime:r,waybill:{importer:{name:n,tin:s},exporter:{name:i,tin:l},vessel:c,port_of_discharge:d,arrival_date:E,charges:{international_freight:{amount:parseFloat(ct(y)),currency:v,rate_of_exchange:b},insurance:{amount:parseFloat(ct(g)),currency:k,rate_of_exchange:_},other_charges:{amount:parseFloat(ct(f)),currency:C,rate_of_exchange:D}}},additional_local_charges:{deposit:u,container_charges:m,additional_charges:h,local_fee:p}};return F},ct=e=>void 0===e||null===e||""===e||"0.0"===e||isNaN(e)||"N/A"===e?0:e,dt=e=>{if(!e||void 0===e||null===e)return 0;if("number"===typeof e)return e;let t=e.replace(/[^0-9.]/g,""),o=parseFloat(t);return o},ut=(e,t,o,a,r,n)=>{e=parseFloat(ct(e)),t=parseFloat(ct(t)),o=parseFloat(ct(o)),a=parseFloat(ct(a)),r=parseFloat(ct(r)),n=parseFloat(ct(n)),console.log("Calculating CIF..."),console.log(e,parseFloat(t),o,a,r,n);const s=e/parseFloat(t)*o;return e+s+a+r+parseFloat(n)},mt=(e,t)=>{console.log("VAT Applicable: ",t),console.log("Charge Data: ",e);let o=[];for(const[a,r]of Object.entries(e)){let e={name:a,value:"0",id:null,operand_field:"",subjected_to_vat:!0};r.forEach((t=>{void 0!==t.charge_amount&&(e.value=t.charge_amount,e.id=t.tariff_charge_id)})),void 0!==r[1].operand_field&&(e.operand_field=r[1].operand_field),void 0!==r[1].subjected_to_vat&&(e.subjected_to_vat=r[1].subjected_to_vat),o.push(e)}return o},ht=(e,t,o,a,r,n,s,i,l,c,d,u)=>{console.log("Available CPC Codes: ",c),console.log("Total Gross Weight: ",a);let m=0,h=0;return e.map(((e,t,o)=>({exworks:parseFloat(e.invoice_total),invoice_currency:e.currency,rate_of_exchange:parseFloat(e.rate_of_exchange),supplementary_charges_and_deductions:{internal_freight:parseFloat(ct(e.inland)),insurance:parseFloat(ct(e.insurance)),other:parseFloat(ct(e.otherCharges)),deductions:0},line_items:e.lines.map(((e,r,l)=>{let p=parseFloat(e.extension_price)/d*parseFloat(a);h+=p,r===l.length-1&&t===o.length-1?(p=parseFloat(a)-m,p=Number(p.toFixed(2)),console.log("Total Gross Weight: ",a),console.log("Last Item Gross Weight: ",p),console.log("Cumulative Weight: ",m)):(p=Math.floor(100*p)/100,console.log(`Item Gross Weight: ${p} - Sum: ${h}`),m+=p);const y=parseFloat(p)-parseFloat(p)/10;return{description:e.description,quantity:parseFloat(e.quantity),unit_cost:parseFloat(e.unit_price),exworks:parseFloat(e.extension_price),cpc_code:parseInt(c.find((t=>t.cpcId===e.cpcCode))?.code),country_origin_code:e.country_of_origin,anc_code:e.npc_code,trade_agreement:u.find((t=>t.id===e.tradeAgreement))?.code||"",commodity:`${e.tariff_code.replace(/\./g,"")}`,gross_weight:parseFloat(p),net_weight:Math.floor(100*y)/100,package_quantity:0===t&&0===r?parseFloat(n):0,kind_of_package:s,marks_and_numbers:i}}))})))},pt=(e,t=200)=>e.length>t?e.substring(0,t):e,yt=(e,t,o,a=200,r="US")=>{let n=0;return e.flatMap(((e,s,i)=>e.details.map(((l,c,d)=>{let u=parseFloat(l.quantity)*parseFloat(e.unitPrice)/o*parseFloat(a);c===d.length-1&&s===i.length-1?(u=parseFloat(a)-n,u=Number(u.toFixed(2))):(u=Math.floor(100*u)/100,n+=u);const m=parseFloat(u)-parseFloat(u)/10;return{description:pt(e.description,200),quantity:1,unit_cost:e.unitPrice,exworks:parseFloat(e.unitPrice),cpc_code:parseInt(t.find((e=>e.cpcId===l.cpcCode))?.code),country_origin_code:r,anc_code:l.npcCode,commodity:e.thnNumber.replace(/\./g,""),gross_weight:parseFloat(u),net_weight:Math.floor(100*m)/100,package_quantity:1,kind_of_package:"CT",marks_and_numbers:`CHASSIS # ${l.chassisNumber}`,chassis_number:l.chassisNumber,curb_weight:e.curbWeight||0,engine_number:l.engineNumber,exterior_color:l.exteriorColor,customer:l.customerName||"",customer_tin:l.customerTIN||"",instruction_code:l.brokerInstructions,engine_displacement:parseFloat(e.engineDisplacement),manufacture_year:l.manufactureYear,number_of_seats:e.numberOfSeats,number_of_doors:e.numberOfDoors,tyre_size:e.tyreSize||"",model_code:e.modelCode,fuel_type:e.fuelType,seat_position:e.seatPosition,used_flag:!1,trade_agreement:"",model_name:e.modelCode}}))))},gt=e=>{if(!Array.isArray(e))return!1;for(let t of e)if(t&&t.invoice_items&&Array.isArray(t.invoice_items))for(let e of t.invoice_items){const t=parseFloat(e.unit_price),o=parseFloat(e.discounted_unit_price);if(e.discounted_unit_price&&!isNaN(o)&&o!==t)return!0}return!1},ft=(e,t,o="US")=>e.flatMap((e=>e.details.map((a=>({description:`${e.description} CN: ${a.chassisNumber}`,quantity:1,unit_cost:e.unitPrice,exworks:parseFloat(e.unitPrice),cpc_code:`${parseInt(t.find((e=>e.cpcId===a.cpcCode))?.code)}`,country_of_origin:o,anc_code:a.npcCode,commodity:e.commodity,gross_weight:e.grossWeight,net_weight:e.netWeight,package_quantity:1,kind_of_package:"CT",marks_and_numbers:`CHASSIS # ${a.chassisNumber}`,chassis_number:a.chassisNumber,curb_weight:e.curbWeight,engine_number:a.engineNumber,exterior_color:a.exteriorColor,customer:a.customerName,customer_tin:a.customerTIN,instruction_code:a.brokerInstructions,engine_displacement:parseFloat(e.engineDisplacement),manufacture_year:a.manufactureYear,number_of_seats:e.numberOfSeats,number_of_doors:e.numberOfDoors,tyre_size:e.tyreSize,model_code:e.modelCode,fuel_type:e.fuelType,seat_position:e.seatPosition,used_flag:!1}))))),vt=(e,t,o)=>(console.log("Invoices: ",e),e.map((e=>({name:e.invoice_number,supplier:e.supplier_name,exworks:parseFloat(e.invoice_total),invoice_currency:e.currency,cif_foreign_currency:ut(e.invoice_total,o,t,e.inland,e.insurance,e.otherCharges),rate_of_exchange:e.rate_of_exchange,cif_local_currency:ut(e.invoice_total,o,t,e.inland,e.insurance,e.otherCharges)*e.rate_of_exchange,supplementary_charges_and_deductions:{internal_freight:parseFloat(ct(e.inland)),insurance:parseFloat(ct(e.insurance)),other:parseFloat(ct(e.otherCharges)),deductions:0},line_items:e.lines.map((e=>({...e.manualExemption?{relieved:!0}:{},description:e.description,quantity:parseFloat(e.quantity),unit_cost:parseFloat(e.unit_price),exworks:parseFloat(e.extension_price),cpc_code:e.cpcCodeName,trade_agreement:e.tradeAgreementCode||"",country_of_origin:e.country_of_origin,anc_code:e.npcCode,commodity:e.commodity})))})))),bt=(e,t,o)=>e.map((e=>({name:e.invoice_id,supplier:e.vendor_name,exworks:e.invoice_total,invoice_currency:e.currency,cif_foreign_currency:ut(e.invoice_total,o,t,e.inland,e.insurance,e.otherCharges),rate_of_exchange:e.rate_of_exchange,cif_local_currency:ut(e.invoice_total,o,t,e.inland,e.insurance,e.otherCharges)*e.rate_of_exchange,supplementary_charges_and_deductions:{internal_freight:parseFloat(e.inland),insurance:parseFloat(e.insurance),other:parseFloat(e.otherCharges),deductions:0},line_items:e.lines.map((e=>({description:e.description,quantity:parseFloat(e.quantity),unit_cost:parseFloat(e.unit_price),exworks:parseFloat(e.extension_price),cpc_code:e.cpcCodeName,country_of_origin:e.country_of_origin,anc_code:e.npcCode,commodity:e.commodity})))})));function kt(){const e=new Date,t=String(e.getDate()).padStart(2,"0"),o=String(e.getMonth()+1).padStart(2,"0"),a=e.getFullYear(),r=`${t}/${o}/${a}`;return r}function _t(e=new Date){const t=e.getFullYear(),o=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return`${t}-${o}-${a}`}const Ct=(e,t,o,a,r,n,s,i,l,c,d,u,m,h,p,y,g,f)=>({regimeType:e,waybillNumber:t,waybillDate:o,incoTerms:a,termsOfPayment:"SDT",importer:r,imorterNo:null===n?"":n,declarant:s,declarantNo:i,reference:l,consignor:c,countryOfConsignment:d,countryOfConsignmentCode:u,meansOfTransportation:m,rotation:"/24",mode:h,portOfImportation:p,portCode:y,dateOfImportation:kt(),depositAmount:parseFloat(g).toFixed(2),reason:f}),Dt=(e,t,o,a,r,n,s,i,l,c,d,u,m,h,p,y,g,f,v="pks")=>{let b=m.flatMap((e=>e.lines.map((t=>{let o=parseFloat(t.extension_price)/p*parseFloat(u),a=o-o/10;return{numberAndKindOfPackages:"",specificationOfCommodities:t.description,netWeight:a.toFixed(2),quantity:parseFloat(t.quantity).toLocaleString("en-US",{minimumFractionDigits:2}),unitPrice:parseFloat(t.unit_price).toLocaleString("en-US",{minimumFractionDigits:2}),amount:parseFloat(t.extension_price).toLocaleString("en-US",{minimumFractionDigits:2}),invoiceNumber:e.invoice_number}}))));const k=parseFloat(p)+parseFloat(y)+parseFloat(g)+parseFloat(f);return console.log("Other Charges:",f),console.log(p,y,g,f,k),b[0].numberAndKindOfPackages=`${h} ${v}(s)`,{sellerNameAddress:t,invoiceNumber:`${kt()} ${o}`,customerOrderNumber:"",otherReferences:"",buyer:"",consigneeNameAddress:e,presentingBank:"",countryOfOrigin:a,incoterms:r,portOfLoading:n,countryOfFinalDestination:s,modeOfTransport:i,currencyOfSale:c,otherTransportInformation:l,marksAndNumbers:"As Addressed",descriptionOfGoods:d,grossWeight:u.toLocaleString("en-US",{minimumFractionDigits:2}),packages:b,fob:p.toLocaleString("en-US",{minimumFractionDigits:2}),packaging:"0.00",freight:y.toLocaleString("en-US",{minimumFractionDigits:2}),insurance:g.toLocaleString("en-US",{minimumFractionDigits:2}),otherCharges:f.toLocaleString("en-US",{minimumFractionDigits:2}),invoiceTotal:k.toLocaleString("en-US",{minimumFractionDigits:2})}},Lt=()=>({exporters:[],importers:[],vessels:[],ports:[],declarants:[],incotermsList:[],ratesOfExchange:[],importerId:"",exporterId:"",importerName:"",exporterName:"",importerTaxIdentificationNumber:"",exporterTaxIdentificationNumber:"",exporterCountry:"",declarantId:"",declarantTaxIdentificationNumber:"",modeOfTransport:"",freightType:"",waybillNumber:"",waybillDate:"",vesselId:"",vesselName:"",incoTerms:"",portOfDischargeId:"",portOfDischargeName:"",netWeight:0,grossWeight:0,numberOfPackages:0,packageType:"",packageTypes:[],marksAndNumbers:"As Addressed",freightCurrency:"USD",insuranceCurrency:"USD",otherChargesCurrency:"USD",totalCargoValue:0,freightAmount:0,insuranceAmount:0,otherCharges:0,insuranceRateOfExchange:0,otherChargesRateOfExchange:0,freightRateOfExchange:0,rateOfExchange:0,regimeType:"",regimeTypeCode:"",regimeTypeOptions:[],depositAmount:0,containerCharges:0,additionalCharges:0,localFee:0,countryOfOrigin:"",countryOfFinalDestination:"TT",countryLastProvinance:"",tradingCountry:""}),Et=e=>e.some((e=>e.lines.some((e=>!e.tariff_code||""===e.tariff_code.trim())))),Ft=e=>{const t={day:"2-digit",month:"short",year:"numeric"},o=new Date(e);return o.toLocaleDateString(void 0,t)},It=e=>e.toLowerCase().replace(/\bltd\b/g,"limited").replace(/[^a-z0-9]/g,""),xt=(e,t,o="name")=>{const a=It(e),r=t.map((e=>It(e[o]))),{bestMatch:n}=rt().findBestMatch(a,r);return t.find((e=>It(e[o])===n.target))},Tt=e=>{const t=e.replace(/(\d+)(ST|ND|RD|TH)/gi,"$1"),o=["dd-MMM-yyyy","dd/MM/yyyy","MMM/dd/yyyy","yyyy-MM-dd","yyyy/MM/dd","dd MMM yyyy","MMM dd, yyyy","dd-MM-yyyy","yyyyMMdd","dd,MMM,yyyy"];for(const r of o){const e=(0,nt.qg)(t,r,new Date,{locale:it.c});if(!isNaN(e))return e}const a=new Date(t);if(!isNaN(a))return a;throw new Error(`Unable to parse date: ${e}`)},St=e=>(0,st.GP)(e,"yyyy-MM-dd"),At=e=>{const t=e.replace(/[^0-9.]/g,""),o=parseFloat(t);return isNaN(o)?0:o},wt=(e,t,o,a,r,n,s,i,l,c)=>({exporter:e,importer:t,marksAndNumbers:o,vesselName:a,countryOfDestination:r,invoiceLines:n,freightPayableAt:s,grossWeight:i,portOfDischarge:l,date:kt(),referenceNumber:c}),Ot=e=>{for(let t=0;t<e.length;t++){let{invoice_items:o,...a}=e[t];e[t]={lines:o,...a}}return e},Nt=async(e,t)=>{console.log("Uploading Files",e);const o=new FormData;for(const r of t)o.append("files",r),o.append("commercialInvoice",r);const a=new Date;return fetch(e,{method:"POST",body:o}).then((e=>e.json())).then((e=>{console.log("Data: ",e);const t=new Date;console.log("Invoice Processing Time: ",t-a);const o=Ot(e);o.forEach((e=>{e.invoice_total=e.invoice_total?dt(e.invoice_total):e.invoice_exworks_amount?dt(e.invoice_exworks_amount):0,e.inland=e.invoice_internal_freight_amount?dt(e.invoice_internal_freight_amount):0,e.insurance=e.invoice_insurance_amount?dt(e.invoice_insurance_amount):0,e.otherCharges=e.invoice_other_charges_amount?dt(e.invoice_other_charges_amount):0,e.final_total=dt(e.final_total),e.total_tax=0,e.subtotal=e.invoice_total?dt(e.invoice_total):e.invoice_exworks_amount?dt(e.invoice_exworks_amount):0,e.invoice_number=e.invoice_id,delete e.invoice_id,console.log("Invoice Date: ",e.invoice_date),e.invoice_date=e.invoice_date?_t(Tt(e.invoice_date)):null,console.log("Invoice Date: ",e.invoice_date),e.currency="USD",e.lines.forEach((e=>{e.country_of_origin="",e.quantity=dt(e.quantity),e.unit_price=dt(e.unit_price),e.extension_price=dt(e.amount).toFixed(2),e.vatApplicable=!0,e.cpcCode=30,e.npcCode="000"}))}));const r={invoiceData:o,invoiceProcessingTime:t-a};return r}))},Pt=e=>{if("0000-00-00"!==e&&e){let t=new Date(e);return isNaN(t)?"":t.toISOString().split("T")[0]}return""};var Rt=o(4874),Vt=o.n(Rt);function Ut(e){Vt().fire({position:"top-end",toast:!0,icon:"success",title:e,showConfirmButton:!1,timer:2e3,timerProgressBar:!0})}function Bt(e){Vt().fire({html:e,allowOutsideClick:!0,backdrop:!1,showConfirmButton:!1,width:"300px",didOpen:()=>{Vt().showLoading()},position:"top-end",customClass:{container:"swal2-top-end"}})}function $t(){Vt().close()}function Mt(e){Vt().fire({icon:"error",title:"Oops...",text:e})}function Wt(e){Vt().fire({title:"One moment...",html:e,allowOutsideClick:!1,showConfirmButton:!1,willOpen:()=>{Vt().showLoading()}})}async function jt(){return await Vt().fire({title:"I noticed you deleted something!",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((e=>e))}async function Xt(e,t){const o=Object.entries(e).map((([e,t])=>`<option value="${e}">${t}</option>`)).join(""),a=t.map((e=>`<option value="${e.id}">${e.name}</option>`)).join("");return await Vt().fire({title:"Special Exemption Details",html:`\n            <select id="swal-input1" class="swal2-input">\n                <option value="" selected disabled>Please select declaration number</option>\n                ${o}\n            </select>\n            <div style="margin-top: 15px;"></div>\n            <select id="swal-input2" class="swal2-input">\n                <option value="" selected disabled>Please select signatory</option>\n                ${a}\n            </select>\n            <div style="margin-top: 15px;"></div>\n            <div id="swal-radio-group" class="swal2-input">\n                <label>Generate Pre-Signed:</label>\n                <div>\n                    <input type="radio" id="generate-yes" name="generate-pre-signed" value="yes">\n                    <label for="generate-yes">Yes</label>\n                    <input type="radio" id="generate-no" name="generate-pre-signed" value="no" checked>\n                    <label for="generate-no">No</label>\n                </div>\n            </div>\n        `,focusConfirm:!1,showCancelButton:!0,preConfirm:()=>{const e=Vt().getPopup().querySelector("#swal-input1").value,t=Vt().getPopup().querySelector("#swal-input2").value,o=Vt().getPopup().querySelector('input[name="generate-pre-signed"]:checked').value;return e&&t||Vt().showValidationMessage("Please select both declaration numbers"),{select1:e,select2:t,generatePreSigned:"yes"===o}}}).then((e=>{if(e.isConfirmed)return e.value}))}async function Gt(){return await Vt().fire({title:"Cargo Details",html:'\n        <div style="display: flex; flex-direction: column; align-items: center;">\n            <label for="cargo-details" style="margin-bottom: 5px;">Please enter the cargo details:</label>\n            <input type="text" id="cargo-details" class="swal2-input" placeholder="Enter cargo details here..." style="margin-bottom: 15px;">\n            <label for="start-time" style="margin-bottom: 5px;">Please enter the start time:</label>\n            <input type="time" id="start-time" class="swal2-input" value="16:00">\n        </div>\n        ',focusConfirm:!1,showCancelButton:!0,preConfirm:()=>{const e=Vt().getPopup().querySelector("#cargo-details").value,t=Vt().getPopup().querySelector("#start-time").value;e&&t||Vt().showValidationMessage("Please enter both cargo details and start time");const[o,a]=t.split(":"),r=parseInt(o,10),n=r>=12?"PM":"AM",s=r%12||12,i=`${s}:${a} ${n}`;return{cargoDetails:e,startTime:i}}}).then((e=>{if(e.isConfirmed)return console.log("Cargo Details:",e.value.cargoDetails),console.log("Start Time:",e.value.startTime),e.value}))}async function qt(){return await Vt().fire({title:"Enter Cargo Details",input:"text",inputLabel:"Cargo Details",inputPlaceholder:"Enter the cargo details here...",showCancelButton:!0,inputValidator:e=>{if(!e)return"Cargo details are required!"}}).then((e=>{if(e.isConfirmed)return e.value}))}async function Jt(){return await Vt().fire({title:"Enter Your Name",input:"text",inputLabel:"Name",inputPlaceholder:"Enter your name here...",showCancelButton:!0,inputValidator:e=>{if(!e)return"Name is required!"}}).then((e=>e.isConfirmed?e.value:"CANCELED"))}async function Yt(){return await Vt().fire({title:"Discount Detected",text:"A discount has been detected on an invoice. Would you like to use the discounted price or the full price?",icon:"warning",showCancelButton:!0,confirmButtonText:"Use Discounted Price",cancelButtonText:"Use Full Price"}).then((e=>e.isConfirmed))}async function zt(){return await Vt().fire({title:"Choose Document Format",text:"Please select the format in which you want to generate the document.",icon:"question",showCancelButton:!0,confirmButtonText:"Summarized",cancelButtonText:"Detailed"}).then((e=>e.isConfirmed?"summarized":e.dismiss===Vt().DismissReason.cancel?"detailed":void 0))}async function Ht(){return await Vt().fire({title:"Select Reason for Deposit",input:"select",inputOptions:{"PENDING CARICOM AREA INVOICE":"PENDING CARICOM AREA INVOICE","PENDING STATUS OF SIGNATORY ON CARICOM CARE INVOICE":"PENDING STATUS OF SIGNATORY ON CARICOM CARE INVOICE"},inputPlaceholder:"Select a reason...",showCancelButton:!0,inputValidator:e=>{if(!e)return"You need to select a reason!"}}).then((e=>{if(e.isConfirmed)return e.value}))}async function Kt(e){const t=`\n      <table border="1" style="width:100%; text-align:left;">\n        <thead>\n          <tr>\n            <th>Base Currency</th>\n            <th>Rate</th>\n            <th>Effective Date</th>\n          </tr>\n        </thead>\n        <tbody>\n          ${e.map((e=>`\n            <tr>\n              <td>${e.base_currency}</td>\n              <td>${e.rate}</td>\n              <td>${Ft(e.last_updated)}</td>\n            </tr>\n          `)).join("")}\n        </tbody>\n      </table>\n    `;Vt().fire({title:"Exchange Rates",html:t,width:"800px",showCloseButton:!0,focusConfirm:!1,confirmButtonText:"Close"})}async function Qt(e,t=0){const o=`\n        <table border="1" style="width:100%; text-align:left;">\n            <thead>\n                <tr>\n                    <th>Tax Name</th>\n                    <th>Tax Percentage</th>\n                    <th>Amount Payable</th>\n                </tr>\n            </thead>\n            <tbody>\n                ${Object.entries(e).map((([e,o],a)=>{const r=o[0],n=parseFloat(r.charge_amount);return n>0?`\n                            <tr>\n                                <td id="taxName-${a}" data-index="${a}">${e}</td>\n                                <td><input type="number" id="chargeAmount-${a}" class="chargeAmount" data-index="${a}" value="${n}" /></td>\n                                <td><input type="number" id="amountpayable-${a}" class="amountPayable" data-index="${a}" value="${(n/100*t).toFixed(2)}" /></td>\n                            </tr>\n                        `:""})).join("")}\n            </tbody>\n        </table>\n    `,a=await Vt().fire({title:"Tax Information",html:o,width:"800px",showCloseButton:!0,focusConfirm:!1,confirmButtonText:"OK",didOpen:()=>{document.querySelectorAll(".chargeAmount").forEach((e=>{e.addEventListener("input",(function(){const e=this.dataset.index,o=parseFloat(this.value)||0,a=(o/100*t).toFixed(2);document.getElementById(`amountpayable-${e}`).value=a}))})),document.querySelectorAll(".amountPayable").forEach((e=>{e.addEventListener("input",(function(){const e=this.dataset.index,o=parseFloat(this.value)||0,a=(o/t*100).toFixed(2);document.getElementById(`chargeAmount-${e}`).value=a}))}))},preConfirm:()=>{const e={};return document.querySelectorAll(".chargeAmount").forEach((t=>{const o=t.dataset.index,a=document.getElementById(`taxName-${o}`).innerHTML,r=parseFloat(document.getElementById(`chargeAmount-${o}`).value),n=parseFloat(document.getElementById(`amountpayable-${o}`).value);e[a]={chargeAmount:r,amountPayable:n}})),e}});return a.isConfirmed&&a.value?a.value:{}}async function Zt(){return await Vt().fire({title:"Scooner BL Details",html:'\n            <select id="freightPayableAt" class="swal2-input">\n                <option value="">Freight Payable At</option>\n                <option value="Freight Collect">Freight Collect</option>\n                <option value="Freight Pre-Paid">Freight Pre-Paid</option>\n            </select>\n            <input type="text" id="portOfDischarge" class="swal2-input" placeholder="Port of Discharge">\n        ',showCancelButton:!0,preConfirm:()=>{const e=Vt().getPopup().querySelector("#freightPayableAt").value,t=Vt().getPopup().querySelector("#portOfDischarge").value;return e&&t?{freightPayableAt:e,portOfDischarge:t}:(Vt().showValidationMessage("Both fields are required!"),null)}}).then((e=>{if(e.isConfirmed)return e.value}))}var eo=o(144);function to(){const e=(0,eo.KR)([{value:"1A",text:"Drum, steel"},{value:"1B",text:"Drum, aluminium"},{value:"1D",text:"Drum, plywood"},{value:"1G",text:"Drum, fibre"},{value:"1W",text:"Drum, wooden"},{value:"2C",text:"Barrel, wooden"},{value:"3A",text:"Jerrican, steel"},{value:"3H",text:"Jerrican, plastic"},{value:"43",text:"Bag, super bulk"},{value:"4A",text:"Box, steel"},{value:"4B",text:"Box, aluminium"},{value:"4C",text:"Box, natural wood"},{value:"4D",text:"Box, plywood"},{value:"4F",text:"Box, reconstituted wood"},{value:"4G",text:"Box, fibreboard"},{value:"4H",text:"Box, plastic"},{value:"5H",text:"Bag, woven plastic"},{value:"5L",text:"Bag, textile"},{value:"5M",text:"Bag, paper"},{value:"6H",text:"Composite packaging, plastic receptacle"},{value:"6P",text:"Composite packaging, glass receptacle"},{value:"AA",text:"Intermediate bulk container, rigid"},{value:"AB",text:"Receptacle, fibre"},{value:"AC",text:"Receptacle, paper"},{value:"AD",text:"Receptacle, wooden"},{value:"AE",text:"Aerosol"},{value:"AF",text:"Pallet, modular, collars 80cms * 6"},{value:"AG",text:"Pallet, shrinkwrapped"},{value:"AH",text:"Pallet, 100cms * 110cms"},{value:"AI",text:"Clamshell"},{value:"AJ",text:"Cone"},{value:"AM",text:"Ampoule, non-protected"},{value:"AP",text:"Ampoule, protected"},{value:"AT",text:"Atomizer"},{value:"AV",text:"Capsule"},{value:"BA",text:"Barrel"},{value:"BB",text:"Bobbin"},{value:"BC",text:"Bottlecrate / bottlerack"},{value:"BD",text:"Board"},{value:"BE",text:"Bundle"},{value:"BF",text:"Balloon, non-protected"},{value:"BG",text:"Bag"},{value:"BH",text:"Bunch"},{value:"BI",text:"Bin"},{value:"BJ",text:"Bucket"},{value:"BK",text:"Basket"},{value:"BL",text:"Bale, compressed"},{value:"BM",text:"Basin"},{value:"BN",text:"Bale, non-compressed"},{value:"BO",text:"Bottle, non-protected, cylindrical"},{value:"BP",text:"Balloon, protected"},{value:"BQ",text:"Bottle, protected cylindrical"},{value:"BR",text:"Bar"},{value:"BS",text:"Bottle, non-protected, bulbous"},{value:"BT",text:"Bolt"},{value:"BU",text:"Butt"},{value:"BV",text:"Bottle, protected bulbous"},{value:"BW",text:"Box, for liquids"},{value:"BX",text:"Box"},{value:"BY",text:"Board, in bundle/bunch/truss"},{value:"BZ",text:"Bars, in bundle/bunch/truss"},{value:"CA",text:"Can, rectangular"},{value:"CB",text:"Crate, beer"},{value:"CC",text:"Churn"},{value:"CD",text:"Can, with handle and spout"},{value:"CE",text:"Creel"},{value:"CF",text:"Coffer"},{value:"CG",text:"Cage"},{value:"CH",text:"Chest"},{value:"CI",text:"Canister"},{value:"CJ",text:"Coffin"},{value:"CK",text:"Cask"},{value:"CL",text:"Coil"},{value:"CM",text:"Card"},{value:"CN",text:"Container, not otherwise specified"},{value:"CO",text:"Carboy, non-protected"},{value:"CP",text:"Carboy, protected"},{value:"CQ",text:"Cartridge"},{value:"CR",text:"Crate"},{value:"CS",text:"Case"},{value:"CT",text:"Carton"},{value:"CU",text:"Cup"},{value:"CV",text:"Cover"},{value:"CW",text:"Cage, roll"},{value:"CX",text:"Can, cylindrical"},{value:"CY",text:"Cylinder"},{value:"CZ",text:"Canvas"},{value:"DA",text:"Crate, multiple layer, plastic"},{value:"DB",text:"Crate, multiple layer, wooden"},{value:"DC",text:"Crate, multiple layer, cardboard"},{value:"DG",text:"Cage, Commonwealth Handling Equipment"},{value:"DH",text:"Box, Commonwealth Handling Equipment"},{value:"DI",text:"Drum, iron"},{value:"DJ",text:"Demijohn, non-protected"},{value:"DK",text:"Crate, bulk, cardboard"},{value:"DL",text:"Crate, bulk, plastic"},{value:"DM",text:"Crate, bulk, wooden"},{value:"DN",text:"Dispenser"},{value:"DP",text:"Demijohn, protected"},{value:"DR",text:"Drum"},{value:"DS",text:"Tray, one layer no cover, plastic"},{value:"DT",text:"Tray, one layer no cover, wooden"},{value:"DU",text:"Tray, one layer no cover, polystyrene"},{value:"DV",text:"Tray, one layer no cover, cardboard"},{value:"DW",text:"Tray, two layers no cover, plastic"},{value:"DX",text:"Tray, two layers no cover, wooden"},{value:"DY",text:"Tray, two layers no cover, cardboard"},{value:"EC",text:"Bag, plastic"},{value:"ED",text:"Case, with pallet base"},{value:"EE",text:"Case, with pallet base, wooden"},{value:"EF",text:"Case, with pallet base, cardboard"},{value:"EG",text:"Case, with pallet base, plastic"},{value:"EH",text:"Case, with pallet base, metal"},{value:"EI",text:"Case, isothermic"},{value:"EN",text:"Envelope"},{value:"FC",text:"Crate, fruit"},{value:"FD",text:"Crate, framed"},{value:"FI",text:"Firkin"},{value:"FL",text:"Flask"},{value:"FO",text:"Footlocker"},{value:"FP",text:"Filmpack"},{value:"FR",text:"Frame"},{value:"FT",text:"Foodtainer"},{value:"FW",text:"Cart, flatbed"},{value:"FX",text:"Bag, flexible container"},{value:"GB",text:"Bottle, gas"},{value:"GI",text:"Girder"},{value:"GR",text:"Receptacle, glass"},{value:"GU",text:"Tray, containing horizontally stacked"},{value:"GZ",text:"Girders, in bundle/bunch/truss"},{value:"HA",text:"Basket, with handle, plastic"},{value:"HB",text:"Basket, with handle, wooden"},{value:"HC",text:"Basket, with handle, cardboard"},{value:"HG",text:"Hogshead"},{value:"HR",text:"Hamper"},{value:"IA",text:"Package, display, wooden"},{value:"IB",text:"Package, display, cardboard"},{value:"IC",text:"Package, display, plastic"},{value:"ID",text:"Package, display, metal"},{value:"IE",text:"Package, show"},{value:"IF",text:"Package, flow"},{value:"IG",text:"Package, paper wrapped"},{value:"IH",text:"Drum, plastic"},{value:"IK",text:"Package, cardboard, with bottle grip"},{value:"IL",text:"Tray, rigid, lidded stackable (CEN)"},{value:"IN",text:"Ingot"},{value:"IZ",text:"Ingots, in bundle/bunch/truss"},{value:"JC",text:"Jerrican, rectangular"},{value:"JG",text:"Jug"},{value:"JR",text:"Jar"},{value:"JT",text:"Jutebag"},{value:"JY",text:"Jerrican, cylindrical"},{value:"KG",text:"Keg"},{value:"LG",text:"Log"},{value:"LT",text:"Lot"},{value:"LV",text:"Liftvan"},{value:"LZ",text:"Logs, in bundle/bunch/truss"},{value:"MB",text:"Bag, multiply"},{value:"MC",text:"Crate, milk"},{value:"MR",text:"Receptacle, metal"},{value:"MS",text:"Sack, multi-wall"},{value:"MT",text:"Mat"},{value:"MW",text:"Receptacle, plastic wrapped"},{value:"MX",text:"Matchbox"},{value:"NA",text:"Not available"},{value:"NE",text:"Unpacked or unpackaged"},{value:"NF",text:"Unpacked or unpackaged, single unit"},{value:"NG",text:"Unpacked or unpackaged, multiple units"},{value:"NS",text:"Nest"},{value:"NT",text:"Net"},{value:"NU",text:"Net, tube, plastic"},{value:"NV",text:"Net, tube, textile"},{value:"OA",text:"Pallet, CHEP 40 cm x 60 cm"},{value:"OB",text:"Pallet, CHEP 80 cm x 120 cm"},{value:"OC",text:"Pallet, CHEP 100 cm x 120 cm"},{value:"OD",text:"Pallet, AS 4068-1993"},{value:"OE",text:"Pallet, ISO T11"},{value:"OF",text:"Platform, unspecified weight or dimensions"},{value:"OK",text:"Block"},{value:"PA",text:"Packet"},{value:"PB",text:"Pallet, box Combined open-ended box"},{value:"PC",text:"Parcel"},{value:"PD",text:"Pallet, modular, collars 80cms * 1"},{value:"PE",text:"Pallet, modular, collars 80cms * 1"},{value:"PF",text:"Pen"},{value:"PG",text:"Plate"},{value:"PH",text:"Pitcher"},{value:"PI",text:"Pipe"},{value:"PJ",text:"Punnet"},{value:"PK",text:"Package"},{value:"PL",text:"Pail"},{value:"PN",text:"Plank"},{value:"PO",text:"Pouch"},{value:"PR",text:"Receptacle, plastic"},{value:"PT",text:"Pot"},{value:"PU",text:"Tray"},{value:"PV",text:"Pipes, in bundle/bunch/truss"},{value:"PX",text:"Pallet"},{value:"PY",text:"Plates, in bundle/bunch/truss"},{value:"PZ",text:"Planks, in bundle/bunch/truss"},{value:"QA",text:"Drum, steel, non-removable head"},{value:"QB",text:"Drum, steel, removable head"},{value:"QC",text:"Drum, aluminium, non-removable head"},{value:"QD",text:"Drum, aluminium, removable head"},{value:"QF",text:"Drum, plastic, non-removable head"},{value:"QG",text:"Drum, plastic, removable head"},{value:"QH",text:"Barrel, wooden, bung type"},{value:"QJ",text:"Barrel, wooden, removable head"},{value:"QK",text:"Jerrican, steel, non-removable head"},{value:"QL",text:"Jerrican, steel, removable head"},{value:"QM",text:"Jerrican, plastic, non-removable head"},{value:"QN",text:"Jerrican, plastic, removable head"},{value:"QP",text:"Box, wooden, natural wood, ordinary"},{value:"QQ",text:"Box, wooden, natural wood, with side"},{value:"QR",text:"Box, plastic, expanded"},{value:"QS",text:"Box, plastic, solid"},{value:"RD",text:"Rod"},{value:"RG",text:"Ring"},{value:"RJ",text:"Rack, clothing hanger"},{value:"RK",text:"Rack"},{value:"RL",text:"Reel"},{value:"RO",text:"Roll"},{value:"RT",text:"Rednet"},{value:"RZ",text:"Rods, in bundle/bunch/truss"},{value:"SA",text:"Sack"},{value:"SB",text:"Slab"},{value:"SC",text:"Crate, shallow"},{value:"SD",text:"Spindle"},{value:"SE",text:"Sea-chest"},{value:"SH",text:"Sachet"},{value:"SI",text:"Skid"},{value:"SK",text:"Case, skeleton"},{value:"SL",text:"Slipsheet"},{value:"SM",text:"Sheetmetal"},{value:"SO",text:"Spool"},{value:"SP",text:"Sheet, plastic wrapping"},{value:"SS",text:"Case, steel"},{value:"ST",text:"Sheet"},{value:"SU",text:"Suitcase"},{value:"SV",text:"Envelope, steel"},{value:"SW",text:"Shrinkwrapped"},{value:"SX",text:"Set"},{value:"SY",text:"Sleeve"},{value:"SZ",text:"Sheets, in bundle/bunch/truss"},{value:"TB",text:"Tub"},{value:"TC",text:"Tea-chest"},{value:"TD",text:"Tube, collapsible"},{value:"TI",text:"Tierce"},{value:"TK",text:"Tank, rectangular"},{value:"TL",text:"Tub, with lid"},{value:"TN",text:"Tin"},{value:"TO",text:"Tun"},{value:"TR",text:"Trunk"},{value:"TS",text:"Truss"},{value:"TU",text:"Tube"},{value:"TV",text:"Tube, with nozzle"},{value:"TY",text:"Tank, cylindrical"},{value:"TZ",text:"Tubes, in bundle/bunch/truss"},{value:"UC",text:"Uncaged"},{value:"UN",text:"Unit (single item or object)"},{value:"VA",text:"Vat"},{value:"VG",text:"Bulk, gas (at 1031 mbar and 15C)"},{value:"VI",text:"Vial"},{value:"VK",text:"Vanpack"},{value:"VL",text:"Bulk, liquid"},{value:"VN",text:"Vehicle"},{value:"VO",text:"Bulk, solid, large particles"},{value:"VP",text:"Vacuum-packed"},{value:"VQ",text:"Bulk, liquefied gas (at abnormal temperature/pressure)"},{value:"VR",text:"Bulk, solid, granular particles (i.e., granulates)"},{value:"VY",text:"Bulk, solid, fine particles (i.e., powdered)"},{value:"WA",text:"Intermediate bulk container"},{value:"WB",text:"Wickerbottle"},{value:"WC",text:"Intermediate bulk container, steel"},{value:"WD",text:"Intermediate bulk container, aluminium"},{value:"WF",text:"Intermediate bulk container, metal"},{value:"WG",text:"Intermediate bulk container, steel"},{value:"WH",text:"Intermediate bulk container, aluminium"},{value:"WJ",text:"Intermediate bulk container, metal"},{value:"WK",text:"Intermediate bulk container, steel"},{value:"WL",text:"Intermediate bulk container, aluminium"},{value:"WM",text:"Intermediate bulk container, metal"},{value:"WN",text:"Intermediate bulk container, woven"},{value:"WP",text:"Intermediate bulk container, woven"},{value:"WQ",text:"Intermediate bulk container, woven"},{value:"WR",text:"Intermediate bulk container, woven"},{value:"WS",text:"Intermediate bulk container, plastic"},{value:"WT",text:"Intermediate bulk container, textile"},{value:"WU",text:"Intermediate bulk container, natural"},{value:"WV",text:"Intermediate bulk container, textile"},{value:"WW",text:"Intermediate bulk container, textile"},{value:"WX",text:"Intermediate bulk container, textile"},{value:"WY",text:"Intermediate bulk container, plywood"},{value:"WZ",text:"Intermediate bulk container, reconstructed"},{value:"XA",text:"Bag, woven plastic, without inner coat"},{value:"XB",text:"Bag, woven plastic, sift proof"},{value:"XC",text:"Bag, woven plastic, water resistant"},{value:"XD",text:"Bag, plastics film"},{value:"XF",text:"Bag, textile, without inner coat"},{value:"XG",text:"Bag, textile, sift proof"},{value:"XH",text:"Bag, textile, water resistant"},{value:"XJ",text:"Bag, paper, multi-wall"},{value:"XK",text:"Bag, paper, multi-wall, water resistant"},{value:"YA",text:"Composite packaging, plastic receptacle"},{value:"YB",text:"Composite packaging, plastic receptacle"},{value:"YC",text:"Composite packaging, plastic receptacle"},{value:"YD",text:"Composite packaging, plastic receptacle"},{value:"YF",text:"Composite packaging, plastic receptacle"},{value:"YG",text:"Composite packaging, plastic receptacle"},{value:"YH",text:"Composite packaging, plastic receptacle"},{value:"YJ",text:"Composite packaging, plastic receptacle"},{value:"YK",text:"Composite packaging, plastic receptacle"},{value:"YL",text:"Composite packaging, plastic receptacle"},{value:"YM",text:"Composite packaging, plastic receptacle"},{value:"YN",text:"Composite packaging, glass receptacle"},{value:"YP",text:"Composite packaging, glass receptacle"},{value:"YQ",text:"Composite packaging, glass receptacle"},{value:"YR",text:"Composite packaging, glass receptacle"},{value:"YS",text:"Composite packaging, glass receptacle"},{value:"YT",text:"Composite packaging, glass receptacle"},{value:"YV",text:"Composite packaging, glass receptacle"},{value:"YW",text:"Composite packaging, glass receptacle"},{value:"YX",text:"Composite packaging, glass receptacle"},{value:"YY",text:"Composite packaging, glass receptacle"},{value:"YZ",text:"Composite packaging, glass receptacle"},{value:"ZA",text:"Intermediate bulk container, paper"},{value:"ZB",text:"Bag, large"},{value:"ZC",text:"Intermediate bulk container, paper"},{value:"ZD",text:"Intermediate bulk container, rigid"},{value:"ZF",text:"Intermediate bulk container, rigid"},{value:"ZG",text:"Intermediate bulk container, rigid"},{value:"ZH",text:"Intermediate bulk container, rigid"},{value:"ZJ",text:"Intermediate bulk container, rigid"},{value:"ZK",text:"Intermediate bulk container, rigid"},{value:"ZL",text:"Intermediate bulk container, composite"},{value:"ZM",text:"Intermediate bulk container, composite"},{value:"ZN",text:"Intermediate bulk container, composite"},{value:"ZP",text:"Intermediate bulk container, composite"},{value:"ZQ",text:"Intermediate bulk container, composite"},{value:"ZR",text:"Intermediate bulk container, fibre"},{value:"ZS",text:"Intermediate bulk container, fibre"},{value:"ZT",text:"Intermediate bulk container, fibre"},{value:"ZU",text:"Intermediate bulk container, flexible"},{value:"ZV",text:"Intermediate bulk container, metal"},{value:"ZW",text:"Intermediate bulk container, natural"},{value:"ZX",text:"Intermediate bulk container, plywood"},{value:"ZY",text:"Intermediate bulk container, reconstructed"},{value:"ZZ",text:"Mutually defined"}]);return e}function oo(){const e={defaultCPCCode:"4000",boncedCPCCode:"7000",defaultRegimeType:"IM4",defaultNPCCode:"000"};return e}function ao(){const e=[{modeOfTransport:"Ocean",freightTypes:[{code:"12",name:"FCL"},{code:"13",name:"LCL"},{code:"11",name:"Break Bulk"}]},{modeOfTransport:"Air",freightTypes:[{code:"41",name:"Express"},{code:"42",name:"Loose"}]}];return e}const ro=(0,n.Lk)("h1",null,"Verify Document Data",-1),no={class:"container-fluid text-center verify-document-data-body"},so={class:"col"},io=["src"],lo={class:"col document-review-table"};function co(e,t,o,a,r,s){const i=(0,n.g2)("DocumentTableView");return(0,n.uX)(),(0,n.CE)(n.FK,null,[ro,(0,n.Lk)("div",no,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.invoices,((e,t)=>((0,n.uX)(),(0,n.CE)("div",{class:"row review-document-item",key:e.name},[(0,n.Lk)("div",so,[(0,n.Lk)("embed",{src:o.pdfFiles[t].url,width:"100%",height:"100%",type:"application/pdf",class:"pdf-viewer"},null,8,io)]),(0,n.Lk)("div",lo,[(0,n.bF)(i,{invoiceDataArray:[e],customsEntryForm:o.customsEntryForm,documentVerificationFormat:!0},null,8,["invoiceDataArray","customsEntryForm"])])])))),128))])],64)}const uo={key:0},mo=(0,n.Lk)("h3",null,"Header Information",-1),ho={class:"form-row"},po={class:"row"},yo={class:"col-md-3"},go=(0,n.Lk)("label",{for:"InvoiceNumber"},[(0,n.Lk)("strong",null,"Invoice Number")],-1),fo=["onUpdate:modelValue"],vo={class:"col-md-3"},bo=(0,n.Lk)("label",{for:"SupplierName"},[(0,n.Lk)("strong",null,"Supplier Name")],-1),ko=["onUpdate:modelValue"],_o=(0,n.Lk)("label",{for:"InvoiceDate"},[(0,n.Lk)("strong",null,"Invoice Date")],-1),Co=["onUpdate:modelValue"],Do=(0,n.Lk)("label",{for:"invoiceCurrency"},[(0,n.Lk)("strong",null,"Invoice Currency")],-1),Lo={key:0,class:"col-md-1"},Eo=(0,n.Lk)("label",{for:"rateOfExchange"},[(0,n.Lk)("strong",null,"Exchange Rate")],-1),Fo=["onUpdate:modelValue"],Io={key:1,class:"col-md-1"},xo=(0,n.Lk)("label",{for:"discountApplied"},[(0,n.Lk)("strong",null,"Apply Discount")],-1),To={class:"form-check form-switch ms-2 custom-switch d-flex align-items-center"},So=["onUpdate:modelValue","onChange"],Ao=(0,n.Lk)("h3",null,"Line Details",-1),wo=(0,n.Lk)("th",null,"Line #",-1),Oo=(0,n.Lk)("th",null,"Product Code",-1),No=(0,n.Lk)("th",null,"Description",-1),Po=(0,n.Lk)("th",null,"THN Code",-1),Ro={key:0},Vo={key:1},Uo=(0,n.Lk)("th",null,"Unit Quantity",-1),Bo=(0,n.Lk)("th",null,"Unit Price",-1),$o=(0,n.Lk)("th",null,"Extension Price",-1),Mo=(0,n.Lk)("th",null,null,-1),Wo=(0,n.Lk)("th",null,"Actions",-1),jo=["onBlur"],Xo=["onBlur"],Go=["onBlur","title"],qo={key:0},Jo={key:1},Yo=["onBlur"],zo=["onBlur"],Ho=["onBlur"],Ko=["onClick"],Qo=(0,n.Lk)("i",{class:"fa-solid fa-hammer green-icon"},null,-1),Zo=[Qo],ea=["onClick"],ta={key:0},oa=(0,n.Lk)("i",{class:"fas fa-chevron-up",style:{color:"white"}},null,-1),aa=[oa],ra={key:1},na=(0,n.Lk)("i",{class:"fas fa-chevron-down",style:{color:"white"}},null,-1),sa=[na],ia={key:0},la={colspan:"10"},ca={class:"row"},da={class:"col-md-2"},ua=(0,n.Lk)("label",{for:"countryOfOrigin",class:"form-label"},[(0,n.Lk)("strong",null,"Country of Origin")],-1),ma={class:"col-md-2"},ha=(0,n.Lk)("label",{for:"cpcCode",class:"form-label"},[(0,n.Lk)("strong",null,"CPC Code")],-1),pa={class:"col-md-2"},ya=(0,n.Lk)("label",{for:"npcCode",class:"form-label"},[(0,n.Lk)("strong",null,"NPC Code")],-1),ga={class:"col-md-2"},fa=(0,n.Lk)("label",{for:"tradeAgreement",class:"form-label"},[(0,n.Lk)("strong",null,"Trade Agreement")],-1),va={class:"col-md-2"},ba=(0,n.Lk)("label",{for:"applicableTaxes",class:"form-label"},[(0,n.Lk)("strong",null,"Manually Exempt Tax")],-1),ka=["onClick"],_a={class:"col-md-1"},Ca=(0,n.Lk)("label",{for:"discount",class:"form-label"},[(0,n.Lk)("strong",null,"Apply Discount")],-1),Da={class:"form-check form-switch ms-2 custom-switch"},La=["onUpdate:modelValue"],Ea={class:"col-md-1"},Fa=(0,n.Lk)("label",{for:"delete",class:"form-label"},[(0,n.Lk)("strong",null,"Delete")],-1),Ia=["onClick"],xa=(0,n.Lk)("i",{class:"fa fa-trash"},null,-1),Ta=[xa],Sa={colspan:"7"},Aa=["onClick"],wa=(0,n.Lk)("h3",null,"Footer Information",-1),Oa=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Invoice Total"),(0,n.Lk)("th",null,"Inland"),(0,n.Lk)("th",null,"Insurance"),(0,n.Lk)("th",null,"Other Charges"),(0,n.Lk)("th",null,"Final Total")])],-1),Na=["onBlur"],Pa=["onBlur"],Ra=["onBlur"],Va=["onBlur"],Ua=["onBlur"],Ba=(0,n.Lk)("h3",null,"Calculated Check",-1),$a=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Total Extension Prices"),(0,n.Lk)("th",null,"Number of Line Items"),(0,n.Lk)("th",null,"Matches Invoice Total?")])],-1),Ma={key:0};function Wa(e,t,o,a,s,i){const l=(0,n.g2)("v-select");return(0,n.uX)(),(0,n.CE)(n.FK,null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.invoiceDataArray,((a,c)=>((0,n.uX)(),(0,n.CE)("div",{key:c},[o.documentVerificationFormat?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("h2",uo,"Invoice Data #"+(0,T.v_)(c+1),1)),mo,(0,n.Lk)("div",ho,[(0,n.Lk)("div",po,[(0,n.Lk)("div",yo,[go,(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":e=>a.invoice_number=e,class:"form-control",id:"InvoiceNumber",placeholder:"Enter Invoice Number"},null,8,fo),[[r.Jo,a.invoice_number]])]),(0,n.Lk)("div",vo,[bo,(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":e=>a.vendor_name=e,class:"form-control",id:"SupplierName",placeholder:"Enter Supplier Name"},null,8,ko),[[r.Jo,a.vendor_name]])]),(0,n.Lk)("div",{class:(0,T.C4)({"col-md-2":!o.documentVerificationFormat,"col-md-3":o.documentVerificationFormat})},[_o,(0,n.bo)((0,n.Lk)("input",{type:"date","onUpdate:modelValue":e=>a.invoice_date=e,class:"form-control",id:"InvoiceDate"},null,8,Co),[[r.Jo,a.invoice_date]])],2),(0,n.Lk)("div",{class:(0,T.C4)({"col-md-2":!o.documentVerificationFormat,"col-md-3":o.documentVerificationFormat})},[Do,(0,n.bF)(l,{modelValue:a.currency,"onUpdate:modelValue":e=>a.currency=e,options:s.currencies,label:"name",id:"invoiceCurrency",searchable:!0,reduce:e=>e.code,filterable:!0,placeholder:"Select a Currency"},null,8,["modelValue","onUpdate:modelValue","options","reduce"])],2),o.documentVerificationFormat?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",Lo,[Eo,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"rateOfExchange","onUpdate:modelValue":e=>a.rate_of_exchange=e},null,8,Fo),[[r.Jo,a.rate_of_exchange]])])),o.documentVerificationFormat?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",Io,[xo,(0,n.Lk)("div",To,[(0,n.bo)((0,n.Lk)("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"flexSwitchCheckDefault","onUpdate:modelValue":e=>a.discount_applied=e,onChange:e=>i.handleInvoiceDiscountApplication(a)},null,40,So),[[r.lH,a.discount_applied]])])]))])]),Ao,(0,n.Lk)("table",null,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[wo,Oo,No,Po,o.documentVerificationFormat?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("th",Ro,"Duty")),o.documentVerificationFormat?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("th",Vo,"VAT")),Uo,Bo,$o,Mo,Wo])]),(0,n.Lk)("tbody",null,[a.lines?((0,n.uX)(!0),(0,n.CE)(n.FK,{key:0},(0,n.pI)(a.lines,((c,d)=>((0,n.uX)(),(0,n.CE)(n.FK,{key:d},[(0,n.Lk)("tr",null,[(0,n.Lk)("td",null,(0,T.v_)(d+1),1),(0,n.Lk)("td",{contenteditable:"true",onBlur:e=>i.updateItem(a,d,"product_code",e.target.innerText)},(0,T.v_)(c.product_code||"N/A"),41,jo),(0,n.Lk)("td",{contenteditable:"true",onBlur:e=>i.updateItem(a,d,"description",e.target.innerText)},(0,T.v_)(c.description||"N/A"),41,Xo),(0,n.Lk)("td",{class:(0,T.C4)(["valid"===c.commodityCodeStatus?"valid-commodity-code":"invalid-commodity-code"]),contenteditable:"true",onInput:t[0]||(t[0]=e=>i.handleInput(e)),onBlur:e=>i.updateTariffCode(a,d,"tariff_code",e.target.innerText),title:c.commodity_description,"data-bs-toggle":"tooltip"},(0,T.v_)(c.tariff_code||"N/A"),43,Go),o.documentVerificationFormat?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("td",qo,(0,T.v_)(c.icdCharge)+"%",1)),o.documentVerificationFormat?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("td",Jo,(0,T.v_)(c.vatCharge)+"%",1)),(0,n.Lk)("td",{contenteditable:"true",onBlur:e=>i.updateItem(a,d,"quantity",e.target.innerText),style:(0,T.Tr)(i.naStyle(c.quantity))},(0,T.v_)(c.quantity||"N/A"),45,Yo),(0,n.Lk)("td",{contenteditable:"true",onBlur:e=>i.updateItem(a,d,"unit_price",e.target.innerText),style:(0,T.Tr)(i.naStyle(c.unit_price))},(0,T.v_)(c.unit_price||"N/A"),45,zo),(0,n.Lk)("td",{contenteditable:"true",onBlur:e=>i.updateItem(a,d,"extension_price",e.target.innerText),style:(0,T.Tr)(i.extensionStyle(c))},(0,T.v_)(c.extension_price||"N/A"),45,Ho),(0,n.Lk)("td",null,[i.verifyExtensionPrice(c)?((0,n.uX)(),(0,n.CE)("button",{key:0,onClick:e=>i.fixExtensionPrice(c),class:"icon-button"},Zo,8,Ko)):(0,n.Q3)("",!0)]),(0,n.Lk)("td",null,[(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e=>i.toggleDetails(d)},[s.expandedIndex===d?((0,n.uX)(),(0,n.CE)("span",ta,aa)):((0,n.uX)(),(0,n.CE)("span",ra,sa))],8,ea)])]),s.expandedIndex===d?((0,n.uX)(),(0,n.CE)("tr",ia,[(0,n.Lk)("td",la,[(0,n.Lk)("div",ca,[(0,n.Lk)("div",da,[ua,(0,n.bF)(l,{modelValue:c.country_of_origin,"onUpdate:modelValue":e=>c.country_of_origin=e,options:s.countries,label:"name",id:"countryOfOrigin",searchable:!0,reduce:e=>e.code,filterable:!0,placeholder:"Select a Country of Origin"},null,8,["modelValue","onUpdate:modelValue","options","reduce"])]),(0,n.Lk)("div",ma,[ha,(0,n.bF)(l,{modelValue:c.cpcCode,"onUpdate:modelValue":e=>c.cpcCode=e,options:i.availableCPCCodes,label:"cpcDisplay",id:"cpcCode",searchable:!0,reduce:e=>e.cpcId,filterable:!0,placeholder:"Select 1 a CPC Code",onChange:e=>i.onCPCCodeChange(c)},null,8,["modelValue","onUpdate:modelValue","options","reduce","onChange"])]),(0,n.Lk)("div",pa,[ya,(0,n.bF)(l,{modelValue:c.npcCode,"onUpdate:modelValue":e=>c.npcCode=e,options:i.availableNPCCodes(c.cpcCode),label:"code_description",id:"npcCode",searchable:!0,reduce:e=>e.code,filterable:!0,placeholder:"Select a NPC Code"},null,8,["modelValue","onUpdate:modelValue","options","reduce"])]),(0,n.Lk)("div",ga,[fa,(0,n.bF)(l,{modelValue:c.tradeAgreement,"onUpdate:modelValue":e=>c.tradeAgreement=e,options:e.tradeAgreements,label:"name",id:"tradeAgreement",searchable:!0,reduce:e=>e.id,filterable:!0,placeholder:"Select a Trade Agreement"},null,8,["modelValue","onUpdate:modelValue","options","reduce"])]),(0,n.Lk)("div",va,[ba,(0,n.Lk)("div",null,[(0,n.Lk)("button",{class:"btn btn-primary",onClick:e=>i.displayManualExemptionAlert(c)}," Manually Exempt Tax ",8,ka)])]),(0,n.Lk)("div",_a,[Ca,(0,n.Lk)("div",Da,[(0,n.bo)((0,n.Lk)("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"flexSwitchCheckChecked","onUpdate:modelValue":e=>c.discount_applied=e,onChange:t[1]||(t[1]=e=>i.handleLineDiscountApplication())},null,40,La),[[r.lH,c.discount_applied]])])]),(0,n.Lk)("div",Ea,[Fa,(0,n.Lk)("div",null,[(0,n.Lk)("button",{class:"btn btn-danger",onClick:e=>i.deleteRow(a,d)},Ta,8,Ia)])])])])])):(0,n.Q3)("",!0)],64)))),128)):(0,n.Q3)("",!0)]),(0,n.Lk)("tfoot",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("td",Sa,[(0,n.Lk)("button",{onClick:e=>i.addNewLine(a)},"Add New Line",8,Aa)])])])]),wa,(0,n.Lk)("table",null,[Oa,(0,n.Lk)("tbody",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("td",{contenteditable:"true",onBlur:e=>i.updateData(a,"invoice_total",e.target.innerText),style:(0,T.Tr)(i.naStyle(a.invoice_total))},(0,T.v_)(a.invoice_total||0),45,Na),(0,n.Lk)("td",{contenteditable:"true",onBlur:e=>i.updateData(a,"inland",e.target.innerText),style:(0,T.Tr)(i.naStyle(a.inland))},(0,T.v_)(a.inland||0),45,Pa),(0,n.Lk)("td",{contenteditable:"true",onBlur:e=>i.updateData(a,"insurance",e.target.innerText),style:(0,T.Tr)(i.naStyle(a.insurance))},(0,T.v_)(a.insurance||0),45,Ra),(0,n.Lk)("td",{contenteditable:"true",onBlur:e=>i.updateData(a,"otherCharges",e.target.innerText),style:(0,T.Tr)(i.naStyle(a.otherCharges))},(0,T.v_)(a.otherCharges||0),45,Va),(0,n.Lk)("td",{onBlur:e=>i.updateData(a,"final_total",e.target.innerText)},(0,T.v_)(i.calculateInvoiceTotal(a)),41,Ua)])])]),Ba,(0,n.Lk)("table",null,[$a,(0,n.Lk)("tbody",null,[(0,n.Lk)("tr",{style:(0,T.Tr)(i.checkInvoiceTotal(a))},[(0,n.Lk)("td",null,(0,T.v_)(i.calculateTotalExtensionPrice(a.lines)),1),(0,n.Lk)("td",null,(0,T.v_)(a.lines?a.lines.length:0),1),(0,n.Lk)("td",null,(0,T.v_)(i.calculateTotalExtensionPrice(a.lines)===parseFloat(a.invoice_total).toFixed(2)?"Yes":"No"),1)],4)])])])))),128)),(0,n.Lk)("table",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("td",null,[(0,n.Lk)("input",{type:"file",multiple:"",onChange:t[2]||(t[2]=(...e)=>i.handleFileUpload&&i.handleFileUpload(...e)),accept:"application/pdf",style:{display:"none"},ref:"newInvoice"},null,544),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[3]||(t[3]=e=>i.triggerFileInput("newInvoice"))},"Add New Invoice")]),(0,n.Lk)("td",null,[(0,n.Lk)("ul",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.newInvoices,((e,t)=>((0,n.uX)(),(0,n.CE)("li",{key:t},(0,T.v_)(e.name),1)))),128))])]),(0,n.Lk)("td",null,[s.newInvoices.length>0?((0,n.uX)(),(0,n.CE)("div",Ma,[(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[4]||(t[4]=e=>i.uploadFilesLLM())},"Upload Invoices")])):(0,n.Q3)("",!0)])])])],64)}function ja(){const e=(0,eo.KR)([{code:"USD",name:"United States Dollar"},{code:"EUR",name:"Euro"},{code:"JPY",name:"Japanese Yen"},{code:"GBP",name:"British Pound Sterling"},{code:"AUD",name:"Australian Dollar"},{code:"CAD",name:"Canadian Dollar"},{code:"CHF",name:"Swiss Franc"},{code:"CNY",name:"Chinese Yuan"},{code:"SEK",name:"Swedish Krona"},{code:"NZD",name:"New Zealand Dollar"},{code:"MXN",name:"Mexican Peso"},{code:"SGD",name:"Singapore Dollar"},{code:"HKD",name:"Hong Kong Dollar"},{code:"NOK",name:"Norwegian Krone"},{code:"KRW",name:"South Korean Won"},{code:"TRY",name:"Turkish Lira"},{code:"INR",name:"Indian Rupee"},{code:"RUB",name:"Russian Ruble"},{code:"BRL",name:"Brazilian Real"},{code:"ZAR",name:"South African Rand"},{code:"TTD",name:"Trinidad & Tobago Dollar"},{code:"XCD",name:"EC Dollar"},{code:"BBD",name:"Barbados Dollar"},{code:"CNY",name:"China Renminbi"},{code:"AED",name:"UAE Dirham"},{code:"EGP",name:"Egyptian Pound"},{code:"GYD",name:"Guyana Dollar"},{code:"BZD",name:"Belize Dollar"}]);return e}var Xa={props:["invoiceDataArray","customsEntryForm","documentVerificationFormat","linesToBeDeleted","linesToBeAdded","invoicesToBeAdded"],data(){return{countries:[],expandedIndex:null,currencies:[],cpcCodeOptions:["4000"],npcCodeOptions:["000"],applicableTaxes:[],newInvoices:[]}},methods:{calculateTotalExtensionPrice:Ya,checkInvoiceTotal:er,calculateInvoiceTotal:tr,naStyle:or,addNewLine:ar,updateData:rr,deleteRow:nr,toggleDetails:sr,extensionStyle:ir,updateTariffCode:lr,parseFloatFromString:cr,fetchCountries:dr,updateItem:ur,fetchNpcCodes:br,fetchTradeAgreements:kr,handleInput:pr,formatValue:yr,truncateString:fr,moveCursorToEnd:vr,verifyExtensionPrice:Za,fixExtensionPrice:Qa,displayManualExemptionAlert:_r,availableNPCCodes:hr,onCPCCodeChange(e){console.log("CPC Code Changed: ",e),e.npcCode=hr(e.cpcCode)[0].code||""},addNewInvoice:Ka,triggerFileInput:za,handleFileUpload:Ha,uploadFilesLLM:Ga,classifyInvoiceItems:qa,processCommodityCodes:Ja,handleLineDiscountApplication(e){console.log("Handling Line Discount Application",e)},handleInvoiceDiscountApplication(e){e.lines.forEach((t=>{t.discount_applied=e.discount_applied}))},initTooltips(){const e=document.querySelectorAll('[data-bs-toggle="tooltip"]');e.forEach((e=>{new window.bootstrap.Tooltip(e)}))}},mounted(){this.fetchCountries(),this.currencies=ja(),this.fetchNpcCodes(),this.fetchTradeAgreements(),this.initTooltips()},computed:{availableCPCCodes:mr}};async function Ga(e="https://mawi-updraded-api.wonderfulflower-f4234c00.eastus.azurecontainerapps.io/analyze-invoices-OCR-LLM"){Wt("Reading your invoices. Please wait..."),Nt(e,this.newInvoices).then((e=>{$t();const t=e.invoiceData;t.forEach((e=>{this.invoiceDataArray.push(e),this.invoicesToBeAdded.push(e),this.newInvoices=[]})),Wt("Invoices read successfully. Classifying Invoice Items. Please wait..."),this.classifyInvoiceItems(t).then((()=>{$t(),Ut("Invoices classified successfully."),console.log("Invoices classified successfully.",this.invoiceDataArray)})).catch((e=>{$t(),Mt("Failed to classify invoices. Please try again."),console.error("Failed to classify invoices: ",e)}))})).catch((e=>{$t(),Mt("Failed to read invoices. Please try again."),this.newInvoices=[],console.error("Failed to read invoices: ",e)}))}async function qa(e){const t=e.flatMap((e=>e.lines.filter((e=>!e.tariff_code)).map((e=>({description:e.classification_description||e.description||"",commodity_code:e.commodity_code||"",product_number:e.product_number||""})))));if(0===t.length)return console.log("No descriptions to classify."),[];console.log("Descriptions: ",t);const o=await $e([t]);this.processCommodityCodes(o[0],e)}function Ja(e,t){e.forEach((e=>{t.forEach((t=>{t.lines.forEach(((o,a)=>{if((e.description===`${o?.classification_description}`||e.description===`${o.description}`)&&void 0!==e.classification_model_suggested_code&&null!==e.classification_model_suggested_code){o.tariff_code=gr(e.classification_model_suggested_code.toString());const r={llm_recommended_classification_code:o.tariff_code,approved_classification_code:""};o.performanceMetric=r,this.updateTariffCode(t,a,"tariff_code",o.tariff_code)}}))}))}))}function Ya(e){return void 0===e||null===e||0===e.length?0:e.reduce(((e,t)=>e+this.parseFloatFromString(t.extension_price||0)),0).toFixed(2)}function za(e){this.$refs[e].click()}function Ha(e){console.log("Handling File Upload"),this.newInvoices=Array.from(e.target.files)}function Ka(){const e={lines:[{amount:519.48,description:"LETS JAM SHINE&COND GEL EX HOLD 4.4",classification_description:"LETS JAM SHINE&COND GEL EX HOLD 4.4, Supplier: SOFISHEEN-CARSON, Item composition: Hair gel",quantity:234,unit_price:2.77,discounted_unit_price:2.22,commodity_code:"3305.90.00",country_of_origin:"",product_number:"O0291113",extension_price:"648.18",vatApplicable:!0,cpcCode:30,npcCode:"000"}],customer_address:"BRYDEN PI LIMITED, 5A CTC DRIVE, MACOYA, TUNAPUNA, TRINIDAD & TABOGO, 99999, TT",customer_address_recipient:"BRYDEN PI LIMITED",customer_name:"BRYDEN PI LIMITED",due_date:"2024-04-15",invoice_inco_terms:"FCA DESTINATION PER SHIP",invoice_date:"2024-02-15",invoice_id:"687013501",invoice_exworks_amount:4334.88,invoice_total_amount:4334.88,shipping_address:"BRYDEN PI LIMITED-EXP TO TRINIDAD, 1 IBIS AVENUE, SAN JUAN, 99999, TT",shipping_address_recipient:"BRYDEN PI LIMITED-EXP TO TRINIDAD",vendor_address:"L'OREAL USA S/D, INC., Cranbury, NJ 08512",vendor_address_recipient:"L'OREAL USA S/D, INC.",vendor_name:"L'OREAL USA S/D, INC.",file_name:"RLL151623 - INV 3 CLASSED.pdf",invoice_total:"5705.10",inland:0,insurance:0,otherCharges:0,final_total:0,total_tax:0,subtotal:4334.88,invoice_number:"687013501",currency:"USD"};this.invoiceDataArray.push(e),this.invoicesToBeAdded.push(e)}function Qa(e){const t=(parseFloat(e.unit_price)*parseFloat(e.quantity)).toFixed(2),o=parseFloat(e.extension_price).toFixed(2);t!==o&&(e.extension_price=t)}function Za(e){const t=(parseFloat(e.unit_price)*parseFloat(e.quantity)).toFixed(2),o=parseFloat(e.extension_price).toFixed(2);return t!==o||[e.unit_price,e.quantity,e.extension_price].some((e=>[null,void 0,"",!1].includes(e)))}function er(e){const t=this.calculateTotalExtensionPrice(e.lines),o=parseFloat(e.invoice_total||0).toFixed(2);return t!==o?{backgroundColor:"red",color:"white"}:{}}function tr(e){const t=parseFloat(e.invoice_total)||0,o=parseFloat(e.inland)||0,a=parseFloat(e.insurance)||0,r=parseFloat(e.otherCharges)||0,n=t+o+a+r;return n.toFixed(2)}function or(e){return[null,void 0,"",!1].includes(e)?{"font-weight":"bold",color:"#B8860B"}:{}}function ar(e){console.log("Adding New Line"),console.log("Data: ",e);const t={product_code:"",description:"",tariff_code:"",quantity:"",unit_price:"",extension_price:"",invoice_id:e.invoice_id,country_of_origin:"",cpcCode:30,npcCode:"000"};e.lines.push(t),this.linesToBeAdded.push(t)}function rr(e,t,o){e[t]=o}function nr(e,t){console.log("Deleting Row: ",t),console.log("Data: ",e.lines),void 0!==e.lines[t].invoice_line_id&&this.linesToBeDeleted.push(e.lines[t].invoice_line_id),e.lines.splice(t,1)}function sr(e){this.expandedIndex=this.expandedIndex===e?null:e}function ir(e){if(void 0===e.extension_price||null===e.extension_price||""===e.extension_price||"N/A"===e.extension_price||"0.00"===e.extension_price||0===e.extension_price)return{"font-weight":"bold",color:"red"};const t=(parseFloat(e.unit_price)*parseFloat(e.quantity)).toFixed(2),o=parseFloat(e.extension_price).toFixed(2);return[e.unit_price,e.quantity,e.extension_price].some((e=>[null,void 0,"",!1].includes(e)))?{"font-weight":"bold",color:"#B8860B"}:t!==o?{"font-weight":"bold",color:"red"}:{}}function lr(e,t,o,a){if(console.log("Updating Tariff Code"),this.updateItem(e,t,o,a),void 0===a||null===a||0===a.trim().length||"N/A"===a)return e.icdCharge=0,void(e.vatCharge=0);console.log("Fetching charges for: ",a),Oe(a.replace(/\./g,"")).then((o=>{let a=o.charges["import custom duty"];const r=void 0===a?0:parseFloat(a[0].charge_amount);let n=o.charges["value added tax"];const s=void 0===n?0:parseFloat(n[0].charge_amount);e.lines[t]["icdCharge"]=r,e.lines[t]["vatCharge"]=s,e.lines[t]["commodityCodeStatus"]="valid",e.lines[t]["applicableTaxes"]=o.charges,e.lines[t]["commodity_description"]=o.description})).catch((o=>{console.error("Failed to get commodity charges:",o),e.lines[t]["commodityCodeStatus"]="invalid",e.lines[t]["icdCharge"]=0,e.lines[t]["vatCharge"]=0,e.lines[t]["commodity_description"]=""}))}function cr(e){if(!e||void 0===e||null===e)return 0;if("number"===typeof e)return e;let t=e.replace(/[^0-9.]/g,""),o=parseFloat(t);return o}async function dr(){try{const e=await fetch("https://restcountries.com/v3.1/all"),t=await e.json();this.countries=t.map((e=>({name:e.name.common,code:e.cca2})))}catch(e){console.error("Failed to fetch countries:",e)}}function ur(e,t,o,a){e.lines[t][o]=a}function mr(){if(void 0!==this.customsEntryForm.regimeTypeCode&&null!==this.customsEntryForm.regimeTypeCode){const e=this.customsEntryForm.regimeTypeOptions.find((e=>e.regimeTypeCode===this.customsEntryForm.regimeTypeCode));return e?e.cpcCodes:[]}return this.customsEntryForm.regimeTypeOptions.flatMap((e=>e.cpcCodes))}function hr(e){const t=this.npcCodeOptions.filter((t=>t.cpcId===e));if(t.length>0)return t;const o=this.npcCodeOptions.filter(((e,t,o)=>t===o.findIndex((t=>t.code===e.code))));return o}function pr(e){const t=e.target.innerText,o=t.replace(/[^0-9]/g,""),a=this.formatValue(o);e.target.innerText=a,this.moveCursorToEnd(e.target)}function yr(e){let t="";for(let o=0;o<e.length;o++)4!==o&&6!==o&&8!==o||(t+="."),t+=e[o];return this.truncateString(t)}function gr(e){return 11!==e.length?(console.log("The string must contain exactly 11 numbers.",e),""):e.slice(0,4)+"."+e.slice(4,6)+"."+e.slice(6,8)+"."+e.slice(8)}function fr(e){return e.length>13?e.substring(0,14):e}function vr(e){const t=document.createRange(),o=window.getSelection();t.selectNodeContents(e),t.collapse(!1),o.removeAllRanges(),o.addRange(t)}async function br(){_e().then((e=>{this.npcCodeOptions=e}))}async function kr(){Je().then((e=>{this.tradeAgreements=e}))}function _r(e){"invalid"!==e.commodityCodeStatus&&void 0!==e.applicableTaxes&&null!==e.applicableTaxes&&0!==e.applicableTaxes.length?(console.log("Displaying Manual Exemption Alert",e),console.log("Applicable Taxes: ",e.applicableTaxes),Qt(e.applicableTaxes,e.extension_price).then((t=>{console.log("Tax Results: ",t),0===Object.keys(t).length?console.log("No data returned or the user canceled the modal."):(console.log("Received tax data:",t),e.manualExemption=!0,e.Exemptions=t,"import custom duty"in t&&(e.icdCharge=t["import custom duty"].chargeAmount),"value added tax"in t&&(e.vatCharge=t["value added tax"].chargeAmount))}))):Mt("Invalid or No Commodity Code Provided. Please enter a valid commodity code before proceeding.")}const Cr=(0,E.A)(Xa,[["render",Wa]]);var Dr=Cr,Lr={props:["invoices","customsEntryForm","pdfFiles"],components:{DocumentTableView:Dr}};const Er=(0,E.A)(Lr,[["render",co]]);var Fr=Er;const Ir=e=>((0,n.Qi)("data-v-0fd0d03f"),e=e(),(0,n.jt)(),e),xr={class:"card"},Tr={key:0},Sr=Ir((()=>(0,n.Lk)("h3",null,"Drag & Drop files here or",-1))),Ar=Ir((()=>(0,n.Lk)("h3",null,"Choose a file",-1))),wr=[Ar],Or={key:1,class:"select"},Nr=Ir((()=>(0,n.Lk)("button",{type:"button",class:"upload-button"},"Upload",-1)));function Pr(e,t,o,a,s,i){return(0,n.uX)(),(0,n.CE)("div",xr,[(0,n.Lk)("div",{class:"drag-area",onDragover:t[2]||(t[2]=(0,r.D$)(((...e)=>i.onDragover&&i.onDragover(...e)),["prevent"])),onDragleave:t[3]||(t[3]=(0,r.D$)(((...e)=>i.onDragLeave&&i.onDragLeave(...e)),["prevent"])),onDrop:t[4]||(t[4]=(0,r.D$)(((...e)=>i.onDrop&&i.onDrop(...e)),["prevent"]))},[s.isDragging?((0,n.uX)(),(0,n.CE)("div",Or,"Drop files here")):((0,n.uX)(),(0,n.CE)("span",Tr,[Sr,(0,n.Lk)("span",{class:"select",role:"button",onClick:t[0]||(t[0]=(...e)=>i.selectFiles&&i.selectFiles(...e))},wr)])),(0,n.Lk)("input",{name:"file",type:"file",class:"file",ref:"fileInput",multiple:"",onChange:t[1]||(t[1]=(...e)=>i.onFileSelect&&i.onFileSelect(...e))},null,544)],32),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.images,((e,t)=>((0,n.uX)(),(0,n.CE)("div",{class:"file-item",key:t},[(0,n.Lk)("p",null,(0,T.v_)(e.name),1)])))),128)),Nr])}var Rr={data(){return{isDragging:!1,images:[]}},methods:{selectFiles(){this.$refs.fileInput.click()},onFileSelect(e){const t=e.target.files;this.handleFiles(t)},handleFiles(e){if(0!==e.length)for(let t=0;t<e.length;t++){const o=e[t];if(!this.images.includes(o)){this.images.push(o);const e=new FileReader;e.onload=e=>{const t=new Image;t.src=e.target.result},e.readAsDataURL(o)}}},onDragover(e){e.preventDefault(),this.isDragging=!0,e.dataTransfer.dropEffect="copy"},onDragLeave(e){e.preventDefault(),this.isDragging=!1},onDrop(e){e.preventDefault(),this.isDragging=!1;const t=e.dataTransfer.files;this.handleFiles(t)}}};const Vr=(0,E.A)(Rr,[["render",Pr],["__scopeId","data-v-0fd0d03f"]]);var Ur=Vr,Br=o(2017);const $r=e=>((0,n.Qi)("data-v-1b7096b0"),e=e(),(0,n.jt)(),e),Mr={class:"customs-entry-form"},Wr={class:"row"},jr={class:"col-md-3"},Xr={class:"form-group"},Gr=$r((()=>(0,n.Lk)("label",{class:"required",for:"buyerNameAddress"},[(0,n.Lk)("strong",null,"Importer")],-1))),qr=["title"],Jr={class:"col-md-3"},Yr={class:"form-group"},zr=$r((()=>(0,n.Lk)("label",{for:"sellerNameAddress"},[(0,n.Lk)("strong",null,"Exporter")],-1))),Hr=["title"],Kr={class:"col-md-3"},Qr={class:"form-group"},Zr=$r((()=>(0,n.Lk)("label",{for:"modeOfTransport"},[(0,n.Lk)("strong",null,"Mode of Transport")],-1))),en=$r((()=>(0,n.Lk)("option",{value:"",disabled:""},"Select a Mode of Transport",-1))),tn=["value"],on={class:"col-md-3"},an={class:"form-group"},rn=$r((()=>(0,n.Lk)("label",{for:"freightType"},[(0,n.Lk)("strong",null,"Freight Type")],-1))),nn=$r((()=>(0,n.Lk)("option",{value:"",disabled:""},"Select a Freight Type",-1))),sn=["value"],ln={class:"row"},cn={class:"col-md-3"},dn={class:"form-group"},un=$r((()=>(0,n.Lk)("label",{for:"waybillNumber"},[(0,n.Lk)("strong",null,"Waybill Numbers")],-1))),mn={class:"col-md-3"},hn={class:"form-group"},pn=$r((()=>(0,n.Lk)("label",{for:"waybillDate"},[(0,n.Lk)("strong",null,"Waybill Date")],-1))),yn={class:"col-md-3"},gn={class:"form-group"},fn=$r((()=>(0,n.Lk)("label",{for:"vessel"},[(0,n.Lk)("strong",null,"Vessel")],-1))),vn={class:"col-md-3"},bn={class:"form-group"},kn=$r((()=>(0,n.Lk)("label",{for:"portOfDischarge"},[(0,n.Lk)("strong",null,"Port of Discharge")],-1))),_n={class:"row"},Cn={class:"col-md-3"},Dn={class:"form-group"},Ln=$r((()=>(0,n.Lk)("label",{for:"grossWeight"},[(0,n.Lk)("strong",null,"Gross Weight")],-1))),En={class:"col-md-3"},Fn={class:"form-group"},In=$r((()=>(0,n.Lk)("label",{for:"netWeight"},[(0,n.Lk)("strong",null,"Net Weight")],-1))),xn={class:"col-md-3"},Tn={class:"form-group"},Sn=$r((()=>(0,n.Lk)("label",{for:"numberOfPackages"},[(0,n.Lk)("strong",null,"Number of Packages")],-1))),An={class:"col-md-3"},wn={class:"form-group"},On=$r((()=>(0,n.Lk)("label",{for:"packageType"},[(0,n.Lk)("strong",null,"Package Type")],-1))),Nn={class:"row"},Pn={class:"col-md-3"},Rn={class:"form-group"},Vn=$r((()=>(0,n.Lk)("label",{for:"totalCargoValue"},[(0,n.Lk)("strong",null,"Total Cargo Value")],-1))),Un={class:"col-md-1"},Bn={class:"form-group"},$n=$r((()=>(0,n.Lk)("label",{for:"currency"},[(0,n.Lk)("strong",null,"Freight")],-1))),Mn={class:"col-md-2"},Wn={class:"form-group"},jn={for:"freightAmount",class:"label-green-italic"},Xn={class:"col-md-1"},Gn={class:"form-group"},qn=$r((()=>(0,n.Lk)("label",{for:"currency"},[(0,n.Lk)("strong",null,"Insurance")],-1))),Jn={class:"col-md-2"},Yn={for:"InsuranceAmount",class:"label-green-italic"},zn={class:"col-md-1"},Hn={class:"form-group"},Kn=$r((()=>(0,n.Lk)("label",{for:"currency"},[(0,n.Lk)("strong",null,"Charges")],-1))),Qn={class:"col-md-2"},Zn={class:"form-group"},es={for:"othercharges",class:"label-green-italic"},ts={class:"row"},os={class:"col-md-3"},as={class:"form-group"},rs=$r((()=>(0,n.Lk)("label",{for:"declarant"},[(0,n.Lk)("strong",null,"Declarant")],-1))),ns=$r((()=>(0,n.Lk)("option",{value:"",disabled:""},"Select a Declarant",-1))),ss=["value"],is={class:"col-md-3"},ls={class:"form-group"},cs=$r((()=>(0,n.Lk)("label",{for:"regimeType"},[(0,n.Lk)("strong",null,"Regime Type")],-1))),ds={class:"col-md-3"},us=$r((()=>(0,n.Lk)("label",{for:"incoTerms"},[(0,n.Lk)("strong",null,"Incoterms")],-1))),ms={class:"col-md-3"},hs=$r((()=>(0,n.Lk)("label",{for:"country"},[(0,n.Lk)("strong",null,"Country of Origin")],-1))),ps={class:"row"},ys={class:"col-md-3"},gs={class:"form-group"},fs=$r((()=>(0,n.Lk)("label",{for:"containerCharges"},[(0,n.Lk)("strong",null,"Container Charges")],-1))),vs={class:"col-md-3"},bs={class:"form-group"},ks=$r((()=>(0,n.Lk)("label",{for:"localFee"},[(0,n.Lk)("strong",null,"Local Fee")],-1))),_s={class:"col-md-3"},Cs={class:"form-group"},Ds=$r((()=>(0,n.Lk)("label",{for:"depositAmount"},[(0,n.Lk)("strong",null,"Deposit Amount")],-1))),Ls={class:"col-md-3"},Es={class:"form-group"},Fs=$r((()=>(0,n.Lk)("label",{for:"additionalCharges"},[(0,n.Lk)("strong",null,"Additional Charges")],-1))),Is={class:"row"},xs={class:"col-md-3"},Ts={class:"form-group"},Ss=$r((()=>(0,n.Lk)("label",{for:"marksAndNumbers"},[(0,n.Lk)("strong",null,"Marks and Numbers")],-1))),As={class:"col-md-3"},ws=$r((()=>(0,n.Lk)("label",{for:"country"},[(0,n.Lk)("strong",null,"Country of Final Destination")],-1))),Os={class:"col-md-3"},Ns={class:"form-group"},Ps=$r((()=>(0,n.Lk)("label",{for:"countryLastProvinance"},[(0,n.Lk)("strong",null,"Country of Last Provinance")],-1))),Rs={class:"col-md-3"},Vs={class:"form-group"},Us=$r((()=>(0,n.Lk)("label",{for:"tradingCountry"},[(0,n.Lk)("strong",null,"Trading Country")],-1))),Bs={class:"row"},$s={class:"col-md-3"},Ms={class:"form-group"},Ws=$r((()=>(0,n.Lk)("label",{for:"estimatedArrivalDate"},[(0,n.Lk)("strong",null,"Arrival Date")],-1)));function js(e,t,o,a,s,i){const l=(0,n.g2)("v-select");return(0,n.uX)(),(0,n.CE)("div",Mr,[(0,n.Lk)("div",Wr,[(0,n.Lk)("div",jr,[(0,n.Lk)("div",Xr,[Gr,(0,n.bF)(l,{options:s.localData.importers,modelValue:s.localData.importerId,"onUpdate:modelValue":t[0]||(t[0]=e=>s.localData.importerId=e),label:"name",searchable:!0,reduce:e=>e.id,filterable:!0,placeholder:"Select an Importer"},{option:(0,n.k6)((e=>[(0,n.Lk)("div",{class:"option-wrapper","data-bs-toggle":"tooltip","data-bs-placement":"right",title:e.tooltipContent},(0,T.v_)(e.name),9,qr)])),_:1},8,["options","modelValue","reduce"])])]),(0,n.Lk)("div",Jr,[(0,n.Lk)("div",Yr,[zr,(0,n.bF)(l,{options:s.localData.exporters,modelValue:s.localData.exporterId,"onUpdate:modelValue":t[1]||(t[1]=e=>s.localData.exporterId=e),label:"name",searchable:!0,reduce:e=>e.id,filterable:!0,placeholder:"Select an Exporter"},{option:(0,n.k6)((e=>[(0,n.Lk)("div",{class:"option-wrapper","data-bs-toggle":"tooltip","data-bs-placement":"right",title:e.tooltipContent},(0,T.v_)(e.name),9,Hr)])),_:1},8,["options","modelValue","reduce"])])]),(0,n.Lk)("div",Kr,[(0,n.Lk)("div",Qr,[Zr,(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":t[2]||(t[2]=e=>s.localData.modeOfTransport=e),ref:"modeOfTransportSelect"},[en,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.localData.modeOfTransportOOptions,((e,t)=>((0,n.uX)(),(0,n.CE)("option",{key:t,value:e.modeOfTransport},(0,T.v_)(e.modeOfTransport),9,tn)))),128))],512),[[r.u1,s.localData.modeOfTransport]])])]),(0,n.Lk)("div",on,[(0,n.Lk)("div",an,[rn,(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":t[3]||(t[3]=e=>s.localData.freightType=e)},[nn,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(this.availableFreightTypes,((e,t)=>((0,n.uX)(),(0,n.CE)("option",{key:t,value:e.name},(0,T.v_)(e.name),9,sn)))),128))],512),[[r.u1,s.localData.freightType]])])])]),(0,n.Lk)("div",ln,[(0,n.Lk)("div",cn,[(0,n.Lk)("div",dn,[un,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"waybillNumber","onUpdate:modelValue":t[4]||(t[4]=e=>s.localData.waybillNumber=e),placeholder:"Please Enter Waybill Number",required:""},null,512),[[r.Jo,s.localData.waybillNumber]])])]),(0,n.Lk)("div",mn,[(0,n.Lk)("div",hn,[pn,(0,n.bo)((0,n.Lk)("input",{type:"date",class:"form-control",id:"waybillDate","onUpdate:modelValue":t[5]||(t[5]=e=>s.localData.waybillDate=e),required:""},null,512),[[r.Jo,s.localData.waybillDate]])])]),(0,n.Lk)("div",yn,[(0,n.Lk)("div",gn,[fn,(0,n.bF)(l,{options:s.localData.vessels,modelValue:s.localData.vesselId,"onUpdate:modelValue":t[6]||(t[6]=e=>s.localData.vesselId=e),label:"name",searchable:!0,reduce:e=>e.id,filterable:!0,placeholder:"Select a Vessel"},null,8,["options","modelValue","reduce"])])]),(0,n.Lk)("div",vn,[(0,n.Lk)("div",bn,[kn,(0,n.bF)(l,{options:s.localData.ports,modelValue:s.localData.portOfDischargeId,"onUpdate:modelValue":t[7]||(t[7]=e=>s.localData.portOfDischargeId=e),label:"name",searchable:!0,reduce:e=>e.id,filterable:!0,placeholder:"Select a Port of Discharge"},null,8,["options","modelValue","reduce"])])])]),(0,n.Lk)("div",_n,[(0,n.Lk)("div",Cn,[(0,n.Lk)("div",Dn,[Ln,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"grossWeight","onUpdate:modelValue":t[8]||(t[8]=e=>s.localData.grossWeight=e),required:""},null,512),[[r.Jo,s.localData.grossWeight]])])]),(0,n.Lk)("div",En,[(0,n.Lk)("div",Fn,[In,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"netWeight","onUpdate:modelValue":t[9]||(t[9]=e=>s.localData.netWeight=e),required:"",readonly:""},null,512),[[r.Jo,s.localData.netWeight]])])]),(0,n.Lk)("div",xn,[(0,n.Lk)("div",Tn,[Sn,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"numberOfPackages","onUpdate:modelValue":t[10]||(t[10]=e=>s.localData.numberOfPackages=e),required:""},null,512),[[r.Jo,s.localData.numberOfPackages]])])]),(0,n.Lk)("div",An,[(0,n.Lk)("div",wn,[On,(0,n.bF)(l,{options:s.localData.packageTypes,modelValue:s.localData.packageType,"onUpdate:modelValue":t[11]||(t[11]=e=>s.localData.packageType=e),label:"text",searchable:!0,reduce:e=>e.value,filterable:!0,placeholder:"Select a Package Type"},null,8,["options","modelValue","reduce"])])])]),(0,n.Lk)("div",Nn,[(0,n.Lk)("div",Pn,[(0,n.Lk)("div",Rn,[Vn,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"totalCargoValue","onUpdate:modelValue":t[12]||(t[12]=e=>s.localData.totalCargoValue=e),required:""},null,512),[[r.Jo,s.localData.totalCargoValue]])])]),(0,n.Lk)("div",Un,[(0,n.Lk)("div",Bn,[$n,(0,n.bF)(l,{clearable:!1,options:s.currencies,modelValue:s.localData.freightCurrency,"onUpdate:modelValue":t[13]||(t[13]=e=>s.localData.freightCurrency=e),label:"code",id:"invoiceCurrency",searchable:!0,filterable:!0,reduce:e=>e.code},null,8,["options","modelValue","reduce"])])]),(0,n.Lk)("div",Mn,[(0,n.Lk)("div",Wn,[(0,n.Lk)("label",jn,(0,T.v_)(s.localData.freightRateOfExchange),1),(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"freightAmount","onUpdate:modelValue":t[14]||(t[14]=e=>s.localData.freightAmount=e),required:""},null,512),[[r.Jo,s.localData.freightAmount]])])]),(0,n.Lk)("div",Xn,[(0,n.Lk)("div",Gn,[qn,(0,n.bF)(l,{clearable:!1,options:s.currencies,modelValue:s.localData.insuranceCurrency,"onUpdate:modelValue":t[15]||(t[15]=e=>s.localData.insuranceCurrency=e),label:"code",id:"invoiceCurrency",searchable:!0,filterable:!0,reduce:e=>e.code},null,8,["options","modelValue","reduce"])])]),(0,n.Lk)("div",Jn,[(0,n.Lk)("label",Yn,(0,T.v_)(s.localData.insuranceRateOfExchange),1),(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"InsuranceAmount","onUpdate:modelValue":t[16]||(t[16]=e=>s.localData.insuranceAmount=e),required:""},null,512),[[r.Jo,s.localData.insuranceAmount]])]),(0,n.Lk)("div",zn,[(0,n.Lk)("div",Hn,[Kn,(0,n.bF)(l,{clearable:!1,options:s.currencies,modelValue:s.localData.otherChargesCurrency,"onUpdate:modelValue":t[17]||(t[17]=e=>s.localData.otherChargesCurrency=e),label:"code",id:"invoiceCurrency",searchable:!0,filterable:!0,reduce:e=>e.code},null,8,["options","modelValue","reduce"])])]),(0,n.Lk)("div",Qn,[(0,n.Lk)("div",Zn,[(0,n.Lk)("label",es,(0,T.v_)(s.localData.otherChargesRateOfExchange),1),(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"otherCharges","onUpdate:modelValue":t[18]||(t[18]=e=>s.localData.otherCharges=e)},null,512),[[r.Jo,s.localData.otherCharges]])])])]),(0,n.Lk)("div",ts,[(0,n.Lk)("div",os,[(0,n.Lk)("div",as,[rs,(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":t[19]||(t[19]=e=>s.localData.declarantId=e)},[ns,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.localData.declarants,((e,t)=>((0,n.uX)(),(0,n.CE)("option",{key:t,value:e.id},(0,T.v_)(e.name),9,ss)))),128))],512),[[r.u1,s.localData.declarantId]])])]),(0,n.Lk)("div",is,[(0,n.Lk)("div",ls,[cs,(0,n.bF)(l,{options:s.localData.regimeTypeOptions,modelValue:s.localData.regimeType,"onUpdate:modelValue":t[20]||(t[20]=e=>s.localData.regimeType=e),label:"regimeType",searchable:!0,reduce:e=>e.regimeTypeId,filterable:!0,placeholder:"Select a Regime Type"},null,8,["options","modelValue","reduce"])])]),(0,n.Lk)("div",ds,[us,(0,n.bF)(l,{options:s.localData.incotermsList,modelValue:s.localData.incoTerms,"onUpdate:modelValue":t[21]||(t[21]=e=>s.localData.incoTerms=e),label:"name",searchable:!0,reduce:e=>e.code,filterable:!0,placeholder:"Select an Incoterm"},null,8,["options","modelValue","reduce"])]),(0,n.Lk)("div",ms,[hs,(0,n.bF)(l,{options:s.countryList,modelValue:s.localData.countryOfOrigin,"onUpdate:modelValue":t[22]||(t[22]=e=>s.localData.countryOfOrigin=e),label:"name",searchable:!0,reduce:e=>e.code,filterable:!0,placeholder:"Select a Country of Origin"},null,8,["options","modelValue","reduce"])])]),(0,n.Lk)("div",ps,[(0,n.Lk)("div",ys,[(0,n.Lk)("div",gs,[fs,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"containerCharges","onUpdate:modelValue":t[23]||(t[23]=e=>s.localData.containerCharges=e),required:""},null,512),[[r.Jo,s.localData.containerCharges]])])]),(0,n.Lk)("div",vs,[(0,n.Lk)("div",bs,[ks,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"localFee","onUpdate:modelValue":t[24]||(t[24]=e=>s.localData.localFee=e),required:""},null,512),[[r.Jo,s.localData.localFee]])])]),(0,n.Lk)("div",_s,[(0,n.Lk)("div",Cs,[Ds,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"depositAmount","onUpdate:modelValue":t[25]||(t[25]=e=>s.localData.depositAmount=e),required:""},null,512),[[r.Jo,s.localData.depositAmount]])])]),(0,n.Lk)("div",Ls,[(0,n.Lk)("div",Es,[Fs,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"additionalCharges","onUpdate:modelValue":t[26]||(t[26]=e=>s.localData.additionalCharges=e),required:""},null,512),[[r.Jo,s.localData.additionalCharges]])])])]),(0,n.Lk)("div",Is,[(0,n.Lk)("div",xs,[(0,n.Lk)("div",Ts,[Ss,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"marksAndNumbers","onUpdate:modelValue":t[27]||(t[27]=e=>s.localData.marksAndNumbers=e),required:""},null,512),[[r.Jo,s.localData.marksAndNumbers]])])]),(0,n.Lk)("div",As,[ws,(0,n.bF)(l,{options:s.countryList,modelValue:s.localData.countryOfFinalDestination,"onUpdate:modelValue":t[28]||(t[28]=e=>s.localData.countryOfFinalDestination=e),label:"name",searchable:!0,reduce:e=>e.code,filterable:!0,placeholder:"Select a Country of Destination"},null,8,["options","modelValue","reduce"])]),(0,n.Lk)("div",Os,[(0,n.Lk)("div",Ns,[Ps,(0,n.bF)(l,{options:s.countryList,modelValue:s.localData.countryLastProvinance,"onUpdate:modelValue":t[29]||(t[29]=e=>s.localData.countryLastProvinance=e),label:"name",searchable:!0,reduce:e=>e.code,filterable:!0,placeholder:"Select a Country of Last Provinance"},null,8,["options","modelValue","reduce"])])]),(0,n.Lk)("div",Rs,[(0,n.Lk)("div",Vs,[Us,(0,n.bF)(l,{options:s.countryList,modelValue:s.localData.tradingCountry,"onUpdate:modelValue":t[30]||(t[30]=e=>s.localData.tradingCountry=e),label:"name",searchable:!0,reduce:e=>e.code,filterable:!0,placeholder:"Select a Trading Country"},null,8,["options","modelValue","reduce"])])])]),(0,n.Lk)("div",Bs,[(0,n.Lk)("div",$s,[(0,n.Lk)("div",Ms,[Ws,(0,n.bo)((0,n.Lk)("input",{type:"date",class:"form-control",id:"estimatedArrivalDate","onUpdate:modelValue":t[31]||(t[31]=e=>s.localData.estimatedArrivalDate=e),required:""},null,512),[[r.Jo,s.localData.estimatedArrivalDate]])])])])])}function Xs(){const e=(0,eo.KR)([{code:"EXW",name:"Ex Works"},{code:"FCA",name:"Free Carrier"},{code:"CPT",name:"Carriage Paid To"},{code:"CIP",name:"Carriage and Insurance Paid To"},{code:"DAP",name:"Delivered At Place"},{code:"DAT",name:"Delivered At Terminal"},{code:"DDP",name:"Delivered Duty Paid"},{code:"FAS",name:"Free Alongside Ship"},{code:"FOB",name:"Free On Board"},{code:"CFR",name:"Cost and Freight"},{code:"CIF",name:"Cost, Insurance and Freight"}]);return e}var Gs={name:"CustomsEntryForm",props:["customsEntryForm"],mounted(){console.log("Mounting"),this.getConfigurations(),this.localData.packageTypes=to(),this.localData.incotermsList=Xs(),this.currencies=ja(),this.localData.modeOfTransportOOptions=ao(),this.initTooltips()},data(){return{freightTypeOptions:[],localData:this.customsEntryForm,countryList:[],currencies:[]}},computed:{availableFreightTypes(){const e=this.localData.modeOfTransportOOptions?.find((e=>e.modeOfTransport===this.localData.modeOfTransport))?.freightTypes;return e}},updated(){this.initTooltips()},methods:{initTooltips(){const e=document.querySelectorAll('[data-bs-toggle="tooltip"]');e.forEach((e=>{new window.bootstrap.Tooltip(e)}))},setModeOfTransport(e){this.$nextTick((()=>{this.localData.modeOfTransport=e,this.$refs.modeOfTransportSelect.dispatchEvent(new Event("change"))}))},updateModeOfTransport(e){const t=this.localData.modeOfTransportOOptions.find((t=>t.modeOfTransport===e.target.value));this.freightTypeOptions=t.freightTypes},updateField(e,t){this.localData[e]=t,console.log(this.localData),this.$emit("update-section-one",this.localData)},async getConfigurations(){console.log("Fetching configurations..."),this.localData.ports=await Ce(),Promise.all([de(),ie(),Fe(),ce(),me()]).then((([e,t,o,a,r])=>{this.localData.exporters=e.map((e=>({...e,tooltipContent:`${e.name}\n${e.address}\n${e.country}`}))),this.localData.importers=t.map((e=>({...e,tooltipContent:`${e.name}\n${e.address}\n${e.country}`}))),console.log("Importers",t),this.localData.vessels=o,this.localData.declarants=a,this.countryList=r}))}},watch:{customsEntryForm:{deep:!0,handler(e){this.localData=e,this.localData.portOfDischargeName=this.localData.ports.find((e=>e.id===this.localData.portOfDischargeId))?.name,this.localData.vesselName=this.localData.vessels.find((e=>e.id===this.localData.vesselId))?.name,this.localData.regimeTypeCode=this.localData.regimeTypeOptions.find((e=>e.regimeTypeId===this.localData.regimeType))?.regimeTypeCode;const t=this.localData.importers.find((e=>e.id===this.localData.importerId)),o=this.localData.exporters.find((e=>e.id===this.localData.exporterId));this.localData.importerName=void 0!==t?t.name:"",this.localData.importerTaxIdentificationNumber=void 0!==t?t.taxIdentificationNumber:"",this.localData.exporterName=void 0!==o?o.name:"",this.localData.exporterTaxIdentificationNumber=void 0!==o?o.taxIdentificationNumber:"",this.localData.exporterCountry=void 0!==o?o.country:"",null===this.localData.countryOfOrigin||null!=this.localData.countryLastProvinance&&""!=this.localData.countryLastProvinance&&void 0!=this.localData.countryLastProvinance||(this.localData.countryLastProvinance=this.localData.countryOfOrigin),null===this.localData.countryOfOrigin||null!=this.localData.tradingCountry&&""!=this.localData.tradingCountry&&void 0!=this.localData.tradingCountry||(this.localData.tradingCountry=this.localData.countryOfOrigin),null!==this.localData.grossWeight&&this.localData.grossWeight>0&&(this.localData.netWeight=this.localData.grossWeight-this.localData.grossWeight/10),null!==this.localData.ratesOfExchange&&this.localData.ratesOfExchange.length>0&&(this.localData.insuranceRateOfExchange=this.localData.insuranceCurrency?this.localData.ratesOfExchange.find((e=>e.base_currency===this.localData.insuranceCurrency)).rate:1,this.localData.freightRateOfExchange=this.localData.freightCurrency?this.localData.ratesOfExchange.find((e=>e.base_currency===this.localData.freightCurrency)).rate:1,this.localData.otherChargesRateOfExchange=this.localData.otherChargesCurrency?this.localData.ratesOfExchange.find((e=>e.base_currency===this.localData.otherChargesCurrency)).rate:1)}}}};const qs=(0,E.A)(Gs,[["render",js],["__scopeId","data-v-1b7096b0"]]);var Js=qs;const Ys={STANDARD:"STANDARD",VEHICLES:"VEHICLES"},zs={NOT_CLASSIFIED:"Not Classified",NOT_STARTED:"Classification Not Started",IN_PROGRESS:"Classification In Progress",COMPLETED:"Classification Completed",APPROVED:"Classififcation Approved"},Hs={STORED_AND_NOT_CLASSIFIED:"STORED_AND_NOT_CLASSIFIED",CLASSIFICATION_OKAY:"CLASSIFICATION_OKAY",PARTIAL_STORAGE:"PARTIAL_STORAGE",FULL_STORAGE:"FULL_STORAGE"},Ks={MICROSOFT_FORM_RECOGNIZER:"MICROSOFT_FORM_RECOGNIZER",CLAUDE_LLM:"CLAUDE_LLM"};var Qs={name:"App",components:{CustomsEntryForm:Js,VerifyDocumentData:Fr,DocumentTableView:Dr,FileDragAndDrop:Ur},data(){return{displayDocumentVerificationView:!1,referenceNumber:"",selectedFiles:[],waybillFiles:[],pdfFiles:[],invoiceDataArray:[],linesToBeDeleted:[],isDragOver:!1,isValidReference:!1,invoicesDataExtractionCompleted:!1,waybillDataExtractionCompleted:!1,classificationCompleted:!1,waybillNumber:"",waybillDate:(new Date).toISOString().substr(0,10),modeOfTransport:"",freightType:"",marksAndNumbers:"As Addressed",countryOfOrigin:"",cpcCode:"4000",npcCode:"000",kindOfPackage:"CT",numberOfPackages:"",consignee:"",shipper:"",supplier:"",totalCargoValue:0,totalNumberOfLines:0,freightCharge:0,rateOfExchange:1,netWeight:0,grossWeight:0,editableContent:"0",countries:[],modeOfTransportOOptions:["Air","Ocean"],freightTypeOptions:["FCL","LCL","Bulk","Break Bulk"],cpcCodeOptions:["4000"],npcCodeOptions:["000"],packageTypeOptions:[],showModeofTransportDropdown:!1,invoicingProcessingStart:null,invoicingProcessingEnd:null,invoiceModelUtilized:"",classificationProcessingStart:null,classificationProcessingEnd:null,customsEntryForm:{exporters:[],importers:[],vessels:[],ports:[],declarants:[],incotermsList:[],ratesOfExchange:[],importerId:"",exporterId:"",importerName:"",exporterName:"",importerTaxIdentificationNumber:"",exporterTaxIdentificationNumber:"",declarantId:"",declarantTaxIdentificationNumber:"",modeOfTransport:"",freightType:"",waybillNumber:"",waybillDate:"",estimatedArrivalDate:"",vesselId:"",vesselName:"",incoTerms:"",portOfDischargeId:"",portOfDischargeName:"",netWeight:0,grossWeight:0,numberOfPackages:0,packageType:"",packageTypes:[],marksAndNumbers:"As Addressed",totalCargoValue:0,freightAmount:0,insuranceAmount:0,otherCharges:0,freightCurrency:"USD",insuranceCurrency:"USD",otherChargesCurrency:"USD",insuranceRateOfExchange:0,otherChargesRateOfExchange:0,freightRateOfExchange:0,rateOfExchange:0,regimeType:"",regimeTypeCode:"",regimeTypeOptions:[],depositAmount:0,containerCharges:0,additionalCharges:0,localFee:0,countryOfOrigin:"",countryOfFinalDestination:"TT",countryLastProvinance:"",tradingCountry:""}}},watch:{"customsEntryForm.countryOfOrigin"(e,t){this.invoiceDataArray.forEach((t=>{t.lines.forEach((t=>{t.country_of_origin&&0!==t.country_of_origin.trim().length||(t.country_of_origin=e)}))}))},"customsEntryForm.regimeType"(e){this.invoiceDataArray.forEach((t=>{t.lines.forEach((t=>{const o=this.customsEntryForm.regimeTypeOptions.find((t=>t.regimeTypeId===e));o&&(t.cpcCode=o.cpcCodes[0].cpcId)}))}))},"customsEntryForm.waybillDate"(e){this.updateRates(e)},invoiceDataArray:{handler:function(e){this.customsEntryForm.ratesOfExchange.length>0&&e.forEach((e=>{this.$watch((()=>e.currency),(t=>{t&&(e.rate_of_exchange=this.customsEntryForm.ratesOfExchange.find((e=>e.base_currency===t)).rate)}),{deep:!0})}))},deep:!0,immediate:!0}},setup(){return{}},mounted(){this.packageTypeOptions=to(),this.updateEntryFields("marksAndNumbers","As Addressed"),this.getTotalNumberOfLines(),this.getRegimeTypes()},computed:{classificationStatus(){return 0===this.invoiceDataArray.length||this.thnCodesCompleted?zs.NOT_CLASSIFIED:zs.COMPLETED},thnCodesCompleted(){return this.invoiceDataArray.some((e=>e.lines.some((e=>!e.tariff_code||""===e.tariff_code.trim()))))},totalFOBValue(){return this.invoiceDataArray.reduce(((e,t)=>e+parseFloat(t.invoice_total)),0).toFixed(2)},entryButtonDisabled(){return!(this.hasInvoiceNumber||this.waybillNumber.trim().length>0||this.consignee.trim().length>0)},hasInvoiceNumber(){for(let e of this.invoiceDataArray)if(e.invoice_number&&e.invoice_number.trim().length>0)return console.log("Invoice Number Found"),!0;return!1},availableCPCCodes(){if(void 0!==this.customsEntryForm.regimeTypeCode&&null!==this.customsEntryForm.regimeTypeCode){const e=this.customsEntryForm.regimeTypeOptions.find((e=>e.regimeTypeCode===this.customsEntryForm.regimeTypeCode));return e?e.cpcCodes:[]}return this.customsEntryForm.regimeTypeOptions.flatMap((e=>e.cpcCodes))}},methods:{verifyInvoiceData:Zs,dataExtractionLoadingMessage(){this.invoicesDataExtractionCompleted&&this.waybillDataExtractionCompleted?($t(),Ut("Data Extraction Completed"),this.classificationCompleted||Bt("Classifying Invoice Items...")):this.invoicesDataExtractionCompleted&&!this.waybillDataExtractionCompleted?($t(),Bt("Invoice Data Read. Reading Waybill Data...")):!this.invoicesDataExtractionCompleted&&this.waybillDataExtractionCompleted&&($t(),Bt("Waybill Data Read. Reading Invoice Data..."))},triggerFileInput(e){console.log("Triggering File Input"),this.$refs[e].click()},updateTariffCode(e,t,o,a){if(this.updateItem(e,t,o,a),void 0===a||null===a||0===a.trim().length||"N/A"===a)return e.icdCharge=0,void(e.vatCharge=0);console.log("Fetching charges for: ",a),Oe(a.replace(/\./g,"")).then((o=>{let a=o.charges["import custom duty"];const r=void 0===a?0:parseFloat(a[0].charge_amount);let n=o.charges["value added tax"];const s=void 0===n?0:parseFloat(n[0].charge_amount);e.lines[t]["icdCharge"]=r,e.lines[t]["vatCharge"]=s,e.lines[t]["commodityCodeStatus"]="valid",e.lines[t]["commodity_description"]=o.description})).catch((t=>{console.error("Failed to get commodity charges:",t),e.commodityCodeStatus="invalid",e.icdCharge=0,e.vatCharge=0}))},updateRates(e){console.log("Updating Rates"),Le(e).then((e=>{console.log("Rates:",e),this.customsEntryForm.ratesOfExchange=e,this.invoiceDataArray.forEach((t=>{t.currency&&(console.log("Invoice Currency: ",t.currency),t.rate_of_exchange=e.find((e=>e.base_currency===t.currency)).rate)}))}))},setDefaults(){const e=this.customsEntryForm.regimeTypeOptions.find((e=>e.regimeTypeCode===a.defaultRegimeTypeCode));this.customsEntryForm.regimeType=e.regimeTypeId,console.log("Regime Data: ",e)},async getRegimeTypes(){be("TT").then((e=>{this.customsEntryForm.regimeTypeOptions=e;const t=e.find((e=>e.regimeTypeCode===oo().defaultRegimeType));this.customsEntryForm.regimeType=t.regimeTypeId}))},setInvoiceLineWorksheetData(){let e=[];return this.invoiceDataArray.forEach((t=>{t.lines.forEach((t=>{t.cpcCodeName=this.availableCPCCodes.find((e=>e.cpcId===t.cpcCode))?.code;const o=Oe(t.tariff_code.replace(/\./g,"")).then((e=>{let o=mt(e.charges);t.commodity={code:t.tariff_code.replace(/\./g,""),id:e.id,charges:o}}));e.push(o)}))})),Promise.all(e)},generateWorkSheet(){console.log("Generating WorkSheet"),this.setInvoiceLineWorksheetData();const e=lt(this.referenceNumber,"TT","Ramnarine Rampersad","BR0285",this.customsEntryForm.regimeTypeCode,this.customsEntryForm.importerName,this.customsEntryForm.importerTaxIdentificationNumber,this.customsEntryForm.exporterName,this.customsEntryForm.exporterTaxIdentificationNumber,this.customsEntryForm.vesselName,this.customsEntryForm.portOfDischargeName,this.customsEntryForm.depositAmount,this.customsEntryForm.containerCharges,this.customsEntryForm.additionalCharges,this.customsEntryForm.localFee),t=bt(this.invoiceDataArray,this.customsEntryForm.freightAmount,this.totalFOBValue);e.invoices=t,console.log("Worksheet Object: ",e),Te(e).then((e=>{$t(),Ut("Worksheet Generated Successfully!");const t=window.URL.createObjectURL(new Blob([e],{type:"application/pdf"})),o=document.createElement("a"),a=`Worksheet - ${this.entryDetails?.entry_number}.pdf`;o.href=t,o.setAttribute("download",a),document.body.appendChild(o),o.click(),o.remove()})).catch((e=>{console.error("Failed to generate worksheet:",e),Mt("Failed to generate worksheet!")}))},insertFullStops(e){return 11!==e.length?(console.log("The string must contain exactly 11 numbers.",e),""):e.slice(0,4)+"."+e.slice(4,6)+"."+e.slice(6,8)+"."+e.slice(8)},convertAWSData(e){return e.map((e=>e.map((e=>{const t=e.summary_fields,o=e.line_items.map((e=>{const t={product_code:"",quantity:"",unit_price:"",description:"",extension_price:"",tariff_code:""};return e.forEach((e=>{switch(e.field_type){case"PRODUCT_CODE":t.product_code=e.cell_data.text;break;case"QUANTITY":t.quantity=e.cell_data.text;break;case"UNIT_PRICE":t.unit_price=e.cell_data.text;break;case"ITEM":t.description=e.cell_data.text;break;case"PRICE":t.extension_price=e.cell_data.text;break;case"recommended_commodity_code":console.log("THN Code: ",e.code),tempitem.tariff_code=this.insertFullStops(e.code.toString());break}})),console.log("Item: ",e),console.log("Temp Item: ",t),t}));return{vendor_name:t.VENDOR_NAME,subtotal:t.SUBTOTAL,invoice_total:t.TOTAL,customer_name:t.RECEIVER_NAME,invoice_date:t.INVOICE_RECEIPT_DATE,invoice_number:t.INVOICE_RECEIPT_ID,lines:o}})))).flat()},formatInvoiceData(){const e=this.customsEntryForm.regimeTypeOptions.flatMap((e=>e.cpcCodes)),t=e.find((e=>e.code===oo().defaultCPCCode)).cpcId;console.log("Before Update",this.invoiceDataArray),this.renameInvoiceObjectKeys(),console.log("After Update",this.invoiceDataArray),console.log("All CPC Codes: ",e),console.log("Default CPC Code: ",t),this.invoiceDataArray.forEach((e=>{e.invoice_total=e.invoice_total?this.parseFloatFromString(e.invoice_total):e.invoice_exworks_amount?this.parseFloatFromString(e.invoice_exworks_amount):0,e.inland=e.invoice_internal_freight_amount?this.parseFloatFromString(e.invoice_internal_freight_amount):0,e.insurance=e.invoice_insurance_amount?this.parseFloatFromString(e.invoice_insurance_amount):0,e.otherCharges=e.invoice_other_charges_amount?this.parseFloatFromString(e.invoice_other_charges_amount):0,e.final_total=this.parseFloatFromString(e.final_total),e.invoice_number=e.invoice_id,console.log("Invoice Date: ",e.invoice_date),e.invoice_date=e.invoice_date?_t(Tt(e.invoice_date)):null,console.log("Invoice Date: ",e.invoice_date),e.currency="USD",void 0!==e.lines&&null!==e.lines&&e?.lines.forEach((e=>{e.country_of_origin="",e.quantity=this.parseFloatFromString(e.quantity),e.unit_price=this.parseFloatFromString(e.unit_price),e.extension_price=this.parseFloatFromString(e.amount).toFixed(2),e.vatApplicable=!0,e.cpcCode=t,e.npcCode="000"}))}))},renameInvoiceObjectKeys(){for(let e=0;e<this.invoiceDataArray.length;e++){let{invoice_items:t,...o}=this.invoiceDataArray[e];this.invoiceDataArray[e]={lines:t,...o}}},getTotalNumberOfLines(){let e=0;for(let t of this.invoiceDataArray)e+=t.lines?t.lines.length:0;this.totalNumberOfLines=e},calculateTotalCargoValue(){let e=0;for(let t of this.invoiceDataArray)e+=this.parseFloatFromString(t.invoice_total);this.customsEntryForm.totalCargoValue=e},validateIntegerInput(e){let t=e.target.innerText.trim();/^\d+$/.test(t)?this.editableContent=t:e.target.innerText=this.editableContent,this.moveCursorToEnd(e.target)},updateEntryFields(e,t){this[e]=t},selectOption(e){this.$refs.editableDiv.innerText=e,this.showModeofTransportDropdown=!1},verifyData(e){return void 0!==e&&null!==e&&""!==e},validateData(){return console.log("Importer ID: ",this.verifyData(this.customsEntryForm.importerId)),this.verifyData(this.customsEntryForm.importerId)?!!this.verifyData(this.customsEntryForm.exporterId)||(Mt("Please select an exporter"),!1):(Mt("Please select an importer"),!1)},async saveFiles(){console.log("Saving Files...");const e=new FormData;e.append("reference",this.referenceNumber),this.selectedFiles.forEach((t=>{e.append("files",t)}));let t=[Xe(e)];if(this.waybillFiles.length>0){const e=new FormData;e.append("reference",this.referenceNumber),this.waybillFiles.forEach((t=>{e.append("files",t)})),t.push(Xe(e))}return Promise.all(t).then((([e,t])=>{const o={invoiceFiles:e,waybillFiles:t&&t[0]&&t[0].fileUrl?t[0].fileUrl:""};return o})).catch((e=>{console.error("Failed to upload the files:",e)}))},async createInvoices(e){if(!this.validateData())return;const t={referenceNumber:this.referenceNumber,waybillNumber:this.customsEntryForm.waybillNumber,waybillDate:this.customsEntryForm.waybillDate,estimatedArrivalDate:this.customsEntryForm.estimatedArrivalDate,modeOfTransport:this.customsEntryForm.modeOfTransport,freightType:this.customsEntryForm.freightType,marksAndNumbers:this.customsEntryForm.marksAndNumbers,countryOfOrigin:this.customsEntryForm.countryOfOrigin,countryOfFinalDestination:this.customsEntryForm.countryOfFinalDestination,countryLastProvenance:this.customsEntryForm.countryLastProvinance,tradingCountry:this.customsEntryForm.tradingCountry,kindOfPackage:this.customsEntryForm.packageType,numberOfPackages:this.customsEntryForm.numberOfPackages,totalCargoValue:this.customsEntryForm.totalCargoValue,freightCharge:this.customsEntryForm.freightAmount??0,insuranceAmount:this.customsEntryForm.insuranceAmount??0,otherCharges:this.customsEntryForm.otherCharges??0,freightCurrency:this.customsEntryForm.freightCurrency,insuranceCurrency:this.customsEntryForm.insuranceCurrency,otherChargesCurrency:this.customsEntryForm.otherChargesCurrency,rateOfExchange:this.customsEntryForm.rateOfExchange,netWeight:this.customsEntryForm.netWeight,grossWeight:this.customsEntryForm.grossWeight,invoiceList:e,declarant:this.customsEntryForm.declarantId,incoTerms:this.customsEntryForm.incoTerms,importer:this.customsEntryForm.importerId,shipper:this.customsEntryForm.exporterId,vessel:this.customsEntryForm.vesselId,portOfDischarge:this.customsEntryForm.portOfDischargeId,regimeType:this.customsEntryForm.regimeType,deposit:this.customsEntryForm.depositAmount,containerCharges:this.customsEntryForm.containerCharges,additionalCharges:this.customsEntryForm.additionalCharges,localFee:this.customsEntryForm.localFee,entryType:Ys.STANDARD,classificationStatus:this.classificationStatus,classificationApproved:0,classificationApprovedBy:"",entryStatus:Hs.STORED_AND_NOT_CLASSIFIED};console.log("Entry Data 1: ",t);try{Wt("Saving your Entry..."),this.saveFiles().then((e=>{console.log("Files saved successfully:",e),t.files=e.invoiceFiles,t.waybillFiles=e.waybillFiles,K(t).then((e=>{console.log("Entry created successfully:",e);const t=this.selectedFiles.reduce(((e,t)=>e+t.size),0);this.saveInvoicePerformanceMetric(this.invoicingProcessingStart,this.invoicingProcessingEnd,this.totalNumberOfLines,this.invoiceDataArray.length,t,e.entryId),this.saveClassificationPerformanceMetric(this.classificationProcessingStart,this.classificationProcessingEnd,this.invoiceDataArray.length,this.totalNumberOfLines,e.entryId),this.redirectToEntryDetails(e.entryId),$t(),Ut("Entry created successfully")})).catch((e=>{console.error("Failed to create the Entry:",e),Mt("Failed to create the Entry. Please try again.")}))})).catch((e=>{console.error("Failed to save the files:",e),Mt("Failed to save the files. Please try again.")}))}catch(o){console.error("Failed to create the invoice:",o),Mt("Failed to create the Entry. Please try again.")}},redirectToEntryDetails(e){this.$router.push({name:"EntryDetails",params:{entryId:e}})},moveCursorToEnd(e){const t=document.createRange(),o=window.getSelection();t.selectNodeContents(e),t.collapse(!1),o.removeAllRanges(),o.addRange(t)},validateInput(){this.isValidReference=this.referenceNumber.trim().length>0},handleFileUpload(e){this.isValidReference&&(this.selectedFiles=Array.from(e.target.files),this.createFileUrl())},handleWaybillUpload(e){this.isValidReference&&(this.waybillFiles=Array.from(e.target.files))},createFileUrl(){for(let e of this.selectedFiles)if("application/pdf"===e.type){const t=URL.createObjectURL(e);this.pdfFiles.push({name:e.name,url:t})}else alert(`File "${e.name}" is not a valid PDF file.`)},async openWaybill(){if(0!==this.waybillFiles.length)try{const e=this.waybillFiles[0],t=await e.arrayBuffer(),o=new Blob([t],{type:"application/pdf"}),a=URL.createObjectURL(o),r=window.open("","_blank","width=800,height=600");r?(r.document.write(`<iframe src="${a}" style="width:100%; height:100%;" frameborder="0"></iframe>`),r.document.title="PDF Document"):console.error("Failed to open new window.")}catch(e){console.error("Error:",e),Mt("Failed to open PDF!")}else Mt("No waybills Uploaded")},async mergeAndOpenPDFs(){if(0!==this.selectedFiles.length)try{const e=await Promise.all(this.selectedFiles.map((async e=>{const t=await e.arrayBuffer();return Br.PDFDocument.load(t)}))),t=await Br.PDFDocument.create();for(const s of e){const e=await t.copyPages(s,s.getPageIndices());e.forEach((e=>t.addPage(e)))}const o=await t.save(),a=new Blob([o],{type:"application/pdf"}),r=URL.createObjectURL(a),n=window.open("","_blank","width=800,height=600");n?(n.document.write(`<iframe src="${r}" style="width:100%; height:100%;" frameborder="0"></iframe>`),n.document.title="Merged PDF"):console.error("Failed to open new window.")}catch(e){console.error("Error:",e)}else Mt("Please upload at least one file.")},dragOver(e){this.isValidReference&&(this.isDragOver=!0)},dragEnter(e){this.isValidReference&&(this.isDragOver=!0)},dragLeave(e){this.isValidReference&&(this.isDragOver=!1)},async saveClassificationPerformanceMetric(e,t,o,a,r){const n=(t-e)/1e3,s={entry_id:r,processing_start:e.toISOString(),processing_end:t.toISOString(),processing_time:n,number_of_invoices:o,number_of_lines:a};console.log("Classification Performance Metrics: ",s),await ze(s),console.log("Classification Performance Metrics saved successfully.")},async saveInvoicePerformanceMetric(e,t,o,a,r,n){const s=(t-e)/1e3,i={file:{size:r},entryId:n,processing_start:e.toISOString(),processing_end:t.toISOString(),processing_time:s,number_of_lines:o,number_of_invoices:a,status:"success",error_message:null,model_utlized:this.invoiceModelUtilized};console.log("Invoice AI Performance Metrics: ",i),await Ye(i),console.log("Invoice AI Performance Metrics saved successfully.")},readWaybillModelClaude(){const e=new FormData;this.waybillFiles.forEach((t=>{e.append("waybill",t)})),Qe(e).then((e=>{this.waybillDataExtractionCompleted=!0,this.dataExtractionLoadingMessage();const t=e[0];console.log("Waybill Data",t),this.customsEntryForm.waybillNumber=t.waybill_number,this.customsEntryForm.numberOfPackages=this.parseFloatFromString(t.number_of_packages),this.customsEntryForm.modeOfTransport=t.mode_of_transport;const o=xt(t.consignee_name,this.customsEntryForm.importers);console.log("Selected Importer",o),this.customsEntryForm.importerId=o.id;const a=xt(t.shipper_name,this.customsEntryForm.exporters);console.log("Selected Exporter",a),this.customsEntryForm.exporterId=a.id;const r=xt(t.vessel_name,this.customsEntryForm.vessels);console.log("Selected Vessel",r),this.customsEntryForm.vesselId=r.id;const n=xt(t.port_of_discharge,this.customsEntryForm.ports);console.log("Selected Port",n),this.customsEntryForm.portOfDischargeId=n.id;const s=t.shipment_date;try{const e=Tt(s);this.customsEntryForm.waybillDate=St(e)}catch(i){console.error("Failed to parse date",i)}if(void 0!==t.total_amount&&null!==t.total_amount&&t.total_amount.trim().length>0){const e=At(t.total_amount);this.customsEntryForm.freightAmount=e}if(void 0!==t.gross_weight&&null!==t.gross_weight&&(this.customsEntryForm.grossWeight=this.parseFloatFromString(t.gross_weight)),void 0!==t.package_type&&null!==t.package_type){const e=xt(t.package_type,this.customsEntryForm.packageTypes,"text");console.log("Selected Package Type",e),this.customsEntryForm.packageType=e.value}if(void 0!==t.country_of_origin&&null!==t.country_of_origin&&(this.customsEntryForm.countryOfOrigin=t.country_of_origin),void 0!==t.freight_type&&null!==t.freight_type){const e=this.customsEntryForm.modeOfTransportOOptions.flatMap((e=>e.freightTypes.map((e=>({name:e.name})))));console.log("All Freight Types",e),console.log("Waybill Freight Type",t.freight_type);const o=xt(t.freight_type,e);console.log("Selected Freight Type",o),this.customsEntryForm.freightType=o.name}})).catch((e=>{console.error("Failed to read waybill model",e),Mt("Failed to read waybill model. Please try again.")}))},readWaybillModel(){const e=new FormData;this.waybillFiles.forEach((t=>{e.append("files",t)})),Ke(e).then((e=>{this.waybillDataExtractionCompleted=!0,this.dataExtractionLoadingMessage();const t=e[0];console.log("Waybill Data",t),this.customsEntryForm.waybillNumber=t.waybill_number,this.customsEntryForm.numberOfPackages=this.parseFloatFromString(t.number_of_packages),this.customsEntryForm.modeOfTransport=t.mode_of_transport;const o=xt(t.consignee,this.customsEntryForm.importers);console.log("Selected Importer",o),this.customsEntryForm.importerId=o.id;const a=xt(t.exporter,this.customsEntryForm.exporters);console.log("Selected Exporter",a),this.customsEntryForm.exporterId=a.id;const r=xt(t.vessel,this.customsEntryForm.vessels);console.log("Selected Vessel",r),this.customsEntryForm.vesselId=r.id;const n=xt(t.port_of_discharge,this.customsEntryForm.ports);console.log("Selected Port",n),this.customsEntryForm.portOfDischargeId=n.id;const s=t.shipped_on_board_date;try{const e=Tt(s);this.customsEntryForm.waybillDate=St(e)}catch(i){console.error("Failed to parse date",i)}if(void 0!==t.freight_charges&&null!==t.freight_charges&&t.freight_charges.trim().length>0){const e=At(t.freight_charges);this.customsEntryForm.freightAmount=e}if(void 0!==t.gross_weight_in_kgs&&null!==t.gross_weight_in_kgs&&(this.customsEntryForm.grossWeight=this.parseFloatFromString(t.gross_weight_in_kgs)),void 0!==t.package_type&&null!==t.package_type){const e=xt(t.package_type,this.customsEntryForm.packageTypes,"text");console.log("Selected Package Type",e),this.customsEntryForm.packageType=e.value}})).catch((e=>{console.error("Failed to read waybill model",e),Mt("Failed to read waybill model. Please try again.")}))},async uploadInvoicesAndWaybills(e="https://gabrielle-flask.azurewebsites.net/read_vendor_invoice_optimized",t=Ks.MICROSOFT_FORM_RECOGNIZER){this.isValidReference&&0!==this.selectedFiles.length?(Wt("Verifying Reference Number..."),qe(this.referenceNumber).then((o=>{if(!1===o)return $t(),void Mt(`Reference Number ${this.referenceNumber} Already Exists. Please enter a new reference number.`);$t(),Wt("Reading your invoice and Waybill"),this.invoiceModelUtilized=t,this.uploadFilesMicrosoft(e),this.waybillFiles.length>0?this.readWaybillModelClaude():(console.log("No Waybill Files"),this.waybillDataExtractionCompleted=!0)}))):Mt("Please enter a valid reference number and select files before uploading.")},transformArray(e){return Array.isArray(e)&&Array.isArray(e[0])?e.flat():e},async compressFile(e){return new Promise(((t,o)=>{const a=new FileReader;a.onload=o=>{const a=new Uint8Array(o.target.result),r=pako.deflate(a),n=r.buffer,s=new Blob([n],{type:e.type}),i=new Blob([s],{type:e.type});console.log("Original file size:",e.size,"bytes"),console.log("Compressed file size:",i.size,"bytes");const l=(e.size-i.size)/e.size*100;console.log("Percentage decrease in file size:",l.toFixed(2),"%");const c=document.createElement("a");c.href=URL.createObjectURL(i),c.download=`compressed_${e.name}`,document.body.appendChild(c),c.click(),document.body.removeChild(c),t(i)},a.onerror=o,a.readAsArrayBuffer(e)}))},async uploadFilesMicrosoft(e){console.log("Uploading Files",e);const t=new FormData;t.append("reference",this.referenceNumber);for(const o of this.selectedFiles)t.append("files",o),t.append("commercialInvoice",o);console.log("Form Data: ",t),this.invoicingProcessingStart=new Date,fetch(e,{method:"POST",body:t}).then((e=>e.json())).then((async e=>{if(this.invoicingProcessingEnd=new Date,this.invoicesDataExtractionCompleted=!0,gt(e)){console.log("Discount Detected. Please review the invoice data."),$t();const e=await Yt();console.log("Discount Result: ",e)}this.dataExtractionLoadingMessage(),console.log("Success:",e),this.invoiceDataArray=this.transformArray(e),this.invoiceDataArray=this.invoiceDataArray.filter((e=>e.invoice_items&&Array.isArray(e.invoice_items))),console.log("Filtered Invoice Data: ",this.invoiceDataArray),this.formatInvoiceData(),console.log("Invoice Data: ",this.invoiceDataArray),this.calculateTotalCargoValue(),this.getTotalNumberOfLines(),this.invoicesDataExtractionCompleted&&this.waybillDataExtractionCompleted&&Bt("Classifying Invoice Items..."),this.classificationProcessingStart=new Date,await this.classifyItemsWithHistory(),this.classifyInvoiceItems().then((e=>{this.classificationCompleted=!0,$t(),this.classificationProcessingEnd=new Date,console.log("Commodity Code: ",e),Ut("Invoice data read and classified."),this.calculateTotalCargoValue(),this.getTotalNumberOfLines()}))})).catch((e=>{console.error("Error:",e),this.invoiceDataArray=[]}))},uploadFiles(){this.isValidReference&&0!==this.selectedFiles.length?qe(this.referenceNumber).then((e=>{if(!1===e)return $t(),void Mt(`Reference Number ${this.referenceNumber} Already Exists. Please enter a new reference number.`);$t();const t=new FormData;t.append("reference",this.referenceNumber),this.selectedFiles.forEach((e=>{t.append("commercialInvoice",e)})),Wt("Reading your invoice..."),fetch("https://mawi-updraded-api.wonderfulflower-f4234c00.eastus.azurecontainerapps.io/analyze-document",{method:"POST",body:t}).then((e=>e.json())).then((e=>{console.log("Success:",e),this.invoiceDataArray=this.convertAWSData(e),this.formatInvoiceData(),$t(),Ut("Invoice data read successfully."),this.calculateTotalCargoValue(),this.getTotalNumberOfLines()})).catch((e=>{console.error("Error:",e),this.invoiceDataArray=[]}))})):alert("Please enter a valid reference number and select files before uploading.")},removeUnsafeCharacters(e){const t=/^[a-zA-Z0-9-_.~ ]*$/;return Array.from(e).filter((e=>t.test(e))).join("")},async classifyInvoiceItems(){console.log("Classifying Invoice Items"),console.log("Invoice Data Array: ",this.invoiceDataArray);const e=this.invoiceDataArray.flatMap((e=>{let t=e.lines.filter((e=>!e.tariff_code)).map((e=>({description:e.classification_description||e.description||"",commodity_code:e.commodity_code||"",product_number:e.product_number||""})));const o=20,a=[];for(let r=0;r<t.length;r+=o)a.push([t.slice(r,r+o)]);return a}));if(0===e.length)return console.log("No descriptions to classify."),[];const t=[];for(const o of e){console.log("Chunk: ",o);const e=await $e(o);t.push(...e),this.processCommodityCodes(e[0])}return t},async classifyItemsWithHistory(){const e=this.invoiceDataArray.flatMap((e=>e.lines.map((t=>({description:t.description||"",supplier_name:e.vendor_name||"",product_number:t.product_code||""})))));return console.log("History Descriptions: ",e),et(e).then((e=>{console.log("Commodity Codes from history: ",e),this.processCommodityCodes(e)})).catch((e=>{console.error("Failed to classify items with history: ",e)}))},processCommodityCodes(e){e.forEach((e=>{this.invoiceDataArray.forEach((t=>{t.lines.forEach(((o,a)=>{if((e.description===`${o?.classification_description}`||e.description===`${o.description}`)&&void 0!==e.classification_model_suggested_code&&null!==e.classification_model_suggested_code){o.tariff_code=this.insertFullStops(e.classification_model_suggested_code.toString());const r={llm_recommended_classification_code:o.tariff_code,approved_classification_code:""};o.performanceMetric=r,this.updateTariffCode(t,a,"tariff_code",o.tariff_code)}}))}))}))},updateItem(e,t,o,a){e.lines[t][o]=a},parseFloatFromString(e){if(!e||void 0===e||null===e)return 0;if("number"===typeof e)return e;let t=e.replace(/[^0-9.]/g,""),o=parseFloat(t);return o}},beforeUnmount(){this.pdfFiles.forEach((e=>URL.revokeObjectURL(e.url)))}};function Zs(){this.displayDocumentVerificationView=!this.displayDocumentVerificationView}const ei=(0,E.A)(Qs,[["render",q]]);var ti=ei;const oi=(0,n.Lk)("h1",null,"Entries",-1),ai={class:"table table-bordered"},ri=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Entry #"),(0,n.Lk)("th",null,"Consignee"),(0,n.Lk)("th",null,"Invoice Number"),(0,n.Lk)("th",null,"Waybill Number"),(0,n.Lk)("th",null,"Classififcation Status"),(0,n.Lk)("th",null,"Actions")])],-1),ni=["onClick"],si={key:0,class:"error-message"};function ii(e,t,o,a,s,i){return(0,n.uX)(),(0,n.CE)("div",null,[oi,(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>s.searchTerm=e),placeholder:"Search entries"},null,512),[[r.Jo,s.searchTerm]]),(0,n.Lk)("table",ai,[ri,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.filteredEntries,(e=>((0,n.uX)(),(0,n.CE)("tr",{key:e.entry_id},[(0,n.Lk)("td",null,(0,T.v_)(e.entry_number),1),(0,n.Lk)("td",null,(0,T.v_)(e.importerName),1),(0,n.Lk)("td",null,(0,T.v_)(e.invoice_number?e.invoice_number.split("; ")[0]:""),1),(0,n.Lk)("td",null,(0,T.v_)(e.waybill_number),1),(0,n.Lk)("td",null,[(0,n.Lk)("h5",null,[(0,n.Lk)("span",{class:(0,T.C4)({"badge bg-success":"Classififcation Approved"===i.getStatusText(e.classification_approved),"badge bg-warning text-dark":"Not Classified"===i.getStatusText(e.classification_approved)})},(0,T.v_)(i.getStatusText(e.classification_approved)),3)])]),(0,n.Lk)("td",null,[(0,n.Lk)("button",{type:"button",class:"btn btn-success",onClick:t=>i.openEntry(e.entry_id,e.entry_type)},"Edit",8,ni)])])))),128))])]),s.error?((0,n.uX)(),(0,n.CE)("div",si,(0,T.v_)(s.error),1)):(0,n.Q3)("",!0)])}var li={data(){return{entries:[],error:null,searchTerm:""}},created(){this.fetchEntries()},methods:{getStatusText(e){return e?zs.APPROVED:zs.NOT_CLASSIFIED},openEntry(e,t){t&&t===Ys.VEHICLES?this.$router.push({name:"VehicleEntryEditPage",params:{entryId:e}}):this.$router.push({name:"EntryDetails",params:{entryId:e}})},async fetchEntries(){try{const e=await J.A.get("https://mawifrontentcontainerapp.whitestone-99c262a0.eastus.azurecontainerapps.io/api/entries/STORED_AND_NOT_CLASSIFIED");this.entries=e.data}catch(e){this.error=e.message,console.error("There was an error!",e)}}},computed:{filteredEntries(){if(!this.searchTerm)return this.entries;const e=this.searchTerm.toLowerCase();return this.entries.filter((t=>t.entry_number&&t.entry_number.toString().toLowerCase().includes(e)||t.waybill_number&&t.waybill_number.toString().toLowerCase().includes(e)||t.invoice_number&&t.invoice_number.split("; ").some((t=>t.toLowerCase().includes(e)))||t.consignee&&t.consignee.toString().toLowerCase().includes(e)))}}};const ci=(0,E.A)(li,[["render",ii]]);var di=ci;const ui={key:0},mi={class:"page-header-info-container"},hi={class:"badge-container"},pi={key:1},yi=(0,n.Lk)("h1",null,"Entry Details",-1),gi={key:0},fi=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Number of Lines Read"),(0,n.Lk)("th",null,"Total Invoices Value")])],-1),vi=["disabled"],bi=["disabled"],ki=["disabled"],_i=["disabled"],Ci=["disabled"],Di={key:0};function Li(e,t,o,a,r,s){const i=(0,n.g2)("VerifyDocumentData"),l=(0,n.g2)("CustomsEntryForm"),c=(0,n.g2)("DocumentTableView");return r.dataRetrieved?((0,n.uX)(),(0,n.CE)("div",ui,[(0,n.Lk)("div",mi,[(0,n.Lk)("div",null,[(0,n.Lk)("button",{type:"button",class:"btn btn-primary upload-button",onClick:t[0]||(t[0]=(...e)=>s.verifyInvoiceData&&s.verifyInvoiceData(...e))}," Invoice Split Screen "),(0,n.Lk)("button",{type:"button",class:"btn btn-primary upload-button",onClick:t[1]||(t[1]=(...e)=>s.mergeAndOpenPDFs&&s.mergeAndOpenPDFs(...e))}," Open Invoices "),(0,n.Lk)("button",{type:"button",class:"btn btn-primary upload-button",onClick:t[2]||(t[2]=(...e)=>s.openWaybill&&s.openWaybill(...e))}," Open Waybill ")]),(0,n.Lk)("div",null,[(0,n.Lk)("div",hi,[(0,n.Lk)("h3",null,[(0,n.Lk)("span",{class:(0,T.C4)(["badge",{"bg-success":"Classification Completed"===s.classificationStatus,"bg-warning text-dark":"Classification In Progress"===s.classificationStatus,"bg-danger":"Not Classified"===s.classificationStatus},"fixed-badge"])},(0,T.v_)(this.classificationStatus),3)])])])]),r.displayDocumentVerificationView?((0,n.uX)(),(0,n.Wv)(i,{key:0,invoices:r.commercialInvoices,customsEntryForm:r.customsEntryForm,pdfFiles:r.invoiceDocumentSourceURLs},null,8,["invoices","customsEntryForm","pdfFiles"])):(0,n.Q3)("",!0),r.displayDocumentVerificationView?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",pi,[yi,(0,n.Lk)("h2",null,"Reference Number: "+(0,T.v_)(this.entryDetails?.entry_number),1),(0,n.bF)(l,{ref:"myCustomsForm",customsEntryForm:r.customsEntryForm,onUpdateCustomsEntryForm:t[3]||(t[3]=e=>r.customsEntryForm=e)},null,8,["customsEntryForm"]),r.dataRetrieved?((0,n.uX)(),(0,n.CE)("div",gi,[(0,n.bF)(c,{invoiceDataArray:r.commercialInvoices,customsEntryForm:r.customsEntryForm,documentVerificationFormat:!1,linesToBeDeleted:r.linesToBeDeleted,linesToBeAdded:r.linesToBeAdded,invoicesToBeAdded:r.invoicesToBeAdded},null,8,["invoiceDataArray","customsEntryForm","linesToBeDeleted","linesToBeAdded","invoicesToBeAdded"]),(0,n.Lk)("div",null,[(0,n.Lk)("table",null,[fi,(0,n.Lk)("tbody",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("td",null,(0,T.v_)(this.totalNumberOfLines),1),(0,n.Lk)("td",null,(0,T.v_)(this.totalFOBValue),1)])])]),(0,n.Lk)("table",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("td",null,[(0,n.Lk)("button",{type:"button",class:"btn btn-success",disabled:s.isGenerateCsvDisabled,onClick:t[4]||(t[4]=(...e)=>s.generateAsycudaXML&&s.generateAsycudaXML(...e))}," Generate Asycuda XML ",8,vi)]),(0,n.Lk)("td",null,[(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[5]||(t[5]=(...e)=>s.saveData&&s.saveData(...e))},"Save Entry")]),(0,n.Lk)("td",null,[(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[6]||(t[6]=e=>s.goToCustomsDeclarationPage(this.entryId))}," Generate Valuation Form ")]),(0,n.Lk)("td",null,[(0,n.Lk)("button",{type:"button",class:"btn btn-primary",disabled:s.isGenerateCsvDisabled,onClick:t[7]||(t[7]=(...e)=>s.generateWorkSheet&&s.generateWorkSheet(...e))}," Generate Worksheet ",8,bi)]),(0,n.Lk)("td",null,[(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[8]||(t[8]=(...e)=>s.generateDepositForm&&s.generateDepositForm(...e))}," Generate Deposit Form ")])]),(0,n.Lk)("tr",null,[(0,n.Lk)("td",null,[(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[9]||(t[9]=(...e)=>s.generateCARICOM&&s.generateCARICOM(...e))}," Generate CARICOM Invoice ")]),(0,n.Lk)("td",null,["Not Classified"===s.classificationStatus||"STORED_AND_NOT_CLASSIFIED"===r.entryStatus?((0,n.uX)(),(0,n.CE)("button",{key:0,type:"button",class:"btn btn-primary",disabled:s.isGenerateCsvDisabled,onClick:t[10]||(t[10]=(...e)=>s.approveClassification&&s.approveClassification(...e))}," Approve Classification ",8,ki)):(0,n.Q3)("",!0),"CLASSIFICATION_OKAY"===r.entryStatus?((0,n.uX)(),(0,n.CE)("button",{key:1,type:"button",class:"btn btn-primary",disabled:s.isGenerateCsvDisabled,onClick:t[11]||(t[11]=(...e)=>s.partialStorage&&s.partialStorage(...e))}," Partial Storage ",8,_i)):(0,n.Q3)("",!0),"PARTIAL_STORAGE"===r.entryStatus?((0,n.uX)(),(0,n.CE)("button",{key:2,type:"button",class:"btn btn-primary",disabled:s.isGenerateCsvDisabled,onClick:t[12]||(t[12]=(...e)=>s.fullStorage&&s.fullStorage(...e))}," Full Storage ",8,Ci)):(0,n.Q3)("",!0)]),(0,n.Lk)("td",null,[(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[13]||(t[13]=(...e)=>s.generateBreakdownSheet&&s.generateBreakdownSheet(...e))}," Generate Breakdown Sheet ")]),(0,n.Lk)("td",null,[(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[14]||(t[14]=(...e)=>s.generateTTC84&&s.generateTTC84(...e))}," Generate Special Exemption ")]),(0,n.Lk)("td",null,[(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[15]||(t[15]=(...e)=>s.generateOvertimeForm&&s.generateOvertimeForm(...e))}," Generate Overtime Form ")]),"Export"===s.typeOfDeclaration?((0,n.uX)(),(0,n.CE)("td",Di,[(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[16]||(t[16]=e=>s.generateScoonerBL())}," Generate Scooner BL ")])):(0,n.Q3)("",!0)])])])])):(0,n.Q3)("",!0)]))])):(0,n.Q3)("",!0)}var Ei=o(2830),Fi=o.n(Ei),Ii={name:"EntryDetails",components:{CustomsEntryForm:Js,DocumentTableView:Dr,VerifyDocumentData:Fr},props:{entryId:{type:[String,Number],required:!0}},watch:{totalFOBValue(e){this.customsEntryForm.totalCargoValue=e},"customsEntryForm.waybillDate"(e){this.updateRates(e)},"customsEntryForm.countryOfOrigin"(e){this.commercialInvoices.forEach((t=>{t.lines.forEach((t=>{t.country_of_origin&&0!==t.country_of_origin.trim().length||(t.country_of_origin=e)}))}))},"customsEntryForm.regimeType"(e){this.commercialInvoices.forEach((t=>{t.lines.forEach((t=>{const o=this.customsEntryForm.regimeTypeOptions.find((t=>t.regimeTypeId===e));o&&(t.cpcCode=o.cpcCodes[0].cpcId)}))}))},commercialInvoices:{handler:function(e){this.customsEntryForm.ratesOfExchange.length>0&&e.forEach((e=>{this.$watch((()=>e.currency),(t=>{t&&(e.rate_of_exchange=this.customsEntryForm.ratesOfExchange.find((e=>e.base_currency===t)).rate)}),{deep:!0,immediate:!0})}))},deep:!0,immediate:!0}},computed:{typeOfDeclaration(){const e=void 0==this.customsEntryForm.regimeType?"":this.customsEntryForm.regimeTypeCode?.slice(0,2);return"EX"===e?"Export":"Import"},totalFOBValue(){return this.commercialInvoices.reduce(((e,t)=>e+parseFloat(t.invoice_total)),0).toFixed(2)},toalInsuranceValue(){return this.commercialInvoices.reduce(((e,t)=>e+parseFloat(t.insurance)),0).toFixed(2)},totalInlandValue(){return this.commercialInvoices.reduce(((e,t)=>e+parseFloat(t.inland)),0).toFixed(2)},totalOtherChargesValue(){return this.commercialInvoices.reduce(((e,t)=>e+parseFloat(t.otherCharges)),0).toFixed(2)},netInvoicePrice(){return parseFloat(this.totalFOBValue)+parseFloat(this.toalInsuranceValue)+parseFloat(this.totalInlandValue)+parseFloat(this.totalOtherChargesValue)},formattedDate:{get(){const e=new Date(this.entryDetails.waybill_date);return e.toISOString().split("T")[0]},set(e){this.entryDetails.waybill_date=e}},isGenerateCsvDisabled(){return this.commercialInvoices.some((e=>e.lines.some((e=>!e.tariff_code||""===e.tariff_code.trim()))))},classificationStatus(){const e=Et(this.commercialInvoices)?zs.NOT_CLASSIFIED:zs.COMPLETED;return!1===e?zs.NOT_CLASSIFIED:1===this.classificationApproved?zs.APPROVED:zs.NOT_CLASSIFIED},availableCPCCodes(){if(void 0!==this.customsEntryForm.regimeTypeCode&&null!==this.customsEntryForm.regimeTypeCode){const e=this.customsEntryForm.regimeTypeOptions.find((e=>e.regimeTypeCode===this.customsEntryForm.regimeTypeCode));return e?e.cpcCodes:[]}return this.customsEntryForm.regimeTypeOptions.flatMap((e=>e.cpcCodes))}},data(){return{invoiceDocumentSourceURLs:[],displayDocumentVerificationView:!1,entryDetails:null,waybill:{},waybillSourceURL:"",entry:{},entryStatus:"",commercialInvoices:[],linesToBeDeleted:[],linesToBeAdded:[],invoicesToBeAdded:[],dataRetrieved:!1,loading:!1,error:null,countries:[],totalNumberOfLines:0,modeOfTransportOOptions:["Air","Ocean"],freightTypeOptions:["FCL","LCL","Bulk","Break Bulk"],packageTypeOptions:[],currencies:[],tradeAgreements:[],classificationApprovedBy:"",dateClassified:"",expandedIndex:null,classificationApproved:0,customsEntryForm:{exporters:[],importers:[],vessels:[],ports:[],declarants:[],incotermsList:[],ratesOfExchange:[],importerId:"",exporterId:"",importerName:"",exporterName:"",importerTaxIdentificationNumber:"",exporterTaxIdentificationNumber:"",exporterCountry:"",declarantId:"",declarantTaxIdentificationNumber:"",modeOfTransport:"",freightType:"",waybillNumber:"",waybillDate:"",estimatedArrivalDate:"",vesselId:"",vesselName:"",incoTerms:"",portOfDischargeId:"",portOfDischargeName:"",netWeight:0,grossWeight:0,numberOfPackages:0,packageType:"",packageTypes:[],marksAndNumbers:"As Addressed",freightCurrency:"USD",insuranceCurrency:"USD",otherChargesCurrency:"USD",totalCargoValue:0,freightAmount:0,insuranceAmount:0,otherCharges:0,insuranceRateOfExchange:0,otherChargesRateOfExchange:0,freightRateOfExchange:0,rateOfExchange:0,regimeType:"",regimeTypeCode:"",regimeTypeOptions:[],depositAmount:0,containerCharges:0,additionalCharges:0,localFee:0,countryOfOrigin:"",countryOfFinalDestination:"TT",countryLastProvinance:"",tradingCountry:""},manualExemptionApplied:!1}},mounted(){this.fetchAllDetails(),this.fetchCountries(),this.packageTypeOptions=to(),this.currencies=ja(),this.fetchTradeAgreements()},methods:{verifyInvoiceData:xi,async generateBreakdownSheet(){console.log("Generating Breakdown Sheet"),console.log("Commercial Invoices: ",this.commercialInvoices);const e=this.commercialInvoices.map((e=>{const t=parseFloat(e.inland)||0,o=parseFloat(e.insurance)||0,a=parseFloat(e.otherCharges)||0,r=parseFloat(e.invoice_total)||0,n=t+o+a+r;return{invoiceNumber:`${e.invoice_number} - ${e.vendor_name}`,otherCharges:a,insurance:o,inlandFreight:t,baseAmount:r,total:n}})),t=this.customsEntryForm.importerName,o={customerName:t,referenceNumber:this.entryDetails.entry_number,invoices:e};Wt("Generating Breakdown Sheet..."),ot(o).then((e=>{$t(),Ut("Breakdown Sheet Generated Successfully!");const t=window.URL.createObjectURL(new Blob([e],{type:"application/pdf"})),o=document.createElement("a"),a=`Breakdown Sheet - ${this.entryDetails.entry_number}.xlsx`;o.href=t,o.setAttribute("download",a),document.body.appendChild(o),o.click(),o.remove()})).catch((e=>{console.error("Failed to generate Breakdown Sheet:",e),Mt("Failed to generate Breakdown Sheet!")}))},async saveCommodityCodeAccuracyPerformanceMetrics(){console.log("Saving Classification Accuracy Performance Metrics");const e=[];this.commercialInvoices.forEach((t=>{t.lines.forEach((t=>{e.push({invoice_line_id:t.invoice_line_id,approved_classification_code:t.tariff_code})}))}));const t={metrics:e};return console.log("Classification Accuracy Request Data: ",t),Ze(t)},generateScoonerBL(){Zt().then((e=>{console.log("Scooner BL Response: ",e);const t=this.countries.find((e=>e.code===this.customsEntryForm.countryOfFinalDestination))?.name,o=`${this.customsEntryForm.grossWeight.toLocaleString("en-US")} KGS`,a=this.commercialInvoices.flatMap((e=>e.lines.map((e=>({quantity:e.quantity,description:e.description,packageType:"."})))));a[0].packageType="px";const r=wt(this.customsEntryForm.exporterName,this.customsEntryForm.importerName,this.customsEntryForm.marksAndNumbers,this.customsEntryForm.vesselName,t,a,e.freightPayableAt.toUpperCase(),o,e.portOfDischarge,this.entryDetails?.entry_number);console.log("Scooner BL Details: ",r),Wt("Generating Scooner BL..."),Pe(r).then((e=>{$t(),Ut("Scooner BL Generated Successfully!");const t=window.URL.createObjectURL(new Blob([e],{type:"application/pdf"})),o=document.createElement("a"),a=`Scooner BL - ${this.entryDetails?.entry_number}.pdf`;o.href=t,o.setAttribute("download",a),document.body.appendChild(o),o.click(),o.remove()})).catch((e=>{console.error("Failed to generate Scooner BL:",e),Mt("Failed to generate Scooner BL!")}))}))},checkMandatoryData(){if(console.log("Checking Mandatory Data"),""===this.customsEntryForm.importerId||""===this.customsEntryForm.exporterId)return Mt("Please fill in all mandatory fields before proceeding!"),!1;if(!1===this.checkAllCPCCodes())return Mt("Please ensure all CPC Codes are filled in before proceeding!"),!1;if(!1===this.checkAllNPCCodes())return Mt("Please ensure all NPC Codes are filled in before proceeding!"),!1;const e=void 0==this.customsEntryForm.regimeType?"":this.customsEntryForm.regimeTypeCode?.slice(0,2);return console.log("Type of Declaration: ",e),console.log("Arrival Date: ",this.customsEntryForm.estimatedArrivalDate),"IM"!==e||void 0!==this.customsEntryForm.estimatedArrivalDate&&0!==this.customsEntryForm.estimatedArrivalDate.trim().length||(Mt("Missing Arrival Date! Please Update Entry Details!"),!1)},checkAllCPCCodes(){let e=!0;return this.commercialInvoices.forEach((t=>{t.lines.forEach((t=>{console.log("Line: ",t),""!==t.cpcCode&&"N/A"!==t.cpcCode&&null!==t.cpcCode&&void 0!==t.cpcCode||(e=!1)}))})),e},checkAllNPCCodes(){let e=!0;return this.commercialInvoices.forEach((t=>{t.lines.forEach((t=>{""!==t.npcCode&&"N/A"!==t.npcCode&&null!==t.npcCode&&void 0!==t.npcCode&&""!==t.npcCode.trim()||(e=!1)}))})),e},setToPartialStorage(){this.entryStatus="PARTIAL_STORAGE",this.saveData()},setToFullStorage(){this.entryStatus="FULL_STORAGE",this.saveData()},mergeAndOpenPDFs:Si,openWaybill:Ti,fetchTradeAgreements(){Je().then((e=>{this.tradeAgreements=e}))},displayRatesTable(){if(void 0===this.customsEntryForm.waybillDate||null===this.customsEntryForm.waybillDate||0===this.customsEntryForm.waybillDate.trim().length)return void Mt("Please Enter a valid Waybill Date to get rates of Exchange!");0===this.customsEntryForm.ratesOfExchange.length&&this.updateRates(this.customsEntryForm.waybillDate);const e=[this.customsEntryForm.freightCurrency,this.customsEntryForm.insuranceCurrency,this.customsEntryForm.otherChargesCurrency],t=this.customsEntryForm.ratesOfExchange.filter((t=>e.includes(t.base_currency)));Kt(t)},updateRates(e){console.log("Updating Rates",e),Le(e).then((e=>{console.log("Rates:",e),this.customsEntryForm.ratesOfExchange=e,this.commercialInvoices.forEach((t=>{t.currency&&e.length>0&&(console.log("Invoice Currency: ",t.currency),t.rate_of_exchange=e.find((e=>e.base_currency===t.currency)).rate)}))}))},verifyClassificationCodes(){let e=!1;return this.commercialInvoices.forEach((t=>{t.lines.forEach((t=>{console.log("Line: ",t.commodityCodeStatus),"invalid"===t.commodityCodeStatus&&(Mt(`The following commodity code does not exist on Asycuda - ${t.tariff_code}. Please update this and try again.`),e=!0)}))})),!e},partialStorage(){this.entryStatus=Hs.PARTIAL_STORAGE,this.saveData()},fullStorage(){this.entryStatus=Hs.FULL_STORAGE,this.saveData()},approveClassification(){this.verifyClassificationCodes()&&(console.log("Approving Classification"),Jt().then((e=>{if("CANCELED"===e)return void console.log("Operation Cancelled");const t=new Date,o=e;console.log("Name: ",o),this.classificationApprovedBy=o,this.classificationApproved=1,this.entryStatus=Hs.CLASSIFICATION_OKAY,this.dateClassified=t.toISOString(),this.saveCommodityCodeAccuracyPerformanceMetrics(),this.saveData()})))},inializeTaxes(){this.commercialInvoices.forEach((e=>{e.lines.forEach((e=>{void 0!==e.tariff_code&&null!==e.tariff_code&&e.tariff_code.trim().length>0&&"N/A"!==e&&this.updateTariffCode(e,"tariff_code",e.tariff_code)}))}))},updateTariffCode(e,t,o){if(this.updateInvoiceData(e,t,o),void 0===o||null===o||0===o.trim().length||"N/A"===o)return e.icdCharge=0,void(e.vatCharge=0);Oe(o.replace(/\./g,"")).then((t=>{let o=t.charges["import custom duty"];const a=void 0===o?0:parseFloat(o[0].charge_amount);let r=t.charges["value added tax"];const n=void 0===r?0:parseFloat(r[0].charge_amount);e.icdCharge=a,e.vatCharge=n,e.commodityCodeStatus="valid",e.applicableTaxes=t.charges,e.commodity_description=t.description})).catch((t=>{console.error("Failed to get commodity charges:",t),e.commodityCodeStatus="invalid",e.icdCharge=0,e.vatCharge=0}))},setInvoiceLineWorksheetData(){let e=[];return this.commercialInvoices.forEach((t=>{t.lines.forEach((t=>{t.cpcCodeName=this.availableCPCCodes.find((e=>e.cpcId===t.cpcCode))?.code,t.tradeAgreementCode=this.tradeAgreements.find((e=>e.id===t.tradeAgreement))?.code;const o=Oe(t.tariff_code.replace(/\./g,"")).then((e=>{let o=mt(e.charges,t.vatApplicable);t.commodity={code:t.tariff_code.replace(/\./g,""),id:e.id,charges:o},void 0!==t.manualExemption&&null!==t.manualExemption&&!0===t.manualExemption&&(this.manualExemptionApplied=!0,t.manualExemptionApplied=!0,t.commodity.charges.forEach((e=>{e.name in t.Exemptions&&parseFloat(t.Exemptions[e.name].chargeAmount)!==parseFloat(e.value)&&(e.relieved_rate=e.value,e.value=t.Exemptions[e.name].chargeAmount)})))})).catch((e=>($t(),Mt(`The following commodity code does not exist on Asycuda - ${t.tariff_code}. Please update this and try again. `),console.error("Failed to get commodity charges:",e),Promise.reject(e))));e.push(o)}))})),Promise.all(e)},generateCARICOM(){console.log("Generating CARICOM");const e=this.countries.find((e=>e.code===this.customsEntryForm.countryOfOrigin))?.name,t=this.countries.find((e=>e.code===this.customsEntryForm.countryOfFinalDestination))?.name,o=this.customsEntryForm.incotermsList.find((e=>e.code===this.customsEntryForm.incoTerms))?.name,a=this.currencies.find((e=>e.code===this.commercialInvoices[0].currency))?.name,r=this.customsEntryForm.importers.find((e=>e.id===this.customsEntryForm.importerId)),n=void 0===r?"":r.address,s=this.countries.find((e=>e.code===r.country))?.name,i=`${this.customsEntryForm.importerName}\n${n}\n${s}`.toUpperCase(),l=this.customsEntryForm.exporters.find((e=>e.id===this.customsEntryForm.exporterId)),c=void 0===l?"":l.address,d=this.countries.find((e=>e.code===l.country))?.name,u=`${this.customsEntryForm.exporterName}\n${c}\n${d}`.toUpperCase(),m=this.packageTypeOptions.find((e=>e.value===this.customsEntryForm.packageType))?.text;qt().then((r=>{const n=Dt(i,u,this.entryDetails.entry_number,e,o,this.customsEntryForm.portOfDischargeName,t,this.customsEntryForm.modeOfTransport,this.customsEntryForm.vesselName,a,r,this.customsEntryForm.grossWeight,this.commercialInvoices,this.customsEntryForm.numberOfPackages,this.customsEntryForm.totalCargoValue,this.customsEntryForm.freightAmount,this.customsEntryForm.insuranceAmount,this.customsEntryForm.otherCharges,m);Wt("Generating CARICOM Invoice..."),console.log("CARICOM Object: ",n),Me(n).then((e=>{$t(),Ut("CARICOM Invoice Generated Successfully!");const t=window.URL.createObjectURL(new Blob([e],{type:"application/pdf"})),o=document.createElement("a"),a=`CARICOM Invoice - ${this.entryDetails.entry_number}.pdf`;o.href=t,o.setAttribute("download",a),document.body.appendChild(o),o.click(),o.remove()})).catch((e=>{console.error("Failed to generate CARICOM Invoice:",e),Mt("Failed to generate CARICOM Invoice!")}))})).catch((e=>{console.error("Failed to generate CARICOM Invoice:",e),Mt("Failed to generate CARICOM Invoice!")}))},buildWorksheetObject(){const e=lt(this.entryDetails?.entry_number,"TT","Ramnarine Rampersad","BR0285",this.customsEntryForm.regimeTypeCode,this.customsEntryForm.importerName,this.customsEntryForm.importerTaxIdentificationNumber,this.customsEntryForm.exporterName,this.customsEntryForm.exporterTaxIdentificationNumber,this.customsEntryForm.vesselName,this.customsEntryForm.portOfDischargeName,this.customsEntryForm.depositAmount,this.customsEntryForm.containerCharges,this.customsEntryForm.additionalCharges,this.customsEntryForm.localFee,this.customsEntryForm.freightAmount,this.customsEntryForm.insuranceAmount,this.customsEntryForm.otherCharges),t=vt(this.commercialInvoices,this.customsEntryForm.freightAmount,this.totalFOBValue);return e.invoices=t,e},generateWorkSheet(){this.checkMandatoryData()&&(console.log("Generating WorkSheet"),console.log(this.commercialInvoices),this.setInvoiceLineWorksheetData().then((()=>{const e=this.customsEntryForm.estimatedArrivalDate?_t(new Date(this.customsEntryForm.estimatedArrivalDate)):"";console.log("Arrival Date: ",e),console.log("Setting Invoice Line Worksheet Data");const t=lt(this.entryDetails?.entry_number,"TT","Ramnarine Rampersad","BR0285",this.customsEntryForm.regimeTypeCode,this.customsEntryForm.importerName,this.customsEntryForm.importerTaxIdentificationNumber,this.customsEntryForm.exporterName,this.customsEntryForm.exporterTaxIdentificationNumber,this.customsEntryForm.vesselName,this.customsEntryForm.portOfDischargeName,this.customsEntryForm.depositAmount,this.customsEntryForm.containerCharges,this.customsEntryForm.additionalCharges,this.customsEntryForm.localFee,this.customsEntryForm.freightAmount,this.customsEntryForm.insuranceAmount,this.customsEntryForm.otherCharges,this.customsEntryForm.freightCurrency,this.customsEntryForm.freightRateOfExchange,this.customsEntryForm.insuranceCurrency,this.customsEntryForm.insuranceRateOfExchange,this.customsEntryForm.otherChargesCurrency,this.customsEntryForm.otherChargesRateOfExchange,this.manualExemptionApplied,e),o=vt(this.commercialInvoices,this.customsEntryForm.freightAmount,this.totalFOBValue);t.invoices=o,console.log("Worksheet Object: ",t),zt().then((e=>{Wt("Generating worksheet..."),Te(t,e).then((t=>{$t(),Ut("Worksheet Generated Successfully!");const o=window.URL.createObjectURL(new Blob([t],{type:"application/pdf"})),a=document.createElement("a"),r=`Worksheet - ${this.entryDetails?.entry_number} - ${e}.pdf`;a.href=o,a.setAttribute("download",r),document.body.appendChild(a),a.click(),a.remove()})).catch((e=>{console.error("Failed to generate worksheet:",e),$t(),Mt("Failed to generate worksheet!")}))}))})).catch((e=>{console.error("Failed to set invoice line worksheet data:",e)})))},async getPackageTypes(){try{const e=await fetch("./assets/packageTypes.json"),t=await e.json();this.packageTypeOptions=t}catch(e){this.packageTypeOptions=[{value:"CT",text:"Carton"}],console.error("Error fetching data:",e)}},getInvoiceNumbers(){return this.commercialInvoices.map((e=>`${e.invoice_number} \t ${e.invoice_date} \t`)).join("\n")},async generateOvertimeForm(){let e={date:kt(),request:"TO OBTAIN SERVICES OF ONE CUSTOMS OFFICER TO EXAMINE AND RELEASE",details:"",shipper:this.customsEntryForm.exporterName,importer:this.customsEntryForm.importerName,referenceNumber:this.entryDetails?.entry_number,importerAddress:this.customsEntryForm.importerName,declarantNumber:"BR0285",declarantName:"RAMNARINE RAMPERSAD",port:this.customsEntryForm.portOfDischargeName,startTime:"4:00PM"};Gt().then((t=>{console.log("Importers List: ",this.customsEntryForm.importers);const o=this.customsEntryForm.importers.find((e=>e.id===this.customsEntryForm.importerId)),a=void 0===o?"":o.address;e.details=t.cargoDetails,e.startTime=t.startTime,e.importerAddress=`${this.customsEntryForm.importerName}\n${a}`,Wt("Generating Overtime Form..."),Ve(e).then((e=>{$t(),Ut("Overtime Form Generated Successfully!");const t=window.URL.createObjectURL(new Blob([e],{type:"application/pdf"})),o=document.createElement("a"),a=`Overtime Form - ${this.entryDetails?.entry_number}.pdf`;o.href=t,o.setAttribute("download",a),document.body.appendChild(o),o.click(),o.remove()})).catch((e=>{console.error("Failed to generate Overtime Form:",e),Mt("Failed to generate Overtime Form!")}))}))},async generateTTC84(){console.log("Generating TTC84");let e={declarationNumber:this.entryDetails?.entry_number,declarationDate:kt(),regimeCode:"C4",declarantName:"RAMNARINE RAMPERSAD",declarantNumber:"BR0285",referenceNumber:this.entryDetails?.entry_number,importer:this.customsEntryForm.importerName,importNumber:"",declarationContent:"",CPCCode:"4000",extensionCode:"",signatoryName:"",signatoryStatus:"",presigned:!1};const t=this.customsEntryForm.importers.find((e=>e.id===this.customsEntryForm.importerId)),o=t?.taxIdentificationNumber;e.importNumber=o;let a=await le();console.log("Signatories: ",a),a=a.filter((e=>e.importerCode===this.customsEntryForm.importerId)),Ue(this.customsEntryForm.importerId).then((t=>{const o=t.map((e=>e.declaration_number));Xt(o,a).then((o=>{e.presigned=o.generatePreSigned;const r=parseInt(o.select1),n=t[r],s=this.commercialInvoices.reduce(((e,t)=>{const o=`Inv# ${t.invoice_number} DD ${t.invoice_date}, `;return`${e}${o}`}),"").trimEnd(),i=s.split(", ").reduce(((e,t)=>{const o=`${t}, `;return e.length-e.lastIndexOf("\n")-1+o.length>84?`${e.trimEnd()}\n${o}`:`${e}${o}`}),"").trimEnd();console.log("Invoice Numbers: ",i),e.extensionCode=n.extensionCode;const l=a.find((e=>e.id===parseInt(o.select2)));e.declarationContent=`${n.content.replace(/\\n/g,"\n")}\n${i}\n${l.name}\n${l.status}`,Re(e).then((e=>{$t(),Ut("C84 Form Generated Successfully!");const t=window.URL.createObjectURL(new Blob([e],{type:"application/pdf"})),o=document.createElement("a"),a=`C84 Form - ${this.entryDetails?.entry_number}.pdf`;o.href=t,o.setAttribute("download",a),document.body.appendChild(o),o.click(),o.remove()})).catch((e=>{console.error("Failed to generate C84 Form:",e),Mt("Failed to generate C84 Form!")}))}))})).catch((e=>{console.error("Failed to get special exemption declarations:",e)})),console.log("C84 Object: ",e)},async generateDepositForm(){console.log("Generating Deposit Form"),console.log(this.availableCPCCodes),console.log(this.customsEntryForm.regimeTypeOptions);const e=this.customsEntryForm.ports.find((e=>e.id===this.customsEntryForm.portOfDischargeId)),t=void 0==e?"":e.portCode,o=this.countries.find((e=>e.code===this.customsEntryForm.countryOfOrigin))?.name,a=this.customsEntryForm.modeOfTransportOOptions.find((e=>e.modeOfTransport===this.customsEntryForm.modeOfTransport)),r=a.freightTypes.find((e=>e.name===this.customsEntryForm.freightType))?.code;Ht().then((e=>{const a=Ct(this.customsEntryForm.regimeTypeCode,this.customsEntryForm.waybillNumber,this.customsEntryForm.waybillDate,this.customsEntryForm.incoTerms,this.customsEntryForm.importerName,this.customsEntryForm.importerTaxIdentificationNumber,"Ramnarine Rampersad","BR0285",this.entryDetails?.entry_number,this.customsEntryForm.exporterName,o,this.customsEntryForm.exporterCountry,this.customsEntryForm.vesselName,r,this.customsEntryForm.portOfDischargeName,t,this.customsEntryForm.depositAmount,e);try{Wt("Generating Deposit Form..."),Ne(a).then((e=>{$t(),Ut("Deposit Form Generated Successfully!");const t=window.URL.createObjectURL(new Blob([e],{type:"application/pdf"})),o=document.createElement("a"),a=`Deposit Form - ${this.entryDetails?.entry_number}.pdf`;o.href=t,o.setAttribute("download",a),document.body.appendChild(o),o.click(),o.remove()})).catch((e=>{Mt("Failed to generate Deposit Form!"),console.error("Failed to generate Deposit Form:",e)}))}catch(n){console.error("Failed to generate Deposit Form:",n)}}))},goToCustomsDeclarationPage(){const e=this.getInvoiceNumbers();let t=this.netInvoicePrice+this.customsEntryForm.otherCharges;"CIF"===this.customsEntryForm.incoTerms&&(t=t+this.customsEntryForm.freightAmount+this.customsEntryForm.insuranceAmount),console.log("Invoice Numbers: ",e),console.log("Incoterms: ",this.customsEntryForm.incoTerms),console.log("Invoice Total: ",this.netInvoicePrice),this.$router.push({name:"CustomsDeclarationForm",params:{entryId:this.entryId},query:{buyerId:this.customsEntryForm.importerId,sellerId:this.customsEntryForm.exporterId,invoiceNumber:e,invoiceTotal:t,currency:this.commercialInvoices[0].currency,rateOfExchange:this.commercialInvoices[0].rate_of_exchange,freight:this.customsEntryForm.freightAmount*this.customsEntryForm.freightRateOfExchange,insurance:this.customsEntryForm.insuranceAmount*this.customsEntryForm.insuranceRateOfExchange,incoTerms:this.customsEntryForm.incoTerms,referenceNumber:this.entryDetails.entry_number}})},updateWaybillDate(e){this.entryDetails.waybill_date=e.target.value},countryChange(){this.commercialInvoices.forEach((e=>{e.lines.forEach((e=>{e.country_of_origin&&0!==e.country_of_origin.trim().length&&"N/A"!==e.country_of_origin&&void 0!==e.country_of_origin&&null!==e.country_of_origin||(e.country_of_origin=this.entryDetails.country_of_origin)}))}))},async fetchCountries(){try{const e=await fetch("https://restcountries.com/v3/all"),t=await e.json();this.countries=t.map((e=>({name:e.name.common,code:e.cca2})))}catch(e){console.error("Failed to fetch countries:",e)}},formatInvoiceData(e){return{invoice_id:e.invoice_id,invoice_number:e.invoice_number,invoice_date:e.invoice_date,invoice_total:e.invoice_total,sub_total:e.sub_total,supplier_name:e.vendor_name,taxed_amount:e.taxed_amount,supplier_address:e.supplier_address,purchase_order_number:e.purchase_order_number,inland:""===e.inland?"0.00":parseFloat(e.inland),insurance:""===e.insurance?"0.00":parseFloat(e.insurance),other_charges:""===e.otherCharges?"0.00":parseFloat(e.otherCharges),entry_id:e.entry_id,currency:e.currency,rate_of_exchange:e.rate_of_exchange}},getTotalNumberOfLines(){console.log("Calculating total number of lines"),console.log(this.commercialInvoices);let e=0;for(let t of this.commercialInvoices)e+=t.lines?t.lines.length:0;console.log("Total Number of Lines: ",e),this.totalNumberOfLines=e},formatInvoiceLinesData(e){return e.map((e=>({invoice_line_id:e.invoice_line_id,description:e.description,quantity:parseFloat(e.quantity),unit_price:parseFloat(e.unit_price),extension_price:parseFloat(e.extension_price),tariff_code:e.tariff_code,product_code:e.product_code,country_of_origin:e.country_of_origin,cpc_code:e.cpcCode,npc_code:e.npcCode,vat_applicable:e.vatApplicable})))},async addInvoiceLines(){return He(this.linesToBeAdded).then((e=>(console.log("Invoice Lines Added:",e),this.linesToBeAdded=[],e))).catch((e=>(console.error("Failed to add invoice lines:",e),Promise.reject(e))))},async addInvoices(){console.log("Adding Invoices...",this.invoicesToBeAdded);const e={entry_id:this.entryId,invoices:this.invoicesToBeAdded};return tt(e).then((e=>(console.log("Invoices Added:",e),this.invoicesToBeAdded=[],e))).catch((e=>(console.error("Failed to add invoices:",e),Promise.reject(e))))},saveData(){console.log("Saving data..."),this.loading=!0;let e=[this.updateEntryData(),this.updateWaybillData(),this.saveInvoiceDataOptimized()];this.linesToBeAdded.length>0&&e.push(this.addInvoiceLines()),this.invoicesToBeAdded.length>0&&e.push(this.addInvoices()),this.linesToBeDeleted.length>0?jt().then((t=>{t.isConfirmed&&e.push(this.deleteInvoiceLines()),Wt("Saving Data..."),console.log(t),console.time("saveInvoiceData Execution Time"),Promise.all(e).then((([e,t])=>{console.log("Entry details updated:",e.data),console.log("Waybill details updated:",t.data),$t(),console.timeEnd("saveInvoiceData Execution Time"),Ut("All Data Saved successfully!")})).catch((e=>{console.timeEnd("saveInvoiceData Execution Time"),console.error("There was an error saving the data!",e),Mt("Failed to save Entry Data!")})).finally((()=>{this.loading=!1}))})):(Wt("Saving Data..."),Promise.all(e).then((([e,t])=>{console.log("Entry details updated:",e.data),console.log("Waybill details updated:",t.data),$t(),Ut("All Data Saved successfully!")})).catch((e=>{console.error("There was an error saving the data!",e),Mt("Failed to save Entry Data!")})).finally((()=>{this.loading=!1})))},toggleOptions(){console.log(this.freightType)},updateEntryFields(e,t){this.entryDetails[e]=t},updateInvoiceData(e,t,o){e[t]=o,console.log(e)},convertTinyIntoBoolean(e){return 1===e},async fetchAllDetails(){const e="https://mawifrontentcontainerapp.whitestone-99c262a0.eastus.azurecontainerapps.io/api/";console.log("Fetching details"),this.loading=!0,this.dataRetrieved=!1;try{const t=J.A.get(`${e}entry-details/${this.entryId}`),o=J.A.get(`${e}commercial-invoices-with-lines/${this.entryId}`),[a,r]=await Promise.all([t,o]);this.dataRetrieved=!0;let n=a.data.waybill_date,s=a.data.estimated_arrival_date;const i=n?Pt(n):"",l=s?Pt(s):"";this.entryDetails=a.data,this.customsEntryForm.importerId=this.entryDetails.importer,this.customsEntryForm.exporterId=this.entryDetails.shipper,this.customsEntryForm.waybillNumber=this.entryDetails.waybill_number,this.customsEntryForm.waybillDate=i,this.waybillSourceURL=this.entryDetails.file_url,this.customsEntryForm.estimatedArrivalDate=l,this.customsEntryForm.modeOfTransport=this.entryDetails.mode_of_transport,this.customsEntryForm.freightType=this.entryDetails.freight_type,this.customsEntryForm.vesselId=this.entryDetails.vessel,this.customsEntryForm.portOfDischargeId=this.entryDetails.port_of_discharge,this.customsEntryForm.netWeight=this.entryDetails.net_weight,this.customsEntryForm.grossWeight=this.entryDetails.gross_weight,this.customsEntryForm.numberOfPackages=this.entryDetails.package_quantity,this.customsEntryForm.packageType=this.entryDetails.package_type,this.customsEntryForm.marksAndNumbers=this.entryDetails.marks_and_numbers,this.customsEntryForm.totalCargoValue=this.entryDetails.invoice_total,this.customsEntryForm.freightAmount=this.entryDetails.freight_charge,this.customsEntryForm.insuranceAmount=this.entryDetails.insurance_amount??0,this.customsEntryForm.otherCharges=this.entryDetails.other_charges??0,this.customsEntryForm.freightCurrency=this.entryDetails.freight_currency||"USD",this.customsEntryForm.insuranceCurrency=this.entryDetails.insurance_currency||"USD",this.customsEntryForm.otherChargesCurrency=this.entryDetails.other_charges_currency||"USD",this.customsEntryForm.rateOfExchange=this.entryDetails.rate_of_exchange,this.customsEntryForm.countryOfOrigin=this.entryDetails.country_of_origin,this.customsEntryForm.countryOfFinalDestination=this.entryDetails.country_of_final_destination,this.customsEntryForm.regimeType=this.entryDetails.regimeType,this.customsEntryForm.regimeTypeCode=this.entryDetails.regimeTypeCode,this.customsEntryForm.depositAmount=this.entryDetails.deposit,this.customsEntryForm.containerCharges=this.entryDetails.container_charges,this.customsEntryForm.additionalCharges=this.entryDetails.additional_charges,this.customsEntryForm.localFee=this.entryDetails.local_fee,this.customsEntryForm.declarantId=this.entryDetails.declarant,this.customsEntryForm.incoTerms=this.entryDetails.incoterms,this.customsEntryForm.countryLastProvinance=this.entryDetails.country_last_provenance,this.customsEntryForm.tradingCountry=this.entryDetails.trading_country,this.classificationApproved=this.entryDetails.classification_approved,this.classificationApprovedBy=this.entryDetails.classification_approved_by,this.entryStatus=this.entryDetails.entry_status||"",console.log("Commercial Invoice Raw Data: ",r.data),this.commercialInvoices=r.data,this.retrieveInvoiceDocumentSourceURL(),this.inializeTaxes(),this.parseInvoiceData(),this.getTotalNumberOfLines(),this.getRegimeTypes(),console.log("Entry details:",this.entryDetails),console.log("Customs Entry:",this.customsEntryForm),console.log("Commercial invoices:",this.commercialInvoices)}catch(t){this.error="Failed to load entry details: "+(t.response?.data||t.message),console.error("Failed to load entry details:",t),Mt("Failed to load Entry Details! Please Reach out to Administrator")}finally{this.loading=!1}},retrieveInvoiceDocumentSourceURL(){for(let e of this.commercialInvoices){const t={};t.name=e.invoice_number,t.url=e.file_url,this.invoiceDocumentSourceURLs.push(t)}},formatDate(e){const t=new Date(e),o=t.getFullYear(),a=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${o}-${a}-${r}`},formatDateForInput(e){return Fi()(e).tz("UTC").format("YYYY-MM-DD")},parseInvoiceData(){console.log("Parsing Invoice Data"),this.commercialInvoices.forEach((e=>{e.vendor_name=e.supplier_name,e.otherCharges=parseFloat(e.other_charges),e.lines.forEach((e=>{e.quantity=parseFloat(e.quantity).toFixed(2),e.unit_price=parseFloat(e.unit_price),e.extension_price=parseFloat(e.extension_price).toFixed(2),e.vatApplicable=this.convertTinyIntoBoolean(e.vat_applicable),e.cpcCode=e.cpc_code,e.npcCode=e.npc_code}))}))},async getRegimeTypes(){be("TT").then((e=>{this.customsEntryForm.regimeTypeOptions=e}))},async updateWaybillData(){return this.waybill={waybill_number:this.customsEntryForm.waybillNumber,waybill_date:this.customsEntryForm.waybillDate,estimated_arrival_date:this.customsEntryForm.estimatedArrivalDate,mode_of_transport:this.customsEntryForm.modeOfTransport,freight_type:this.customsEntryForm.freightType,marks_and_numbers:this.customsEntryForm.marksAndNumbers,package_type:this.customsEntryForm.packageType,cpc_code:this.entryDetails.cpc_code,npc_code:this.entryDetails.npc_code,package_quantity:this.customsEntryForm.numberOfPackages,country_of_origin:this.customsEntryForm.countryOfOrigin,country_of_final_destination:this.customsEntryForm.countryOfFinalDestination,importer:this.customsEntryForm.importerId,shipper:this.customsEntryForm.exporterId,vessel:this.customsEntryForm.vesselId,port_of_discharge:this.customsEntryForm.portOfDischargeId,entry_id:this.entryDetails.entry_id,waybill_id:this.entryDetails.waybill_id},console.log("Saving Waybill Data: ",this.waybill),console.log(`https://mawifrontentcontainerapp.whitestone-99c262a0.eastus.azurecontainerapps.io/api/waybill/${this.waybill.waybill_id}`),J.A.put(`https://mawifrontentcontainerapp.whitestone-99c262a0.eastus.azurecontainerapps.io/api/waybill/${this.waybill.waybill_id}`,this.waybill)},async deleteInvoiceLines(){return console.log("Deleting Invoice Lines"),console.log(this.linesToBeDeleted),Ge(this.linesToBeDeleted)},async updateEntryData(){return this.entry={mawi_invoice:this.entryDetails.mawi_invoice,entry_date:this.entryDetails.entry_date,invoice_total:this.entryDetails.invoice_total,supplier_name:this.entryDetails.supplier_name,net_weight:this.customsEntryForm.netWeight,gross_weight:this.customsEntryForm.grossWeight,entry_number:this.entryDetails.entry_number,freight_charge:this.customsEntryForm.freightAmount,insurance_amount:this.customsEntryForm.insuranceAmount??0,other_charges:this.customsEntryForm.otherCharges??0,freight_currency:this.customsEntryForm.freightCurrency,insurance_currency:this.customsEntryForm.insuranceCurrency,other_charges_currency:this.customsEntryForm.otherChargesCurrency,rate_of_exchange:this.entryDetails.rate_of_exchange,consignee:this.entryDetails.consignee,declarant:this.customsEntryForm.declarantId,incoterms:this.customsEntryForm.incoTerms,regime_type:this.customsEntryForm.regimeType,deposit:this.customsEntryForm.depositAmount,container_charges:this.customsEntryForm.containerCharges,additional_charges:this.customsEntryForm.additionalCharges,local_fee:this.customsEntryForm.localFee,country_last_provenance:this.customsEntryForm.countryLastProvinance,trading_country:this.customsEntryForm.tradingCountry,classification_status:this.classificationStatus,classification_approved:this.classificationApproved,classification_approved_by:this.classificationApprovedBy,date_classified:this.dateClassified,entry_status:this.entryStatus},console.log("Saving Entry",this.entry),J.A.put(`https://mawifrontentcontainerapp.whitestone-99c262a0.eastus.azurecontainerapps.io/api/customs-entry/${this.entryDetails.entry_id}`,this.entry)},async saveInvoiceData(){const e=this.commercialInvoices.map((e=>{const t=this.formatInvoiceData(e),o=this.formatInvoiceLinesData(e.lines),a={invoiceData:t,invoiceLines:o};return console.log("Updating invoice and invoice lines:",a),J.A.put(`https://mawifrontentcontainerapp.whitestone-99c262a0.eastus.azurecontainerapps.io/api/update-invoice-and-lines/${t.invoice_id}`,a)}));return Promise.all(e)},async saveInvoiceDataOptimized(){try{console.time("saveInvoiceData Execution Time");const e=this.commercialInvoices.map((e=>this.formatInvoiceData(e))),t=this.commercialInvoices.flatMap((e=>this.formatInvoiceLinesData(e.lines))),o={invoices:e},a={invoiceLines:t};console.log("Updating multiple invoices:",o),console.log("Updating multiple invoice lines:",a);const[r,n]=await Promise.all([J.A.put("https://mawifrontentcontainerapp.whitestone-99c262a0.eastus.azurecontainerapps.io/api/update-multiple-invoices",o),J.A.put("https://mawifrontentcontainerapp.whitestone-99c262a0.eastus.azurecontainerapps.io/api/update-multiple-invoice-lines",a)]);return console.log("Invoices update response:",r.data),console.log("Invoice lines update response:",n.data),console.timeEnd("saveInvoiceData Execution Time"),{invoicesResponse:r,invoiceLinesResponse:n}}catch(e){throw console.error("Error updating invoices and invoice lines:",e),e}},checkTHNCodes(){let e=this.commercialInvoices;return e.forEach((e=>{e.lines.forEach((e=>{if(!e.tariff_code||""===e.tariff_code.trim()||"N/A"===e.tariff_code||void 0===e.tariff_code||null===e.tariff_code)return!1}))})),!0},async sendRPARequest(){const e="https://prod-127.westus.logic.azure.com:443/workflows/b219026190bf4867b84dd8498580e0b9/triggers/manual/paths/invoke?api-version=2016-06-01&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=P31ddYGAbtAtr7nEcJEc3TbOkgT75Ekk-viC_QcwcAg";console.log("Sending RPA Request"),console.log("Entry Details: ",this.entryDetails),console.log("URL ",e);const t={key:this.entryDetails?.entry_number};try{const o=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});o.ok?console.log("Flow triggered successfully"):console.error("Failed to trigger flow:",o.statusText)}catch(o){console.error("Failed to trigger flow:",o)}},generateAsycudaXML(){if(console.log("Generating Asycuda XML"),!this.checkMandatoryData())return;const e=this.customsEntryForm.ports.find((e=>e.id===this.customsEntryForm.portOfDischargeId)),t=this.customsEntryForm.importers.find((e=>e.id===this.customsEntryForm.importerId)),o=this.customsEntryForm.exporters.find((e=>e.id===this.customsEntryForm.exporterId)),a=void 0==this.customsEntryForm.regimeType?"":this.customsEntryForm.regimeTypeCode?.slice(2),r=void 0==this.customsEntryForm.regimeType?"":this.customsEntryForm.regimeTypeCode?.slice(0,2);if(console.log("Tye Of Declaration: ",r),"IM"===r&&(void 0===t.taxIdentificationNumber||0===t.taxIdentificationNumber.trim().length))return void Mt("Missing Importer Tax Identification Number! Please Update Importer Details!");if(console.log("Exporter: ",o),"EX"===r&&(void 0===o.taxIdentificationNumber||0===o.taxIdentificationNumber.trim().length))return void Mt("Missing Exporter Tax Identification Number! Please Update Exporter Details!");const n=this.customsEntryForm.declarants.find((e=>e.id===this.customsEntryForm.declarantId)),s=this.countries.find((e=>e.code===this.customsEntryForm.countryOfOrigin)),i=ht(this.commercialInvoices,this.entryDetails?.entry_number,this.customsEntryForm.waybillNumber,this.customsEntryForm.grossWeight,this.customsEntryForm.netWeight,this.customsEntryForm.numberOfPackages,this.customsEntryForm.packageType,this.customsEntryForm.marksAndNumbers,this.customsEntryForm.freightAmount,this.availableCPCCodes,this.totalFOBValue,this.tradeAgreements),l={reference_number:this.entryDetails?.entry_number,group_items:!0,waybill:{number:this.customsEntryForm.waybillNumber,external_freight:this.customsEntryForm.freightAmount,insurance:void 0==this.customsEntryForm.insuranceAmount?0:this.customsEntryForm.insuranceAmount,other_charges:void 0==this.customsEntryForm.otherCharges?0:this.customsEntryForm.otherCharges,importer:{name:`${t?.name}\n${t?.address}`,tax_identification_number:void 0==t.taxIdentificationNumber?"":t.taxIdentificationNumber},exporter:{name:`${o?.name}\n${o?.address}`,tax_identification_number:void 0==o.taxIdentificationNumber?"":o.taxIdentificationNumber},declarant:{name:n?.name,tax_identification_number:void 0==n.taxIdentificationNumber?"":n.taxIdentificationNumber},charges:{external_freight:{amount:this.customsEntryForm.freightAmount,currency:this.customsEntryForm.freightCurrency,rate_of_exchange:this.customsEntryForm.freightRateOfExchange},insurance:{amount:this.customsEntryForm.insuranceAmount,currency:this.customsEntryForm.insuranceCurrency,rate_of_exchange:this.customsEntryForm.insuranceRateOfExchange},other_charges:{amount:this.customsEntryForm.otherCharges,currency:this.customsEntryForm.otherChargesCurrency,rate_of_exchange:this.customsEntryForm.otherChargesRateOfExchange}},mode_of_transport:"Ocean"===this.customsEntryForm.modeOfTransport?"1":"Air"===this.customsEntryForm.modeOfTransport?"4":"",container_flag:!1,vessel:this.customsEntryForm.vesselName,country_of_origin:this.customsEntryForm.countryOfOrigin,country_of_destination:void 0==this.customsEntryForm.countryOfFinalDestination?"":this.customsEntryForm.countryOfFinalDestination,number_of_packages:this.customsEntryForm.numberOfPackages+"",type_of_declaration:r,general_procedural_code:a,office_of_destination:e.asycudaCode,country_last_provinance:this.customsEntryForm.countryLastProvinance,trading_country:this.customsEntryForm.tradingCountry,country_export:this.customsEntryForm.countryOfOrigin,delivery_terms:this.customsEntryForm.incoTerms,delivery_terms_place:this.customsEntryForm.countryOfOrigin,place_of_terms:s?.name,local_currency:"TTD",office_of_entry:e.asycudaCode,location_of_goods:""},invoices:i};console.log("XML Data: ",l),Wt("Generating Asycuda XML..."),we(l).then((e=>{this.sendRPARequest(),$t(),Ut("Asycuda XML Generated Successfully!"),null!==this.entryStatus&&"CLASSIFICATION_OKAY"===this.entryStatus&&(console.log("Setting to partial storage"),this.setToPartialStorage());const t=window.URL.createObjectURL(new Blob([e],{type:"application/xml"})),o=document.createElement("a"),a=`Asycuda XML - ${this.entryDetails?.entry_number}.xml`;o.href=t,o.setAttribute("download",a),document.body.appendChild(o),o.click(),o.remove()})).catch((e=>{console.error("Failed to generate Asycuda XML:",e),Mt("Failed to generate Asycuda XML!")}))}}};function xi(){this.displayDocumentVerificationView=!this.displayDocumentVerificationView}async function Ti(){const e=this.waybillSourceURL;if(e&&0!==e.trim().length){console.log("Opening PDF"),Wt("Opening PDF...");try{$t(),Ut("PDF Opened Successfully!");const t=window.open("","_blank","width=800,height=600");t?(t.document.write(`<iframe src="${e}" style="width:100%; height:100%;" frameborder="0"></iframe>`),t.document.title="PDF Document"):console.error("Failed to open new window.")}catch(t){console.error("Error:",t),$t(),Mt("Failed to open PDF!")}}else Mt("No Waybill Found!")}async function Si(){console.log("Merging and Opening PDFs"),Wt("Merging and Opening Invoices...");const e=this.invoiceDocumentSourceURLs.map((e=>e.url));console.log(e);try{const t="https://mawifrontentcontainerapp.whitestone-99c262a0.eastus.azurecontainerapps.io/api/",o=await fetch(`${t}merge-pdfs`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pdfUrls:e})});if(!o.ok)throw new Error("Failed to merge PDFs");$t(),Ut("PDFs Merged Successfully!");const a=await o.blob(),r=URL.createObjectURL(a),n=window.open("","_blank","width=800,height=600");n?(n.document.write(`<iframe src="${r}" style="width:100%; height:100%;" frameborder="0"></iframe>`),n.document.title="Merged PDF"):console.error("Failed to open new window.")}catch(t){console.error("Error:",t),$t(),Mt("Failed to merge and open PDFs!")}}const Ai=(0,E.A)(Ii,[["render",Li]]);var wi=Ai;const Oi=e=>((0,n.Qi)("data-v-5e1fdf86"),e=e(),(0,n.jt)(),e),Ni={class:"container mt-4"},Pi=Oi((()=>(0,n.Lk)("h1",{class:"text-center mb-4"},"Trinidad & Tobago",-1))),Ri=Oi((()=>(0,n.Lk)("h1",{class:"text-center mb-4"},"Customs Declaration Form E-C75",-1)));function Vi(e,t,o,a,s,i){const l=(0,n.g2)("CustomsDeclarationSectionOne"),c=(0,n.g2)("CustomsDeclarationSectionTwo"),d=(0,n.g2)("CustomsDeclarationSectionThree"),u=(0,n.g2)("CustomsDeclarationSectionFour");return(0,n.uX)(),(0,n.CE)("div",Ni,[Pi,Ri,(0,n.Lk)("form",{onSubmit:t[4]||(t[4]=(0,r.D$)(((...e)=>i.generateC75Declaration&&i.generateC75Declaration(...e)),["prevent"])),class:"my-form-container"},[(0,n.bF)(l,{buyerIdProp:this.$route.query.buyerId,customsDeclarationSectionOne:s.form.customsDeclarationSectionOne,onUpdateSectionOne:t[0]||(t[0]=e=>s.form.customsDeclarationSectionOne=e)},null,8,["buyerIdProp","customsDeclarationSectionOne"]),(0,n.bF)(c,{customsDeclarationSectionTwo:s.form.customsDeclarationSectionTwo,customsDeclarationSectionOne:s.form.customsDeclarationSectionOne,onUpdateSectionTwo:t[1]||(t[1]=e=>s.form.customsDeclarationSectionTwo=e)},null,8,["customsDeclarationSectionTwo","customsDeclarationSectionOne"]),(0,n.bF)(d,{customsDeclarationSectionThree:s.form.customsDeclarationSectionThree,onUpdateSectionThree:t[2]||(t[2]=e=>s.form.customsDeclarationSectionThree=e)},null,8,["customsDeclarationSectionThree"]),(0,n.bF)(u,{customsDeclarationSectionFour:s.form.customsDeclarationSectionFour,customsDeclarationSectionThree:s.form.customsDeclarationSectionThree,onUpdateSectionFour:t[3]||(t[3]=e=>s.form.customsDeclarationSectionFour=e)},null,8,["customsDeclarationSectionFour","customsDeclarationSectionThree"])],32),(0,n.Lk)("table",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("td",null,[(0,n.Lk)("button",{class:"btn btn-primary",onClick:t[5]||(t[5]=(...e)=>i.save75Declaration&&i.save75Declaration(...e))},"Save Valuation Form")]),(0,n.Lk)("td",null,[(0,n.Lk)("button",{class:"btn btn-primary",onClick:t[6]||(t[6]=(...e)=>i.generateC75Declaration&&i.generateC75Declaration(...e))},"Generate Valuation Form")]),(0,n.Lk)("td",null,[(0,n.Lk)("button",{class:"btn btn-primary",onClick:t[7]||(t[7]=(...e)=>i.generatePreSignedValuationVersionTwo&&i.generatePreSignedValuationVersionTwo(...e))},"Generate Pre-Signed Valuation Form")]),(0,n.Lk)("td",null,[(0,n.Lk)("button",{class:"btn btn-primary",onClick:t[8]||(t[8]=(...e)=>i.generateBlanlValuationForPreSigning&&i.generateBlanlValuationForPreSigning(...e))},"Generate Blank Valuation for Pre-Signing")])])])])}const Ui=e=>((0,n.Qi)("data-v-1fb06b50"),e=e(),(0,n.jt)(),e),Bi={class:"row"},$i={class:"col-md-6"},Mi={class:"form-group"},Wi=Ui((()=>(0,n.Lk)("label",{for:"sellerNameAddress"},[(0,n.Lk)("strong",null,"1. Name and Address of Seller (Block Letters)")],-1))),ji=Ui((()=>(0,n.Lk)("option",{value:"",disabled:""},"Select a Seller",-1))),Xi=["value"],Gi={class:"form-group"},qi=["value"],Ji={class:"col-md-6"},Yi={class:"form-group"},zi=Ui((()=>(0,n.Lk)("label",{for:"buyerNameAddress"},[(0,n.Lk)("strong",null,"2(a) Name and Address of Buyer (Block Letters)")],-1))),Hi=Ui((()=>(0,n.Lk)("option",{value:"",disabled:""},"Select a Buyer",-1))),Ki=["value"],Qi={class:"form-group"},Zi=["value"],el={class:"row"},tl={class:"col-md-6"},ol={class:"form-group"},al=Ui((()=>(0,n.Lk)("label",{for:"declarantNameAddress"},[(0,n.Lk)("strong",null,"2(b) Name and Address of Declarant (Block Letters)")],-1))),rl=Ui((()=>(0,n.Lk)("option",{value:"",disabled:""},"Select a Declarant",-1))),nl=["value"],sl={class:"form-group"},il=["value"],ll={class:"col-md-6"},cl={class:"form-group"},dl=Ui((()=>(0,n.Lk)("label",{for:"invoiceNumber",class:"form-label"},[(0,n.Lk)("strong",null,"4. Number and Date of Invoice")],-1))),ul={class:"row"},ml={class:"col-md-6"},hl={class:"form-group"},pl=Ui((()=>(0,n.Lk)("label",{for:"termsOfDelivery",class:"form-label"},[(0,n.Lk)("strong",null,"3. Terms of Delivery (INCOTERM)")],-1))),yl=Ui((()=>(0,n.Lk)("option",{value:"",disabled:""},"Select an Incoterm",-1))),gl=["value"],fl={class:"col-md-6"},vl={class:"form-group"},bl=Ui((()=>(0,n.Lk)("label",{for:"contractNumber",class:"form-label"},[(0,n.Lk)("strong",null,"5. Number and Date of Contract")],-1)));function kl(e,t,o,a,s,i){return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",Bi,[(0,n.Lk)("div",$i,[(0,n.Lk)("div",Mi,[Wi,(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":t[0]||(t[0]=e=>s.localData.sellerId=e),onChange:t[1]||(t[1]=e=>i.updateField("sellerNameAddress",e.target.value))},[ji,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.localData.sellers,((e,t)=>((0,n.uX)(),(0,n.CE)("option",{key:t,value:e.id},(0,T.v_)(e.name),9,Xi)))),128))],544),[[r.u1,s.localData.sellerId]])]),(0,n.Lk)("div",Gi,[(0,n.Lk)("textarea",{class:"form-control",id:"sellerNameAddress",rows:"4",onInput:t[2]||(t[2]=e=>i.updateField("sellerNameAddress",e.target.value)),required:"",readonly:"",value:i.selectedSeller},null,40,qi)]),(0,n.eW)('" ')]),(0,n.Lk)("div",Ji,[(0,n.Lk)("div",Yi,[zi,(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":t[3]||(t[3]=e=>s.localData.buyerId=e),onChange:t[4]||(t[4]=e=>i.updateField("buyerNameAddress",e.target.value))},[Hi,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.localData.buyers,((e,t)=>((0,n.uX)(),(0,n.CE)("option",{key:t,value:e.id},(0,T.v_)(e.name),9,Ki)))),128))],544),[[r.u1,s.localData.buyerId]])]),(0,n.Lk)("div",Qi,[(0,n.Lk)("textarea",{class:"form-control",id:"buyerNameAddress",rows:"4",onInput:t[5]||(t[5]=e=>i.updateField("buyerNameAddress",e.target.value)),required:"",readonly:"",value:i.selectedBuyer},null,40,Zi)])])]),(0,n.Lk)("div",el,[(0,n.Lk)("div",tl,[(0,n.Lk)("div",ol,[al,(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":t[6]||(t[6]=e=>s.localData.declarantId=e),onChange:t[7]||(t[7]=e=>i.updateField("declarantNameAddress",e.target.value))},[rl,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.localData.declarants,((e,t)=>((0,n.uX)(),(0,n.CE)("option",{key:t,value:e.id},(0,T.v_)(e.name),9,nl)))),128))],544),[[r.u1,s.localData.declarantId]])]),(0,n.Lk)("div",sl,[(0,n.Lk)("textarea",{class:"form-control",id:"declarantNameAddress",rows:"4",onInput:t[8]||(t[8]=e=>i.updateField("declarantNameAddress",e.target.value)),required:"",readonly:"",value:i.selectedDeclarant},null,40,il)])]),(0,n.Lk)("div",ll,[(0,n.Lk)("div",cl,[dl,(0,n.bo)((0,n.Lk)("textarea",{type:"text",class:"form-control",id:"invoiceNumber",rows:"6",placeholder:"e.g., 202313 2024/10/20","onUpdate:modelValue":t[9]||(t[9]=e=>s.localData.invoiceNumber=e),onInput:t[10]||(t[10]=e=>i.updateField("invoiceNumber",e.target.value)),required:""},null,544),[[r.Jo,s.localData.invoiceNumber]])])])]),(0,n.Lk)("div",ul,[(0,n.Lk)("div",ml,[(0,n.Lk)("div",hl,[pl,(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":t[11]||(t[11]=e=>s.localData.termsOfDelivery=e),onChange:t[12]||(t[12]=e=>i.updateField("termsOfDelivery",e.target.value))},[yl,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.incoterms,((e,t)=>((0,n.uX)(),(0,n.CE)("option",{key:t,value:e.code},(0,T.v_)(e.code)+" - "+(0,T.v_)(e.name),9,gl)))),128))],544),[[r.u1,s.localData.termsOfDelivery]])])]),(0,n.Lk)("div",fl,[(0,n.Lk)("div",vl,[bl,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"contractNumber",placeholder:"e.g., 123456 2024/10/22","onUpdate:modelValue":t[13]||(t[13]=e=>s.localData.contractNumber=e),onInput:t[14]||(t[14]=e=>i.updateField("contractNumber",e.target.value)),required:""},null,544),[[r.Jo,s.localData.contractNumber]])])])])])}var _l={props:["customsDeclarationSectionOne","buyerIdProp"],name:"CustomsDeclarationSectionOne",mounted(){this.incoterms=Xs()},data(){return{localData:this.customsDeclarationSectionOne,myBuyerId:this.buyerIdProp,incoterms:[]}},computed:{selectedSeller(){const e=this.localData.sellers.find((e=>e.id===this.localData.sellerId)),t=e?`${e.name} \n ${e.address}`:"";return t},selectedBuyer(){const e=this.localData.buyers.find((e=>e.id===this.localData.buyerId));return e?`${e.name} \n ${e.address}`:""},selectedDeclarant(){const e=this.localData.declarants.find((e=>e.id===this.localData.declarantId));return e?`${e.name} \n ${e.address}`:""},declarantStatus(){const e=this.declarants.find((e=>e.id===this.localData.declarantId));return e?e.status:""}},methods:{updateField(e,t){this.localData[e]=t,this.$emit("update-section-one",this.localData)},async getConfigurations(){console.log("Fetching sellers, buyers, and declarants"),Promise.all([de(),ie(),Fe(),le(),me()]).then((([e,t,o,a,r])=>{this.localData.sellers=e,this.localData.buyers=t,console.log("Buyers:",t),this.localData.vessels=o,this.localData.declarants=a,this.countryList=r}))}},watch:{customsDeclarationSectionOne:{deep:!0,handler(e){this.localData={...e}}}}};const Cl=(0,E.A)(_l,[["render",kl],["__scopeId","data-v-1fb06b50"]]);var Dl=Cl;const Ll=e=>((0,n.Qi)("data-v-54aa40c3"),e=e(),(0,n.jt)(),e),El={class:"row"},Fl={class:"col-md-6"},Il={class:"form-group"},xl=Ll((()=>(0,n.Lk)("label",null,[(0,n.Lk)("strong",null,"7 (a) Are the buyer and seller RELATED?")],-1))),Tl={class:"form-check"},Sl=Ll((()=>(0,n.Lk)("label",{for:"related-yes"},"YES",-1))),Al=Ll((()=>(0,n.Lk)("label",{for:"related-no"},"NO",-1))),wl={key:0},Ol=Ll((()=>(0,n.Lk)("label",{for:"influencePrice"},[(0,n.Lk)("strong",null,"7 (b) Did the relationship INFLUENCE the price of the imported goods?")],-1))),Nl={class:"form-check"},Pl=Ll((()=>(0,n.Lk)("label",{for:"influence-price-yes"},"YES",-1))),Rl=Ll((()=>(0,n.Lk)("label",{for:"influence-price-no"},"NO",-1))),Vl={key:1},Ul=Ll((()=>(0,n.Lk)("label",{for:"transactionValueApproximate"},[(0,n.Lk)("strong",null,"7 (c) Does the transaction value of the imported goods closely approximate to a value mentioned in Paragraph 3(2)(b)?")],-1))),Bl={class:"form-check"},$l=Ll((()=>(0,n.Lk)("label",{for:"transaction-value-yes"},"YES",-1))),Ml=Ll((()=>(0,n.Lk)("label",{for:"transaction-value-no"},"NO",-1))),Wl={key:2},jl={class:"col-md-6"},Xl={class:"form-group"},Gl=Ll((()=>(0,n.Lk)("label",{for:"restrictions"},[(0,n.Lk)("strong",null,"8 (a) Are there any RESTRICTIONS to the disposition or use of the goods?")],-1))),ql={class:"form-check"},Jl=Ll((()=>(0,n.Lk)("label",{for:"restrictions-yes"},"YES",-1))),Yl=Ll((()=>(0,n.Lk)("label",{for:"restrictions-no"},"NO",-1))),zl={key:0},Hl=Ll((()=>(0,n.Lk)("label",{for:"conditions"},[(0,n.Lk)("strong",null,"8 (b) Is the sale or price subject to some CONDITION or CONSIDERATION?")],-1))),Kl={class:"form-check"},Ql=Ll((()=>(0,n.Lk)("label",{for:"conditions-yes"},"YES",-1))),Zl=Ll((()=>(0,n.Lk)("label",{for:"conditions-no"},"NO",-1))),ec={key:1},tc=Ll((()=>(0,n.Lk)("label",{for:"royalties"},[(0,n.Lk)("strong",null,"9 (a) Are any ROYALTIES AND LICENCE FEES related to the imported goods payable?")],-1))),oc={class:"form-check"},ac=Ll((()=>(0,n.Lk)("label",{for:"royalties-yes"},"YES",-1))),rc=Ll((()=>(0,n.Lk)("label",{for:"royalties-no"},"NO",-1))),nc={key:2},sc=Ll((()=>(0,n.Lk)("label",{for:"royalties"},[(0,n.Lk)("strong",null,"9 (b) Is the sale subject to an arrangement under which part of the proceeds of any subsequent RESALE, DISPOSAL or USE accures directy or indirectly to the seller?")],-1))),ic={class:"form-check"},lc=Ll((()=>(0,n.Lk)("label",{for:"resale-yes"},"YES",-1))),cc=Ll((()=>(0,n.Lk)("label",{for:"resale-no"},"NO",-1))),dc={key:3},uc={class:"row"},mc={class:"col-md-6"},hc={class:"form-group"},pc=Ll((()=>(0,n.Lk)("label",{for:"signatory_name"},[(0,n.Lk)("strong",null,"Name of Signatory")],-1))),yc={class:"form-group"},gc=Ll((()=>(0,n.Lk)("label",{for:"date_signed"},[(0,n.Lk)("strong",null,"Date Signed")],-1))),fc={class:"col-md-6"},vc={class:"form-group"},bc=Ll((()=>(0,n.Lk)("label",{for:"status_of_signatory"},[(0,n.Lk)("strong",null,"Status of Signatory")],-1))),kc={class:"form-group"},_c=Ll((()=>(0,n.Lk)("label",{for:"signatory_phone_number"},[(0,n.Lk)("strong",null,"Signatory Phone Number")],-1)));function Cc(e,t,o,a,s,i){return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",El,[(0,n.Lk)("div",Fl,[(0,n.Lk)("div",Il,[xl,(0,n.Lk)("div",Tl,[(0,n.bo)((0,n.Lk)("input",{type:"radio",id:"related-yes",value:"yes","onUpdate:modelValue":t[0]||(t[0]=e=>s.localData.relatedParties=e),onChange:t[1]||(t[1]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.XL,s.localData.relatedParties]]),Sl,(0,n.bo)((0,n.Lk)("input",{type:"radio",id:"related-no",value:"no","onUpdate:modelValue":t[2]||(t[2]=e=>s.localData.relatedParties=e),onChange:t[3]||(t[3]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.XL,s.localData.relatedParties]]),Al]),"yes"===s.localData.relatedParties?((0,n.uX)(),(0,n.CE)("div",wl,[(0,n.bo)((0,n.Lk)("textarea",{class:"form-control",id:"related-notes",placeholder:"If 'YES', give details.","onUpdate:modelValue":t[4]||(t[4]=e=>s.localData.relatedDetails=e),rows:"3",onInput:t[5]||(t[5]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.relatedDetails]])])):(0,n.Q3)("",!0),Ol,(0,n.Lk)("div",Nl,[(0,n.bo)((0,n.Lk)("input",{type:"radio",id:"influence-price-yes",value:"yes","onUpdate:modelValue":t[6]||(t[6]=e=>s.localData.influencePrice=e),onChange:t[7]||(t[7]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.XL,s.localData.influencePrice]]),Pl,(0,n.bo)((0,n.Lk)("input",{type:"radio",id:"influence-price-no",value:"no","onUpdate:modelValue":t[8]||(t[8]=e=>s.localData.influencePrice=e),onChange:t[9]||(t[9]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.XL,s.localData.influencePrice]]),Rl]),"yes"===s.localData.influencePrice?((0,n.uX)(),(0,n.CE)("div",Vl,[(0,n.bo)((0,n.Lk)("textarea",{class:"form-control",id:"influence-price-details",placeholder:"If 'YES', give details.","onUpdate:modelValue":t[10]||(t[10]=e=>s.localData.influencePriceDetails=e),rows:"3",onInput:t[11]||(t[11]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.influencePriceDetails]])])):(0,n.Q3)("",!0),Ul,(0,n.Lk)("div",Bl,[(0,n.bo)((0,n.Lk)("input",{type:"radio",id:"transaction-value-yes",value:"yes","onUpdate:modelValue":t[12]||(t[12]=e=>s.localData.transactionValueApproximate=e),onChange:t[13]||(t[13]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.XL,s.localData.transactionValueApproximate]]),$l,(0,n.bo)((0,n.Lk)("input",{type:"radio",id:"transaction-value-no",value:"no","onUpdate:modelValue":t[14]||(t[14]=e=>s.localData.transactionValueApproximate=e),onChange:t[15]||(t[15]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.XL,s.localData.transactionValueApproximate]]),Ml]),"yes"===s.localData.transactionValueApproximate?((0,n.uX)(),(0,n.CE)("div",Wl,[(0,n.bo)((0,n.Lk)("textarea",{class:"form-control",id:"transaction-value-details",placeholder:"If 'YES', give details.","onUpdate:modelValue":t[16]||(t[16]=e=>s.localData.transactionValueDetails=e),rows:"3",onInput:t[17]||(t[17]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.transactionValueDetails]])])):(0,n.Q3)("",!0)])]),(0,n.Lk)("div",jl,[(0,n.Lk)("div",Xl,[Gl,(0,n.Lk)("div",ql,[(0,n.bo)((0,n.Lk)("input",{type:"radio",id:"restrictions-yes",value:"yes","onUpdate:modelValue":t[18]||(t[18]=e=>s.localData.restrictions=e),onChange:t[19]||(t[19]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.XL,s.localData.restrictions]]),Jl,(0,n.bo)((0,n.Lk)("input",{type:"radio",id:"restrictions-no",value:"no","onUpdate:modelValue":t[20]||(t[20]=e=>s.localData.restrictions=e),onChange:t[21]||(t[21]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.XL,s.localData.restrictions]]),Yl]),"yes"===s.localData.restrictions?((0,n.uX)(),(0,n.CE)("div",zl,[(0,n.bo)((0,n.Lk)("textarea",{class:"form-control",id:"restrictions-details",placeholder:"Specify the nature of the restrictions.","onUpdate:modelValue":t[22]||(t[22]=e=>s.localData.restrictionsDetails=e),rows:"3",onInput:t[23]||(t[23]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.restrictionsDetails]])])):(0,n.Q3)("",!0),Hl,(0,n.Lk)("div",Kl,[(0,n.bo)((0,n.Lk)("input",{type:"radio",id:"conditions-yes",value:"yes","onUpdate:modelValue":t[24]||(t[24]=e=>s.localData.conditions=e),onChange:t[25]||(t[25]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.XL,s.localData.conditions]]),Ql,(0,n.bo)((0,n.Lk)("input",{type:"radio",id:"conditions-no",value:"no","onUpdate:modelValue":t[26]||(t[26]=e=>s.localData.conditions=e),onChange:t[27]||(t[27]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.XL,s.localData.conditions]]),Zl]),"yes"===s.localData.conditions?((0,n.uX)(),(0,n.CE)("div",ec,[(0,n.bo)((0,n.Lk)("textarea",{class:"form-control",id:"conditions-details",placeholder:"Specify the nature of the conditions or considerations.","onUpdate:modelValue":t[28]||(t[28]=e=>s.localData.conditionsDetails=e),rows:"3",onInput:t[29]||(t[29]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.conditionsDetails]])])):(0,n.Q3)("",!0),tc,(0,n.Lk)("div",oc,[(0,n.bo)((0,n.Lk)("input",{type:"radio",id:"royalties-yes",value:"yes","onUpdate:modelValue":t[30]||(t[30]=e=>s.localData.royalties=e),onChange:t[31]||(t[31]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.XL,s.localData.royalties]]),ac,(0,n.bo)((0,n.Lk)("input",{type:"radio",id:"royalties-no",value:"no","onUpdate:modelValue":t[32]||(t[32]=e=>s.localData.royalties=e),onChange:t[33]||(t[33]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.XL,s.localData.royalties]]),rc]),"yes"===s.localData.royalties?((0,n.uX)(),(0,n.CE)("div",nc,[(0,n.bo)((0,n.Lk)("textarea",{class:"form-control",id:"royalties-details",placeholder:"Specify conditions and, if possible, amounts.","onUpdate:modelValue":t[34]||(t[34]=e=>s.localData.royaltiesDetails=e),rows:"3",onInput:t[35]||(t[35]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.royaltiesDetails]])])):(0,n.Q3)("",!0),sc,(0,n.Lk)("div",ic,[(0,n.bo)((0,n.Lk)("input",{type:"radio",id:"resale-yes",value:"yes","onUpdate:modelValue":t[36]||(t[36]=e=>s.localData.resale_disposal_boolean=e),onChange:t[37]||(t[37]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.XL,s.localData.resale_disposal_boolean]]),lc,(0,n.bo)((0,n.Lk)("input",{type:"radio",id:"resale-no",value:"no","onUpdate:modelValue":t[38]||(t[38]=e=>s.localData.resale_disposal_boolean=e),onChange:t[39]||(t[39]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.XL,s.localData.resale_disposal_boolean]]),cc]),"yes"===s.localData.resale_disposal_boolean?((0,n.uX)(),(0,n.CE)("div",dc,[(0,n.bo)((0,n.Lk)("textarea",{class:"form-control",id:"resale-details",placeholder:"Please Specify conditions","onUpdate:modelValue":t[40]||(t[40]=e=>s.localData.resaleDetails=e),rows:"3",onInput:t[41]||(t[41]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.resaleDetails]])])):(0,n.Q3)("",!0)])])]),(0,n.Lk)("div",uc,[(0,n.Lk)("div",mc,[(0,n.Lk)("div",hc,[pc,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"signatory_name","onUpdate:modelValue":t[42]||(t[42]=e=>s.localData.signatory_name=e),onInput:t[43]||(t[43]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.signatory_name]])]),(0,n.Lk)("div",yc,[gc,(0,n.bo)((0,n.Lk)("input",{type:"date",class:"form-control",id:"date_signed","onUpdate:modelValue":t[44]||(t[44]=e=>s.localData.date_signed=e),onInput:t[45]||(t[45]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.date_signed]])])]),(0,n.Lk)("div",fc,[(0,n.Lk)("div",vc,[bc,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"status_of_signatory","onUpdate:modelValue":t[46]||(t[46]=e=>s.localData.status_of_signatory=e),onInput:t[47]||(t[47]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.status_of_signatory]])]),(0,n.Lk)("div",kc,[_c,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"signatory_phone_number","onUpdate:modelValue":t[48]||(t[48]=e=>s.localData.signatory_phone_number=e),onInput:t[49]||(t[49]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.signatory_phone_number]])])])])])}var Dc={props:["customsDeclarationSectionTwo","customsDeclarationSectionOne"],name:"CustomsDeclarationSectionTwo",data(){return{localData:this.customsDeclarationSectionTwo}},methods:{updateSection(){this.$emit("update-section-two",this.localData),console.log(this.localData)}},watch:{customsDeclarationSectionOne:{deep:!0,handler(e){const t=e.declarantId,o=e.declarants?.find((e=>e.id===t));console.log(o),this.localData.status_of_signatory=o?.status,this.localData.signatory_name=o?.name,this.localData.signatory_phone_number=o?.phoneContact}},customsDeclarationSectionTwo:{deep:!0,handler(e){this.localData={...e}}}}};const Lc=(0,E.A)(Dc,[["render",Cc],["__scopeId","data-v-54aa40c3"]]);var Ec=Lc;const Fc=e=>((0,n.Qi)("data-v-ba557e10"),e=e(),(0,n.jt)(),e),Ic={class:"row"},xc={class:"col-md-4"},Tc={class:"form-group"},Sc=Fc((()=>(0,n.Lk)("label",{for:"netPrice"},[(0,n.Lk)("strong",null,"11(a) Net price in CURRENCY OF INVOICE")],-1))),Ac={class:"col-md-4"},wc={class:"form-group"},Oc=Fc((()=>(0,n.Lk)("label",{for:"invoiceCurrency",class:"form-label"},[(0,n.Lk)("strong",null,"Invoice Currency")],-1))),Nc=Fc((()=>(0,n.Lk)("option",{value:"",disabled:""},"Select a Currency",-1))),Pc=["value"],Rc={class:"col-md-4"},Vc={class:"form-group"},Uc=Fc((()=>(0,n.Lk)("label",{for:"exchangeRate"},[(0,n.Lk)("strong",null,"Rate of exchange")],-1))),Bc={class:"row"},$c={class:"col-md-6"},Mc={class:"form-group"},Wc=Fc((()=>(0,n.Lk)("label",{for:"indirectPayments"},[(0,n.Lk)("strong",null,"11(b) Indirect payments - see box 8 (b)")],-1))),jc={class:"col-md-6"},Xc={class:"form-group"},Gc=Fc((()=>(0,n.Lk)("label",{for:"totalNationalCurrency"},[(0,n.Lk)("strong",null,"12. TOTAL A in National Currency (TTS)")],-1))),qc={class:"row form-group"},Jc=Fc((()=>(0,n.Lk)("label",{for:"costsIncurred"},[(0,n.Lk)("strong",null,"13. Costs incurred by the buyer")],-1))),Yc={class:"col-md-4"},zc={class:"col-md-4"},Hc={class:"col-md-4"},Kc={class:"row"},Qc=Fc((()=>(0,n.Lk)("label",{for:"goodsServices"},[(0,n.Lk)("strong",null,"14. Goods and services supplied by the buyer")],-1))),Zc={class:"col-md-6"},ed={class:"col-md-6 form-group"},td={class:"row form-group"},od={class:"col-md-6"},ad=Fc((()=>(0,n.Lk)("label",{for:"royalties"},[(0,n.Lk)("strong",null,"15. Royalties and licence fees")],-1))),rd={class:"col-md-6"},nd=Fc((()=>(0,n.Lk)("label",{for:"proceedsResale"},[(0,n.Lk)("strong",null,"16. Proceeds of any subsequent resale, disposal or use accruing to the seller")],-1))),sd={class:"row"},id=Fc((()=>(0,n.Lk)("label",{for:"costOfDelivery"},[(0,n.Lk)("strong",null,"17. Cost of delivery to Trinidad and Tobago")],-1))),ld={class:"col-md-6"},cd={class:"form-group"},dd=Fc((()=>(0,n.Lk)("label",{for:"transport"},[(0,n.Lk)("strong",null,"Transport")],-1))),ud=["disabled"],md={class:"form-group"},hd={class:"form-check"},pd=Fc((()=>(0,n.Lk)("label",{class:"form-check-label",for:"includeTransportInTotal"},"Transportation cost included in the invoice total",-1))),yd={class:"form-group"},gd=Fc((()=>(0,n.Lk)("label",{for:"loadingHandling"},[(0,n.Lk)("strong",null,"Loading and handling charges")],-1))),fd={class:"col-md-6"},vd={class:"form-group"},bd=Fc((()=>(0,n.Lk)("label",{for:"insurance"},[(0,n.Lk)("strong",null,"Insurance")],-1))),kd=["disabled"],_d={class:"form-check"},Cd=Fc((()=>(0,n.Lk)("label",{class:"form-check-label",for:"includeInsuranceInTotal"},"Insurance cost included in the invoice total",-1))),Dd={class:"form-group"},Ld=Fc((()=>(0,n.Lk)("label",{for:"totalB"},[(0,n.Lk)("strong",null,"18. TOTAL B")],-1)));function Ed(e,t,o,a,s,i){return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",Ic,[(0,n.Lk)("div",xc,[(0,n.Lk)("div",Tc,[Sc,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"netPrice","onUpdate:modelValue":t[0]||(t[0]=e=>s.localData.netPrice=e),onInput:t[1]||(t[1]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.netPrice]])])]),(0,n.Lk)("div",Ac,[(0,n.Lk)("div",wc,[Oc,(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":t[2]||(t[2]=e=>s.localData.invoiceCurrency=e),onChange:t[3]||(t[3]=e=>i.updateField("invoiceCurrency",e.target.value))},[Nc,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.currencies,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e.code,value:e.code},(0,T.v_)(e.code)+" - "+(0,T.v_)(e.name),9,Pc)))),128))],544),[[r.u1,s.localData.invoiceCurrency]])])]),(0,n.Lk)("div",Rc,[(0,n.Lk)("div",Vc,[Uc,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"exchangeRate","onUpdate:modelValue":t[4]||(t[4]=e=>s.localData.exchangeRate=e),onInput:t[5]||(t[5]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.exchangeRate]])])])]),(0,n.Lk)("div",Bc,[(0,n.Lk)("div",$c,[(0,n.Lk)("div",Mc,[Wc,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"indirectPayments","onUpdate:modelValue":t[6]||(t[6]=e=>s.localData.indirectPayments=e),onInput:t[7]||(t[7]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.indirectPayments]])])]),(0,n.Lk)("div",jc,[(0,n.Lk)("div",Xc,[Gc,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",readonly:"",id:"totalNationalCurrency","onUpdate:modelValue":t[8]||(t[8]=e=>s.localData.totalNationalCurrency=e),onInput:t[9]||(t[9]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.totalNationalCurrency]])])])]),(0,n.Lk)("div",qc,[Jc,(0,n.Lk)("div",Yc,[(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control mb-2",id:"commissions","onUpdate:modelValue":t[10]||(t[10]=e=>s.localData.commissions=e),placeholder:"commissions, except buying commissions",onInput:t[11]||(t[11]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.commissions]])]),(0,n.Lk)("div",zc,[(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control mb-2",id:"brokerage","onUpdate:modelValue":t[12]||(t[12]=e=>s.localData.brokerage=e),placeholder:"brokerage",onInput:t[13]||(t[13]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.brokerage]])]),(0,n.Lk)("div",Hc,[(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"containersPacking","onUpdate:modelValue":t[14]||(t[14]=e=>s.localData.containersPacking=e),placeholder:"containers and packing",onInput:t[15]||(t[15]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.containersPacking]])])]),(0,n.Lk)("div",Kc,[Qc,(0,n.Lk)("div",Zc,[(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control mb-2",id:"materials","onUpdate:modelValue":t[16]||(t[16]=e=>s.localData.materials=e),placeholder:"materials, component, parts incorporated in the good",onInput:t[17]||(t[17]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.materials]]),(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control mb-2",id:"tools","onUpdate:modelValue":t[18]||(t[18]=e=>s.localData.tools=e),placeholder:"tools, dies, moulds used in the production",onInput:t[19]||(t[19]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.tools]])]),(0,n.Lk)("div",ed,[(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control mb-2",id:"materialsConsumed","onUpdate:modelValue":t[20]||(t[20]=e=>s.localData.materialsConsumed=e),placeholder:"materials consumed in the production",onInput:t[21]||(t[21]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.materialsConsumed]]),(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"engineering","onUpdate:modelValue":t[22]||(t[22]=e=>s.localData.engineering=e),placeholder:"engineering, development, artwork, design work",onInput:t[23]||(t[23]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.engineering]])])]),(0,n.Lk)("div",td,[(0,n.Lk)("div",od,[ad,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"royalties","onUpdate:modelValue":t[24]||(t[24]=e=>s.localData.royalties=e),onInput:t[25]||(t[25]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.royalties]])]),(0,n.Lk)("div",rd,[nd,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"proceedsResale","onUpdate:modelValue":t[26]||(t[26]=e=>s.localData.proceedsResale=e),onInput:t[27]||(t[27]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.proceedsResale]])])]),(0,n.Lk)("div",sd,[id,(0,n.Lk)("div",ld,[(0,n.Lk)("div",cd,[dd,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control mb-2",id:"transport",disabled:s.localData.transportIncluded,"onUpdate:modelValue":t[28]||(t[28]=e=>s.localData.transport=e),placeholder:"transport",onInput:t[29]||(t[29]=(...e)=>i.updateSection&&i.updateSection(...e))},null,40,ud),[[r.Jo,s.localData.transport]])]),(0,n.Lk)("div",md,[(0,n.Lk)("div",hd,[(0,n.Lk)("input",{type:"checkbox",class:"form-check-input",id:"includeTransportInTotal",onChange:t[30]||(t[30]=(...e)=>i.handleTransportCheckboxChange&&i.handleTransportCheckboxChange(...e))},null,32),pd])]),(0,n.Lk)("div",yd,[gd,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control mb-2",id:"loadingHandling","onUpdate:modelValue":t[31]||(t[31]=e=>s.localData.loadingHandling=e),placeholder:"loading and handling charges",onInput:t[32]||(t[32]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.loadingHandling]])])]),(0,n.Lk)("div",fd,[(0,n.Lk)("div",vd,[bd,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"insurance",disabled:s.localData.insuranceIncluded,"onUpdate:modelValue":t[33]||(t[33]=e=>s.localData.insurance=e),placeholder:"insurance",onInput:t[34]||(t[34]=(...e)=>i.updateSection&&i.updateSection(...e))},null,40,kd),[[r.Jo,s.localData.insurance]])]),(0,n.Lk)("div",_d,[(0,n.Lk)("input",{type:"checkbox",class:"form-check-input",id:"includeInsuranceInTotal",onChange:t[35]||(t[35]=(...e)=>i.handleInsuranceCheckboxChange&&i.handleInsuranceCheckboxChange(...e))},null,32),Cd]),(0,n.Lk)("div",Dd,[Ld,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",readonly:"",id:"totalB","onUpdate:modelValue":t[36]||(t[36]=e=>s.localData.totalB=e),onInput:t[37]||(t[37]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.totalB]])])])])])}var Fd={props:["customsDeclarationSectionThree"],name:"CustomsDeclarationSectionThree",data(){return{localData:this.customsDeclarationSectionThree,currencies:[{code:"USD",name:"United States Dollar"},{code:"EUR",name:"Euro"},{code:"JPY",name:"Japanese Yen"},{code:"GBP",name:"British Pound Sterling"},{code:"AUD",name:"Australian Dollar"},{code:"CAD",name:"Canadian Dollar"},{code:"CHF",name:"Swiss Franc"},{code:"CNY",name:"Chinese Yuan"},{code:"SEK",name:"Swedish Krona"},{code:"NZD",name:"New Zealand Dollar"},{code:"MXN",name:"Mexican Peso"},{code:"SGD",name:"Singapore Dollar"},{code:"HKD",name:"Hong Kong Dollar"},{code:"NOK",name:"Norwegian Krone"},{code:"KRW",name:"South Korean Won"},{code:"TRY",name:"Turkish Lira"},{code:"INR",name:"Indian Rupee"},{code:"RUB",name:"Russian Ruble"},{code:"BRL",name:"Brazilian Real"},{code:"ZAR",name:"South African Rand"},{code:"TTD",name:"Trinidad and Tobago Dollar"}]}},methods:{handleTransportCheckboxChange(e){this.localData.transportIncluded=e.target.checked,this.localData.transportIncluded&&(this.localData.transport=0),this.updateSection()},handleInsuranceCheckboxChange(e){this.localData.insuranceIncluded=e.target.checked,this.localData.insuranceIncluded&&(this.localData.insurance=0),this.updateSection()},updateField(e,t){this.localData[e]=t,this.updateSection()},updateSection(){this.$emit("update-section-three",this.localData),console.log(this.localData)}},watch:{customsDeclarationSectionThree:{deep:!0,handler(e){console.log(this.localData.transportIncluded,e.transportIncluded),this.localData={...e};let t=(parseFloat(this.localData.netPrice)+parseFloat(this.localData.indirectPayments))*parseFloat(this.localData.exchangeRate),o=parseFloat(this.localData.transport)+parseFloat(this.localData.loadingHandling)+parseFloat(this.localData.insurance);console.log(t,o),this.localData.totalNationalCurrency=parseFloat(t).toFixed(2),this.localData.totalB=parseFloat(o).toFixed(2)}}}};const Id=(0,E.A)(Fd,[["render",Ed],["__scopeId","data-v-ba557e10"]]);var xd=Id;const Td=e=>((0,n.Qi)("data-v-2e2fd940"),e=e(),(0,n.jt)(),e),Sd={class:"row"},Ad={class:"col-md-6"},wd={class:"form-group"},Od=Td((()=>(0,n.Lk)("label",{for:"costAfterArrival"},[(0,n.Lk)("strong",null,"19. Cost of transport after arrival at place of introduction on importation")],-1))),Nd={class:"form-group"},Pd=Td((()=>(0,n.Lk)("label",{for:"chargesAfterImportation"},[(0,n.Lk)("strong",null,"20. Charges for construction, erection, assembly, maintenance or technical assistance undertaken after importation")],-1))),Rd={class:"form-group"},Vd=Td((()=>(0,n.Lk)("label",{for:"otherCharges"},[(0,n.Lk)("strong",null,"21. Other charges (specify)")],-1))),Ud={class:"col-md-6"},Bd={class:"form-group"},$d=Td((()=>(0,n.Lk)("label",{for:"customsDutiesTaxes"},[(0,n.Lk)("strong",null,"22. Customs duties and taxes payable in Trinidad and Tobago by reason of the importation or sale of the goods")],-1))),Md={class:"form-group"},Wd=Td((()=>(0,n.Lk)("label",{for:"totalC"},[(0,n.Lk)("strong",null,"23. TOTAL C")],-1))),jd={class:"form-group"},Xd=Td((()=>(0,n.Lk)("label",{for:"valueDeclared"},[(0,n.Lk)("strong",null,"24. VALUE DECLARED (A + B - C)")],-1))),Gd={class:"mb-3"},qd=Td((()=>(0,n.Lk)("p",null,[(0,n.Lk)("strong",null,"NOTES to Box 10")],-1))),Jd=Td((()=>(0,n.Lk)("p",null,"Declaration may be made by:",-1))),Yd=Td((()=>(0,n.Lk)("ul",null,[(0,n.Lk)("li",null,"(a) the actual importer if an individual;"),(0,n.Lk)("li",null,"(b) a partner in the case of partnership;"),(0,n.Lk)("li",null,"(c) a director or the secretary in the case of an incorporated Company"),(0,n.Lk)("li",null,"(d) any employee duly authorised in writing by one of the aforementioned persons.")],-1))),zd=Td((()=>(0,n.Lk)("p",null," (*): Where amounts are payable in FOREIGN CURRENCY, indicate in this section the amount in foreign currency and the rate of exchange by reference to each relevant element and item. ",-1))),Hd=Td((()=>(0,n.Lk)("label",{for:"foreignCurrency",class:"form-label"},"Reference",-1)));function Kd(e,t,o,a,s,i){return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",Sd,[(0,n.Lk)("div",Ad,[(0,n.Lk)("div",wd,[Od,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"costAfterArrival","onUpdate:modelValue":t[0]||(t[0]=e=>s.localData.costAfterArrival=e),onInput:t[1]||(t[1]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.costAfterArrival]])]),(0,n.Lk)("div",Nd,[Pd,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"chargesAfterImportation","onUpdate:modelValue":t[2]||(t[2]=e=>s.localData.chargesAfterImportation=e),onInput:t[3]||(t[3]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.chargesAfterImportation]])]),(0,n.Lk)("div",Rd,[Vd,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"otherCharges","onUpdate:modelValue":t[4]||(t[4]=e=>s.localData.otherCharges=e),onInput:t[5]||(t[5]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.otherCharges]])])]),(0,n.Lk)("div",Ud,[(0,n.Lk)("div",Bd,[$d,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"customsDutiesTaxes","onUpdate:modelValue":t[6]||(t[6]=e=>s.localData.customsDutiesTaxes=e),onInput:t[7]||(t[7]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.customsDutiesTaxes]])]),(0,n.Lk)("div",Md,[Wd,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"totalC","onUpdate:modelValue":t[8]||(t[8]=e=>s.localData.totalC=e),onInput:t[9]||(t[9]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.totalC]])]),(0,n.Lk)("div",jd,[Xd,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"valueDeclared","onUpdate:modelValue":t[10]||(t[10]=e=>s.localData.valueDeclared=e),onInput:t[11]||(t[11]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.valueDeclared]])])])]),(0,n.Lk)("div",Gd,[qd,Jd,Yd,zd,Hd,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control mb-2",id:"foreignCurrency",placeholder:"11(a)","onUpdate:modelValue":t[12]||(t[12]=e=>s.localData.foreignCurrency=e),onInput:t[13]||(t[13]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.foreignCurrency]])])])}var Qd={props:["customsDeclarationSectionFour","customsDeclarationSectionThree"],name:"CustomsDeclarationSectionFour",data(){return{localData:this.customsDeclarationSectionFour}},methods:{updateSection(){this.$emit("update-section-four",this.localData)}},watch:{customsDeclarationSectionThree:{deep:!0,handler(e){let t=(parseFloat(e.netPrice)+parseFloat(e.indirectPayments))*parseFloat(e.exchangeRate),o=parseFloat(e.transport)+parseFloat(e.loadingHandling)+parseFloat(e.insurance),a=t+parseFloat(o)-parseFloat(this.localData.totalC);this.localData.valueDeclared=parseFloat(a).toFixed(2)}},customsDeclarationSectionFour:{deep:!0,handler(e){this.localData={...e};let t=(parseFloat(this.customsDeclarationSectionThree.netPrice)+parseFloat(this.customsDeclarationSectionThree.indirectPayments))*parseFloat(this.customsDeclarationSectionThree.exchangeRate),o=parseFloat(this.customsDeclarationSectionThree.transport)+parseFloat(this.customsDeclarationSectionThree.loadingHandling)+parseFloat(this.customsDeclarationSectionThree.insurance),a=parseFloat(this.localData.costAfterArrival)+parseFloat(this.localData.chargesAfterImportation)+parseFloat(this.localData.otherCharges)+parseFloat(this.localData.customsDutiesTaxes);this.localData.totalC=parseFloat(a).toFixed(2);let r=t+o-parseFloat(a).toFixed(2);this.localData.valueDeclared=r.toFixed(2)}}}};const Zd=(0,E.A)(Qd,[["render",Kd],["__scopeId","data-v-2e2fd940"]]);var eu=Zd,tu={name:"CustomsDeclarationForm",components:{CustomsDeclarationSectionOne:Dl,CustomsDeclarationSectionTwo:Ec,CustomsDeclarationSectionThree:xd,CustomsDeclarationSectionFour:eu},props:{entryId:{type:[String,Number],required:!0},buyerId:{type:[String,Number],required:!0},sellerId:{type:[String,Number],required:!0},invoiceNumber:{type:[String,Number],required:!0},invoiceTotal:{type:[String,Number],required:!0},currency:{type:[String,Number],required:!0},rateOfExchange:{type:[String,Number],required:!0},freight:{type:[String,Number],required:!0},insurance:{type:[String,Number],required:!0}},mounted(){this.fetchCustomsDeclarations(),this.syncData(),this.currencies=ja(),this.getCountries()},data(){return{newC75:!0,entryNumber:"",currencies:[],countries:[],form:{customsDeclarationSectionOne:{sellers:[],buyers:[],declarants:[],sellerNameAddress:"",buyerNameAddress:"",declarantNameAddress:""},customsDeclarationSectionTwo:{date_signed:this.getCurrentDate(),relatedParties:"no",influencePrice:"no",transactionValueApproximate:"no",restrictions:"no",conditions:"no",royalties:"no",resale_disposal_boolean:"no"},customsDeclarationSectionThree:{totalNationalCurrency:0,netPrice:0,indirectPayments:0,exchangeRate:1,transport:0,loadingHandling:0,insurance:0,totalB:0,transportIncluded:!1,insuranceIncluded:!1,invoiceCurrency:"USD"},customsDeclarationSectionFour:{costAfterArrival:0,chargesAfterImportation:0,otherCharges:0,customsDutiesTaxes:0,totalC:0,valueDeclared:0}}}},methods:{save75Declaration(){this.newC75?this.create75Declaration():this.updateC75Declaration()},getCountries(){me().then((e=>{this.countries=e})).catch((e=>{console.error("Failed to get countries:",e)}))},getCurrentDate(){const e=new Date,t=String(e.getDate()).padStart(2,"0"),o=String(e.getMonth()+1).padStart(2,"0"),a=e.getFullYear();return`${a}-${o}-${t}`},async create75Declaration(){console.log("Saving C75 Declaration...");const e=this.form.customsDeclarationSectionOne.sellers.find((e=>e.id===this.form.customsDeclarationSectionOne.sellerId)),t=this.form.customsDeclarationSectionOne.buyers.find((e=>e.id===this.form.customsDeclarationSectionOne.buyerId)),o=this.form.customsDeclarationSectionOne.declarants.find((e=>e.id===this.form.customsDeclarationSectionOne.declarantId)),a=e?`${e.name} \n ${e.address}`:"",r=t?`${t.name} \n ${t.address}`:"",n=o?`${o.name} \n ${o.address}`:"",s=o?o.status:"",i=o?.phone?o.phone:"",l=o?o.name:"";Wt("Saving Data...");const c={sellerNameAddress:a,buyerNameAddress:r,declarantNameAddress:n,incoTerms:void 0!==this.form.customsDeclarationSectionOne.termsOfDelivery?this.form.customsDeclarationSectionOne.termsOfDelivery:"",invoiceNumbersDates:void 0!==this.form.customsDeclarationSectionOne.invoiceNumber?this.form.customsDeclarationSectionOne.invoiceNumber:"",numberAndDateofContract:void 0!==this.form.customsDeclarationSectionOne.contractNumber?this.form.customsDeclarationSectionOne.contractNumber:"",sellerId:void 0!==this.form.customsDeclarationSectionOne.sellerId?this.form.customsDeclarationSectionOne.sellerId:"",buyerId:void 0!==this.form.customsDeclarationSectionOne.buyerId?this.form.customsDeclarationSectionOne.buyerId:"",declarantId:void 0!==this.form.customsDeclarationSectionOne.declarantId?this.form.customsDeclarationSectionOne.declarantId:"",relatedParties:void 0!==this.form.customsDeclarationSectionTwo.relatedParties?this.form.customsDeclarationSectionTwo.relatedParties:"",influencePrice:void 0!==this.form.customsDeclarationSectionTwo.influencePrice?this.form.customsDeclarationSectionTwo.influencePrice:"",transactionValueApproximate:void 0!==this.form.customsDeclarationSectionTwo.transactionValueApproximate?this.form.customsDeclarationSectionTwo.transactionValueApproximate:"",restrictions:void 0!==this.form.customsDeclarationSectionTwo.restrictions?this.form.customsDeclarationSectionTwo.restrictions:"",conditions:void 0!==this.form.customsDeclarationSectionTwo.conditions?this.form.customsDeclarationSectionTwo.conditions:"",royalties_boolean:void 0!==this.form.customsDeclarationSectionTwo.royalties?this.form.customsDeclarationSectionTwo.royalties:"",resale_disposal_boolean:void 0!==this.form.customsDeclarationSectionTwo.resale_disposal_boolean?this.form.customsDeclarationSectionTwo.resale_disposal_boolean:"",date_signed:void 0!==this.form.customsDeclarationSectionTwo.date_signed?this.form.customsDeclarationSectionTwo.date_signed:"",status_of_signatory:s,signatory_phone_number:i,signatory_name:l,net_invoice_price:void 0!==this.form.customsDeclarationSectionThree.netPrice?this.form.customsDeclarationSectionThree.netPrice:"",indirect_payment:void 0!==this.form.customsDeclarationSectionThree.indirectPayment?this.form.customsDeclarationSectionThree.indirectPayment:"",exchange_rate:void 0!==this.form.customsDeclarationSectionThree.exchangeRate?this.form.customsDeclarationSectionThree.exchangeRate:"",costs_commissions:void 0!==this.form.customsDeclarationSectionThree.commissions?this.form.customsDeclarationSectionThree.commissions:"",costs_brokerage:void 0!==this.form.customsDeclarationSectionThree.brokerage?this.form.customsDeclarationSectionThree.brokerage:"",costs_containers_packing:void 0!==this.form.customsDeclarationSectionThree.containersPacking?this.form.customsDeclarationSectionThree.containersPacking:"",goods_free_of_charge_materials:void 0!==this.form.customsDeclarationSectionThree.materials?this.form.customsDeclarationSectionThree.materials:"",goods_free_of_charge_tools:void 0!==this.form.customsDeclarationSectionThree.tools?this.form.customsDeclarationSectionThree.tools:"",goods_free_of_charge_materials_consumed:void 0!==this.form.customsDeclarationSectionThree.materialsConsumed?this.form.customsDeclarationSectionThree.materialsConsumed:"",goods_engineering_development:void 0!==this.form.customsDeclarationSectionThree.engineering?this.form.customsDeclarationSectionThree.engineering:"",royalties_license_fee:void 0!==this.form.customsDeclarationSectionThree.royalties?this.form.customsDeclarationSectionThree.royalties:"",procees_resale_disposal:void 0!==this.form.customsDeclarationSectionThree.proceedsResale?this.form.customsDeclarationSectionThree.proceedsResale:"",cost_delivery_transport:void 0!==this.form.customsDeclarationSectionThree.transport?this.form.customsDeclarationSectionThree.transport:"",cost_delivery_loading:void 0!==this.form.customsDeclarationSectionThree.loadingHandling?this.form.customsDeclarationSectionThree.loadingHandling:"",cost_delivery_insurance:void 0!==this.form.customsDeclarationSectionThree.insurance?this.form.customsDeclarationSectionThree.insurance:"",cost_transport_after_arrival:void 0!==this.form.customsDeclarationSectionFour.costAfterArrival?this.form.customsDeclarationSectionFour.costAfterArrival:"",charges_construction:void 0!==this.form.customsDeclarationSectionFour.chargesAfterImportation?this.form.customsDeclarationSectionFour.chargesAfterImportation:"",other_charges:void 0!==this.form.customsDeclarationSectionFour.otherCharges?this.form.customsDeclarationSectionFour.otherCharges:"",customs_duties_taxes:void 0!==this.form.customsDeclarationSectionFour.customsDutiesTaxes?this.form.customsDeclarationSectionFour.customsDutiesTaxes:"",entryId:this.entryId};try{console.log("Saving customs declaration..."),console.log(c),await ne(c),$t(),Ut("All Data Saved successfully!"),console.log("Customs declaration saved successfully."),this.newC75=!1}catch(d){Mt("Failed to save Entry Data!"),console.error("Failed to save the declaration:",d)}},prepareDeclarationObject(){console.log("Prearing Declaration Object...");const e=this.form.customsDeclarationSectionOne.sellers.find((e=>e.id===this.form.customsDeclarationSectionOne.sellerId)),t=this.form.customsDeclarationSectionOne.buyers.find((e=>e.id===this.form.customsDeclarationSectionOne.buyerId)),o=this.form.customsDeclarationSectionOne.declarants.find((e=>e.id===this.form.customsDeclarationSectionOne.declarantId)),a=e.country?this.countries.find((t=>t.code===e.country))?.name:"",r=t.country?this.countries.find((e=>e.code===t.country))?.name:"",n=e?`${e.name}\n${e.address}, ${a}`:"",s=t?`${t.name}\n${t.address}, ${r}`:"",i=o?`${o.name}\n${o.address}\n${o.country}`:"",l=o?o.status:"",c=o?.phoneContact?o.phoneContact:"",d=o?o.name:"",u=this.currencies.find((e=>e.code===this.form.customsDeclarationSectionThree.invoiceCurrency)),m=u?u.name:"",h=void 0!==this.form.customsDeclarationSectionThree.transport?this.form.customsDeclarationSectionThree.transport:0,p=void 0!==this.form.customsDeclarationSectionThree.exchangeRate?this.form.customsDeclarationSectionThree.exchangeRate:1,y=parseFloat(h);console.log("Transport Converted:",y,h,p),console.log("Selected Seller:",e),console.log("Selected Buyer:",t),console.log("Selected Declarant:",o);let g={sellerNameAddress:n,buyerNameAddress:s,declarantNameAddress:i,incoTerms:void 0!==this.form.customsDeclarationSectionOne.termsOfDelivery?this.form.customsDeclarationSectionOne.termsOfDelivery:"",invoiceNumbersDates:void 0!==this.form.customsDeclarationSectionOne.invoiceNumber?this.form.customsDeclarationSectionOne.invoiceNumber:"",numberAndDateofContract:void 0!==this.form.customsDeclarationSectionOne.contractNumber?this.form.customsDeclarationSectionOne.contractNumber:"",sellerId:void 0!==this.form.customsDeclarationSectionOne.sellerId?this.form.customsDeclarationSectionOne.sellerId:"",buyerId:void 0!==this.form.customsDeclarationSectionOne.buyerId?this.form.customsDeclarationSectionOne.buyerId:"",declarantId:void 0!==this.form.customsDeclarationSectionOne.declarantId?this.form.customsDeclarationSectionOne.declarantId:"",relatedParties:void 0!==this.form.customsDeclarationSectionTwo.relatedParties?this.form.customsDeclarationSectionTwo.relatedParties:"",influencePrice:void 0!==this.form.customsDeclarationSectionTwo.influencePrice?this.form.customsDeclarationSectionTwo.influencePrice:"",transactionValueApproximate:void 0!==this.form.customsDeclarationSectionTwo.transactionValueApproximate?this.form.customsDeclarationSectionTwo.transactionValueApproximate:"",restrictions:void 0!==this.form.customsDeclarationSectionTwo.restrictions?this.form.customsDeclarationSectionTwo.restrictions:"",conditions:void 0!==this.form.customsDeclarationSectionTwo.conditions?this.form.customsDeclarationSectionTwo.conditions:"",royalties_boolean:void 0!==this.form.customsDeclarationSectionTwo.royalties?this.form.customsDeclarationSectionTwo.royalties:"",resale_disposal_boolean:void 0!==this.form.customsDeclarationSectionTwo.resale_disposal_boolean?this.form.customsDeclarationSectionTwo.resale_disposal_boolean:"",date_signed:void 0!==this.form.customsDeclarationSectionTwo.date_signed?this.form.customsDeclarationSectionTwo.date_signed:"",status_of_signatory:l,signatory_phone_number:void 0!==c?c:"",signatory_name:d,net_invoice_price:void 0!==this.form.customsDeclarationSectionThree.netPrice?this.form.customsDeclarationSectionThree.netPrice:"",indirect_payment:void 0!==this.form.customsDeclarationSectionThree.indirectPayment?this.form.customsDeclarationSectionThree.indirectPayment:"",exchange_rate:void 0!==this.form.customsDeclarationSectionThree.exchangeRate?this.form.customsDeclarationSectionThree.exchangeRate:"",costs_commissions:void 0!==this.form.customsDeclarationSectionThree.commissions?this.form.customsDeclarationSectionThree.commissions:"",costs_brokerage:void 0!==this.form.customsDeclarationSectionThree.brokerage?this.form.customsDeclarationSectionThree.brokerage:"",costs_containers_packing:void 0!==this.form.customsDeclarationSectionThree.containersPacking?this.form.customsDeclarationSectionThree.containersPacking:"",goods_free_of_charge_materials:void 0!==this.form.customsDeclarationSectionThree.materials?this.form.customsDeclarationSectionThree.materials:"",goods_free_of_charge_tools:void 0!==this.form.customsDeclarationSectionThree.tools?this.form.customsDeclarationSectionThree.tools:"",goods_free_of_charge_materials_consumed:void 0!==this.form.customsDeclarationSectionThree.materialsConsumed?this.form.customsDeclarationSectionThree.materialsConsumed:"",goods_engineering_development:void 0!==this.form.customsDeclarationSectionThree.engineering?this.form.customsDeclarationSectionThree.engineering:"",royalties_license_fee:void 0!==this.form.customsDeclarationSectionThree.royalties?this.form.customsDeclarationSectionThree.royalties:"",procees_resale_disposal:void 0!==this.form.customsDeclarationSectionThree.proceedsResale?this.form.customsDeclarationSectionThree.proceedsResale:"",cost_delivery_transport:y.toFixed(2),cost_delivery_loading:void 0!==this.form.customsDeclarationSectionThree.loadingHandling?this.form.customsDeclarationSectionThree.loadingHandling:"",cost_delivery_insurance:void 0!==this.form.customsDeclarationSectionThree.insurance?this.form.customsDeclarationSectionThree.insurance:"",cost_transport_after_arrival:void 0!==this.form.customsDeclarationSectionFour.costAfterArrival?this.form.customsDeclarationSectionFour.costAfterArrival:"",charges_construction:void 0!==this.form.customsDeclarationSectionFour.chargesAfterImportation?this.form.customsDeclarationSectionFour.chargesAfterImportation:"",other_charges:void 0!==this.form.customsDeclarationSectionFour.otherCharges?this.form.customsDeclarationSectionFour.otherCharges:"",customs_duties_taxes:void 0!==this.form.customsDeclarationSectionFour.customsDutiesTaxes?this.form.customsDeclarationSectionFour.customsDutiesTaxes:"",transportIncluded:void 0!==this.form.customsDeclarationSectionThree.transportIncluded?this.form.customsDeclarationSectionThree.transportIncluded:"",insuranceIncluded:void 0!==this.form.customsDeclarationSectionThree.insuranceIncluded?this.form.customsDeclarationSectionThree.insuranceIncluded:"",invoice_currency:void 0!==m?m:"",referenceNumber:void 0!==this.$route.query.referenceNumber?this.$route.query.referenceNumber:""};return console.log(g),g},async generateBlanlValuationForPreSigning(){console.log("Generating C75 Declaration...");try{console.log("Generating customs declaration..."),Wt("Generating customs declaration...");const e=await oe();$t(),Ut("Valuation Form Generated Successfully!");const t=window.URL.createObjectURL(new Blob([e],{type:"application/pdf"})),o=document.createElement("a");o.href=t;const a="Blank Valuation Form.pdf";o.setAttribute("download",a),document.body.appendChild(o),o.click(),o.remove()}catch(e){Mt("Failed to generate document!"),console.error("Failed to generate the declaration:",e)}},async generateC75Declaration(){const e=this.prepareDeclarationObject();if(""!==e.declarantNameAddress&&void 0!==e.declarantNameAddress){console.log("Generating C75 Declaration...");try{console.log("Generating customs declaration..."),Wt("Generating customs declaration...");const t=await te(e),o=this.$route.query.referenceNumber;$t(),Ut("C75 Generated Successfully!");const a=window.URL.createObjectURL(new Blob([t],{type:"application/pdf"})),r=document.createElement("a");r.href=a;const n=`Customs Declaration - ${o}.pdf`;r.setAttribute("download",n),document.body.appendChild(r),r.click(),r.remove()}catch(t){Mt("Failed to save Entry Data!"),console.error("Failed to generate the declaration:",t)}}else Mt("Please select a declarant!")},async generatePreSignedValuation(){const e=this.prepareDeclarationObject();console.log("Generating C75 Declaration...");try{console.log("Generating customs declaration..."),Wt("Generating customs declaration...");const t=await ae(e);$t(),Ut("C75 Generated Successfully!");const o=window.URL.createObjectURL(new Blob([t],{type:"application/pdf"})),a=document.createElement("a");a.href=o;const r=`Customs Declaration - ${this.entryNumber}.pdf`;a.setAttribute("download",r),document.body.appendChild(a),a.click(),a.remove()}catch(t){Mt("Failed to save Entry Data!"),console.error("Failed to generate the declaration:",t)}},async generatePreSignedValuationVersionTwo(){const e=this.prepareDeclarationObject();console.log("Generating C75 Declaration...");try{console.log("Generating customs declaration..."),Wt("Generating customs declaration...");const t=await re(e);$t(),Ut("C75 Generated Successfully!");const o=window.URL.createObjectURL(new Blob([t],{type:"application/pdf"})),a=document.createElement("a");a.href=o;const r=`Customs Declaration - ${this.entryNumber}.pdf`;a.setAttribute("download",r),document.body.appendChild(a),a.click(),a.remove()}catch(t){Mt("Failed to save Entry Data!"),console.error("Failed to generate the declaration:",t)}},async updateC75Declaration(){console.log("Updating C75 Declaration...");const e=this.prepareDeclarationObject();try{Wt("Saving Data..."),console.log("Updating customs declaration..."),await ue(this.entryId,e),$t(),Ut("All Data Saved successfully!"),console.log("Customs declaration updated successfully.")}catch(t){Mt("Failed to save Entry Data!"),console.error("Failed to update the declaration:",t)}},async fetchCustomsDeclarations(){try{console.log("Getting C75 Entry...");const e=await se(this.entryId);if(206===e.status)return console.log("No C75 Entry found."),this.newC75=!0,this.entryNumber=e.data.entry_number?e.data.entry_number:"",void console.log("Entry Number:",this.entryNumber);this.newC75=!1,console.log("C75 Entry found."),this.updateFields(e.data)}catch(e){console.error("Failed to get the C75 Entry:",e)}},syncData(){this.form.customsDeclarationSectionOne.buyerId=parseInt(this.$route.query.buyerId),this.form.customsDeclarationSectionOne.sellerId=parseInt(this.$route.query.sellerId),this.form.customsDeclarationSectionOne.invoiceNumber=this.$route.query.invoiceNumber,this.form.customsDeclarationSectionThree.netPrice=this.$route.query.invoiceTotal,this.form.customsDeclarationSectionThree.invoiceCurrency=this.$route.query.currency,this.form.customsDeclarationSectionThree.exchangeRate=this.$route.query.rateOfExchange,this.form.customsDeclarationSectionThree.transport=this.$route.query.freight,this.form.customsDeclarationSectionThree.insurance=this.$route.query.insurance,this.form.customsDeclarationSectionOne.termsOfDelivery=this.$route.query.incoTerms?this.$route.query.incoTerms:"",Promise.all([de(),ie(),Fe(),le(),me()]).then((([e,t,o,a,r])=>{this.form.customsDeclarationSectionOne.sellers=e,this.form.customsDeclarationSectionOne.buyers=t,this.form.customsDeclarationSectionOne.vessels=o,this.form.customsDeclarationSectionOne.declarants=a,this.form.customsDeclarationSectionOne.countryList=r}))},convertTinyIntoString(e){return 1===e?"yes":"no"},updateFields(e){console.log("Updating fields..."),this.form.customsDeclarationSectionOne.sellerNameAddress=e.seller_name_and_address,this.form.customsDeclarationSectionOne.buyerNameAddress=e.buyer_name_address,this.form.customsDeclarationSectionOne.declarantNameAddress=e.declarant_name_address,this.form.customsDeclarationSectionOne.termsOfDelivery=e.terms_of_delivery,this.form.customsDeclarationSectionOne.contractNumber=e.name_date_contract,this.form.customsDeclarationSectionOne.invoiceNumber=e.number_date_invoice||this.$route.query.invoiceNumber||"",this.form.customsDeclarationSectionOne.sellerId=e.seller_id,this.form.customsDeclarationSectionOne.buyerId=e.buyer_id,this.form.customsDeclarationSectionOne.declarantId=e.declarant_id,this.form.customsDeclarationSectionTwo.relatedParties=this.convertTinyIntoString(e.related_parties_boolean),this.form.customsDeclarationSectionTwo.influencePrice=this.convertTinyIntoString(e.influence_price_boolean),this.form.customsDeclarationSectionTwo.transactionValueApproximate=this.convertTinyIntoString(e.transaction_value_approximate_boolean),this.form.customsDeclarationSectionTwo.restrictions=this.convertTinyIntoString(e.restrictions_disposal_boolean),this.form.customsDeclarationSectionTwo.conditions=this.convertTinyIntoString(e.sale_price_condition_boolean),this.form.customsDeclarationSectionTwo.royalties=this.convertTinyIntoString(e.royalties_boolean),this.form.customsDeclarationSectionTwo.resale_disposal_boolean=this.convertTinyIntoString(e.resale_disposal_boolean),this.form.customsDeclarationSectionTwo.date_signed=e.date_signed,this.form.customsDeclarationSectionTwo.status_of_signatory=e.status_of_signatory,this.form.customsDeclarationSectionTwo.signatory_phone_number=e.signatory_phone_number,this.form.customsDeclarationSectionTwo.signatory_name=e.signatory_name,this.form.customsDeclarationSectionThree.netPrice=e.invoiceTotal||this.$route.query.invoiceTotal||0,this.form.customsDeclarationSectionThree.indirectPayment=e.indirect_payment,this.form.customsDeclarationSectionThree.exchangeRate=e.rate_of_exchange||this.$route.query.rateOfExchange||1,this.form.customsDeclarationSectionThree.commissions=e.costs_commissions,this.form.customsDeclarationSectionThree.brokerage=e.costs_brokerage,this.form.customsDeclarationSectionThree.containersPacking=e.costs_containers_packing,this.form.customsDeclarationSectionThree.materials=e.goods_free_of_charge_materials,this.form.customsDeclarationSectionThree.tools=e.goods_free_of_charge_tools,this.form.customsDeclarationSectionThree.materialsConsumed=e.goods_free_of_charge_materials_consumed,this.form.customsDeclarationSectionThree.engineering=e.goods_engineering_development,this.form.customsDeclarationSectionThree.royalties=e.royalties_license_fee,this.form.customsDeclarationSectionThree.proceedsResale=e.procees_resale_disposal,this.form.customsDeclarationSectionThree.transport=e.cost_delivery_transport,this.form.customsDeclarationSectionThree.loadingHandling=e.cost_delivery_loading,this.form.customsDeclarationSectionThree.insurance=e.cost_delivery_insurance,this.form.customsDeclarationSectionFour.costAfterArrival=e.cost_transport_after_arrival,this.form.customsDeclarationSectionFour.chargesAfterImportation=e.charges_construction,this.form.customsDeclarationSectionFour.otherCharges=e.other_charges,this.form.customsDeclarationSectionFour.customsDutiesTaxes=e.customs_duties_taxes}}};const ou=(0,E.A)(tu,[["render",Vi],["__scopeId","data-v-5e1fdf86"]]);var au=ou;const ru=e=>((0,n.Qi)("data-v-45afafc3"),e=e(),(0,n.jt)(),e),nu={class:"buyers-page"},su=ru((()=>(0,n.Lk)("h1",null,"Importers List",-1))),iu={class:"row"},lu={class:"col-md-2"},cu={class:"form-group"},du=ru((()=>(0,n.Lk)("label",{for:"buyerName"},[(0,n.Lk)("strong",null,"Name")],-1))),uu={class:"col-md-2"},mu={class:"form-group"},hu=ru((()=>(0,n.Lk)("label",{for:"buyerAddressLine1"},[(0,n.Lk)("strong",null,"Address Line 1")],-1))),pu={class:"col-md-2"},yu={class:"form-group"},gu=ru((()=>(0,n.Lk)("label",{for:"buyerAddressLine2"},[(0,n.Lk)("strong",null,"Address Line 2")],-1))),fu={class:"col-md-2"},vu={class:"form-group"},bu=ru((()=>(0,n.Lk)("label",{for:"buyerCity"},[(0,n.Lk)("strong",null,"City")],-1))),ku={class:"col-md-2"},_u={class:"form-group"},Cu=ru((()=>(0,n.Lk)("label",{for:"buyerCountry"},[(0,n.Lk)("strong",null,"Country")],-1))),Du=ru((()=>(0,n.Lk)("option",{disabled:"",value:""},"Please select one",-1))),Lu=["value"],Eu={class:"col-md-1"},Fu={class:"form-group"},Iu=ru((()=>(0,n.Lk)("label",{for:"tinNumber"},[(0,n.Lk)("strong",null,"TIN Number")],-1))),xu=ru((()=>(0,n.Lk)("div",{class:"col-md-1"},[(0,n.Lk)("div",{class:"form-group"},[(0,n.Lk)("p",null,[(0,n.Lk)("strong")]),(0,n.Lk)("button",{class:"btn btn-primary",type:"submit"},"Add Importer")])],-1))),Tu={class:"table table-striped"},Su=ru((()=>(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",{scope:"col"},"#"),(0,n.Lk)("th",{scope:"col"},"Name"),(0,n.Lk)("th",{scope:"col"},"Address "),(0,n.Lk)("th",{scope:"col"},"Country"),(0,n.Lk)("th",{scope:"col"},"TIN Number"),(0,n.Lk)("th",{scope:"col"},"Expand")])],-1))),Au={scope:"row"},wu=["onClick"],Ou={key:0},Nu=ru((()=>(0,n.Lk)("i",{class:"fas fa-chevron-up",style:{color:"white"}},null,-1))),Pu=[Nu],Ru={key:1},Vu=ru((()=>(0,n.Lk)("i",{class:"fas fa-chevron-down",style:{color:"white"}},null,-1))),Uu=[Vu],Bu={key:0},$u={colspan:"6"},Mu={class:"row"},Wu={class:"col-md-3"},ju={class:"form-group"},Xu=ru((()=>(0,n.Lk)("label",{for:"buyerName"},[(0,n.Lk)("strong",null,"Name")],-1))),Gu=["onUpdate:modelValue"],qu={class:"col-md-3"},Ju={class:"form-group"},Yu=ru((()=>(0,n.Lk)("label",{for:"tinNumber"},[(0,n.Lk)("strong",null,"Tax Identification Number")],-1))),zu=["onUpdate:modelValue"],Hu={class:"row"},Ku={class:"col-md-3"},Qu={class:"form-group"},Zu=ru((()=>(0,n.Lk)("label",{for:"buyerAddress"},[(0,n.Lk)("strong",null,"Address")],-1))),em=["onUpdate:modelValue"],tm={class:"col-md-3"},om={class:"form-group"},am=ru((()=>(0,n.Lk)("label",{for:"buyerCountry"},[(0,n.Lk)("strong",null,"Country")],-1))),rm={class:"row"},nm={class:"col-md-3"},sm={class:"form-group"},im=["onClick"],lm=["onClick"];function cm(e,t,o,a,s,i){const l=(0,n.g2)("v-select");return(0,n.uX)(),(0,n.CE)("div",nu,[su,(0,n.Lk)("form",{class:"my-form-container",onSubmit:t[6]||(t[6]=(0,r.D$)(((...e)=>i.addBuyer&&i.addBuyer(...e)),["prevent"]))},[(0,n.Lk)("div",iu,[(0,n.Lk)("div",lu,[(0,n.Lk)("div",cu,[du,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"buyerName",placeholder:"Please Enter Buyer Name","onUpdate:modelValue":t[0]||(t[0]=e=>s.buyerName=e)},null,512),[[r.Jo,s.buyerName]])])]),(0,n.Lk)("div",uu,[(0,n.Lk)("div",mu,[hu,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"buyerAddressLine1",placeholder:"Please Enter Address Line 1","onUpdate:modelValue":t[1]||(t[1]=e=>s.buyerAddressLine1=e)},null,512),[[r.Jo,s.buyerAddressLine1]])])]),(0,n.Lk)("div",pu,[(0,n.Lk)("div",yu,[gu,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"buyerAddressLine2",placeholder:"Please Enter Address Line 2","onUpdate:modelValue":t[2]||(t[2]=e=>s.buyerAddressLine2=e)},null,512),[[r.Jo,s.buyerAddressLine2]])])]),(0,n.Lk)("div",fu,[(0,n.Lk)("div",vu,[bu,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"buyerCity",placeholder:"Please Enter City","onUpdate:modelValue":t[3]||(t[3]=e=>s.buyerCity=e)},null,512),[[r.Jo,s.buyerCity]])])]),(0,n.Lk)("div",ku,[(0,n.Lk)("div",_u,[Cu,(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":t[4]||(t[4]=e=>s.buyerCountry=e),id:"buyerCountry"},[Du,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(this.countries,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e.code,value:e.code},(0,T.v_)(e.code)+" - "+(0,T.v_)(e.name),9,Lu)))),128))],512),[[r.u1,s.buyerCountry]])])]),(0,n.Lk)("div",Eu,[(0,n.Lk)("div",Fu,[Iu,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"tinNumber",placeholder:"TIN Number","onUpdate:modelValue":t[5]||(t[5]=e=>s.tinNumber=e)},null,512),[[r.Jo,s.tinNumber]])])]),xu])],32),(0,n.Lk)("table",Tu,[Su,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.buyers,((e,t)=>((0,n.uX)(),(0,n.CE)(n.FK,{key:t},[(0,n.Lk)("tr",null,[(0,n.Lk)("th",Au,(0,T.v_)(t+1),1),(0,n.Lk)("td",null,(0,T.v_)(e.name),1),(0,n.Lk)("td",null,(0,T.v_)(e.address),1),(0,n.Lk)("td",null,(0,T.v_)(e.country),1),(0,n.Lk)("td",null,(0,T.v_)(e.taxIdentificationNumber),1),(0,n.Lk)("td",null,[(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e=>i.toggleDetails(t)},[s.expandedIndex===t?((0,n.uX)(),(0,n.CE)("span",Ou,Pu)):((0,n.uX)(),(0,n.CE)("span",Ru,Uu))],8,wu)])]),s.expandedIndex===t?((0,n.uX)(),(0,n.CE)("tr",Bu,[(0,n.Lk)("td",$u,[(0,n.Lk)("div",Mu,[(0,n.Lk)("div",Wu,[(0,n.Lk)("div",ju,[Xu,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"buyerName",placeholder:"Please Enter Buyer Name","onUpdate:modelValue":t=>e.name=t},null,8,Gu),[[r.Jo,e.name]])])]),(0,n.Lk)("div",qu,[(0,n.Lk)("div",Ju,[Yu,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"tinNumber",placeholder:"Please Enter TIN Number","onUpdate:modelValue":t=>e.taxIdentificationNumber=t},null,8,zu),[[r.Jo,e.taxIdentificationNumber]])])])]),(0,n.Lk)("div",Hu,[(0,n.Lk)("div",Ku,[(0,n.Lk)("div",Qu,[Zu,(0,n.bo)((0,n.Lk)("textarea",{type:"text",class:"form-control",id:"buyerAddressLine1",placeholder:"Please Enter Address","onUpdate:modelValue":t=>e.address=t,rows:"4"},null,8,em),[[r.Jo,e.address]])])]),(0,n.Lk)("div",tm,[(0,n.Lk)("div",om,[am,(0,n.bF)(l,{options:s.countries,modelValue:e.country,"onUpdate:modelValue":t=>e.country=t,label:"name",searchable:!0,filterable:!0,reduce:e=>e.code},null,8,["options","modelValue","onUpdate:modelValue","reduce"])])])]),(0,n.Lk)("div",rm,[(0,n.Lk)("div",nm,[(0,n.Lk)("div",sm,[(0,n.Lk)("button",{class:"btn btn-primary edit-form-button",onClick:t=>i.updateBuyer(e)},"Update Buyer",8,im),(0,n.Lk)("button",{class:"btn btn-danger edit-form-button",onClick:t=>i.deleteBuyer(e)},"Delete Buyer",8,lm)])])])])])):(0,n.Q3)("",!0)],64)))),128))])])])}var dm={name:"BuyersPage",data(){return{buyers:[],countries:[],buyerName:"",buyerAddressLine1:"",buyerAddressLine2:"",buyerCity:"",buyerCountry:"",tinNumber:"",expandedIndex:null}},methods:{toggleDetails(e){this.expandedIndex=this.expandedIndex===e?null:e},async getBuyers(){this.buyers=await ie(),console.log(this.buyers)},async updateBuyer(e){Wt("Updating Buyer"),pe(e).then((()=>{Ut("Buyer Updated Successfully"),this.getBuyers()})).catch((e=>{Mt("Failed to Update Buyer",e)}))},async deleteBuyer(e){e.active=0,Wt("Deleting Buyer"),pe(e).then((()=>{Ut("Buyer Deleted Successfully"),this.getBuyers()})).catch((e=>{Mt("Failed to Delete Buyer",e)}))},async addBuyer(){const e={name:this.buyerName,address:`${this.buyerAddressLine1}\n${this.buyerAddressLine2}\n${this.buyerCity}`,country:this.buyerCountry,taxIdentificationNumber:this.tinNumber};Wt("Adding Buyer"),he(e).then((()=>{this.buyerName="",this.buyerAddressLine1="",this.buyerAddressLine2="",this.buyerCity="",this.buyerCountry="",Ut("Buyer Added Successfully"),this.getBuyers()})).catch((e=>{Mt("Failed to Add Buyer",e)}))},async getCountries(){this.countries=await me(),console.log("Countries",this.contries)}},mounted(){this.getBuyers(),this.getCountries()}};const um=(0,E.A)(dm,[["render",cm],["__scopeId","data-v-45afafc3"]]);var mm=um;const hm=e=>((0,n.Qi)("data-v-4b55fb10"),e=e(),(0,n.jt)(),e),pm={class:"sellers-page"},ym=hm((()=>(0,n.Lk)("h1",null,"Shippers List",-1))),gm={class:"row"},fm={class:"col-md-2"},vm={class:"form-group"},bm=hm((()=>(0,n.Lk)("label",{for:"sellerName"},[(0,n.Lk)("strong",null,"Name")],-1))),km={class:"col-md-2"},_m={class:"form-group"},Cm=hm((()=>(0,n.Lk)("label",{for:"sellerAddressLine1"},[(0,n.Lk)("strong",null,"Address Line 1")],-1))),Dm={class:"col-md-2"},Lm={class:"form-group"},Em=hm((()=>(0,n.Lk)("label",{for:"sellerAddressLine2"},[(0,n.Lk)("strong",null,"Address Line 2")],-1))),Fm={class:"col-md-2"},Im={class:"form-group"},xm=hm((()=>(0,n.Lk)("label",{for:"sellerCity"},[(0,n.Lk)("strong",null,"City")],-1))),Tm={class:"col-md-2"},Sm={class:"form-group"},Am=hm((()=>(0,n.Lk)("label",{for:"sellerCountry"},[(0,n.Lk)("strong",null,"Country")],-1))),wm=hm((()=>(0,n.Lk)("option",{disabled:"",value:""},"Please select one",-1))),Om=["value"],Nm={class:"col-md-1"},Pm={class:"form-group"},Rm=hm((()=>(0,n.Lk)("label",{for:"tinNumber"},[(0,n.Lk)("strong",null,"TIN Number")],-1))),Vm=hm((()=>(0,n.Lk)("div",{class:"col-md-1"},[(0,n.Lk)("div",{class:"form-group"},[(0,n.Lk)("p",null,[(0,n.Lk)("strong")]),(0,n.Lk)("button",{class:"btn btn-primary",type:"submit"},"Add Shipper")])],-1))),Um={class:"table table-striped"},Bm=hm((()=>(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",{scope:"col"},"#"),(0,n.Lk)("th",{scope:"col"},"Name"),(0,n.Lk)("th",{scope:"col"},"Address "),(0,n.Lk)("th",{scope:"col"},"Country"),(0,n.Lk)("th",{scope:"col"},"TIN Number")])],-1))),$m={scope:"row"},Mm=["onClick"],Wm={key:0},jm=hm((()=>(0,n.Lk)("i",{class:"fas fa-chevron-up",style:{color:"white"}},null,-1))),Xm=[jm],Gm={key:1},qm=hm((()=>(0,n.Lk)("i",{class:"fas fa-chevron-down",style:{color:"white"}},null,-1))),Jm=[qm],Ym={key:0},zm={colspan:"6"},Hm={class:"row"},Km={class:"col-md-3"},Qm={class:"form-group"},Zm=hm((()=>(0,n.Lk)("label",{for:"shipperName"},[(0,n.Lk)("strong",null,"Name")],-1))),eh=["onUpdate:modelValue"],th={class:"col-md-3"},oh={class:"form-group"},ah=hm((()=>(0,n.Lk)("label",{for:"tinNumber"},[(0,n.Lk)("strong",null,"TIN Number")],-1))),rh=["onUpdate:modelValue"],nh={class:"row"},sh={class:"col-md-3"},ih={class:"form-group"},lh=hm((()=>(0,n.Lk)("label",{for:"shipperAddressLine1"},[(0,n.Lk)("strong",null,"Address Line 1")],-1))),ch=["onUpdate:modelValue"],dh={class:"col-md-3"},uh={class:"form-group"},mh=hm((()=>(0,n.Lk)("label",{for:"shipperCountry"},[(0,n.Lk)("strong",null,"Country")],-1))),hh={class:"row"},ph={class:"col-md-3"},yh={class:"form-group"},gh=["onClick"],fh=["onClick"];function vh(e,t,o,a,s,i){const l=(0,n.g2)("v-select");return(0,n.uX)(),(0,n.CE)("div",pm,[ym,(0,n.Lk)("form",{class:"my-form-container",onSubmit:t[6]||(t[6]=(0,r.D$)(((...e)=>i.addSeller&&i.addSeller(...e)),["prevent"]))},[(0,n.Lk)("div",gm,[(0,n.Lk)("div",fm,[(0,n.Lk)("div",vm,[bm,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"sellerName",placeholder:"Please Enter Seller Name","onUpdate:modelValue":t[0]||(t[0]=e=>s.sellerName=e)},null,512),[[r.Jo,s.sellerName]])])]),(0,n.Lk)("div",km,[(0,n.Lk)("div",_m,[Cm,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"sellerAddressLine1",placeholder:"Please Enter Address Line 1","onUpdate:modelValue":t[1]||(t[1]=e=>s.sellerAddressLine1=e)},null,512),[[r.Jo,s.sellerAddressLine1]])])]),(0,n.Lk)("div",Dm,[(0,n.Lk)("div",Lm,[Em,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"sellerAddressLine2",placeholder:"Please Enter Address Line 2","onUpdate:modelValue":t[2]||(t[2]=e=>s.sellerAddressLine2=e)},null,512),[[r.Jo,s.sellerAddressLine2]])])]),(0,n.Lk)("div",Fm,[(0,n.Lk)("div",Im,[xm,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"sellerCity",placeholder:"Please Enter City","onUpdate:modelValue":t[3]||(t[3]=e=>s.sellerCity=e)},null,512),[[r.Jo,s.sellerCity]])])]),(0,n.Lk)("div",Tm,[(0,n.Lk)("div",Sm,[Am,(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":t[4]||(t[4]=e=>s.sellerCountry=e),id:"sellerCountry"},[wm,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(this.countries,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e.code,value:e.code},(0,T.v_)(e.code)+" - "+(0,T.v_)(e.name),9,Om)))),128))],512),[[r.u1,s.sellerCountry]])])]),(0,n.Lk)("div",Nm,[(0,n.Lk)("div",Pm,[Rm,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"tinNumber",placeholder:"TIN Number","onUpdate:modelValue":t[5]||(t[5]=e=>s.tinNumber=e)},null,512),[[r.Jo,s.tinNumber]])])]),Vm])],32),(0,n.Lk)("table",Um,[Bm,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.sellers,((e,t)=>((0,n.uX)(),(0,n.CE)(n.FK,{key:t},[(0,n.Lk)("tr",null,[(0,n.Lk)("th",$m,(0,T.v_)(t+1),1),(0,n.Lk)("td",null,(0,T.v_)(e.name),1),(0,n.Lk)("td",null,(0,T.v_)(e.address),1),(0,n.Lk)("td",null,(0,T.v_)(e.country),1),(0,n.Lk)("td",null,(0,T.v_)(e.taxIdentificationNumber),1),(0,n.Lk)("td",null,[(0,n.Lk)("button",{class:"btn btn-primary",onClick:e=>i.toggleDetails(t)},[s.expandedIndex===t?((0,n.uX)(),(0,n.CE)("span",Wm,Xm)):((0,n.uX)(),(0,n.CE)("span",Gm,Jm))],8,Mm)])]),s.expandedIndex===t?((0,n.uX)(),(0,n.CE)("tr",Ym,[(0,n.Lk)("td",zm,[(0,n.Lk)("div",Hm,[(0,n.Lk)("div",Km,[(0,n.Lk)("div",Qm,[Zm,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"shipperName","onUpdate:modelValue":t=>e.name=t},null,8,eh),[[r.Jo,e.name]])])]),(0,n.Lk)("div",th,[(0,n.Lk)("div",oh,[ah,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"tinNumber","onUpdate:modelValue":t=>e.taxIdentificationNumber=t},null,8,rh),[[r.Jo,e.taxIdentificationNumber]])])])]),(0,n.Lk)("div",nh,[(0,n.Lk)("div",sh,[(0,n.Lk)("div",ih,[lh,(0,n.bo)((0,n.Lk)("textarea",{type:"text",class:"form-control",id:"shipperAddressLine1","onUpdate:modelValue":t=>e.address=t,rows:"4"},null,8,ch),[[r.Jo,e.address]])])]),(0,n.Lk)("div",dh,[(0,n.Lk)("div",uh,[mh,(0,n.bF)(l,{modelValue:e.country,"onUpdate:modelValue":t=>e.country=t,options:s.countries,label:"name",searchable:!0,filterable:!0,reduce:e=>e.code},null,8,["modelValue","onUpdate:modelValue","options","reduce"])])])]),(0,n.Lk)("div",hh,[(0,n.Lk)("div",ph,[(0,n.Lk)("div",yh,[(0,n.Lk)("button",{class:"btn btn-primary edit-form-button",onClick:t=>i.updateShipper(e)},"Update Shipper",8,gh),(0,n.Lk)("button",{class:"btn btn-danger edit-form-button",onClick:t=>i.deleteShipper(e)},"Delete Shipper",8,fh)])])])])])):(0,n.Q3)("",!0)],64)))),128))])])])}var bh={name:"SellersPage",data(){return{sellers:[],countries:[],sellerName:"",sellerAddressLine1:"",sellerAddressLine2:"",sellerCity:"",sellerCountry:"",tinNumber:"",expandedIndex:null}},methods:{toggleDetails(e){this.expandedIndex=this.expandedIndex===e?null:e},async getSellers(){this.sellers=await de()},async updateShipper(e){Wt("Updating Data..."),ye(e).then((()=>{this.getSellers(),Ut("Shipper updated successfully")})).catch((e=>{Mt("Error updating shipper",e)}))},async deleteShipper(e){e.active=0,Wt("Deleting Data..."),ye(e).then((()=>{this.getSellers(),Ut("Shipper deleted successfully")})).catch((e=>{Mt("Error deleting shipper",e)}))},async getContries(){this.countries=await me()},async addSeller(){const e={name:this.sellerName,address:`${this.sellerAddressLine1}\n${this.sellerAddressLine2}\n${this.sellerCity}`,country:this.sellerCountry,phoneContact:"",emailContact:"",taxIdentificationNumber:this.tinNumber};console.log("Seller",e),Wt("Saving Data..."),fe(e).then((()=>{this.sellerName="",this.sellerAddressLine1="",this.sellerAddressLine2="",this.sellerCity="",this.sellerCountry="",this.tinNumber="",this.getSellers(),Ut("Shipper added successfully")})).catch((e=>{Mt("Error adding shipper",e)}))}},mounted(){this.getSellers(),this.getContries()}};const kh=(0,E.A)(bh,[["render",vh],["__scopeId","data-v-4b55fb10"]]);var _h=kh;const Ch=e=>((0,n.Qi)("data-v-de0fbfb2"),e=e(),(0,n.jt)(),e),Dh={class:"declarants-page"},Lh=Ch((()=>(0,n.Lk)("h1",null,"Declarants List",-1))),Eh={class:"row"},Fh={class:"col-md-3"},Ih={class:"form-group"},xh=Ch((()=>(0,n.Lk)("label",{for:"declarantName"},[(0,n.Lk)("strong",null,"Name")],-1))),Th={class:"col-md-3"},Sh={class:"form-group"},Ah=Ch((()=>(0,n.Lk)("label",{for:"declarantAddressLine1"},[(0,n.Lk)("strong",null,"Address Line")],-1))),wh={class:"col-md-3"},Oh={class:"form-group"},Nh=Ch((()=>(0,n.Lk)("label",{for:"declarantAddressLine2"},[(0,n.Lk)("strong",null,"Address Line 2")],-1))),Ph={class:"col-md-3"},Rh={class:"form-group"},Vh=Ch((()=>(0,n.Lk)("label",{for:"declarantCity"},[(0,n.Lk)("strong",null,"City")],-1))),Uh={class:"row"},Bh={class:"col-md-3"},$h={class:"form-group"},Mh=Ch((()=>(0,n.Lk)("label",{for:"declarantCountry"},[(0,n.Lk)("strong",null,"Country")],-1))),Wh={class:"col-md-3"},jh={class:"form-group"},Xh=Ch((()=>(0,n.Lk)("label",{for:"declarantStatus"},[(0,n.Lk)("strong",null,"Status")],-1))),Gh={class:"col-md-3"},qh={class:"form-group"},Jh=Ch((()=>(0,n.Lk)("label",{for:"declarantImporter"},[(0,n.Lk)("strong",null,"Importer")],-1))),Yh=Ch((()=>(0,n.Lk)("div",{class:"col-md-3"},[(0,n.Lk)("div",{class:"form-group"},[(0,n.Lk)("p",null,[(0,n.Lk)("strong")]),(0,n.Lk)("button",{class:"btn btn-primary",type:"submit"},"Add New Declarant")])],-1))),zh={class:"table table-striped"},Hh=Ch((()=>(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",{scope:"col"},"#"),(0,n.Lk)("th",{scope:"col"},"Name"),(0,n.Lk)("th",{scope:"col"},"Address "),(0,n.Lk)("th",{scope:"col"},"Country"),(0,n.Lk)("th",{scope:"col"},"Status"),(0,n.Lk)("th",{scope:"col"},"Expand")])],-1))),Kh={scope:"row"},Qh=["onClick"],Zh={key:0},ep=Ch((()=>(0,n.Lk)("i",{class:"fas fa-chevron-up",style:{color:"white"}},null,-1))),tp=[ep],op={key:1},ap=Ch((()=>(0,n.Lk)("i",{class:"fas fa-chevron-down",style:{color:"white"}},null,-1))),rp=[ap],np={key:0},sp={colspan:"6"},ip={class:"row"},lp={class:"col-md-3"},cp={class:"form-group"},dp=Ch((()=>(0,n.Lk)("label",{for:"declarantName"},[(0,n.Lk)("strong",null,"Name")],-1))),up=["onUpdate:modelValue"],mp={class:"col-md-3"},hp={class:"form-group"},pp=Ch((()=>(0,n.Lk)("label",{for:"status"},[(0,n.Lk)("strong",null,"Status")],-1))),yp=["onUpdate:modelValue"],gp={class:"col-md-3"},fp={class:"form-group"},vp=Ch((()=>(0,n.Lk)("label",{for:"importer"},[(0,n.Lk)("strong",null,"Importer")],-1))),bp={class:"row"},kp={class:"col-md-3"},_p={class:"form-group"},Cp=Ch((()=>(0,n.Lk)("label",{for:"declarantAddressLine1"},[(0,n.Lk)("strong",null,"Address Line 1")],-1))),Dp=["onUpdate:modelValue"],Lp={class:"col-md-3"},Ep={class:"form-group"},Fp=Ch((()=>(0,n.Lk)("label",{for:"country"},[(0,n.Lk)("strong",null,"Country")],-1))),Ip={class:"row"},xp={class:"col-md-3"},Tp={class:"form-group"},Sp=["onClick"],Ap=["onClick"];function wp(e,t,o,a,s,i){const l=(0,n.g2)("v-select");return(0,n.uX)(),(0,n.CE)("div",Dh,[Lh,(0,n.Lk)("form",{class:"my-form-container",onSubmit:t[7]||(t[7]=(0,r.D$)(((...e)=>i.addDeclarant&&i.addDeclarant(...e)),["prevent"]))},[(0,n.Lk)("div",Eh,[(0,n.Lk)("div",Fh,[(0,n.Lk)("div",Ih,[xh,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"declarantName",placeholder:"Please Enter Declarant Name","onUpdate:modelValue":t[0]||(t[0]=e=>s.declarantName=e)},null,512),[[r.Jo,s.declarantName]])])]),(0,n.Lk)("div",Th,[(0,n.Lk)("div",Sh,[Ah,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"declarantAddressLine1",placeholder:"Please Enter Address Line","onUpdate:modelValue":t[1]||(t[1]=e=>s.declarantAddressLine1=e)},null,512),[[r.Jo,s.declarantAddressLine1]])])]),(0,n.Lk)("div",wh,[(0,n.Lk)("div",Oh,[Nh,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"declarantAddressLine2",placeholder:"Please Enter Address Line 2","onUpdate:modelValue":t[2]||(t[2]=e=>s.declarantAddressLine2=e)},null,512),[[r.Jo,s.declarantAddressLine2]])])]),(0,n.Lk)("div",Ph,[(0,n.Lk)("div",Rh,[Vh,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"declarantCity",placeholder:"Please Enter City","onUpdate:modelValue":t[3]||(t[3]=e=>s.declarantCity=e)},null,512),[[r.Jo,s.declarantCity]])])])]),(0,n.Lk)("div",Uh,[(0,n.Lk)("div",Bh,[(0,n.Lk)("div",$h,[Mh,(0,n.bF)(l,{modelValue:s.declarantCountry,"onUpdate:modelValue":t[4]||(t[4]=e=>s.declarantCountry=e),options:s.countries,label:"name",placeholder:"Select Country",searchable:!0,reduce:e=>e.name,filterable:!0},null,8,["modelValue","options","reduce"])])]),(0,n.Lk)("div",Wh,[(0,n.Lk)("div",jh,[Xh,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"declarantStatus",placeholder:"Please Enter Status","onUpdate:modelValue":t[5]||(t[5]=e=>s.declarantStatus=e)},null,512),[[r.Jo,s.declarantStatus]])])]),(0,n.Lk)("div",Gh,[(0,n.Lk)("div",qh,[Jh,(0,n.bF)(l,{modelValue:s.declarantImporter,"onUpdate:modelValue":t[6]||(t[6]=e=>s.declarantImporter=e),options:s.importers,label:"name",placeholder:"Select Importer",searchable:!0,reduce:e=>e.id,filterable:!0},null,8,["modelValue","options","reduce"])])]),Yh])],32),(0,n.Lk)("table",zh,[Hh,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.declarants,((e,t)=>((0,n.uX)(),(0,n.CE)(n.FK,{key:t},[(0,n.Lk)("tr",null,[(0,n.Lk)("th",Kh,(0,T.v_)(t+1),1),(0,n.Lk)("td",null,(0,T.v_)(e.name),1),(0,n.Lk)("td",null,(0,T.v_)(e.address),1),(0,n.Lk)("td",null,(0,T.v_)(e.country),1),(0,n.Lk)("td",null,(0,T.v_)(e.status),1),(0,n.Lk)("td",null,[(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e=>i.toggleDetails(t)},[s.expandedIndex===t?((0,n.uX)(),(0,n.CE)("span",Zh,tp)):((0,n.uX)(),(0,n.CE)("span",op,rp))],8,Qh)])]),s.expandedIndex===t?((0,n.uX)(),(0,n.CE)("tr",np,[(0,n.Lk)("td",sp,[(0,n.Lk)("div",ip,[(0,n.Lk)("div",lp,[(0,n.Lk)("div",cp,[dp,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"declarantName",placeholder:"Please Enter Declarant Name","onUpdate:modelValue":t=>e.name=t},null,8,up),[[r.Jo,e.name]])])]),(0,n.Lk)("div",mp,[(0,n.Lk)("div",hp,[pp,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"status",placeholder:"Please Enter Status","onUpdate:modelValue":t=>e.status=t},null,8,yp),[[r.Jo,e.status]])])]),(0,n.Lk)("div",gp,[(0,n.Lk)("div",fp,[vp,(0,n.bF)(l,{modelValue:e.importerCode,"onUpdate:modelValue":t=>e.importerCode=t,options:s.importers,label:"name",placeholder:"Select Importer",searchable:!0,reduce:e=>e.id,filterable:!0},null,8,["modelValue","onUpdate:modelValue","options","reduce"])])])]),(0,n.Lk)("div",bp,[(0,n.Lk)("div",kp,[(0,n.Lk)("div",_p,[Cp,(0,n.bo)((0,n.Lk)("textarea",{type:"text",class:"form-control",id:"declarantAddressLine1",placeholder:"Please Enter Address Line 1","onUpdate:modelValue":t=>e.address=t,rows:"4"},null,8,Dp),[[r.Jo,e.address]])])]),(0,n.Lk)("div",Lp,[(0,n.Lk)("div",Ep,[Fp,(0,n.bF)(l,{modelValue:e.country,"onUpdate:modelValue":t=>e.country=t,options:s.countries,label:"name",placeholder:"Select Country",searchable:!0,reduce:e=>e.name,filterable:!0},null,8,["modelValue","onUpdate:modelValue","options","reduce"])])])]),(0,n.Lk)("div",Ip,[(0,n.Lk)("div",xp,[(0,n.Lk)("div",Tp,[(0,n.Lk)("button",{class:"btn btn-primary edit-form-button",onClick:t=>i.updateDeclarant(e)},"Update Declarant",8,Sp),(0,n.Lk)("button",{class:"btn btn-danger edit-form-button",onClick:t=>i.deleteDeclarant(e)},"Delete Buyer",8,Ap)])])])])])):(0,n.Q3)("",!0)],64)))),128))])])])}var Op={name:"DeclarantsPage",data(){return{declarants:[],countries:[],importers:[],declarantName:"",declarantAddressLine1:"",declarantAddressLine2:"",declarantCity:"",declarantCountry:"",declarantStatus:"",declarantImporter:"",expandedIndex:null}},methods:{toggleDetails(e){this.expandedIndex=this.expandedIndex===e?null:e},async getDeclarants(){this.declarants=await le()},async getContries(){this.countries=await me()},async fetchImporters(){this.importers=await ie()},async addDeclarant(){if(!this.declarantName||!this.declarantAddressLine1||!this.declarantCity||!this.declarantCountry||!this.declarantStatus||!this.declarantImporter)return void Mt("All fields are required");const e={name:this.declarantName,address:`${this.declarantAddressLine1}\n${this.declarantAddressLine2}`,city:this.declarantCity,country:this.declarantCountry,status:this.declarantStatus,importerId:this.declarantImporter};Wt("Adding Declarant..."),ve(e).then((()=>{this.declarantName="",this.declarantAddressLine1="",this.declarantAddressLine2="",this.declarantCity="",this.declarantCountry="",this.declarantStatus="",this.declarantImporter="",Ut("Declarant Added Successfully"),this.getDeclarants()})).catch((e=>{Mt("Failed to Add Declarant",e)}))},updateDeclarant(e){Wt("Updating Declarant..."),ge(e).then((()=>{Ut("Declarant Updated Successfully"),this.getDeclarants()})).catch((e=>{Mt("Failed to Update Declarant",e)}))},deleteDeclarant(e){e.active=0,Wt("Deleting Declarant..."),ge(e).then((()=>{Ut("Declarant Deleted Successfully"),this.getDeclarants()})).catch((e=>{Mt("Failed to Delete Declarant",e)}))}},mounted(){this.getDeclarants(),this.getContries(),this.fetchImporters()}};const Np=(0,E.A)(Op,[["render",wp],["__scopeId","data-v-de0fbfb2"]]);var Pp=Np;const Rp=e=>((0,n.Qi)("data-v-06b8fda6"),e=e(),(0,n.jt)(),e),Vp={class:"vessels-page"},Up=Rp((()=>(0,n.Lk)("h1",null,"Vessels List",-1))),Bp={class:"row"},$p={class:"col-md-5"},Mp={class:"form-group"},Wp=Rp((()=>(0,n.Lk)("label",{for:"vesselName"},[(0,n.Lk)("strong",null,"Vessel Name")],-1))),jp={class:"col-md-5"},Xp={class:"form-group"},Gp=Rp((()=>(0,n.Lk)("label",{for:"imoNumber"},[(0,n.Lk)("strong",null,"IMO Number")],-1))),qp=Rp((()=>(0,n.Lk)("div",{class:"col-md-2"},[(0,n.Lk)("div",{class:"form-group"},[(0,n.Lk)("p",null,[(0,n.Lk)("strong")]),(0,n.Lk)("button",{class:"btn btn-primary",type:"submit"},"Add Vessel")])],-1))),Jp={class:"table table-striped"},Yp=Rp((()=>(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",{scope:"col"},"#"),(0,n.Lk)("th",{scope:"col"},"Vessel Name"),(0,n.Lk)("th",{scope:"col"},"IMO Number "),(0,n.Lk)("th",{scope:"col"},"Expand")])],-1))),zp={scope:"row"},Hp=["onClick"],Kp={key:0},Qp=Rp((()=>(0,n.Lk)("i",{class:"fas fa-chevron-up",style:{color:"white"}},null,-1))),Zp=[Qp],ey={key:1},ty=Rp((()=>(0,n.Lk)("i",{class:"fas fa-chevron-down",style:{color:"white"}},null,-1))),oy=[ty],ay={key:0},ry={colspan:"3"},ny={class:"row"},sy={class:"col-md-3"},iy={class:"form-group"},ly=Rp((()=>(0,n.Lk)("label",{for:"vesselName"},[(0,n.Lk)("strong",null,"Vessel Name")],-1))),cy=["onUpdate:modelValue"],dy={class:"col-md-3"},uy={class:"form-group"},my=Rp((()=>(0,n.Lk)("label",{for:"imoNumber"},[(0,n.Lk)("strong",null,"IMO Number")],-1))),hy=["onUpdate:modelValue"],py={class:"row"},yy={class:"col-md-3"},gy={class:"form-group"},fy=["onClick"],vy=["onClick"];function by(e,t,o,a,s,i){return(0,n.uX)(),(0,n.CE)("div",Vp,[Up,(0,n.Lk)("form",{class:"my-form-container",onSubmit:t[2]||(t[2]=(0,r.D$)(((...e)=>i.addVessel&&i.addVessel(...e)),["prevent"]))},[(0,n.Lk)("div",Bp,[(0,n.Lk)("div",$p,[(0,n.Lk)("div",Mp,[Wp,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"vesselName",placeholder:"Please Enter Vessel Name","onUpdate:modelValue":t[0]||(t[0]=e=>s.vesselName=e)},null,512),[[r.Jo,s.vesselName]])])]),(0,n.Lk)("div",jp,[(0,n.Lk)("div",Xp,[Gp,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"imoNumber",placeholder:"Please Enter IMO Number","onUpdate:modelValue":t[1]||(t[1]=e=>s.imoNumber=e)},null,512),[[r.Jo,s.imoNumber]])])]),qp])],32),(0,n.Lk)("table",Jp,[Yp,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.vessels,((e,t)=>((0,n.uX)(),(0,n.CE)(n.FK,{key:t},[(0,n.Lk)("tr",null,[(0,n.Lk)("th",zp,(0,T.v_)(t+1),1),(0,n.Lk)("td",null,(0,T.v_)(e.name),1),(0,n.Lk)("td",null,(0,T.v_)(e.imoNumber),1),(0,n.Lk)("td",null,[(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e=>i.toggleDetails(t)},[s.expandedIndex===t?((0,n.uX)(),(0,n.CE)("span",Kp,Zp)):((0,n.uX)(),(0,n.CE)("span",ey,oy))],8,Hp)])]),s.expandedIndex===t?((0,n.uX)(),(0,n.CE)("tr",ay,[(0,n.Lk)("td",ry,[(0,n.Lk)("div",ny,[(0,n.Lk)("div",sy,[(0,n.Lk)("div",iy,[ly,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"vesselName",placeholder:"Please Enter Vessel Name","onUpdate:modelValue":t=>e.name=t},null,8,cy),[[r.Jo,e.name]])])]),(0,n.Lk)("div",dy,[(0,n.Lk)("div",uy,[my,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"imoNumber",placeholder:"Please Enter IMO Number","onUpdate:modelValue":t=>e.imoNumber=t},null,8,hy),[[r.Jo,e.imoNumber]])])])]),(0,n.Lk)("div",py,[(0,n.Lk)("div",yy,[(0,n.Lk)("div",gy,[(0,n.Lk)("button",{class:"btn btn-primary edit-form-button",type:"submit",onClick:t=>i.updateVessel(e)},"Update Vessel",8,fy),(0,n.Lk)("button",{class:"btn btn-danger edit-form-button",type:"submit",onClick:t=>i.deleteVessel(e)},"Delete Vessel",8,vy)])])])])])):(0,n.Q3)("",!0)],64)))),128))])])])}var ky={name:"VesselsPage",data(){return{vessels:[],expandedIndex:null,vesselName:"",imoNumber:""}},mounted(){this.getVessels()},methods:{toggleDetails(e){this.expandedIndex=this.expandedIndex===e?null:e},async updateVessel(e){Wt("Updating Vessel"),xe(e).then((()=>{Ut("Vessel Updated Successfully"),this.getVessels()})).catch((e=>{Mt("Failed to Update Vessel",e)}))},async deleteVessel(e){e.active=0,Wt("Deleting Vessel"),xe(e).then((()=>{Ut("Vessel Deleted Successfully"),this.getVessels()})).catch((e=>{Mt("Failed to Delete Vessel",e)}))},async getVessels(){this.vessels=await Fe()},async addVessel(){const e={name:this.vesselName,imoNumber:this.imoNumber};Wt("Adding Vessel"),Ie(e).then((()=>{Ut("Vessel Added Successfully"),this.vesselName="",this.imoNumber="",this.getVessels()})).catch((e=>{Mt("Failed to Add Vessel",e)}))}}};const _y=(0,E.A)(ky,[["render",by],["__scopeId","data-v-06b8fda6"]]);var Cy=_y;const Dy=e=>((0,n.Qi)("data-v-b84d4fca"),e=e(),(0,n.jt)(),e),Ly={class:"exchange-rates-page"},Ey=Dy((()=>(0,n.Lk)("h1",null,"Exchange Rates",-1))),Fy={class:"row"},Iy={class:"col-md-3"},xy={class:"form-group"},Ty=Dy((()=>(0,n.Lk)("label",{for:"baseCurrency"},[(0,n.Lk)("strong",null,"Currency")],-1))),Sy={class:"col-md-3"},Ay={class:"form-group"},wy=Dy((()=>(0,n.Lk)("label",{for:"rate"},[(0,n.Lk)("strong",null,"Exchange Rate")],-1))),Oy={class:"col-md-3"},Ny={class:"form-group"},Py=Dy((()=>(0,n.Lk)("label",{for:"effectiveDate"},[(0,n.Lk)("strong",null,"Effective Date")],-1))),Ry=Dy((()=>(0,n.Lk)("div",{class:"col-md-3"},[(0,n.Lk)("div",{class:"form-group"},[(0,n.Lk)("p",null,[(0,n.Lk)("strong")]),(0,n.Lk)("button",{class:"btn btn-primary",type:"submit"},"Add Rate")])],-1))),Vy={class:"table table-striped"},Uy=Dy((()=>(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",{scope:"col"},"#"),(0,n.Lk)("th",{scope:"col"},"Currency Code"),(0,n.Lk)("th",{scope:"col"},"Currency Name"),(0,n.Lk)("th",{scope:"col"},"Exchange Rate"),(0,n.Lk)("th",{scope:"col"},"Effective Date")])],-1))),By={scope:"row"};function $y(e,t,o,a,s,i){const l=(0,n.g2)("v-select");return(0,n.uX)(),(0,n.CE)("div",Ly,[Ey,(0,n.Lk)("form",{class:"my-form-container",onSubmit:t[3]||(t[3]=(0,r.D$)(((...e)=>i.addExchangeRate&&i.addExchangeRate(...e)),["prevent"]))},[(0,n.Lk)("div",Fy,[(0,n.Lk)("div",Iy,[(0,n.Lk)("div",xy,[Ty,(0,n.bF)(l,{options:s.currencies,modelValue:s.baseCurrency,"onUpdate:modelValue":t[0]||(t[0]=e=>s.baseCurrency=e),label:"name",id:"invoiceCurrency",searchable:!0,filterable:!0,reduce:e=>e.code},null,8,["options","modelValue","reduce"])])]),(0,n.Lk)("div",Sy,[(0,n.Lk)("div",Ay,[wy,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"rate",placeholder:"Please Enter Exchange Rate","onUpdate:modelValue":t[1]||(t[1]=e=>s.rate=e)},null,512),[[r.Jo,s.rate]])])]),(0,n.Lk)("div",Oy,[(0,n.Lk)("div",Ny,[Py,(0,n.bo)((0,n.Lk)("input",{type:"date",class:"form-control",id:"effectiveDate",placeholder:"Please Enter Effective Date","onUpdate:modelValue":t[2]||(t[2]=e=>s.effectiveDate=e)},null,512),[[r.Jo,s.effectiveDate]])])]),Ry])],32),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.groupedExchangeRates,((e,t)=>((0,n.uX)(),(0,n.CE)("div",{key:t,class:"rate-group"},[(0,n.Lk)("h3",null,(0,T.v_)(t),1),(0,n.Lk)("table",Vy,[Uy,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e,((e,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:e.id},[(0,n.Lk)("th",By,(0,T.v_)(t+1),1),(0,n.Lk)("td",null,(0,T.v_)(e.base_currency),1),(0,n.Lk)("td",null,(0,T.v_)(e.base_currency_name),1),(0,n.Lk)("td",null,(0,T.v_)(e.rate),1),(0,n.Lk)("td",null,(0,T.v_)(i.formatDate(e.last_updated)),1)])))),128))])])])))),128))])}var My={name:"ExchangeRatesPage",data(){return{exchangeRates:[],currencies:[],baseCurrency:"",rate:"",effectiveDate:this.getCurrentDate()}},computed:{sortedExchangeRates(){return[...this.exchangeRates].sort(((e,t)=>new Date(t.last_updated)-new Date(e.last_updated)))},groupedExchangeRates(){return this.sortedExchangeRates.reduce(((e,t)=>{const o=this.formatDate(t.last_updated);return e[o]||(e[o]=[]),e[o].push(t),e}),{})}},methods:{getCurrentDate(){const e=new Date,t=e.getFullYear(),o=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getDate().toString().padStart(2,"0");return`${t}-${o}-${a}`},getCurrencyName(e){const t=this.currencies.find((t=>t.code===e));return t?t.name:""},modifyExchangeRates(){this.exchangeRates=this.exchangeRates.map((e=>({...e,base_currency_name:this.getCurrencyName(e.base_currency)})))},formatDate(e){return Ft(e)},async getExchangeRates(){this.exchangeRates=await De(),console.log("Exchange Rates",this.exchangeRates),this.modifyExchangeRates()},async addExchangeRate(){const e=new Date(this.effectiveDate).toISOString(),t={baseCurrency:this.baseCurrency,targetCurrency:"TTD",rate:this.rate,lastUpdated:e};console.log("Rate",t),Ee(t).then((()=>{Ut("Exchange Rate Added Successfully"),this.getExchangeRates(),this.baseCurrency="",this.rate=""})).catch((()=>{Mt("Failed to Add Exchange Rate")})),this.getExchangeRates()}},mounted(){this.getExchangeRates(),console.log("Currencies",ja()),this.currencies=ja()}};const Wy=(0,E.A)(My,[["render",$y],["__scopeId","data-v-b84d4fca"]]);var jy=Wy;function Xy(e,t,o,a,r,s){const i=(0,n.g2)("VehicleEntry");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(i,{onSubmit:s.handleCreate},null,8,["onSubmit"])])}const Gy=(0,n.Lk)("h1",null,"Entry Details",-1),qy={key:0},Jy={key:1,class:"vehicle-form"},Yy={class:"row vehicleAttchments"},zy={class:"col-md-3"},Hy=(0,n.Lk)("label",{for:"referenceNumber"},[(0,n.Lk)("strong",null,"Reference Number")],-1),Ky={class:"col-md-3"},Qy=(0,n.Lk)("label",{for:"commercialInvoiceAttachment"},[(0,n.Lk)("strong",null,"Commercial Invoice Attachment")],-1),Zy={class:"col-md-3"},eg=(0,n.Lk)("label",{for:"attachedSheet"},[(0,n.Lk)("strong",null,"Attached Sheet")],-1),tg={class:"col-md-3"},og=(0,n.Lk)("label",{for:"instructionSheet"},[(0,n.Lk)("strong",null,"Instruction Sheet")],-1),ag={class:"row"},rg={class:"col-md-3"},ng=(0,n.Lk)("label",{for:"waybill"},[(0,n.Lk)("strong",null,"Waybill")],-1),sg={class:"col-md-3"},ig=(0,n.Lk)("div",null,"-",-1),lg={class:"form-row"},cg={class:"row"},dg={class:"col-md-3"},ug=(0,n.Lk)("label",{for:"InvoiceNumber",class:"form-label"},[(0,n.Lk)("strong",null,"Invoice Number")],-1),mg={class:"col-md-3"},hg=(0,n.Lk)("label",{for:"supplierName",class:"form-label"},[(0,n.Lk)("strong",null,"Supplier Name")],-1),pg={class:"col-md-2"},yg=(0,n.Lk)("label",{for:"InvoiceDate",class:"form-label"},[(0,n.Lk)("strong",null,"Invoice Date")],-1),gg={class:"col-md-2"},fg=(0,n.Lk)("label",{for:"invoiceCurrency",class:"form-label"},[(0,n.Lk)("strong",null,"Invoice Currency")],-1),vg={class:"col-md-2"},bg=(0,n.Lk)("label",{for:"rateOfExchange",class:"form-label"},[(0,n.Lk)("strong",null,"Rate of Exchange")],-1),kg=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Line #"),(0,n.Lk)("th",null,"Product Code"),(0,n.Lk)("th",null,"Description"),(0,n.Lk)("th",null,"THN Number"),(0,n.Lk)("th",null,"Duty"),(0,n.Lk)("th",null,"VAT"),(0,n.Lk)("th",null,"MVT"),(0,n.Lk)("th",null,"Quantity"),(0,n.Lk)("th",null,"Unit Price"),(0,n.Lk)("th",null,"Total Cost"),(0,n.Lk)("th"),(0,n.Lk)("th")])],-1),_g=["onBlur"],Cg=["onBlur"],Dg=["onBlur"],Lg=["onBlur"],Eg=["onBlur"],Fg=["onClick"],Ig={key:0},xg=(0,n.Lk)("i",{class:"fas fa-chevron-up",style:{color:"gray"}},null,-1),Tg=[xg],Sg={key:1},Ag=(0,n.Lk)("i",{class:"fas fa-chevron-down",style:{color:"gray"}},null,-1),wg=[Ag],Og=["onClick"],Ng=(0,n.Lk)("i",{class:"fa fa-trash"},null,-1),Pg=[Ng],Rg={key:0},Vg={colspan:"12"},Ug=(0,n.Lk)("label",{for:""},"Fuel Type",-1),Bg=["onUpdate:modelValue"],$g=(0,n.Lk)("option",{disabled:"",value:""},"Please select one",-1),Mg=["value"],Wg=(0,n.Lk)("label",{for:""},"Seat Position",-1),jg=["onUpdate:modelValue"],Xg=(0,n.Lk)("option",{disabled:"",value:""},"Please select one",-1),Gg=["value"],qg=(0,n.Lk)("label",{for:"vehicleCode"},"Model Code",-1),Jg=(0,n.Lk)("label",{for:"numberOfSeats"},"Number of Seats",-1),Yg=["onUpdate:modelValue"],zg=(0,n.Lk)("label",{for:"numberOfDoors"},"Number of Doors",-1),Hg=["onUpdate:modelValue"],Kg=(0,n.Lk)("label",{for:"tyreSize"},"Tyre Size",-1),Qg=["onUpdate:modelValue"],Zg=(0,n.Lk)("label",{for:"engineDisplacement"},"Engine Displacement",-1),ef=["onUpdate:modelValue"],tf={key:1},of={colspan:"12"},af=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Chassis Number"),(0,n.Lk)("th",null,"Engine Number"),(0,n.Lk)("th",null,"Exterior Color"),(0,n.Lk)("th",null,"Customer Name"),(0,n.Lk)("th",null,"Customer TIN"),(0,n.Lk)("th",null,"Broker Instructions"),(0,n.Lk)("th",null,"CPC Code"),(0,n.Lk)("th",null,"NPC Code"),(0,n.Lk)("th",null,"ED Number"),(0,n.Lk)("th",null,"Manufacture Year"),(0,n.Lk)("th")])],-1),rf=["onBlur"],nf=["onUpdate:modelValue"],sf=["onUpdate:modelValue"],lf=["onUpdate:modelValue"],cf=["onUpdate:modelValue"],df=["onUpdate:modelValue"],uf=(0,n.Lk)("option",{disabled:"",value:""},"Please select one",-1),mf=["value"],hf=["onUpdate:modelValue"],pf=["onClick"],yf=(0,n.Lk)("i",{class:"fa fa-trash"},null,-1),gf=[yf],ff={key:0},vf={colspan:"12"},bf=["onClick"],kf={class:"form-row"},_f={class:"col-md-1"},Cf=(0,n.Lk)("h3",null,"Footer Information",-1),Df=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Invoice Total"),(0,n.Lk)("th",null,"Inland"),(0,n.Lk)("th",null,"Insurance"),(0,n.Lk)("th",null,"Other Charges"),(0,n.Lk)("th",null,"Final Total")])],-1),Lf=(0,n.Lk)("h3",null,"Calculated Check",-1),Ef=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Total Extension Prices"),(0,n.Lk)("th",null,"Number of Line Items"),(0,n.Lk)("th",null,"Matches Invoice Total?")])],-1),Ff=(0,n.Lk)("h3",null,"Entry Summary",-1),If=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Number of Lines Read"),(0,n.Lk)("th",null,"Total Number of Vehicles Read"),(0,n.Lk)("th",null,"Total Invoices Value")])],-1);function xf(e,t,o,a,s,i){const l=(0,n.g2)("CustomsEntryForm"),c=(0,n.g2)("v-select");return(0,n.uX)(),(0,n.CE)(n.FK,null,[Gy,1==o.isEditMode?((0,n.uX)(),(0,n.CE)("h2",qy,"Reference Number: "+(0,T.v_)(this.referenceNumber),1)):(0,n.Q3)("",!0),0==o.isEditMode?((0,n.uX)(),(0,n.CE)("div",Jy,[(0,n.Lk)("div",Yy,[(0,n.Lk)("div",zy,[Hy,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>s.referenceNumber=e),placeholder:"Enter Reference Number"},null,512),[[r.Jo,s.referenceNumber]])]),(0,n.Lk)("div",Ky,[Qy,(0,n.Lk)("input",{type:"file",id:"commercialInvoiceAttachment",class:"form-control",onChange:t[1]||(t[1]=e=>i.handleFileChange(e,"commercialInvoice"))},null,32)]),(0,n.Lk)("div",Zy,[eg,(0,n.Lk)("input",{type:"file",id:"attachedSheet",class:"form-control",onChange:t[2]||(t[2]=e=>i.handleFileChange(e,"attachedSheet"))},null,32)]),(0,n.Lk)("div",tg,[og,(0,n.Lk)("input",{type:"file",id:"instructionSheet",class:"form-control",onChange:t[3]||(t[3]=e=>i.handleFileChange(e,"instructionSheet"))},null,32)])]),(0,n.Lk)("div",null,[(0,n.Lk)("div",ag,[(0,n.Lk)("div",rg,[ng,(0,n.Lk)("input",{type:"file",class:"form-control",onChange:t[4]||(t[4]=(...e)=>i.handleWaybillUpload&&i.handleWaybillUpload(...e)),placeholder:"Enter Waybill Number"},null,32)]),(0,n.Lk)("div",sg,[ig,(0,n.Lk)("button",{type:"button",class:"btn btn-primary upload-button",onClick:t[5]||(t[5]=(...e)=>i.readToyotaFiles&&i.readToyotaFiles(...e))},"Upload Files")])])])])):(0,n.Q3)("",!0),(0,n.bF)(l,{ref:"myCustomsForm",customsEntryForm:s.customsEntryForm,onUpdateCustomsEntryForm:t[6]||(t[6]=e=>s.customsEntryForm=e)},null,8,["customsEntryForm"]),(0,n.Lk)("div",lg,[(0,n.Lk)("div",cg,[(0,n.Lk)("div",dg,[ug,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[7]||(t[7]=e=>s.invoiceNumber=e),id:"InvoiceNumber",placeholder:"Please Enter Invoice Number"},null,512),[[r.Jo,s.invoiceNumber]])]),(0,n.Lk)("div",mg,[hg,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[8]||(t[8]=e=>s.supplierName=e),id:"supplierName",placeholder:"Please Enter Supplier Name"},null,512),[[r.Jo,s.supplierName]])]),(0,n.Lk)("div",pg,[yg,(0,n.bo)((0,n.Lk)("input",{type:"date",class:"form-control","onUpdate:modelValue":t[9]||(t[9]=e=>s.invoiceDate=e),id:"InvoiceDate",placeholder:"Please Enter Invoice Date"},null,512),[[r.Jo,s.invoiceDate]])]),(0,n.Lk)("div",gg,[fg,(0,n.bF)(c,{options:s.currencies,modelValue:s.invoiceCurrency,"onUpdate:modelValue":t[10]||(t[10]=e=>s.invoiceCurrency=e),label:"name",id:"invoiceCurrency",searchable:!0,filterable:!0,reduce:e=>e.code},null,8,["options","modelValue","reduce"])]),(0,n.Lk)("div",vg,[bg,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control","onUpdate:modelValue":t[11]||(t[11]=e=>s.rateOfExchange=e),id:"rateOfExchange",placeholder:"Please Enter Rate of Exchange"},null,512),[[r.Jo,s.rateOfExchange]])])])]),(0,n.Lk)("div",null,[(0,n.Lk)("table",null,[kg,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.vehicles,((e,t)=>((0,n.uX)(),(0,n.CE)(n.FK,{key:t},[(0,n.Lk)("tr",null,[(0,n.Lk)("td",null,(0,T.v_)(t+1),1),(0,n.Lk)("td",{contenteditable:"true",onBlur:t=>i.updateVehicleData(e,"vehicleCode",t.target.innerText)},(0,T.v_)(e.vehicleCode),41,_g),(0,n.Lk)("td",{contenteditable:"true",onBlur:t=>i.updateVehicleData(e,"description",t.target.innerText)},(0,T.v_)(e.description),41,Cg),(0,n.Lk)("td",{class:(0,T.C4)(["valid"===e.commodityCodeStatus?"valid-commodity-code":"invalid-commodity-code"]),contenteditable:"true",onBlur:t=>i.updateTariffCode(e,t.target.innerText)},(0,T.v_)(e.thnNumber),43,Dg),(0,n.Lk)("td",null,(0,T.v_)(e.icdCharge)+"% ",1),(0,n.Lk)("td",null,(0,T.v_)(e.vatCharge)+"% ",1),(0,n.Lk)("td",null," $"+(0,T.v_)(e.mvtCharge)+" per CC ",1),(0,n.Lk)("td",{contenteditable:"true",onBlur:t=>i.updateVehicleData(e,"quantity",t.target.innerText)},(0,T.v_)(e.quantity),41,Lg),(0,n.Lk)("td",{contenteditable:"true",onBlur:t=>i.updateVehicleData(e,"unitPrice",t.target.innerText)},(0,T.v_)(e.unitPrice),41,Eg),(0,n.Lk)("td",null,(0,T.v_)(i.caclulateVehicleTotalCost(e)),1),(0,n.Lk)("td",null,[(0,n.Lk)("button",{onClick:e=>i.toggleDetails(t)},[s.expandedIndex===t?((0,n.uX)(),(0,n.CE)("span",Ig,Tg)):((0,n.uX)(),(0,n.CE)("span",Sg,wg))],8,Fg)]),(0,n.Lk)("td",null,[(0,n.Lk)("button",{class:"btn btn-danger",onClick:e=>i.deleteVehicle(s.vehicles,t)},Pg,8,Og)])]),s.expandedIndex===t?((0,n.uX)(),(0,n.CE)("tr",Rg,[(0,n.Lk)("td",Vg,[(0,n.Lk)("table",null,[(0,n.Lk)("tbody",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("td",null,[Ug,(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":t=>e.fuelType=t,class:"form-control"},[$g,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.fuelTypeOptions,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e.code,value:e.code},(0,T.v_)(e.detail),9,Mg)))),128))],8,Bg),[[r.u1,e.fuelType]])]),(0,n.Lk)("td",null,[Wg,(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":t=>e.seatPosition=t,class:"form-control"},[Xg,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.seatPositionOptions,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e.code,value:e.code},(0,T.v_)(e.detail),9,Gg)))),128))],8,jg),[[r.u1,e.seatPosition]])]),(0,n.Lk)("td",null,[qg,(0,n.bF)(c,{options:s.vehicleCodeOptions,modelValue:e.modelCode,"onUpdate:modelValue":t=>e.modelCode=t,style:{width:"300px"},label:"description",searchable:!0,filterable:!0,placeholder:"Please select one",reduce:e=>e.code},null,8,["options","modelValue","onUpdate:modelValue","reduce"])]),(0,n.Lk)("td",null,[Jg,(0,n.bo)((0,n.Lk)("input",{type:"number","onUpdate:modelValue":t=>e.numberOfSeats=t,class:"form-control",placeholder:"Please Enter Number of Seats"},null,8,Yg),[[r.Jo,e.numberOfSeats]])]),(0,n.Lk)("td",null,[zg,(0,n.bo)((0,n.Lk)("input",{type:"number","onUpdate:modelValue":t=>e.numberOfDoors=t,class:"form-control",placeholder:"Please Enter Number of Doors"},null,8,Hg),[[r.Jo,e.numberOfDoors]])]),(0,n.Lk)("td",null,[Kg,(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":t=>e.tyreSize=t,class:"form-control",placeholder:"Please Enter Tyre Size"},null,8,Qg),[[r.Jo,e.tyreSize]])]),(0,n.Lk)("td",null,[Zg,(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":t=>e.engineDisplacement=t,class:"form-control",placeholder:"Please Enter Engine Displacement"},null,8,ef),[[r.Jo,e.engineDisplacement]])])])])])])])):(0,n.Q3)("",!0),s.expandedIndex===t?((0,n.uX)(),(0,n.CE)("tr",tf,[(0,n.Lk)("td",of,[(0,n.Lk)("table",null,[af,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.details,(o=>((0,n.uX)(),(0,n.CE)("tr",{key:o.chassisNumber},[(0,n.Lk)("td",{contenteditable:"true",onBlur:e=>i.updateVehicleDetialData(o,"chassisNumber",e.target.innerText)},(0,T.v_)(o.chassisNumber),41,rf),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":e=>o.engineNumber=e,class:"form-control",placeholder:"Please Enter Engine Number"},null,8,nf),[[r.Jo,o.engineNumber]])]),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":e=>o.exteriorColor=e,class:"form-control",placeholder:"Please Enter Exterior Color"},null,8,sf),[[r.Jo,o.exteriorColor]])]),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":e=>o.customerName=e,class:"form-control",placeholder:"Please Enter Customer Name"},null,8,lf),[[r.Jo,o.customerName]])]),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":e=>o.customerTIN=e,class:"form-control",placeholder:"Please Enter Customer TIN"},null,8,cf),[[r.Jo,o.customerTIN]])]),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":e=>o.brokerInstructions=e,class:"form-control"},[uf,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.instructionList,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e.code,value:e.code},(0,T.v_)(e.code),9,mf)))),128))],8,df),[[r.u1,o.brokerInstructions]])]),(0,n.Lk)("td",null,[(0,n.bF)(c,{options:i.availableCPCCodes,modelValue:o.cpcCode,"onUpdate:modelValue":e=>o.cpcCode=e,label:"code",id:"cpcCode",searchable:!0,filterable:!0,reduce:e=>e.cpcId},null,8,["options","modelValue","onUpdate:modelValue","reduce"])]),(0,n.Lk)("td",null,[(0,n.bF)(c,{modelValue:o.npcCode,"onUpdate:modelValue":e=>o.npcCode=e,options:s.npcCodeOptions,label:"code",id:"npcCode",searchable:!0,reduce:e=>e.code,filterable:!0,placeholder:"Select a NPC Code"},null,8,["modelValue","onUpdate:modelValue","options","reduce"])]),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":e=>o.edNumber=e,class:"form-control",placeholder:"Please Enter ED Number"},null,8,hf),[[r.Jo,o.edNumber]])]),(0,n.Lk)("td",null,[(0,n.bF)(c,{options:s.years,modelValue:o.manufactureYear,"onUpdate:modelValue":e=>o.manufactureYear=e,searchable:!0,filterable:!0,placeholder:"Please select one"},null,8,["options","modelValue","onUpdate:modelValue"])]),(0,n.Lk)("td",null,[(0,n.Lk)("button",{class:"btn btn-danger",onClick:o=>i.deleteRow(e.details,t)},gf,8,pf)])])))),128)),s.expandedIndex===t?((0,n.uX)(),(0,n.CE)("tr",ff,[(0,n.Lk)("td",vf,[(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t=>i.addChassis(e)},"Add Chassis",8,bf)])])):(0,n.Q3)("",!0)])])])])):(0,n.Q3)("",!0)],64)))),128))])]),(0,n.Lk)("div",kf,[(0,n.Lk)("div",_f,[(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[12]||(t[12]=e=>i.addVehicle())}," Add Vehicle ")])]),Cf,(0,n.Lk)("table",null,[Df,(0,n.Lk)("tbody",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("td",{contenteditable:"true",onBlur:t[13]||(t[13]=e=>i.updateInvoiceData("invoiceTotal",e.target.innerText)),style:(0,T.Tr)(i.naStyle(s.invoiceTotal))},(0,T.v_)(s.invoiceTotal||0),37),(0,n.Lk)("td",{contenteditable:"true",onBlur:t[14]||(t[14]=e=>i.updateInvoiceData("inlandAmount",e.target.innerText)),style:(0,T.Tr)(i.naStyle(s.inlandAmount))},(0,T.v_)(s.inlandAmount||0),37),(0,n.Lk)("td",{contenteditable:"true",onBlur:t[15]||(t[15]=e=>i.updateInvoiceData("insuranceAmount",e.target.innerText)),style:(0,T.Tr)(i.naStyle(s.insuranceAmount))},(0,T.v_)(s.insuranceAmount||0),37),(0,n.Lk)("td",{contenteditable:"true",onBlur:t[16]||(t[16]=e=>i.updateInvoiceData("otherCharges",e.target.innerText)),style:(0,T.Tr)(i.naStyle(s.otherCharges))},(0,T.v_)(s.otherCharges||0),37),(0,n.Lk)("td",null,(0,T.v_)(i.finalTotal),1)])])]),Lf,(0,n.Lk)("table",null,[Ef,(0,n.Lk)("tbody",null,[(0,n.Lk)("tr",{style:(0,T.Tr)(i.compareInvoiceStyle())},[(0,n.Lk)("td",null,(0,T.v_)(i.calculatedTotal.toLocaleString("en-US",{minimumFractionDigits:2})),1),(0,n.Lk)("td",null,(0,T.v_)(s.vehicles.length),1),(0,n.Lk)("td",null,(0,T.v_)(i.compareInvoiceTotal()?"Yes":"No"),1)],4)])])]),(0,n.Lk)("div",null,[Ff,(0,n.Lk)("table",null,[If,(0,n.Lk)("tbody",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("td",null,(0,T.v_)(s.vehicles.length),1),(0,n.Lk)("td",null,(0,T.v_)(i.totalNumberOfVehicles),1),(0,n.Lk)("td",null,(0,T.v_)(i.calculatedTotal.toLocaleString("en-US",{minimumFractionDigits:2})),1)])])]),(0,n.Lk)("table",null,[(0,n.Lk)("tbody",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("td",null,[(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[17]||(t[17]=e=>i.handleButtonClick())},(0,T.v_)(o.isEditMode?"Save Entry":"Create Entry"),1)]),(0,n.Lk)("td",null,[(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[18]||(t[18]=e=>i.generateWorksheet())},"Generate WorkSheet")]),(0,n.Lk)("td",null,[(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[19]||(t[19]=e=>i.generateAsycudaXML())},"Generate Asycuda XML")]),(0,n.Lk)("td",null,[(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[20]||(t[20]=e=>i.goToValuationFormPage())},"Generate Valuation Form")]),(0,n.Lk)("td",null,[(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[21]||(t[21]=(...e)=>i.generateTTC84&&i.generateTTC84(...e))}," Generate Special Exemption ")])])])])])],64)}function Tf(){const e=(0,eo.KR)([{code:"328FG18",description:"FORKLIFT TRUCK"},{code:"3BAAGH30W",description:"ALPHARD MINIVAN"},{code:"4RUNNER",description:"4RUNNER"},{code:"6FGL18",description:"FORKLIFT"},{code:"7FBEHU18",description:"ELECTRIC FORKLIFT"},{code:"7FDU70",description:"FORKLIFT"},{code:"86",description:"TOYOTA 86"},{code:"8FBE20U",description:"FORKLIFT"},{code:"8FGC45U",description:"2014 LPG FORKLIFT"},{code:"8FGCU 30",description:"TOYOTA FORKLIFT 8FGCU 30"},{code:"8FGCU25",description:"TOYOTA FORLIFT"},{code:"8FGU15",description:"TOYOTA FORKLIFT TRUCK"},{code:"AGYA",description:"HATCHBACK"},{code:"AQUA",description:"AQUA"},{code:"AURIS",description:"TOYOTA AURIS MOTOR CAR"},{code:"AVALON",description:"AVALON"},{code:"AXIO",description:"TOYOTA AXIO"},{code:"AXIO HYBRID",description:"TOYOTA AXIO GASOLINE ELECTRIC HYBRID"},{code:"AGYO",description:"TOYOTA AYGO"},{code:"B101RAGQSGJ",description:"5 DR RHD"},{code:"B101RAGQSGT",description:"5DR GAS RHD"},{code:"BB",description:"MINI MPV"},{code:"BZ4X PURE",description:"ELECTRIC SUV"},{code:"CALYA ASTRA",description:"SUV"},{code:"CAMRY",description:"CAMRY"},{code:"CAMRY HYBRID",description:"CAMRY HYBRID"},{code:"CAMRY SOLARA",description:"CAMRY SOLARA"},{code:"CELICA",description:"CELICA"},{code:"CHR",description:"CROSSOVER SUV"},{code:"CHR HYBRID",description:"C-HR HYBRID"},{code:"COASTER",description:"COASTER"},{code:"COMMUTER",description:"CUMMUTER PANEL VAN"},{code:"COROLLA",description:"COROLLA"},{code:"COROLLA CROSS",description:"COROLLA CROSS"},{code:"CRESSIDA",description:"CRESSIDA"},{code:"CROWN",description:"SEDAN"},{code:"CROWN HYBRID",description:"TOYOTA CROWN HYBRID"},{code:"DYNA",description:"DYNA TRUCK"},{code:"ECHO",description:"ECHO"},{code:"ESTIMA",description:"SEDAN"},{code:"FIELDER",description:"FIELDER"},{code:"FJ CRUISER",description:"FJ CRUISER"},{code:"FORKLIFT",description:"TOYOTA FORKLIFT"},{code:"FORTUNER",description:"FORTUNER"},{code:"GRAND",description:"GRAND HIACE"},{code:"GRANDE",description:"GRANDE ACE"},{code:"HARRIER",description:"HARRIER SUV"},{code:"HIACE",description:"HIACE"},{code:"HIGHLANDER",description:"HIGHLANDER"},{code:"HIGHLANDER HYBRID",description:"HIGHLANDER HYBRID"},{code:"HILUX",description:"HILUX SINGLE CAB"},{code:"HILUX DOUBLE",description:"HILUX DOUBLE CAB"},{code:"HINO",description:"HINO TRUCK"},{code:"IPSUM",description:"IPSUM"},{code:"IST",description:"IST"},{code:"LAND CRUISER",description:"LAND CRUISER"},{code:"LC200",description:"LC200"},{code:"LC70",description:"LC70"},{code:"LEXUS",description:"LEXUS"},{code:"LITEACE",description:"TOYOTA LITEACE"},{code:"MARKX",description:"MARKX"},{code:"MATRIX",description:"MATRIX"},{code:"MR2",description:"MR2"},{code:"NOAH",description:"NOAH MINIBUS"},{code:"PASEO",description:"PASEO"},{code:"PASSO",description:"TOYOTA PASSO"},{code:"PIXIS EPOCH",description:"PIXIS EPOCH"},{code:"PRADO",description:"PRADO"},{code:"PREVIA",description:"PREVIA"}]);return e}var Sf={name:"VehicleEntry",components:{CustomsEntryForm:Js},props:{record:{type:Object,default:()=>Lt()},vehicleDetails:{type:Array,default:()=>[]},isEditMode:{type:Boolean,default:!1},referenceNumberRecord:{type:String,default:""},invoiceDetails:{type:Object,default:()=>({invoice_id:"",supplierName:"",invoiceNumber:"",invoiceDate:"",invoiceCurrency:"",rateOfExchange:0,invoiceTotal:0,inlandAmount:0,insuranceAmount:0,otherCharges:0})}},watch:{record:{handler:function(e){this.customsEntryForm=e},deep:!0},vehicleDetails:{handler:function(e){this.vehicles=e},deep:!0},referenceNumberRecord:{handler:function(e){this.referenceNumber=e}},invoiceDetails:{handler:function(e){this.supplierName=e.supplierName,this.invoiceNumber=e.invoiceNumber,this.invoiceDate=e.invoiceDate,this.invoiceCurrency=e.invoiceCurrency,this.rateOfExchange=e.rateOfExchange,this.invoiceTotal=e.invoiceTotal,this.inlandAmount=e.inlandAmount,this.insuranceAmount=e.insuranceAmount,this.otherCharges=e.otherCharges},deep:!0},"customsEntryForm.waybillDate"(e){this.updateRates(e)}},emits:["submit"],data(){return{files:{commercialInvoice:null,attachedSheet:null,instructionSheet:null},referenceNumber:"",supplierName:"",invoiceNumber:"",invoiceDate:"",invoiceCurrency:"USD",rateOfExchange:0,invoiceTotal:0,inlandAmount:0,insuranceAmount:0,otherCharges:0,vehicles:[],waybillFiles:[],seatPositionOptions:[{detail:"Left Hand Drive",code:"LHD"},{detail:"Right Hand Drive",code:"RHD"}],instructionList:[{detail:"Exempted but Bond then Extract",code:"EB"},{detail:"Exempted clear off the Port",code:"EC"},{detail:"Exempted from all duties and taxes but processing like a duty paid",code:"DP"},{detail:"Bond",code:"B"},{detail:"Duty Paid",code:"DP"}],fuelTypeOptions:[{detail:"CNG",code:"CNG"},{detail:"Diesel",code:"DSL"},{detail:"Electric",code:"ELC"},{detail:"Hybrid",code:"HYB"},{detail:"Petrol",code:"PET"},{detail:"Other",code:"OTH"},{detail:"Liquified Petroleum Gas",code:"LPG"}],vehicleCodeOptions:[],currencies:[],years:[],countries:[],npcCodeOptions:["000"],expandedIndex:null,customsEntryForm:{...this.record}}},mounted(){this.setYears(),this.vehicleCodeOptions=Tf(),this.currencies=ja(),this.pageSetup(),this.fetchNpcCodes(),this.fetchCountries()},computed:{totalNumberOfVehicles(){return this.vehicles.reduce(((e,t)=>e+t.details.length),0)},finalTotal(){const e=parseFloat(this.invoiceTotal)||0,t=parseFloat(this.inlandAmount)||0,o=parseFloat(this.insuranceAmount)||0,a=parseFloat(this.otherCharges)||0,r=e+t+o+a;return r.toLocaleString("en-US",{minimumFractionDigits:2})},calculatedTotal(){const e=this.vehicles.reduce(((e,t)=>{const o=this.convertToFloat(t.quantity)*this.convertToFloat(t.unitPrice);return e+o}),0);return e},availableCPCCodes(){return this.customsEntryForm.regimeTypeOptions.flatMap((e=>e.cpcCodes))}},methods:{handleWaybillUpload(e){console.log("Handling Waybill Upload"),this.waybillFiles=Array.from(e.target.files)},updateVehicleDetialData(e,t,o){e[t]=o},updateVehicleData(e,t,o){e[t]=o},deleteRow(e,t){e.splice(t,1)},deleteVehicle(e,t){e.splice(t,1)},async generateTTC84(){console.log("Generating TTC84");let e={declarationNumber:this.referenceNumber,declarationDate:kt(),regimeCode:"C4",declarantName:"RAMNARINE RAMPERSAD",declarantNumber:"BR0285",referenceNumber:this.referenceNumber,importer:this.customsEntryForm.importerName,importNumber:"",declarationContent:"",CPCCode:"4000",extensionCode:"",signatoryName:"",signatoryStatus:"",presigned:!1};const t=this.customsEntryForm.importers.find((e=>e.id===this.customsEntryForm.importerId)),o=t?.taxIdentificationNumber;e.importNumber=o;let a=await le();console.log("Signatories: ",a),a=a.filter((e=>e.importerCode===this.customsEntryForm.importerId)),Ue(this.customsEntryForm.importerId).then((t=>{const o=t.map((e=>e.declaration_number));Xt(o,a).then((o=>{e.presigned=o.generatePreSigned;const r=parseInt(o.select1),n=t[r];e.declarationContent=`${n.content.replace(/\\n/g,"\n")}`,e.extensionCode=n.extensionCode;const s=a.find((e=>e.id===parseInt(o.select2)));e.signatoryName=s.name,e.signatoryStatus=s.status,Re(e).then((e=>{$t(),Ut("C84 Form Generated Successfully!");const t=window.URL.createObjectURL(new Blob([e],{type:"application/pdf"})),o=document.createElement("a"),a=`C84 Form - ${this.entryDetails?.entry_number}.pdf`;o.href=t,o.setAttribute("download",a),document.body.appendChild(o),o.click(),o.remove()})).catch((e=>{console.error("Failed to generate C84 Form:",e),Mt("Failed to generate C84 Form!")}))}))})).catch((e=>{console.error("Failed to get special exemption declarations:",e)})),console.log("C84 Object: ",e)},goToValuationFormPage(){const e=this.invoiceNumber;let t=this.invoiceTotal;"CIF"===this.customsEntryForm.incoTerms&&(t=parseFloat(this.invoiceTotal)+parseFloat(this.customsEntryForm.freightAmount)+parseFloat(this.customsEntryForm.insuranceAmount)+parseFloat(this.customsEntryForm.otherCharges)),this.$router.push({name:"CustomsDeclarationForm",query:{buyerId:this.customsEntryForm.importerId,sellerId:this.customsEntryForm.exporterId,invoiceNumber:e,invoiceTotal:t,currency:this.invoiceCurrency,rateOfExchange:this.rateOfExchange,freightAmount:this.customsEntryForm.freightAmount*this.customsEntryForm.freightRateOfExchange,insurance:this.customsEntryForm.insuranceAmount*this.customsEntryForm.insuranceRateOfExchange,incoTerms:this.customsEntryForm.incoTerms,referenceNumber:this.referenceNumber}})},handleTariffInput(e){console.log("Handling Tariff Input");const t=e.thnNumber;console.log("Value: ",t);const o=t.replace(/[^0-9]/g,"");console.log("Sanitized Value: ",o);const a=this.formatTariffCode(o);console.log("Formatted Value: ",a),e.thnNumber=a},formatTariffCode(e){let t="";for(let o=0;o<e.length;o++)4!==o&&6!==o&&8!==o||(t+="."),t+=e[o];return this.truncateString(t)},updateTariffCode(e,t){const o=t;if(this.updateVehicleData(e,"thnNumber",o),console.log("Updating Tariff Code",o),void 0===o||null===o||0===o.trim().length||"N/A"===o)return e.icdCharge=0,e.vatCharge=0,void(e.mvtCharge=0);Oe(o.replace(/\./g,"")).then((t=>{let o=t.charges["import custom duty"];const a=void 0===o?0:parseFloat(o[0].charge_amount);let r=t.charges["value added tax"];const n=void 0===r?0:parseFloat(r[0].charge_amount);let s=t.charges["motor vehicle tax"];const i=void 0===s?0:parseFloat(s[0].charge_amount);e.icdCharge=a,e.vatCharge=n,e.mvtCharge=i,e.commodityCodeStatus="valid"})).catch((t=>{console.error("Error fetching charges: ",t),e.icdCharge=0,e.vatCharge=0,e.mvtCharge=0,e.commodityCodeStatus="invalid"}))},createBlankChassis(){const e={chassisNumber:"",engineNumber:"",exteriorColor:"",interiorColor:"",customerName:"",customerTIN:"",brokerInstructions:"DP",cpcCode:oo().defaultCPCCode,npcCode:"000",edNumber:"",quantity:1,grossWeight:0,netWeight:0,engineDisplacement:"",manufactureYear:"2000"};return e},updateRates(e){console.log("Updating Rates",e),Le(e).then((e=>{console.log("Rates:",e),this.customsEntryForm.ratesOfExchange=e,""!=this.invoiceCurrency&&e.length>0&&(this.rateOfExchange=e.find((e=>e.base_currency===this.invoiceCurrency)).rate)}))},createBlankVehicle(){const e={vehicleCode:"",description:"",thnNumber:"",quantity:1,unitPrice:0,grossWeight:0,netWeight:0,curbWeight:0,engineDisplacement:"",fuelType:"PET",numberOfSeats:5,numberOfDoors:4,tyreSize:"",details:[this.createBlankChassis()]};return e},addVehicle(){this.vehicles.push(this.createBlankVehicle())},addChassis(e){e.details.push(this.createBlankChassis())},compareInvoiceStyle(){return this.compareInvoiceTotal()?{}:{backgroundColor:"red",color:"white"}},compareInvoiceTotal(){const e=parseFloat(this.invoiceTotal)||0,t=parseFloat(this.calculatedTotal)||0;return e===t},updateInvoiceData(e,t){this[e]=t},naStyle(e){return[null,void 0,"",!1].includes(e)?{backgroundColor:"yellow",color:"black"}:{}},convertToFloat(e){if(null===e||void 0===e||""===e)return 0;if(!isNaN(e))return parseFloat(e);let t=e.replace(/[^0-9.]/g,"");return parseFloat(t)},caclulateVehicleTotalCost(e){console.log("Calculating Vehicle Total Cost",e.quantity,e.unitPrice);let t=this.convertToFloat(e.quantity)*this.convertToFloat(e.unitPrice);return e.extensionPrice=t,console.log("Total Cost: ",t),parseFloat(t).toLocaleString("en-US",{minimumFractionDigits:2})},handleButtonClick(){this.isEditMode?(console.log("Updating Entry"),this.updateEntry()):(console.log("Saving Entry"),this.saveEntry())},sanitizeVehicleData(){return console.log("Sanitizing Vehicle Data"),console.log("Vehicles: ",this.vehicles),this.vehicles.flatMap((e=>e.details.map((t=>({description:e.description,quantity:t.quantity,unit_price:parseFloat(e.unitPrice),amount:parseFloat(t.quantity)*parseFloat(e.unitPrice),thn_code:e.thnNumber,product_code:e.vehicleCode,country_of_origin:"",cpcCode:t.cpcCode,npcCode:t.npcCode,vatApplicable:!0,grossWeight:e.grossWeight,netWeight:e.netWeight,curbWeight:e.curbWeight,fuelType:e.fuelType,seatPosition:e.seatPosition,modelCode:e.modelCode,numberOfSeats:e.numberOfSeats,numberOfDoors:e.numberOfDoors,tyreSize:e.tyreSize,engineDisplacement:e.engineDisplacement,chassisNumber:t.chassisNumber,engineNumber:t.engineNumber,exteriorColor:t.exteriorColor,customerName:t.customerName,tinNumber:t.customerTIN,brokerInstructions:t.brokerInstructions,edNumber:t.edNumber,manufactureYear:t.manufactureYear})))))},updateWaybill(){return{waybill_number:this.customsEntryForm.waybillNumber,waybill_date:this.customsEntryForm.waybillDate,mode_of_transport:this.customsEntryForm.modeOfTransport,freight_type:this.customsEntryForm.freightType,marks_and_numbers:this.customsEntryForm.marksAndNumbers,package_type:this.customsEntryForm.packageType,package_quantity:this.customsEntryForm.numberOfPackages,country_of_origin:this.customsEntryForm.country_of_origin,country_of_final_destination:this.customsEntryForm.countryOfFinalDestination,importer:this.customsEntryForm.importerId,shipper:this.customsEntryForm.exporterId,vessel:this.customsEntryForm.vesselId,port_of_discharge:this.customsEntryForm.portOfDischargeId,waybill_id:this.customsEntryForm.waybill_id}},formatInvoiceData(){return{invoice_id:"",invoice_number:this.invoiceNumber,invoice_date:this.invoiceDate,invoice_total:this.invoiceTotal,sub_total:this.invoiceTotal,supplier_name:this.supplierName,taxed_amount:0,supplier_address:"",purchase_order_number:"",inland:""===this.inlandAmount?0:this.inlandAmount,insurance:""===this.insuranceAmount?0:this.insuranceAmount,other_charges:""===this.otherCharges?0:this.otherCharges,entry_id:"",currency:this.invoiceCurrency,rate_of_exchange:this.rateOfExchange}},formatInvoiceLines(){return this.vehicles.flatMap((e=>e.details.map((t=>({description:e.description,quantity:1,unit_price:e.unitPrice,amount:parseFloat(e.unitPrice),tariff_code:e.thnNumber,product_code:e.vehicleCode,country_of_origin:"",cpc_code:t.cpcCode,npc_code:t.npcCode,vatApplicable:!0,invoice_line_id:t.invoiceLineId})))))},formatVehicleLines(){return this.vehicles.flatMap((e=>e.details.map((t=>({id:t.id,gross_weight:e.grossWeight,net_weight:e.netWeight,curb_weight:e.curbWeight,fuel_type:e.fuelType,seat_position:e.seatPosition,model_code:e.modelCode,number_of_seats:e.numberOfSeats,number_of_doors:e.numberOfDoors,tyre_size:e.tyreSize,engine_displacement:e.engineDisplacement,chassis_number:t.chassisNumber,engine_number:t.engineNumber,exterior_color:t.exteriorColor,customer_name:t.customerName,tin_number:t.customerTIN,broker_instructions:t.brokerInstructions,ed_number:t.edNumber,manufacture_year:t.manufactureYear})))))},updateEntryData(){return{net_weight:this.customsEntryForm.netWeight,gross_weight:this.customsEntryForm.grossWeight,entry_number:this.referenceNumber,freight_charge:this.customsEntryForm.freightAmount,declarant:this.customsEntryForm.declarantId,incoterms:this.customsEntryForm.incoTerms,regime_type:this.customsEntryForm.regimeType,deposit:this.customsEntryForm.depositAmount,container_charges:this.customsEntryForm.containerCharges,additional_charges:this.customsEntryForm.additionalCharges,local_fee:this.customsEntryForm.localFee,country_last_provenance:this.customsEntryForm.countryLastProvinance,trading_country:this.customsEntryForm.tradingCountry}},updateEntry(){const e=this.updateWaybill(),t=this.updateEntryData(),o=this.formatInvoiceData(),a=this.formatInvoiceLines();console.log("Invoice Lines: ",a);const r=this.formatVehicleLines(),n={waybill:e,entry:t,invoice:o,invoiceLines:a,vehicleLines:r};console.log("Generating Payload",n),this.$emit("submit",n)},saveEntry(){const e={invoice_total:this.invoiceTotal,invoice_id:this.invoiceNumber,invoice_date:this.invoiceDate,subtotal:this.invoiceTotal,vendor_name:this.supplierName,total_tax:0,vendor_address:"",purchase_order:"",inland:this.inlandAmount,insurance:this.insuranceAmount,otherCharges:this.otherCharges,currency:this.invoiceCurrency,rate_of_exchange:this.rateOfExchange,invoice_items:this.sanitizeVehicleData()},t={referenceNumber:this.referenceNumber,waybillNumber:this.customsEntryForm.waybillNumber,waybillDate:this.customsEntryForm.waybillDate,modeOfTransport:this.customsEntryForm.modeOfTransport,freightType:this.customsEntryForm.freightType,marksAndNumbers:this.customsEntryForm.marksAndNumbers,countryOfOrigin:this.customsEntryForm.countryOfOrigin,countryOfFinalDestination:this.customsEntryForm.countryOfFinalDestination,countryLastProvenance:this.customsEntryForm.countryLastProvinance,tradingCountry:this.customsEntryForm.tradingCountry,kindOfPackage:this.customsEntryForm.packageType,numberOfPackages:this.customsEntryForm.numberOfPackages,totalCargoValue:this.customsEntryForm.totalCargoValue,freightCharge:this.customsEntryForm.freightAmount,insuranceAmount:this.customsEntryForm.insuranceAmount,otherCharges:this.customsEntryForm.otherCharges,rateOfExchange:this.customsEntryForm.rateOfExchange,netWeight:this.customsEntryForm.netWeight,grossWeight:this.customsEntryForm.grossWeight,declarant:this.customsEntryForm.declarantId,incoTerms:this.customsEntryForm.incoTerms,importer:this.customsEntryForm.importerId,shipper:this.customsEntryForm.exporterId,vessel:this.customsEntryForm.vesselId,portOfDischarge:this.customsEntryForm.portOfDischargeId,regimeType:this.customsEntryForm.regimeType,deposit:this.customsEntryForm.depositAmount,containerCharges:this.customsEntryForm.containerCharges,additionalCharges:this.customsEntryForm.additionalCharges,localFee:this.customsEntryForm.localFee,entryType:Ys.VEHICLES,entryStatus:Hs.STORED_AND_NOT_CLASSIFIED,invoiceList:[e]};console.log("Entry Data",t),this.$emit("submit",t)},pageSetup(){this.getRegimeTypes().then((()=>{this.setDefaults()}))},async fetchCountries(){try{const e=await fetch("https://restcountries.com/v3/all"),t=await e.json();this.countries=t.map((e=>({name:e.name.common,code:e.cca2})))}catch(e){console.error("Failed to fetch countries:",e)}},setDefaults(){const e=this.customsEntryForm.regimeTypeOptions.find((e=>e.regimeTypeCode===oo().defaultRegimeType));this.customsEntryForm.regimeType=e.regimeTypeId},setYears(){const e=(new Date).getFullYear(),t=1990;for(let o=t;o<=e;o++)this.years.push(o)},async fetchNpcCodes(){ke().then((e=>{this.npcCodeOptions=e,console.log("NPC Codes: ",e)}))},async getRegimeTypes(){return be("TT").then((e=>{this.customsEntryForm.regimeTypeOptions=e}))},toggleDetails(e){this.expandedIndex=this.expandedIndex===e?null:e},handleFileChange(e,t){this.files[t]=e.target.files[0]},async readToyotaFiles(){this.waybillFiles.length>0&&this.readWaybillModel();const e=new FormData;e.append("commercialInvoice",this.files.commercialInvoice),e.append("pdfAttachments",this.files.attachedSheet),e.append("toyotaInstructionExcel",this.files.instructionSheet),e.append("reference_number","RLL76568"),Wt("Uploading Files"),Be(e).then((e=>{Ut("Files Uploaded Successfully"),console.log(e),this.vehicles=this.convertVehicleData(e);for(let t=0;t<this.vehicles.length;t++)console.log("Vehicle Total: ",this.caclulateVehicleTotalCost(this.vehicles[t]));this.customsEntryForm.totalCargoValue=this.invoiceTotal,console.log(this.compareInvoiceTotal())})).catch((e=>{Mt("Error Uploading Files"),console.error("Error details:",e),e.response&&(console.error("Error response data:",e.response.data),console.error("Error response status:",e.response.status),console.error("Error response headers:",e.response.headers))}))},convertVehicleData(e){const t=[],o=this.customsEntryForm.regimeTypeOptions.flatMap((e=>e.cpcCodes)),a=o.find((e=>e.code===oo().defaultCPCCode)).cpcId;return e.forEach((e=>{const o=e["ED No"],r={chassisNumber:e["chassis number"],engineNumber:e["Engine No"],exteriorColor:e["Color Ext"],interiorColor:e["Color Int"],customerName:e["Customer Name"],customerTIN:e.customer_tin??"",brokerInstructions:this.instructionList.find((t=>t.detail===e["Broker Instruction"]))?.code||"DP",cpcCode:a,npcCode:"000",edNumber:o,quantity:e["quantity"],grossWeight:e["gross_weight"],netWeight:e["net_weight"],engineDisplacement:e["engine_displacement"],manufactureYear:e.manufacture_year??"2000"},n=t.find((e=>e.edNumber===o));if(n)return n.quantity+=parseInt(e["quantity"]),void n.details.push(r);t.push({vehicleCode:e["model_code"],description:e["description"],thnNumber:null===e["commodity_code"]?"":e["commodity_code"],quantity:1,edNumber:e["ED No"],unitPrice:e["Unit Price"],grossWeight:null===e["gross_weight"]?0:e["gross_weight"],netWeight:null===e["net_weight"]?0:e["net_weight"],curbWeight:null===e["curb_weight"]?0:e["curb_weight"],engineDisplacement:e["engine_displacement"],numberOfSeats:null===e["number_of_seats"]?5:e["number_of_seats"],numberOfDoors:null===e["number_of_doors"]?4:e["number_of_doors"],tyreSize:null===e["tyre_size"]?"":e["tyre_size"],modelCode:null===e["model_code"]?"":e["model_code"],seatPosition:null===e["seat_position"]?"RHD":e["seat_position"],details:[r]})})),console.log("Vehicle Data Read",t),t},convertVehicleDataOld(e){const t=[],o=this.customsEntryForm.regimeTypeOptions.flatMap((e=>e.cpcCodes)),a=o.find((e=>e.code===oo().defaultCPCCode)).cpcId;return e.forEach((e=>{const o=e["model_code"],r={chassisNumber:e["chassis number"],engineNumber:e["Engine No"],exteriorColor:e["Color Ext"],interiorColor:e["Color Int"],customerName:e["Customer Name"],customerTIN:e.customer_tin??"",brokerInstructions:this.instructionList.find((t=>t.detail===e["Broker Instruction"]))?.code||"DP",cpcCode:a,npcCode:"000",edNumber:e["ED No"],quantity:e["quantity"],grossWeight:e["gross_weight"],netWeight:e["net_weight"],engineDisplacement:e["engine_displacement"],manufactureYear:e.manufacture_year??"2000"},n=e["model_code"],s=t.find((e=>e.vehicleCode===n));if(s)return s.quantity+=parseInt(e["quantity"]),void s.details.push(r);t.push({vehicleCode:o,description:e["description"],thnNumber:null===e["commodity_code"]?"":e["commodity_code"],quantity:1,unitPrice:e["Unit Price"],grossWeight:null===e["gross_weight"]?0:e["gross_weight"],netWeight:null===e["net_weight"]?0:e["net_weight"],curbWeight:null===e["curb_weight"]?0:e["curb_weight"],engineDisplacement:e["engine_displacement"],numberOfSeats:null===e["number_of_seats"]?5:e["number_of_seats"],numberOfDoors:null===e["number_of_doors"]?4:e["number_of_doors"],tyreSize:null===e["tyre_size"]?"":e["tyre_size"],modelCode:null===e["model_code"]?"":e["model_code"],seatPosition:null===e["seat_position"]?"RHD":e["seat_position"],details:[r]})})),console.log("Vehicle Data Read",t),t},readWaybillModel(){console.log("Reading Waybill Model");const e=new FormData;this.waybillFiles.forEach((t=>{e.append("files",t)})),Ke(e).then((e=>{const t=e[0];console.log("Waybill Data",t),this.customsEntryForm.waybillNumber=t.waybill_number,this.customsEntryForm.numberOfPackages=dt(t.number_of_packages),this.customsEntryForm.modeOfTransport=t.mode_of_transport;const o=xt(t.consignee,this.customsEntryForm.importers);console.log("Selected Importer",o),this.customsEntryForm.importerId=o.id;const a=xt(t.exporter,this.customsEntryForm.exporters);console.log("Selected Exporter",a),this.customsEntryForm.exporterId=a.id;const r=xt(t.vessel,this.customsEntryForm.vessels);console.log("Selected Vessel",r),this.customsEntryForm.vesselId=r.id;const n=xt(t.port_of_discharge,this.customsEntryForm.ports);console.log("Selected Port",n),this.customsEntryForm.portOfDischargeId=n.id;const s=t.shipped_on_board_date;try{const e=Tt(s);this.customsEntryForm.waybillDate=St(e)}catch(i){console.error("Failed to parse date",i)}if(void 0!==t.freight_charges&&null!==t.freight_charges&&t.freight_charges.trim().length>0){const e=At(t.freight_charges);this.customsEntryForm.freightAmount=e}if(void 0!==t.gross_weight_in_kgs&&null!==t.gross_weight_in_kgs&&(this.customsEntryForm.grossWeight=dt(t.gross_weight_in_kgs)),void 0!==t.package_type&&null!==t.package_type){const e=xt(t.package_type,this.customsEntryForm.packageTypes,"text");console.log("Selected Package Type",e),this.customsEntryForm.packageType=e.value}})).catch((e=>{console.error("Failed to read waybill model",e),Mt("Failed to read waybill model. Please try again.")}))},commodityCodeChange(e){const t=e.target.innerText,o=t.replace(/[^0-9]/g,""),a=this.includeFullStops(o);e.target.innerText=a,this.moveCursorToEnd(e.target)},includeFullStops(e){let t="";for(let o=0;o<e.length;o++)4!==o&&6!==o&&8!==o||(t+="."),t+=e[o];return this.truncateString(t)},getChargeData(){let e=[];return this.vehicles.forEach((t=>{const o=Oe(t.thnNumber.replace(/\./g,"")).then((e=>{console.log(e);let o=mt(e.charges,!0);t.commodity={code:t.thnNumber.replace(/\./g,""),id:e.id,charges:o},console.log("Vehicle Commodity",t.commodity)})).catch((e=>($t(),Mt(`The following commodity code does not exist on Asycuda - ${t.thnNumber}. Please update this and try again. `),console.error("Error details:",e),Promise.reject(e))));e.push(o)})),Promise.all(e)},generateAsycudaXML(){console.log("Generating Asycuda XML"),Wt("Generating Asycuda XML");const e=this.customsEntryForm.ports.find((e=>e.id===this.customsEntryForm.portOfDischargeId));console.log("Selected Port: ",e);const t=this.customsEntryForm.importers.find((e=>e.id===this.customsEntryForm.importerId)),o=this.customsEntryForm.exporters.find((e=>e.id===this.customsEntryForm.exporterId)),a=this.customsEntryForm.declarants.find((e=>e.id===this.customsEntryForm.declarantId)),r=this.countries.find((e=>e.code===this.customsEntryForm.countryOfOrigin)),n=yt(this.vehicles,this.availableCPCCodes,this.invoiceTotal,this.customsEntryForm.grossWeight,this.customsEntryForm.countryOfOrigin),s=void 0==this.customsEntryForm.regimeType?"":this.customsEntryForm.regimeTypeCode?.slice(0,2),i=void 0==this.customsEntryForm.regimeType?"":this.customsEntryForm.regimeTypeCode?.slice(2),l={exworks:parseFloat(this.invoiceTotal),rate_of_exchange:this.rateOfExchange,invoice_currency:this.invoiceCurrency,supplementary_charges_and_deductions:{internal_freight:parseFloat(this.inlandAmount),insurance:parseFloat(this.insuranceAmount),other:parseFloat(this.otherCharges),deductions:0},line_items:n},c={reference_number:this.referenceNumber,group_items:!0,waybill:{number:this.customsEntryForm.waybillNumber,external_freight:this.customsEntryForm.freightAmount,importer:{name:t?.name,tax_identification_number:void 0==t.taxIdentificationNumber?"":t.taxIdentificationNumber},exporter:{name:`${o?.name}\n${o?.address}`,tax_identification_number:void 0==o.taxIdentificationNumber?"":o.taxIdentificationNumber},declarant:{name:a?.name,tax_identification_number:void 0==a.taxIdentificationNumber?"":a.taxIdentificationNumber},charges:{external_freight:{amount:this.customsEntryForm.freightAmount,currency:this.customsEntryForm.freightCurrency,rate_of_exchange:this.customsEntryForm.freightRateOfExchange},insurance:{amount:this.customsEntryForm.insuranceAmount,currency:this.customsEntryForm.insuranceCurrency,rate_of_exchange:this.customsEntryForm.insuranceRateOfExchange},other_charges:{amount:this.customsEntryForm.otherCharges,currency:this.customsEntryForm.otherChargesCurrency,rate_of_exchange:this.customsEntryForm.otherChargesRateOfExchange}},mode_of_transport:"Ocean"===this.customsEntryForm.modeOfTransport?"1":"Air"===this.customsEntryForm.modeOfTransport?"4":"",container_flag:!1,vessel:this.customsEntryForm.vesselName,country_of_origin:this.customsEntryForm.countryOfOrigin,country_of_destination:void 0==this.customsEntryForm.countryOfFinalDestination?"":this.customsEntryForm.countryOfFinalDestination,number_of_packages:this.customsEntryForm.numberOfPackages+"",type_of_declaration:s,general_procedural_code:i,office_of_destination:e.asycudaCode,country_last_provinance:this.customsEntryForm.countryLastProvinance,trading_country:this.customsEntryForm.tradingCountry,country_export:this.customsEntryForm.countryOfOrigin,delivery_terms:this.customsEntryForm.incoTerms,delivery_terms_place:this.customsEntryForm.countryOfOrigin,place_of_terms:r?.name||"US",local_currency:"TTD",office_of_entry:e.asycudaCode,location_of_goods:""},invoices:[l]};console.log("Request Data",c),Se(c).then((e=>{$t(),Ut("Asycuda XML ZIP File Generated Successfully!");const t=window.URL.createObjectURL(new Blob([e],{type:"application/zip"})),o=document.createElement("a"),a="Asycuda-XML.zip";o.href=t,o.setAttribute("download",a),document.body.appendChild(o),o.click(),o.remove()})).catch((()=>{Mt("Error Generating Asycuda XML")}))},generateWorksheet(){console.log("Generating Worksheet"),Wt("Generating Worksheet"),this.getChargeData().then((()=>{const e=lt(this.referenceNumber,"TT","Ramnarine Rampersad","BR0285",this.customsEntryForm.regimeTypeCode,this.customsEntryForm.importerName,this.customsEntryForm.importerTaxIdentificationNumber,this.customsEntryForm.exporterName,this.customsEntryForm.exporterTaxIdentificationNumber,this.customsEntryForm.vesselName,this.customsEntryForm.portOfDischargeName,this.customsEntryForm.depositAmount,this.customsEntryForm.containerCharges,this.customsEntryForm.additionalCharges,this.customsEntryForm.localFee,this.customsEntryForm.freightAmount,this.customsEntryForm.insuranceAmount,this.customsEntryForm.otherCharges,this.customsEntryForm.freightCurrency,this.customsEntryForm.freightRateOfExchange,this.customsEntryForm.insuranceCurrency,this.customsEntryForm.insuranceRateOfExchange,this.customsEntryForm.otherChargesCurrency,this.customsEntryForm.otherChargesRateOfExchange),t=ft(this.vehicles,this.availableCPCCodes,this.customsEntryForm.countryOfOrigin);console.log("Vehicle Lines",t);const o={name:this.invoiceNumber,supplier:this.supplierName,exworks:parseFloat(this.invoiceTotal),invoice_currency:this.invoiceCurrency,cif_foreign_currency:0,cif_local_currency:0,rate_of_exchange:this.rateOfExchange,supplementary_charges_and_deductions:{internal_freight:parseFloat(this.inlandAmount),insurance:this.insuranceAmount,other:this.otherCharges,deductions:0},line_items:t};e.invoices=[o],console.log("Worksheet Object",e),Ae(e).then((e=>{$t(),Ut("Worksheet Generated Successfully!");const t=window.URL.createObjectURL(new Blob([e],{type:"application/zip"})),o=document.createElement("a"),a="Worksheet.zip";o.href=t,o.setAttribute("download",a),document.body.appendChild(o),o.click(),o.remove()})).catch((()=>{Mt("Error Generating Worksheet")}))})).catch((()=>{Mt("Error Generating Worksheet")}))},truncateString(e){return e.length>14?e.substring(0,14):e},moveCursorToEnd(e){const t=document.createRange(),o=window.getSelection();t.selectNodeContents(e),t.collapse(!1),o.removeAllRanges(),o.addRange(t)}}};const Af=(0,E.A)(Sf,[["render",xf]]);var wf=Af,Of={components:{VehicleEntry:wf},methods:{async handleCreate(e){try{Wt("Saving your Entry..."),Q(e).then((e=>{console.log("Entry created successfully:",e);const t=e.entryId;$t(),Ut("Entry created successfully"),this.$router.push({name:"VehicleEntryEditPage",params:{entryId:t}})})).catch((e=>{console.error("Failed to create the Entry:",e),Mt("Failed to create the Entry. Please try again.")}))}catch(t){console.error("Failed to create the invoice:",t),Mt("Failed to create the Entry. Please try again.")}}}};const Nf=(0,E.A)(Of,[["render",Xy]]);var Pf=Nf;function Rf(e,t,o,a,r,s){const i=(0,n.g2)("VehicleEntry");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(i,{record:r.record,vehicleDetails:r.vehicleDetails,invoiceDetails:r.invoiceDetails,referenceNumberRecord:r.referenceNumberRecord,isEditMode:!0,onSubmit:s.handleEdit},null,8,["record","vehicleDetails","invoiceDetails","referenceNumberRecord","onSubmit"])])}var Vf={components:{VehicleEntry:wf},data(){return{entryId:"",waybillId:"",entryStatus:"",record:Lt(),vehicleDetails:[],invoiceDetails:{invoice_id:"",supplierName:"",invoiceNumber:"",invoiceDate:"",invoiceCurrency:"",rateOfExchange:0,invoiceTotal:0,inlandAmount:0,insuranceAmount:0,otherCharges:0},referenceNumberRecord:""}},mounted(){this.entryId=this.$route.params.entryId,this.fetchEntryDetails(),this.getRegimeTypes(),this.fetchPorts()},methods:{async fetchEntryDetails(){console.log("Fetching details for entry ID:",this.entryId),Wt("Fetching Entry details...");try{const e=Z(this.entryId),t=ee(this.entryId),[o,a]=await Promise.all([e,t]);$t(),Ut("Entry details fetched successfully"),console.log("Entry details:",o);let r,n=o.waybill_date;if("0000-00-00"!==n&&n){let e=new Date(n);r=isNaN(e)?"":e.toISOString().split("T")[0]}else r="";this.record=Lt(),this.record.incotermsList=Xs(),this.record.modeOfTransportOOptions=ao(),this.record.packageTypes=to(),this.record.importerId=o.importer,this.record.exporterId=o.shipper,this.record.waybillNumber=o.waybill_number,this.record.waybillDate=r,this.record.modeOfTransport=o.mode_of_transport,this.record.freightType=o.freight_type,this.record.vesselId=o.vessel,this.record.portOfDischargeId=o.port_of_discharge,this.record.netWeight=o.net_weight,this.record.grossWeight=o.gross_weight,this.record.numberOfPackages=o.package_quantity,this.record.packageType=o.package_type,this.record.marksAndNumbers=o.marks_and_numbers,this.record.totalCargoValue=o.invoice_total??0,this.record.freightAmount=o.freight_charge??0,this.record.insuranceAmount=o.insurance_amount??0,this.record.otherCharges=o.other_charges??0,this.record.rateOfExchange=o.rate_of_exchange,this.record.countryOfOrigin=o.country_of_origin,this.record.countryOfFinalDestination=o.country_of_final_destination,this.record.regimeType=o.regimeType,this.record.regimeTypeCode=o.regimeTypeCode,this.record.depositAmount=o.deposit??0,this.record.containerCharges=o.container_charges??0,this.record.additionalCharges=o.additional_charges??0,this.record.localFee=o.local_fee??0,this.record.declarantId=o.declarant,this.record.incoTerms=o.incoterms,this.record.countryLastProvinance=o.country_last_provenance,this.record.tradingCountry=o.trading_country,this.entryStatus=o.entry_status,this.fetchPorts(),console.log("Commercial Invoice details:",a),this.vehicleDetails=this.processVehicleData(a[0].lines),this.vehicleDetails.forEach((e=>{this.updateCommodityCode(e)})),this.invoiceDetails={invoice_id:a[0].ci_invoice_id,supplierName:a[0].supplier_name,invoiceNumber:a[0].invoice_number,invoiceDate:a[0].invoice_date,invoiceCurrency:a[0].currency,rateOfExchange:a[0].rate_of_exchange,invoiceTotal:a[0].invoice_total,inlandAmount:a[0].inland,insuranceAmount:a[0].insurance,otherCharges:a[0].other_charges},this.referenceNumberRecord=o.entry_number,this.waybillId=o.waybill_id,console.log("Vehicle details:",this.vehicleDetails)}catch(e){console.error("Failed to fetch the Entry details:",e),Mt("Failed to fetch the Entry details. Please try again.")}},updateCommodityCode(e){if(void 0===e.thnNumber||null===e.thnNumber||""===e.thnNumber)return e.icdCharge=0,e.vatCharge=0,void(e.mvtCharge=0);Oe(e.thnNumber.replace(/\./g,"")).then((t=>{let o=t.charges["import custom duty"];const a=void 0===o?0:parseFloat(o[0].charge_amount);let r=t.charges["value added tax"];const n=void 0===r?0:parseFloat(r[0].charge_amount);let s=t.charges["motor vehicle tax"];const i=void 0===s?0:parseFloat(s[0].charge_amount);e.icdCharge=a,e.vatCharge=n,e.mvtCharge=i,e.commodityCodeStatus="valid"})).catch((t=>{console.error("Failed to fetch the commodity charges:",t),e.icdCharge=0,e.vatCharge=0,e.mvtCharge=0,e.commodityCodeStatus="invalid"}))},async getRegimeTypes(){return be("TT").then((e=>{this.record.regimeTypeOptions=e}))},async fetchPorts(){return Ce().then((e=>{this.record.ports=e}))},processVehicleDataOld(e){const t=[];return e.forEach((e=>{const o=e["product_code"],a={id:e.id,chassisNumber:e.chassis_number,engineNumber:e.engine_number,exteriorColor:e.exterior_color,customerName:e.customer_name??"",customerTIN:e.customer_tin??"",brokerInstructions:e.broker_instructions,cpcCode:e.cpc_code,npcCode:e.npc_code,edNumber:e.ed_number,quantity:e.quantity,grossWeight:e.gross_weight??0,netWeight:e.net_weight??0,engineDisplacement:e.engine_displacement,manufactureYear:e.manufacture_year??"2000",engine_number:e.engine_number,invoiceLineId:e.cil_invoice_line_id},r=e["product_code"],n=t.find((e=>e.vehicleCode===r));if(n)return n.quantity+=parseInt(e["quantity"]),void n.details.push(a);t.push({vehicleCode:o,description:e.description,thnNumber:null===e["tariff_code"]?"":e["tariff_code"],quantity:1,unitPrice:null===e.unit_price?0:e.unit_price,grossWeight:null===e["gross_weight"]?0:e["gross_weight"],netWeight:null===e["net_weight"]?0:e["net_weight"],curbWeight:null===e["curb_weight"]?0:e["curb_weight"],engineDisplacement:e["engine_displacement"],fuelType:null===e["fuel_type"]?"":e["fuel_type"],numberOfSeats:null===e["number_of_seats"]?5:e["number_of_seats"],numberOfDoors:null===e["number_of_doors"]?4:e["number_of_doors"],tyreSize:null===e["tyre_size"]?"":e["tyre_size"],modelCode:null===e["model_code"]?"":e["model_code"],seatPosition:null===e["seat_position"]?"RHD":e["seat_position"],details:[a]})})),t},processVehicleData(e){const t=[];return e.forEach((e=>{const o=e["ed_number"],a={id:e.id,chassisNumber:e.chassis_number,engineNumber:e.engine_number,exteriorColor:e.exterior_color,customerName:e.customer_name??"",customerTIN:e.customer_tin??"",brokerInstructions:e.broker_instructions,cpcCode:e.cpc_code,npcCode:e.npc_code,edNumber:o,quantity:e.quantity,grossWeight:e.gross_weight??0,netWeight:e.net_weight??0,engineDisplacement:e.engine_displacement,manufactureYear:e.manufacture_year??"2000",engine_number:e.engine_number,invoiceLineId:e.cil_invoice_line_id},r=t.find((e=>e.edNumber===o));if(r)return r.quantity+=parseInt(e["quantity"]),void r.details.push(a);t.push({vehicleCode:e["product_code"],description:e.description,thnNumber:null===e["tariff_code"]?"":e["tariff_code"],quantity:1,edNumber:o,unitPrice:null===e.unit_price?0:e.unit_price,grossWeight:null===e["gross_weight"]?0:e["gross_weight"],netWeight:null===e["net_weight"]?0:e["net_weight"],curbWeight:null===e["curb_weight"]?0:e["curb_weight"],engineDisplacement:e["engine_displacement"],fuelType:null===e["fuel_type"]?"":e["fuel_type"],numberOfSeats:null===e["number_of_seats"]?5:e["number_of_seats"],numberOfDoors:null===e["number_of_doors"]?4:e["number_of_doors"],tyreSize:null===e["tyre_size"]?"":e["tyre_size"],modelCode:null===e["model_code"]?"":e["model_code"],seatPosition:null===e["seat_position"]?"RHD":e["seat_position"],details:[a]})})),t},mapResponseToRecord(e){return{exporters:[],importers:[],vessels:[],ports:[],declarants:[],incotermsList:Xs(),modeOfTransportOOptions:ao(),importerId:e.importer,exporterId:e.shipper,importerName:"",exporterName:"",importerTaxIdentificationNumber:"",exporterTaxIdentificationNumber:"",exporterCountry:"",declarantTaxIdentificationNumber:"",waybillNumber:e.waybill_number,waybillDate:"",modeOfTransport:e.mode_of_transport,freightType:e.freight_type,vesselId:e.vessel,vesselName:"",packageTypes:to(),portOfDischargeId:e.port_of_discharge,portOfDischargeName:"",netWeight:e.net_weight,grossWeight:e.gross_weight,numberOfPackages:e.package_quantity,packageType:e.package_type,marksAndNumbers:e.marks_and_numbers,totalCargoValue:e.invoice_total,freightAmount:e.freight_charge,insuranceAmount:e.insurance_amount,otherCharges:e.other_charges,rateOfExchange:e.rate_of_exchange,countryOfOrigin:e.country_of_origin,countryOfFinalDestination:e.country_of_final_destination,regimeType:e.regimeType,regimeTypeCode:e.regimeTypeCode,regimeTypeOptions:[],depositAmount:e.deposit,containerCharges:e.container_charges,additionalCharges:e.additional_charges,localFee:e.local_fee,declarantId:e.declarant,incoTerms:e.incoterms,countryLastProvinance:e.country_last_provenance,tradingCountry:e.trading_country}},async handleEdit(e){console.log("Edit payload:",e);const t=e.waybill;console.log("Waybill data:",t);let o=e.entry;o.entry_status=this.entryStatus,console.log("Entry data:",o);let a=e.invoice;a.invoice_id=this.invoiceDetails.invoice_id,console.log("Invoice data:",a);let r=e.invoiceLines;console.log("Invoice line data:",r);const n=e.vehicleLines;console.log("Vehicle data:",n);const s={invoices:[a]},i={invoiceLines:r},l={vehicles:n};Wt("Updating Entry details..."),Promise.all([We(this.entryId,o),je(this.waybillId,t),J.A.put("https://mawifrontentcontainerapp.whitestone-99c262a0.eastus.azurecontainerapps.io/api/update-multiple-invoices",s),J.A.put("https://mawifrontentcontainerapp.whitestone-99c262a0.eastus.azurecontainerapps.io/api/update-multiple-invoice-lines",i),J.A.put("https://mawifrontentcontainerapp.whitestone-99c262a0.eastus.azurecontainerapps.io/api/update-vehicle-details",l)]).then((()=>{$t(),Ut("Entry details updated successfully")})).catch((e=>{console.error("Failed to update the Entry details:",e),Mt("Failed to update the Entry details. Please try again.")}))}}};const Uf=(0,E.A)(Vf,[["render",Rf]]);var Bf=Uf;const $f=(0,n.Lk)("h1",null,"Classified Entries",-1),Mf={class:"table table-bordered"},Wf=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Entry #"),(0,n.Lk)("th",null,"Consignee"),(0,n.Lk)("th",null,"Invoice Number"),(0,n.Lk)("th",null,"Waybill Number"),(0,n.Lk)("th",null,"Classififcation Status"),(0,n.Lk)("th",null,"Classified By"),(0,n.Lk)("th",null,"Actions")])],-1),jf=["onClick"],Xf={key:0,class:"error-message"};function Gf(e,t,o,a,s,i){return(0,n.uX)(),(0,n.CE)("div",null,[$f,(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>s.searchTerm=e),placeholder:"Search entries"},null,512),[[r.Jo,s.searchTerm]]),(0,n.Lk)("table",Mf,[Wf,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.filteredEntries,(e=>((0,n.uX)(),(0,n.CE)("tr",{key:e.entry_id},[(0,n.Lk)("td",null,(0,T.v_)(e.entry_number),1),(0,n.Lk)("td",null,(0,T.v_)(e.importerName),1),(0,n.Lk)("td",null,(0,T.v_)(e.invoice_number?e.invoice_number.split("; ")[0]:""),1),(0,n.Lk)("td",null,(0,T.v_)(e.waybill_number),1),(0,n.Lk)("td",null,[(0,n.Lk)("h5",null,[(0,n.Lk)("span",{class:(0,T.C4)({"badge bg-success":"Classififcation Approved"===i.getStatusText(e.classification_approved),"badge bg-warning text-dark":"Not Classified"===i.getStatusText(e.classification_approved)})},(0,T.v_)(i.getStatusText(e.classification_approved)),3)])]),(0,n.Lk)("td",null,(0,T.v_)(e.classification_approved_by),1),(0,n.Lk)("td",null,[(0,n.Lk)("button",{type:"button",class:"btn btn-success",onClick:t=>i.openEntry(e.entry_id,e.entry_type)},"Edit",8,jf)])])))),128))])]),s.error?((0,n.uX)(),(0,n.CE)("div",Xf,(0,T.v_)(s.error),1)):(0,n.Q3)("",!0)])}var qf={data(){return{entries:[],error:null,searchTerm:""}},created(){this.fetchEntries()},methods:{getStatusText(e){return e?zs.APPROVED:zs.NOT_CLASSIFIED},openEntry(e,t){t&&t===Ys.VEHICLES?this.$router.push({name:"VehicleEntryEditPage",params:{entryId:e}}):this.$router.push({name:"EntryDetails",params:{entryId:e}})},async fetchEntries(){try{const e=await J.A.get("https://mawifrontentcontainerapp.whitestone-99c262a0.eastus.azurecontainerapps.io/api/entries/CLASSIFICATION_OKAY");this.entries=e.data}catch(e){this.error=e.message,console.error("There was an error!",e)}}},computed:{filteredEntries(){if(!this.searchTerm)return this.entries.filter((e=>1===e.classification_approved));const e=this.searchTerm.toLowerCase();return this.entries.filter((t=>1===t.classification_approved&&(t.entry_number&&t.entry_number.toString().toLowerCase().includes(e)||t.waybill_number&&t.waybill_number.toString().toLowerCase().includes(e)||t.invoice_number&&t.invoice_number.split("; ").some((t=>t.toLowerCase().includes(e)))||t.consignee&&t.consignee.toString().toLowerCase().includes(e))))}}};const Jf=(0,E.A)(qf,[["render",Gf]]);var Yf=Jf;const zf=(0,n.Lk)("h1",null,"Partially Stored Entries",-1),Hf={class:"table table-bordered"},Kf=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Entry #"),(0,n.Lk)("th",null,"Consignee"),(0,n.Lk)("th",null,"Invoice Number"),(0,n.Lk)("th",null,"Waybill Number"),(0,n.Lk)("th",null,"Actions")])],-1),Qf=["onClick"],Zf={key:0,class:"error-message"};function ev(e,t,o,a,s,i){return(0,n.uX)(),(0,n.CE)("div",null,[zf,(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>s.searchTerm=e),placeholder:"Search entries"},null,512),[[r.Jo,s.searchTerm]]),(0,n.Lk)("table",Hf,[Kf,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.filteredEntries,(e=>((0,n.uX)(),(0,n.CE)("tr",{key:e.entry_id},[(0,n.Lk)("td",null,(0,T.v_)(e.entry_number),1),(0,n.Lk)("td",null,(0,T.v_)(e.importerName),1),(0,n.Lk)("td",null,(0,T.v_)(e.invoice_number?e.invoice_number.split("; ")[0]:""),1),(0,n.Lk)("td",null,(0,T.v_)(e.waybill_number),1),(0,n.Lk)("td",null,[(0,n.Lk)("button",{type:"button",class:"btn btn-success",onClick:t=>i.openEntry(e.entry_id,e.entry_type)},"Edit",8,Qf)])])))),128))])]),s.error?((0,n.uX)(),(0,n.CE)("div",Zf,(0,T.v_)(s.error),1)):(0,n.Q3)("",!0)])}var tv={data(){return{entries:[],error:null,searchTerm:""}},created(){this.fetchEntries()},methods:{openEntry(e,t){t&&t===Ys.VEHICLES?this.$router.push({name:"VehicleEntryEditPage",params:{entryId:e}}):this.$router.push({name:"EntryDetails",params:{entryId:e}})},async fetchEntries(){try{const e=await J.A.get("https://mawifrontentcontainerapp.whitestone-99c262a0.eastus.azurecontainerapps.io/api/entries/PARTIAL_STORAGE");this.entries=e.data}catch(e){this.error=e.message,console.error("There was an error!",e)}}},computed:{filteredEntries(){if(!this.searchTerm)return this.entries;const e=this.searchTerm.toLowerCase();return this.entries.filter((t=>t.entry_number&&t.entry_number.toString().toLowerCase().includes(e)||t.waybill_number&&t.waybill_number.toString().toLowerCase().includes(e)||t.invoice_number&&t.invoice_number.split("; ").some((t=>t.toLowerCase().includes(e)))||t.consignee&&t.consignee.toString().toLowerCase().includes(e)))}}};const ov=(0,E.A)(tv,[["render",ev]]);var av=ov;const rv=(0,n.Lk)("h1",null,"Fully Stored Entries",-1),nv={class:"table table-bordered"},sv=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Entry #"),(0,n.Lk)("th",null,"Consignee"),(0,n.Lk)("th",null,"Invoice Number"),(0,n.Lk)("th",null,"Waybill Number"),(0,n.Lk)("th",null,"Actions")])],-1),iv=["onClick"],lv={key:0,class:"error-message"};function cv(e,t,o,a,s,i){return(0,n.uX)(),(0,n.CE)("div",null,[rv,(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>s.searchTerm=e),placeholder:"Search entries"},null,512),[[r.Jo,s.searchTerm]]),(0,n.Lk)("table",nv,[sv,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.filteredEntries,(e=>((0,n.uX)(),(0,n.CE)("tr",{key:e.entry_id},[(0,n.Lk)("td",null,(0,T.v_)(e.entry_number),1),(0,n.Lk)("td",null,(0,T.v_)(e.importerName),1),(0,n.Lk)("td",null,(0,T.v_)(e.invoice_number?e.invoice_number.split("; ")[0]:""),1),(0,n.Lk)("td",null,(0,T.v_)(e.waybill_number),1),(0,n.Lk)("td",null,[(0,n.Lk)("button",{type:"button",class:"btn btn-success",onClick:t=>i.openEntry(e.entry_id,e.entry_type)},"Edit",8,iv)])])))),128))])]),s.error?((0,n.uX)(),(0,n.CE)("div",lv,(0,T.v_)(s.error),1)):(0,n.Q3)("",!0)])}var dv={data(){return{entries:[],error:null,searchTerm:""}},created(){this.fetchEntries()},methods:{openEntry(e,t){t&&t===Ys.VEHICLES?this.$router.push({name:"VehicleEntryEditPage",params:{entryId:e}}):this.$router.push({name:"EntryDetails",params:{entryId:e}})},async fetchEntries(){try{const e=await J.A.get("https://mawifrontentcontainerapp.whitestone-99c262a0.eastus.azurecontainerapps.io/api/entries/FULL_STORAGE");this.entries=e.data}catch(e){this.error=e.message,console.error("There was an error!",e)}}},computed:{filteredEntries(){if(!this.searchTerm)return this.entries;const e=this.searchTerm.toLowerCase();return this.entries.filter((t=>t.entry_number&&t.entry_number.toString().toLowerCase().includes(e)||t.waybill_number&&t.waybill_number.toString().toLowerCase().includes(e)||t.invoice_number&&t.invoice_number.split("; ").some((t=>t.toLowerCase().includes(e)))||t.consignee&&t.consignee.toString().toLowerCase().includes(e)))}}};const uv=(0,E.A)(dv,[["render",cv]]);var mv=uv;const hv={class:"dashboard-container"},pv={class:"date-picker-container"},yv=(0,n.Lk)("div",{class:"col-md-4"},null,-1),gv={class:"col-md-4 form-group"},fv=(0,n.Lk)("label",{for:"report-date"},"Select Report Date:",-1),vv=(0,n.Lk)("div",{class:"col-md-4"},null,-1),bv={class:"grid-item"},kv={class:"grid-item"},_v={class:"grid-item"},Cv={class:"grid-item"},Dv={class:"grid-item"},Lv={class:"grid-item"};function Ev(e,t,o,a,s,i){const l=(0,n.g2)("InvoiceBucketsPerformance"),c=(0,n.g2)("ClassificationDailyPerformance"),d=(0,n.g2)("ClassificationCodeMatchChart"),u=(0,n.g2)("InvoiceLineBucketsPerformance"),m=(0,n.g2)("InvoiceAIPerformance"),h=(0,n.g2)("ClassificationScoreChart");return(0,n.uX)(),(0,n.CE)("div",hv,[(0,n.Lk)("div",pv,[yv,(0,n.Lk)("div",gv,[fv,(0,n.bo)((0,n.Lk)("input",{type:"date",id:"report-date","onUpdate:modelValue":t[0]||(t[0]=e=>s.selectedDate=e),onChange:t[1]||(t[1]=(...e)=>i.reloadCharts&&i.reloadCharts(...e)),class:"form-control"},null,544),[[r.Jo,s.selectedDate]])]),vv]),(0,n.Lk)("div",bv,[(0,n.bF)(l,{reportDate:s.selectedDate},null,8,["reportDate"])]),(0,n.Lk)("div",kv,[(0,n.bF)(c,{reportDate:s.selectedDate},null,8,["reportDate"])]),(0,n.Lk)("div",_v,[(0,n.bF)(d,{reportDate:s.selectedDate},null,8,["reportDate"])]),(0,n.Lk)("div",Cv,[(0,n.bF)(u,{reportDate:s.selectedDate},null,8,["reportDate"])]),(0,n.Lk)("div",Dv,[(0,n.bF)(m,{reportDate:s.selectedDate},null,8,["reportDate"])]),(0,n.Lk)("div",Lv,[(0,n.bF)(h,{reportDate:s.selectedDate},null,8,["reportDate"])])])}function Fv(e,t,o,a,r,s){const i=(0,n.g2)("Bar");return r.chartDataReady?((0,n.uX)(),(0,n.Wv)(i,{key:0,id:"my-chart-id",options:r.chartOptions,data:r.chartData,ref:"myChart"},null,8,["options","data"])):(0,n.Q3)("",!0)}var Iv=o(1010),xv=o(5524);xv.t1.register(xv.hE,xv.m_,xv.s$,xv.E8,xv.PP,xv.kc,xv.No,xv.FN);var Tv={name:"InvoiceAIPerformance",components:{Bar:Iv.yP},data(){return{chartData:{labels:[],datasets:[{label:"Average File Size",backgroundColor:"rgba(135, 206, 235, 0.5)",data:[],yAxisID:"y",order:1},{label:"Average Processing Time",backgroundColor:"orange",data:[],type:"line",borderColor:"orange",fill:!1,yAxisID:"y1",order:2}]},chartOptions:{responsive:!0,scales:{x:{title:{display:!0,text:"Date"}},y:{title:{display:!0,text:"File Size"},beginAtZero:!0},y1:{position:"right",grid:{drawOnChartArea:!1},title:{display:!0,text:"Processing Time"},beginAtZero:!0}},plugins:{title:{display:!0,text:"Invoice AI Performance - Past 5 days",font:{size:18},padding:{top:10,bottom:20}},legend:{position:"top"}}},chartDataReady:!1}},async mounted(){await this.fetchData()},methods:{async fetchData(){try{const e=await fetch("https://mawifrontentcontainerapp.whitestone-99c262a0.eastus.azurecontainerapps.io/api/invoice-ai-performance-metrics"),t=await e.json();console.log("Performance metrics:",t),t&&t.length>0&&(this.chartData.labels=t.map((e=>new Date(e.processing_date).toLocaleDateString("en-US"))),this.chartData.datasets[0].data=t.map((e=>e.average_file_size)),this.chartData.datasets[1].data=t.map((e=>e.average_processing_time)),this.chartDataReady=!1,this.$nextTick((()=>{this.chartDataReady=!0}))),console.log("Updated chart data:",this.chartData)}catch(e){console.error("Error fetching performance metrics:",e)}}}};const Sv=(0,E.A)(Tv,[["render",Fv]]);var Av=Sv;function wv(e,t,o,a,r,s){const i=(0,n.g2)("Bar");return r.chartDataReady?((0,n.uX)(),(0,n.Wv)(i,{key:0,id:"classification-score-chart",options:r.chartOptions,data:r.chartData,ref:"myChart"},null,8,["options","data"])):(0,n.Q3)("",!0)}xv.t1.register(xv.hE,xv.m_,xv.s$,xv.E8,xv.PP,xv.kc);var Ov={name:"ClassificationScoreChart",components:{Bar:Iv.yP},data(){return{chartData:{labels:[],datasets:[{label:"Total Score",backgroundColor:"rgba(54, 162, 235, 0.7)",data:[]}]},chartOptions:{responsive:!0,scales:{x:{title:{display:!0,text:"Date"}},y:{title:{display:!0,text:"Total Score"},beginAtZero:!0}},plugins:{title:{display:!0,text:"Classification Accuracy Score - Past 5 days",font:{size:18},padding:{top:10,bottom:20}},legend:{position:"top"}}},chartDataReady:!1}},async mounted(){await this.fetchData()},methods:{async fetchData(){try{const e=await fetch("https://mawifrontentcontainerapp.whitestone-99c262a0.eastus.azurecontainerapps.io/api/classification-scores"),t=await e.json();console.log("Classification scores:",t),t&&t.length>0&&(this.chartData.labels=t.map((e=>new Date(e.entry_date).toLocaleDateString("en-US"))),this.chartData.datasets[0].data=t.map((e=>e.total_score)),this.chartDataReady=!1,this.$nextTick((()=>{this.chartDataReady=!0}))),console.log("Updated chart data:",this.chartData)}catch(e){console.error("Error fetching classification scores:",e)}}}};const Nv=(0,E.A)(Ov,[["render",wv],["__scopeId","data-v-29557c4d"]]);var Pv=Nv;const Rv={class:"chart-container"};function Vv(e,t,o,a,r,s){const i=(0,n.g2)("Doughnut");return(0,n.uX)(),(0,n.CE)("div",Rv,[r.chartDataReady?((0,n.uX)(),(0,n.Wv)(i,{key:0,id:"classification-code-match-chart",options:r.chartOptions,data:r.chartData,ref:"myChart"},null,8,["options","data"])):(0,n.Q3)("",!0)])}xv.t1.register(xv.hE,xv.m_,xv.s$,xv.Bs,xv.PP);var Uv={name:"ClassificationCodeMatchChart",components:{Doughnut:Iv.nu},props:{reportDate:{type:String,required:!0}},data(){return{chartData:{labels:["Match","Non-Match"],datasets:[{backgroundColor:["#36A2EB","#FF6384"],data:[]}]},chartOptions:{responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"Classification Code Match vs Non-Match",font:{size:18},padding:{top:10,bottom:20}}}},chartDataReady:!1}},async mounted(){await this.fetchData(this.reportDate)},watch:{reportDate(e){this.fetchData(e)}},methods:{async fetchData(e){try{const t=await fetch(`https://mawifrontentcontainerapp.whitestone-99c262a0.eastus.azurecontainerapps.io/api/classification-code-match?date=${e}`),o=await t.json();console.log("Classification code match percentages:",o),o?(this.chartData.datasets[0].data=[o.match_percentage,o.non_match_percentage],this.chartDataReady=!1,this.$nextTick((()=>{this.chartDataReady=!0}))):(this.chartData.datasets[0].data=[],this.chartDataReady=!0),console.log("Updated chart data:",this.chartData)}catch(t){console.error("Error fetching classification code match percentages:",t)}}}};const Bv=(0,E.A)(Uv,[["render",Vv],["__scopeId","data-v-5cbc0924"]]);var $v=Bv;function Mv(e,t,o,a,r,s){const i=(0,n.g2)("Bar");return r.chartDataReady?((0,n.uX)(),(0,n.Wv)(i,{key:0,id:"invoice-processing-time-chart",options:r.chartOptions,data:r.chartData,ref:"myChart"},null,8,["options","data"])):(0,n.Q3)("",!0)}xv.t1.register(xv.hE,xv.m_,xv.s$,xv.E8,xv.PP,xv.kc,xv.No,xv.ZT,xv.FN);var Wv={name:"InvoiceBucketsPerformance",components:{Bar:Iv.yP},props:{reportDate:{type:String,required:!0}},data(){return{fetchedData:[],chartData:{labels:[],datasets:[{label:"Number of Records",backgroundColor:"rgba(75, 192, 192, 0.7)",data:[],yAxisID:"y"},{label:"Average File Size (KB)",type:"line",borderColor:"rgba(255, 99, 132, 0.7)",backgroundColor:"rgba(255, 99, 132, 0.2)",data:[],yAxisID:"y1",fill:!1}]},chartOptions:{responsive:!0,scales:{x:{title:{display:!0,text:"Processing Time Buckets"}},y:{type:"linear",display:!0,position:"left",title:{display:!0,text:"Number of Entries"}},y1:{type:"linear",display:!0,position:"right",grid:{drawOnChartArea:!1},title:{display:!0,text:"Average File Size (KB)"}}},plugins:{title:{display:!0,text:"Invoice AI Time Bucket Performance",font:{size:18},padding:{top:10,bottom:20}},legend:{position:"top"}},onClick:(e,t)=>{if(t.length>0){const e=t[0].index,o=this.chartData.datasets[0].data[e];this.handleBarClick(e,o)}}},chartDataReady:!1}},async mounted(){await this.fetchData(this.reportDate)},watch:{reportDate(e){this.fetchData(e)}},methods:{async fetchData(e){try{const t=await fetch(`https://mawifrontentcontainerapp.whitestone-99c262a0.eastus.azurecontainerapps.io/api/invoice-processing-time-buckets?date=${e}`),o=await t.json();console.log("Invoice processing time buckets:",o),o&&o.length>0&&(this.fetchedData=o,this.chartData.labels=o.map((e=>e.time_bucket)),this.chartData.datasets[0].data=o.map((e=>e.record_count)),this.chartData.datasets[1].data=o.map((e=>e.average_file_size)),this.chartDataReady=!1,this.$nextTick((()=>{this.chartDataReady=!0}))),console.log("Updated chart data:",this.chartData)}catch(t){console.error("Error fetching invoice processing time buckets:",t)}},handleBarClick(e,t){console.log(this.fetchedData),console.log(`Index: ${e}`),console.log(`Data: ${t}`);const o=this.fetchedData[e];console.log("Selected bucket:",o);const a=o.entry_ids.split(",").map((e=>e.trim()));console.log("Entry IDs:",a),this.$router.push({name:"AllEntries",params:{entryIds:a.join(",")}})}}};const jv=(0,E.A)(Wv,[["render",Mv],["__scopeId","data-v-463516b0"]]);var Xv=jv;const Gv={class:"chart-container"},qv=(0,n.Fv)('<div class="chart-details" data-v-475911dc><h3 data-v-475911dc>Explanation of the Classification Accuracy Buckets:</h3><ul data-v-475911dc><li data-v-475911dc><strong data-v-475911dc>1 - 6 numbers match incorrectly:</strong> 5 points</li><li data-v-475911dc><strong data-v-475911dc>7 - 8 numbers match incorrectly:</strong> 3 points</li><li data-v-475911dc><strong data-v-475911dc>9  11 match incorrectly: </strong> 1 point</li><li data-v-475911dc><strong data-v-475911dc>Exact Match:</strong> 0 points</li></ul></div>',1);function Jv(e,t,o,a,r,s){const i=(0,n.g2)("Bar");return(0,n.uX)(),(0,n.CE)("div",Gv,[r.chartDataReady?((0,n.uX)(),(0,n.Wv)(i,{key:0,id:"classification-accuracy-chart",options:r.chartOptions,data:r.chartData,ref:"myChart"},null,8,["options","data"])):(0,n.Q3)("",!0),qv])}xv.t1.register(xv.hE,xv.m_,xv.s$,xv.E8,xv.PP,xv.kc);var Yv={name:"ClassificationDailyPerformance",components:{Bar:Iv.yP},props:{reportDate:{type:String,required:!0}},data(){return{fetchedData:[],chartData:{labels:[],datasets:[{label:"Number of Lines Classified",backgroundColor:"rgba(153, 102, 255, 0.7)",data:[]}]},chartOptions:{responsive:!0,scales:{x:{title:{display:!0,text:"Score Buckets"}},y:{type:"linear",display:!0,position:"left",title:{display:!0,text:"Number of Lines"}}},plugins:{title:{display:!0,text:"Classification Accuracy Buckets",font:{size:18},padding:{top:10,bottom:20}},legend:{position:"top"}},onClick:(e,t)=>{if(t.length>0){const e=t[0].index,o=this.chartData.datasets[0].data[e];this.handleBarClick(e,o)}}},chartDataReady:!1}},async mounted(){await this.fetchData(this.reportDate)},watch:{reportDate(e){this.fetchData(e)}},methods:{async fetchData(e){try{const t=await fetch(`https://mawifrontentcontainerapp.whitestone-99c262a0.eastus.azurecontainerapps.io/api/classification-accuracy-buckets?date=${e}`),o=await t.json();console.log("Classification accuracy buckets:",o),o&&o.length>0?(this.fetchedData=o,this.chartData.labels=o.map((e=>e.score_bucket)),this.chartData.datasets[0].data=o.map((e=>e.number_of_lines)),this.chartDataReady=!1,this.$nextTick((()=>{this.chartDataReady=!0}))):(this.chartData.labels=[],this.chartData.datasets[0].data=[],this.chartDataReady=!0),console.log("Updated chart data:",this.chartData)}catch(t){console.error("Error fetching classification accuracy buckets:",t)}},handleBarClick(e,t){console.log(this.fetchedData),console.log(`Index: ${e}`),console.log(`Data: ${t}`);const o=this.fetchedData[e];console.log("Selected bucket:",o);const a=o.invoice_line_ids.split(",").map((e=>e.trim()));console.log("Invoice Line IDs:",a),this.$router.push({name:"ClassificationAccuracyReport",query:{invoiceLineIds:a.join(",")}})}}};const zv=(0,E.A)(Yv,[["render",Jv],["__scopeId","data-v-475911dc"]]);var Hv=zv;function Kv(e,t,o,a,r,s){const i=(0,n.g2)("Bar");return r.chartDataReady?((0,n.uX)(),(0,n.Wv)(i,{key:0,id:"invoice-processing-time-chart",options:r.chartOptions,data:r.chartData,ref:"myChart"},null,8,["options","data"])):(0,n.Q3)("",!0)}xv.t1.register(xv.hE,xv.m_,xv.s$,xv.E8,xv.PP,xv.kc);var Qv={name:"InvoiceLineBucketsPerformance",components:{Bar:Iv.yP},props:{reportDate:{type:String,required:!0}},data(){return{fetchedData:[],chartData:{labels:[],datasets:[{label:"Average Processing Time (minutes)",backgroundColor:"rgba(75, 192, 192, 0.7)",data:[]}]},chartOptions:{responsive:!0,scales:{x:{title:{display:!0,text:"Number of Lines"}},y:{title:{display:!0,text:"Average Processing Time (minutes)"}}},plugins:{title:{display:!0,text:"Invoice Processing Time by Number of Lines",font:{size:18},padding:{top:10,bottom:20}},legend:{position:"top"}}},chartDataReady:!1}},async mounted(){await this.fetchData(this.reportDate)},watch:{reportDate(e){this.fetchData(e)}},methods:{async fetchData(e){try{const t=await fetch(`https://mawifrontentcontainerapp.whitestone-99c262a0.eastus.azurecontainerapps.io/api/invoice-line-buckets?date=${e}`),o=await t.json();console.log("Invoice processing Line buckets:",o),o&&o.length>0&&(this.fetchedData=o,this.chartData.labels=o.map((e=>e.line_bucket)),this.chartData.datasets[0].data=o.map((e=>e.average_processing_time)),this.chartDataReady=!1,this.$nextTick((()=>{this.chartDataReady=!0}))),console.log("Updated chart data:",this.chartData)}catch(t){console.error("Error fetching invoice processing time buckets:",t)}}}};const Zv=(0,E.A)(Qv,[["render",Kv],["__scopeId","data-v-6df9e846"]]);var eb=Zv,tb={name:"PerformanceDashboard",components:{InvoiceAIPerformance:Av,ClassificationScoreChart:Pv,ClassificationCodeMatchChart:$v,InvoiceLineBucketsPerformance:eb,InvoiceBucketsPerformance:Xv,ClassificationDailyPerformance:Hv},data(){return{selectedDate:(new Date).toISOString().substr(0,10)}},methods:{reloadCharts(){}}};const ob=(0,E.A)(tb,[["render",Ev]]);var ab=ob;const rb=e=>((0,n.Qi)("data-v-7b9a75de"),e=e(),(0,n.jt)(),e),nb=rb((()=>(0,n.Lk)("h1",null,"Entry Details",-1))),sb={class:"table table-bordered"},ib=rb((()=>(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Entry #"),(0,n.Lk)("th",null,"Consignee"),(0,n.Lk)("th",null,"Invoice Number"),(0,n.Lk)("th",null,"Waybill Number"),(0,n.Lk)("th",null,"Actions")])],-1))),lb=["onClick"],cb={key:0,class:"error-message"};function db(e,t,o,a,s,i){return(0,n.uX)(),(0,n.CE)("div",null,[nb,(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>s.searchTerm=e),placeholder:"Search entries"},null,512),[[r.Jo,s.searchTerm]]),(0,n.Lk)("table",sb,[ib,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.filteredEntries,(e=>((0,n.uX)(),(0,n.CE)("tr",{key:e.entry_id},[(0,n.Lk)("td",null,(0,T.v_)(e.entry_number),1),(0,n.Lk)("td",null,(0,T.v_)(e.importerName),1),(0,n.Lk)("td",null,(0,T.v_)(e.invoice_number?e.invoice_number.split("; ")[0]:""),1),(0,n.Lk)("td",null,(0,T.v_)(e.waybill_number),1),(0,n.Lk)("td",null,[(0,n.Lk)("button",{type:"button",class:"btn btn-success",onClick:t=>i.openEntry(e.entry_id,e.entry_type)},"Edit",8,lb)])])))),128))])]),s.error?((0,n.uX)(),(0,n.CE)("div",cb,(0,T.v_)(s.error),1)):(0,n.Q3)("",!0)])}var ub={name:"AllEntries",props:{entryIds:{type:String,required:!0}},data(){return{entries:[],error:null,searchTerm:""}},created(){this.fetchEntries()},methods:{async fetchEntries(){try{console.log("Fetching entries with IDs:",this.entryIds);const e=Array.isArray(this.entryIds)?this.entryIds:this.entryIds.split(",").map((e=>e.trim())),t=await J.A.get("https://mawifrontentcontainerapp.whitestone-99c262a0.eastus.azurecontainerapps.io/api//entries-by-ids",{params:{entry_ids:e}});this.entries=t.data}catch(e){this.error=e.message,console.error("There was an error fetching entries!",e)}},openEntry(e,t){t===Ys.VEHICLES?this.$router.push({name:"VehicleEntryEditPage",params:{entryId:e}}):this.$router.push({name:"EntryDetails",params:{entryId:e}})}},computed:{filteredEntries(){if(!this.searchTerm)return this.entries;const e=this.searchTerm.toLowerCase();return this.entries.filter((t=>t.entry_number&&t.entry_number.toLowerCase().includes(e)||t.waybill_number&&t.waybill_number.toLowerCase().includes(e)||t.invoice_number&&t.invoice_number.split("; ").some((t=>t.toLowerCase().includes(e)))||t.importerName&&t.importerName.toLowerCase().includes(e)))}}};const mb=(0,E.A)(ub,[["render",db],["__scopeId","data-v-7b9a75de"]]);var hb=mb;const pb=e=>((0,n.Qi)("data-v-76c39d09"),e=e(),(0,n.jt)(),e),yb={class:"classification-report-page"},gb=pb((()=>(0,n.Lk)("h1",null,"Classification Accuracy Details",-1))),fb={class:"table table-bordered"},vb=pb((()=>(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"#"),(0,n.Lk)("th",null,"LLM Code"),(0,n.Lk)("th",null,"Approved Code"),(0,n.Lk)("th",null,"Description"),(0,n.Lk)("th",null,"Supplier Name"),(0,n.Lk)("th",null,"Reference #"),(0,n.Lk)("th",null,"Open Entry"),(0,n.Lk)("th",null,"View Invoice"),(0,n.Lk)("th",null,"Expand")])],-1))),bb=["onClick"],kb=pb((()=>(0,n.Lk)("i",{class:"fa fa-folder-open"},null,-1))),_b=[kb],Cb=["onClick"],Db=pb((()=>(0,n.Lk)("i",{class:"fa fa-file-invoice"},null,-1))),Lb=[Db],Eb=["onClick"],Fb={key:0},Ib=pb((()=>(0,n.Lk)("i",{class:"fas fa-chevron-up",style:{color:"white"}},null,-1))),xb=[Ib],Tb={key:1},Sb=pb((()=>(0,n.Lk)("i",{class:"fas fa-chevron-down",style:{color:"white"}},null,-1))),Ab=[Sb],wb={key:0},Ob={colspan:"9"},Nb=pb((()=>(0,n.Lk)("thead",null,[(0,n.Lk)("th"),(0,n.Lk)("th",null,"Commodity Code"),(0,n.Lk)("th",null," Commodity Code Description"),(0,n.Lk)("th",null,"VAT"),(0,n.Lk)("th",null,"DUTY")],-1))),Pb=pb((()=>(0,n.Lk)("td",null,"LLM Code",-1))),Rb=pb((()=>(0,n.Lk)("td",null,"Approved Code",-1))),Vb={key:0,class:"error-message"};function Ub(e,t,o,a,s,i){return(0,n.uX)(),(0,n.CE)("div",yb,[gb,(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>s.searchTerm=e),placeholder:"Search classification details"},null,512),[[r.Jo,s.searchTerm]]),(0,n.Lk)("table",fb,[vb,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.classificationData,((e,t)=>((0,n.uX)(),(0,n.CE)(n.FK,{key:t},[(0,n.Lk)("tr",null,[(0,n.Lk)("td",null,(0,T.v_)(t+1),1),(0,n.Lk)("td",null,(0,T.v_)(e.llm_recommended_classification_code),1),(0,n.Lk)("td",null,(0,T.v_)(e.approved_classification_code),1),(0,n.Lk)("td",null,(0,T.v_)(e.description),1),(0,n.Lk)("td",null,(0,T.v_)(e.supplier_name),1),(0,n.Lk)("td",null,(0,T.v_)(e.entry_number),1),(0,n.Lk)("td",null,[(0,n.Lk)("button",{class:"btn btn-success",onClick:t=>i.openEntry(e.entry_id)},_b,8,bb)]),(0,n.Lk)("td",null,[(0,n.Lk)("button",{type:"button",class:"btn btn-success",onClick:t=>i.openInvoice(e.file_url)},Lb,8,Cb)]),(0,n.Lk)("td",null,[(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e=>i.toggleDetails(t)},[s.expandedIndex===t?((0,n.uX)(),(0,n.CE)("span",Fb,xb)):((0,n.uX)(),(0,n.CE)("span",Tb,Ab))],8,Eb)])]),s.expandedIndex===t?((0,n.uX)(),(0,n.CE)("tr",wb,[(0,n.Lk)("td",Ob,[(0,n.Lk)("table",null,[Nb,(0,n.Lk)("tr",null,[Pb,(0,n.Lk)("td",null,(0,T.v_)(e.llm_recommended_classification_code),1),(0,n.Lk)("td",null,(0,T.v_)(e.llm_recommended_classification_description),1),(0,n.Lk)("td",null,(0,T.v_)(e.llm_recommended_classification_code_vat)+"%",1),(0,n.Lk)("td",null,(0,T.v_)(e.llm_recommended_classification_code_duty)+"%",1)]),(0,n.Lk)("tr",null,[Rb,(0,n.Lk)("td",null,(0,T.v_)(e.approved_classification_code),1),(0,n.Lk)("td",null,(0,T.v_)(e.approved_classification_description),1),(0,n.Lk)("td",null,(0,T.v_)(e.approved_classification_code_vat)+"%",1),(0,n.Lk)("td",null,(0,T.v_)(e.approved_classification_code_duty)+"%",1)])])])])):(0,n.Q3)("",!0)],64)))),128))])]),s.error?((0,n.uX)(),(0,n.CE)("div",Vb,(0,T.v_)(s.error),1)):(0,n.Q3)("",!0)])}var Bb={name:"ClassificationAccuracyReport",data(){return{classificationData:[],error:null,searchTerm:"",expandedIndex:null}},created(){this.fetchClassificationDetails()},methods:{toggleDetails(e){this.expandedIndex=this.expandedIndex===e?null:e},openInvoice(e){const t=window.open("","_blank","width=800,height=600");t?(t.document.write(`<iframe src="${e}" style="width:100%; height:100%;" frameborder="0"></iframe>`),t.document.title="Document View"):console.error("Failed to open new window.")},async fetchClassificationDetails(){try{const e=this.$route.query.invoiceLineIds;console.log("Invoice Line IDs:",e);const t=await J.A.get("https://mawifrontentcontainerapp.whitestone-99c262a0.eastus.azurecontainerapps.io/api/classification-data",{params:{invoiceLineIds:this.$route.query.invoiceLineIds}});console.log("Classification data:",t.data),this.classificationData=t.data;let o=[];for(let a of this.classificationData)o.push(Oe(a.approved_classification_code.replace(/\./g,"")).then((e=>{let t=e.charges["import custom duty"];const o=void 0===t?0:parseFloat(t[0].charge_amount);let r=e.charges["value added tax"];const n=void 0===r?0:parseFloat(r[0].charge_amount);a["approved_classification_code_vat"]=n,a["approved_classification_code_duty"]=o,a["approved_classification_description"]=e.description,console.log("Charges:",e)})).catch((e=>{console.error("Error fetching commodity charges:",e)}))),o.push(Oe(a.llm_recommended_classification_code.replace(/\./g,"")).then((e=>{let t=e.charges["import custom duty"];const o=void 0===t?0:parseFloat(t[0].charge_amount);let r=e.charges["value added tax"];const n=void 0===r?0:parseFloat(r[0].charge_amount);a["llm_recommended_classification_code_vat"]=n,a["llm_recommended_classification_code_duty"]=o,a["llm_recommended_classification_description"]=e.description})).catch((e=>{console.error("Error fetching commodity charges:",e)})))}catch(e){this.error=e.message,console.error("Error fetching classification data:",e)}},openEntry(e){this.$router.push({name:"EntryDetails",params:{entryId:e}})}},computed:{filteredEntries(){if(!this.searchTerm)return this.entries;const e=this.searchTerm.toLowerCase();return this.entries.filter((t=>t.llm_recommended_classification_code&&t.llm_recommended_classification_code.toLowerCase().includes(e)||t.approved_classification_code&&t.approved_classification_code.toLowerCase().includes(e)||t.description&&t.description.toLowerCase().includes(e)||t.supplier_name&&t.supplier_name.toLowerCase().includes(e)||t.entry_id&&t.entry_id.toString().toLowerCase().includes(e)))}}};const $b=(0,E.A)(Bb,[["render",Ub],["__scopeId","data-v-76c39d09"]]);var Mb=$b;const Wb=[{path:"/",name:"NewEntry",component:ti},{path:"/view-entries",name:"ViewEntries",component:di},{path:"/entries/:entryId",name:"EntryDetails",component:wi,props:!0},{path:"/customs-declaration/:entryId",name:"CustomsDeclarationForm",component:au,props:!0},{path:"/buyers",name:"BuyersPage",component:mm},{path:"/sellers",name:"SellersPage",component:_h},{path:"/declarants",name:"DeclarantsPage",component:Pp},{path:"/vessels",name:"VesselsPage",component:Cy},{path:"/rate-of-exchange",name:"RateOfExchnagePage",component:jy},{path:"/create-vehicle-entry",name:"VehicleEntry",component:Pf},{path:"/edit-vehicle-entry/:entryId",name:"VehicleEntryEditPage",component:Bf},{path:"/approved-classification-entries",name:"ApprovedClassificationEntries",component:Yf},{path:"/partial-storage-entries",name:"PartialStorageEntries",component:av},{path:"/full-storage-entries",name:"FullStorageEntries",component:mv},{path:"/performance-dashboard",name:"PerformanceDashboard",component:ab},{path:"/all-entries/:entryIds",name:"AllEntries",component:hb,props:!0},{path:"/classification-accuracy-report",name:"ClassificationAccuracyReport",component:Mb,props:!0}],jb=(0,x.aE)({history:(0,x.LA)(),routes:Wb});var Xb=jb,Gb=o(6845);const qb=(0,r.Ef)(I);qb.use(Xb),qb.component("v-select",Gb.A),qb.mount("#app")}},t={};function o(a){var r=t[a];if(void 0!==r)return r.exports;var n=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(n.exports,n,n.exports,o),n.loaded=!0,n.exports}o.m=e,function(){var e=[];o.O=function(t,a,r,n){if(!a){var s=1/0;for(d=0;d<e.length;d++){a=e[d][0],r=e[d][1],n=e[d][2];for(var i=!0,l=0;l<a.length;l++)(!1&n||s>=n)&&Object.keys(o.O).every((function(e){return o.O[e](a[l])}))?a.splice(l--,1):(i=!1,n<s&&(s=n));if(i){e.splice(d--,1);var c=r();void 0!==c&&(t=c)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[a,r,n]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){o.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,a){var r,n,s=a[0],i=a[1],l=a[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(r in i)o.o(i,r)&&(o.m[r]=i[r]);if(l)var d=l(o)}for(t&&t(a);c<s.length;c++)n=s[c],o.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return o.O(d)},a=self["webpackChunkasycuda_xml_automation"]=self["webpackChunkasycuda_xml_automation"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=o.O(void 0,[504],(function(){return o(7538)}));a=o.O(a)})();
//# sourceMappingURL=app.6a062414.js.map