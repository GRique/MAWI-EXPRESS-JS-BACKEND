(function(){var e={5358:function(e,t,o){var a={"./af":2190,"./af.js":2190,"./ar":7218,"./ar-dz":5785,"./ar-dz.js":5785,"./ar-kw":9417,"./ar-kw.js":9417,"./ar-ly":6904,"./ar-ly.js":6904,"./ar-ma":8617,"./ar-ma.js":8617,"./ar-ps":1318,"./ar-ps.js":1318,"./ar-sa":2699,"./ar-sa.js":2699,"./ar-tn":6789,"./ar-tn.js":6789,"./ar.js":7218,"./az":3050,"./az.js":3050,"./be":8316,"./be.js":8316,"./bg":310,"./bg.js":310,"./bm":8884,"./bm.js":8884,"./bn":3469,"./bn-bd":6672,"./bn-bd.js":6672,"./bn.js":3469,"./bo":9118,"./bo.js":9118,"./br":3113,"./br.js":3113,"./bs":3626,"./bs.js":3626,"./ca":921,"./ca.js":921,"./cs":7799,"./cs.js":7799,"./cv":2828,"./cv.js":2828,"./cy":3521,"./cy.js":3521,"./da":6962,"./da.js":6962,"./de":3294,"./de-at":6158,"./de-at.js":6158,"./de-ch":5960,"./de-ch.js":5960,"./de.js":3294,"./dv":7963,"./dv.js":7963,"./el":1051,"./el.js":1051,"./en-au":998,"./en-au.js":998,"./en-ca":5931,"./en-ca.js":5931,"./en-gb":5930,"./en-gb.js":5930,"./en-ie":8081,"./en-ie.js":8081,"./en-il":1594,"./en-il.js":1594,"./en-in":3904,"./en-in.js":3904,"./en-nz":1507,"./en-nz.js":1507,"./en-sg":9409,"./en-sg.js":9409,"./eo":2177,"./eo.js":2177,"./es":4805,"./es-do":1536,"./es-do.js":1536,"./es-mx":9791,"./es-mx.js":9791,"./es-us":6098,"./es-us.js":6098,"./es.js":4805,"./et":6240,"./et.js":6240,"./eu":391,"./eu.js":391,"./fa":612,"./fa.js":612,"./fi":4220,"./fi.js":4220,"./fil":5570,"./fil.js":5570,"./fo":5466,"./fo.js":5466,"./fr":4461,"./fr-ca":6306,"./fr-ca.js":6306,"./fr-ch":7081,"./fr-ch.js":7081,"./fr.js":4461,"./fy":3484,"./fy.js":3484,"./ga":6957,"./ga.js":6957,"./gd":2978,"./gd.js":2978,"./gl":9866,"./gl.js":9866,"./gom-deva":5011,"./gom-deva.js":5011,"./gom-latn":4724,"./gom-latn.js":4724,"./gu":1601,"./gu.js":1601,"./he":9802,"./he.js":9802,"./hi":9358,"./hi.js":9358,"./hr":3907,"./hr.js":3907,"./hu":218,"./hu.js":218,"./hy-am":533,"./hy-am.js":533,"./id":2844,"./id.js":2844,"./is":7353,"./is.js":7353,"./it":6364,"./it-ch":774,"./it-ch.js":774,"./it.js":6364,"./ja":6008,"./ja.js":6008,"./jv":8221,"./jv.js":8221,"./ka":2417,"./ka.js":2417,"./kk":2071,"./kk.js":2071,"./km":6149,"./km.js":6149,"./kn":4572,"./kn.js":4572,"./ko":659,"./ko.js":659,"./ku":6285,"./ku-kmr":9398,"./ku-kmr.js":9398,"./ku.js":6285,"./ky":1609,"./ky.js":1609,"./lb":119,"./lb.js":119,"./lo":1748,"./lo.js":1748,"./lt":1973,"./lt.js":1973,"./lv":1347,"./lv.js":1347,"./me":3023,"./me.js":3023,"./mi":5747,"./mi.js":5747,"./mk":4341,"./mk.js":4341,"./ml":3840,"./ml.js":3840,"./mn":2058,"./mn.js":2058,"./mr":9182,"./mr.js":9182,"./ms":5197,"./ms-my":9136,"./ms-my.js":9136,"./ms.js":5197,"./mt":6408,"./mt.js":6408,"./my":1683,"./my.js":1683,"./nb":3141,"./nb.js":3141,"./ne":9344,"./ne.js":9344,"./nl":4703,"./nl-be":4641,"./nl-be.js":4641,"./nl.js":4703,"./nn":9873,"./nn.js":9873,"./oc-lnc":1217,"./oc-lnc.js":1217,"./pa-in":4612,"./pa-in.js":4612,"./pl":4457,"./pl.js":4457,"./pt":1089,"./pt-br":9146,"./pt-br.js":9146,"./pt.js":1089,"./ro":5950,"./ro.js":5950,"./ru":7292,"./ru.js":7292,"./sd":6774,"./sd.js":6774,"./se":7493,"./se.js":7493,"./si":3761,"./si.js":3761,"./sk":9711,"./sk.js":9711,"./sl":8558,"./sl.js":8558,"./sq":8633,"./sq.js":8633,"./sr":688,"./sr-cyrl":7903,"./sr-cyrl.js":7903,"./sr.js":688,"./ss":1991,"./ss.js":1991,"./sv":7020,"./sv.js":7020,"./sw":5891,"./sw.js":5891,"./ta":5714,"./ta.js":5714,"./te":206,"./te.js":206,"./tet":4768,"./tet.js":4768,"./tg":8276,"./tg.js":8276,"./th":7977,"./th.js":7977,"./tk":6928,"./tk.js":6928,"./tl-ph":8046,"./tl-ph.js":8046,"./tlh":1361,"./tlh.js":1361,"./tr":4367,"./tr.js":4367,"./tzl":627,"./tzl.js":627,"./tzm":2636,"./tzm-latn":8148,"./tzm-latn.js":8148,"./tzm.js":2636,"./ug-cn":1204,"./ug-cn.js":1204,"./uk":461,"./uk.js":461,"./ur":1366,"./ur.js":1366,"./uz":3454,"./uz-latn":8374,"./uz-latn.js":8374,"./uz.js":3454,"./vi":8572,"./vi.js":8572,"./x-pseudo":464,"./x-pseudo.js":464,"./yo":3709,"./yo.js":3709,"./zh-cn":5873,"./zh-cn.js":5873,"./zh-hk":7549,"./zh-hk.js":7549,"./zh-mo":2240,"./zh-mo.js":2240,"./zh-tw":405,"./zh-tw.js":405};function r(e){var t=n(e);return o(t)}function n(e){if(!o.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=n,e.exports=r,r.id=5358},2097:function(e,t,o){"use strict";var a={};o.r(a),o.d(a,{Ap:function(){return jt},hL:function(){return Wt}});var r=o(5130),n=o(6768);const s={id:"app"},i={class:"navbar navbar-expand-lg navbar-dark bg-primary"},l={class:"container-fluid"},c=(0,n.Lk)("a",{class:"navbar-brand",href:"#"},"M.A.R.Y.",-1),u=(0,n.Lk)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNavDropdown","aria-controls":"navbarNavDropdown","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,n.Lk)("span",{class:"navbar-toggler-icon"})],-1),d={class:"collapse navbar-collapse",id:"navbarNavDropdown"},m={class:"navbar-nav"},h={class:"nav-item dropdown"},p=(0,n.Lk)("a",{class:"nav-link dropdown-toggle",href:"#",id:"navbarDropdownMenuLink",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}," New Entry ",-1),y={class:"dropdown-menu","aria-labelledby":"navbarDropdownMenuLink"},g={class:"nav-item"},f={class:"nav-item"},v={class:"nav-item"},b={class:"nav-item"},k={class:"nav-item dropdown"},C=(0,n.Lk)("a",{class:"nav-link dropdown-toggle",href:"#",id:"navbarDropdownMenuLink",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}," Configuration ",-1),L={class:"dropdown-menu","aria-labelledby":"navbarDropdownMenuLink"};function D(e,t,o,a,r,D){const _=(0,n.g2)("router-link"),E=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.CE)("div",s,[(0,n.Lk)("nav",i,[(0,n.Lk)("div",l,[c,u,(0,n.Lk)("div",d,[(0,n.Lk)("ul",m,[(0,n.Lk)("li",h,[p,(0,n.Lk)("ul",y,[(0,n.bF)(_,{class:"dropdown-item",to:"/"},{default:(0,n.k6)((()=>[(0,n.eW)("Standard Entry")])),_:1}),(0,n.bF)(_,{class:"dropdown-item",to:"/create-vehicle-entry"},{default:(0,n.k6)((()=>[(0,n.eW)("Vehicle Entry")])),_:1})])]),(0,n.Lk)("li",g,[(0,n.bF)(_,{class:"nav-link",to:"/view-entries"},{default:(0,n.k6)((()=>[(0,n.eW)("Stored and Not Classified")])),_:1})]),(0,n.Lk)("li",f,[(0,n.bF)(_,{class:"nav-link",to:"/approved-classification-entries"},{default:(0,n.k6)((()=>[(0,n.eW)("Classification Okay")])),_:1})]),(0,n.Lk)("li",v,[(0,n.bF)(_,{class:"nav-link",to:"/partial-storage-entries"},{default:(0,n.k6)((()=>[(0,n.eW)("Partial Storage ")])),_:1})]),(0,n.Lk)("li",b,[(0,n.bF)(_,{class:"nav-link",to:"/full-storage-entries"},{default:(0,n.k6)((()=>[(0,n.eW)("Full Storage ")])),_:1})]),(0,n.Lk)("li",k,[C,(0,n.Lk)("ul",L,[(0,n.bF)(_,{class:"dropdown-item",to:"/buyers"},{default:(0,n.k6)((()=>[(0,n.eW)("Importers")])),_:1}),(0,n.bF)(_,{class:"dropdown-item",to:"/sellers"},{default:(0,n.k6)((()=>[(0,n.eW)("Shippers")])),_:1}),(0,n.bF)(_,{class:"dropdown-item",to:"/declarants"},{default:(0,n.k6)((()=>[(0,n.eW)("Declarants")])),_:1}),(0,n.bF)(_,{class:"dropdown-item",to:"/vessels"},{default:(0,n.k6)((()=>[(0,n.eW)("Vessels")])),_:1}),(0,n.bF)(_,{class:"dropdown-item",to:"/rate-of-exchange"},{default:(0,n.k6)((()=>[(0,n.eW)("Rates Of Exchnage")])),_:1})])])])])])]),(0,n.bF)(E)])}var _={name:"App",components:{}},E=o(1241);const F=(0,E.A)(_,[["render",D]]);var T=F,S=o(1387),x=o(4232);const I={id:"app"},A={class:"page-header-info-container"},O={class:"badge-container"},w={key:1},N=(0,n.Lk)("h2",null,"New Entry",-1),P={class:"row"},R=(0,n.Lk)("div",{class:"col-md-5"},null,-1),V={class:"col-md-2"},U=(0,n.Lk)("div",{class:"col-md-5"},null,-1),B={class:"row"},$={class:"col-md-6"},M={class:"col-md-6"},j={key:0},W=(0,n.Lk)("h3",null,"Entry Summary",-1),X=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Number of Lines Read"),(0,n.Lk)("th",null,"Total Invoices Value")])],-1),G=["disabled"];function J(e,t,o,a,s,i){const l=(0,n.g2)("VerifyDocumentData"),c=(0,n.g2)("CustomsEntryForm"),u=(0,n.g2)("DocumentTableView");return(0,n.uX)(),(0,n.CE)("div",I,[(0,n.Lk)("div",A,[(0,n.Lk)("div",null,[(0,n.Lk)("button",{type:"button",class:"btn btn-primary upload-button",onClick:t[0]||(t[0]=(...e)=>i.verifyInvoiceData&&i.verifyInvoiceData(...e))}," Invoice Split Screen "),(0,n.Lk)("button",{type:"button",class:"btn btn-primary upload-button",onClick:t[1]||(t[1]=(...e)=>i.mergeAndOpenPDFs&&i.mergeAndOpenPDFs(...e))}," Open Invoices ")]),(0,n.Lk)("div",null,[(0,n.Lk)("div",O,[(0,n.Lk)("h3",null,[(0,n.Lk)("span",{class:(0,x.C4)(["badge",{"bg-success":"Classification Completed"===i.classificationStatus,"bg-warning text-dark":"Classification In Progress"===i.classificationStatus,"bg-danger":"Not Classified"===i.classificationStatus},"fixed-badge"])},(0,x.v_)(this.classificationStatus),3)])])])]),s.displayDocumentVerificationView?((0,n.uX)(),(0,n.Wv)(l,{key:0,invoices:s.invoiceDataArray,customsEntryForm:s.customsEntryForm,pdfFiles:s.pdfFiles},null,8,["invoices","customsEntryForm","pdfFiles"])):(0,n.Q3)("",!0),s.displayDocumentVerificationView?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",w,[N,(0,n.Lk)("div",P,[R,(0,n.Lk)("div",V,[(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>s.referenceNumber=e),placeholder:"Enter Reference Number",onInput:t[3]||(t[3]=(...e)=>i.validateInput&&i.validateInput(...e))},null,544),[[r.Jo,s.referenceNumber]])]),U]),(0,n.Lk)("div",null,[(0,n.Lk)("div",{class:"dropzone",onDragover:t[10]||(t[10]=(0,r.D$)(((...e)=>i.dragOver&&i.dragOver(...e)),["prevent"])),onDragenter:t[11]||(t[11]=(0,r.D$)(((...e)=>i.dragEnter&&i.dragEnter(...e)),["prevent"])),onDragleave:t[12]||(t[12]=(0,r.D$)(((...e)=>i.dragLeave&&i.dragLeave(...e)),["prevent"])),onDrop:t[13]||(t[13]=(0,r.D$)(((...t)=>e.handleDrop&&e.handleDrop(...t)),["prevent"]))},[(0,n.eW)(" Please Upload Commercial Invoices "),(0,n.Lk)("input",{type:"file",multiple:"",onChange:t[4]||(t[4]=(...e)=>i.handleFileUpload&&i.handleFileUpload(...e)),style:{display:"none"},accept:"application/pdf",ref:"invoices"},null,544),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[5]||(t[5]=e=>i.triggerFileInput("invoices"))}," Choose Files for Invoices "),(0,n.Lk)("input",{type:"file",multiple:"",onChange:t[6]||(t[6]=(...e)=>i.handleWaybillUpload&&i.handleWaybillUpload(...e)),style:{display:"none"},accept:"application/pdf",ref:"waybill"},null,544),(0,n.Lk)("button",{type:"button",class:"btn btn-primary upload-button",onClick:t[7]||(t[7]=e=>i.triggerFileInput("waybill"))}," Choose Files for Waybills "),(0,n.Lk)("button",{type:"button",class:"btn btn-primary upload-button",onClick:t[8]||(t[8]=e=>i.uploadInvoicesAndWaybills())}," Upload Files GABRIEL "),(0,n.Lk)("button",{type:"button",class:"btn btn-primary upload-button",onClick:t[9]||(t[9]=e=>i.uploadInvoicesAndWaybills("https://mary-staging.whitestone-99c262a0.eastus.azurecontainerapps.io//analyze-invoices-OCR-LLM","CLAUDE_LLM"))}," Upload Files LLM ")],32),(0,n.Lk)("div",B,[(0,n.Lk)("div",$,[(0,n.Lk)("ul",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.selectedFiles,((e,t)=>((0,n.uX)(),(0,n.CE)("li",{key:t},(0,x.v_)(e.name),1)))),128))])]),(0,n.Lk)("div",M,[(0,n.Lk)("ul",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.waybillFiles,((e,t)=>((0,n.uX)(),(0,n.CE)("li",{key:t},(0,x.v_)(e.name),1)))),128))])])])]),(0,n.bF)(c,{customsEntryForm:s.customsEntryForm,onUpdateCustomsEntryForm:t[14]||(t[14]=e=>s.customsEntryForm=e)},null,8,["customsEntryForm"]),(0,n.bF)(u,{invoiceDataArray:s.invoiceDataArray,customsEntryForm:s.customsEntryForm,documentVerificationFormat:!1,linesToBeDeleted:s.linesToBeDeleted},null,8,["invoiceDataArray","customsEntryForm","linesToBeDeleted"]),s.selectedFiles.length?((0,n.uX)(),(0,n.CE)("div",j,[W,(0,n.Lk)("table",null,[X,(0,n.Lk)("tbody",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("td",null,(0,x.v_)(this.totalNumberOfLines),1),(0,n.Lk)("td",null,(0,x.v_)(this.totalFOBValue),1)]),(0,n.Lk)("tr",null,[(0,n.Lk)("td",null,[(0,n.Lk)("button",{type:"button",class:"btn btn-primary",disabled:i.entryButtonDisabled,onClick:t[15]||(t[15]=e=>i.createInvoices(s.invoiceDataArray))}," Save Entry ",8,G)])])])])])):(0,n.Q3)("",!0)]))])}o(4114),o(6573),o(8100),o(7936),o(7467),o(4732),o(9577),o(4603),o(7566),o(8721);var q=o(4373);const Y="https://mawifrontentcontainerapp.whitestone-99c262a0.eastus.azurecontainerapps.io/api/",H="https://mary-staging.whitestone-99c262a0.eastus.azurecontainerapps.io//",z=async(e,t,o=null)=>{try{const a=await(0,q.A)({method:e,url:t,data:o});return a.data}catch(a){throw console.error("API error:",a),a}},K=async e=>await z("post",`${Y}commercial_invoices`,e),Q=async e=>await z("post",`${Y}commercial_invoices_vehicles`,e),Z=async e=>{try{const t=await(0,q.A)({url:`${Y}entry-details/${e}`,method:"GET"});return t.data}catch(t){throw console.error("API error:",t),t}},ee=async e=>{try{const t=await(0,q.A)({url:`${Y}commercial-invoices-with-lines-with-vehicles/${e}`,method:"GET"});return t.data}catch(t){throw console.error("API error:",t),t}},te=async e=>{try{const t=await(0,q.A)({url:`${Y}generate-customs-declaration`,method:"POST",responseType:"blob",data:e});return t.data}catch(t){throw console.error("API error:",t),t}},oe=async()=>{try{const e=await(0,q.A)({url:`${Y}blank-valuation-form-trinidad`,method:"GET",responseType:"blob"});return e.data}catch(e){throw console.error("API error:",e),e}},ae=async e=>{try{const t=await(0,q.A)({url:`${Y}generate-pre-signed-valuation-form`,method:"POST",responseType:"blob",data:e});return t.data}catch(t){throw console.error("API error:",t),t}},re=async e=>{try{const t=await(0,q.A)({url:`${Y}generate-pre-signed-valuation-form-v2`,method:"POST",responseType:"blob",data:e});return t.data}catch(t){throw console.error("API error:",t),t}},ne=async e=>{try{const t=await(0,q.A)({url:`${Y}customs-declaration`,method:"POST",data:e});return t.data}catch(t){throw console.error("API error:",t),t}},se=async e=>{console.log(e);try{const t=await(0,q.A)({url:`${Y}customs-declaration/${e}`,method:"GET"});return t}catch(t){throw console.error("API error:",t),t}},ie=async()=>{try{const e=await(0,q.A)({url:`${Y}buyers`,method:"GET"});return e.data}catch(e){throw console.error("API error:",e),e}},le=async()=>{try{const e=await(0,q.A)({url:`${Y}declarants`,method:"GET"});return console.log(e),e.data}catch(e){throw console.error("API error:",e),e}},ce=async()=>{try{const e=await(0,q.A)({url:`${Y}customs-entry-declarants`,method:"GET"});return e.data}catch(e){throw console.error("API error:",e),e}},ue=async()=>{try{const e=await(0,q.A)({url:`${Y}shippers`,method:"GET"});return e.data}catch(e){throw console.error("API error:",e),e}},de=async(e,t)=>{try{const o=await(0,q.A)({url:`${Y}customs-declaration/${e}`,method:"PUT",data:t});return o}catch(o){throw console.error("API error:",o),o}},me=async()=>{try{const e=await fetch("https://restcountries.com/v3/all"),t=await e.json();return t.map((e=>({name:e.name.common,code:e.cca2})))}catch(e){console.error("Failed to fetch countries:",e)}},he=async e=>{try{const t=await(0,q.A)({url:`${Y}buyers`,method:"POST",data:e});return t}catch(t){throw console.error("API error:",t),t}},pe=async e=>{try{const t=await(0,q.A)({url:`${Y}shippers`,method:"POST",data:e});return t}catch(t){throw console.error("API error:",t),t}},ye=async e=>{try{const t=await(0,q.A)({url:`${Y}declarants`,method:"POST",data:e});return t}catch(t){throw console.error("API error:",t),t}},ge=async e=>{try{const t=await(0,q.A)({url:`${Y}cpc-codes/${e}`,method:"GET"});return t.data}catch(t){throw console.error("API error:",t),t}},fe=async()=>{try{const e=await(0,q.A)({url:`${Y}npc_codes`,method:"GET"});return e.data}catch(e){throw console.error("API error:",e),e}},ve=async()=>{try{const e=await(0,q.A)({url:`${Y}npc_codes_with_cpc`,method:"GET"});return e.data}catch(e){throw console.error("API error:",e),e}},be=async()=>{try{const e=await(0,q.A)({url:`${Y}ports/TT`,method:"GET"});return e.data}catch(e){throw console.error("API error:",e),e}},ke=async()=>{try{const e=await(0,q.A)({url:`${Y}rates-of-exchange/TTD`,method:"GET"});return e.data}catch(e){throw console.error("API error:",e),e}},Ce=async e=>{try{const t=await(0,q.A)({url:`${Y}exchange-rates/TTD/${e}`,method:"GET"});return t.data}catch(t){throw console.error("API error:",t),t}},Le=async e=>{try{const t=await(0,q.A)({url:`${Y}rates-of-exchange`,method:"POST",data:e});return t}catch(t){throw console.error("API error:",t),t}},De=async()=>{try{const e=await(0,q.A)({url:`${Y}vessels`,method:"GET"});return e.data}catch(e){throw console.error("API error:",e),e}},_e=async e=>{try{const t=await(0,q.A)({url:`${Y}vessels`,method:"POST",data:e});return t}catch(t){throw console.error("API error:",t),t}},Ee=async(e,t)=>{let o=`${H}generate-worksheet-json`;"summarized"===t&&(o+="?merge_invoices=True");try{const t=await(0,q.A)({url:o,method:"POST",responseType:"blob",data:e});return t.data}catch(a){throw console.error("API error:",a),a}},Fe=async e=>{try{const t=await(0,q.A)({url:`${H}generate-asycuda-toyota-xml`,method:"POST",responseType:"blob",data:e});return t.data}catch(t){throw console.error("API error:",t),t}},Te=async e=>{try{const t=await(0,q.A)({url:`${H}generate-toyota-worksheet`,method:"POST",responseType:"blob",data:e});return t.data}catch(t){throw console.error("API error:",t),t}},Se=async e=>{try{const t=await(0,q.A)({url:`${H}generate-asycuda-xml-json`,method:"POST",responseType:"blob",data:e});return t.data}catch(t){throw console.error("API error:",t),t}},xe=async e=>{try{const t=await(0,q.A)({url:`${H}commodity-codes/${e}`,method:"GET"});return t.data}catch(t){throw console.error("API error:",t),t}},Ie=async e=>{try{const t=await(0,q.A)({url:`${Y}deposit-form`,method:"POST",responseType:"blob",data:e});return t.data}catch(t){throw console.error("API error:",t),t}},Ae=async e=>{try{const t=await(0,q.A)({url:`${Y}generate-sconner-bl`,method:"POST",responseType:"blob",data:e});return t.data}catch(t){throw console.error("API error:",t),t}},Oe=async e=>{try{const t=await(0,q.A)({url:`${Y}tt-c84`,method:"POST",responseType:"blob",data:e});return t.data}catch(t){throw console.error("API error:",t),t}},we=async e=>{try{const t=await(0,q.A)({url:`${Y}overtime-form`,method:"POST",responseType:"blob",data:e});return t.data}catch(t){throw console.error("API error:",t),t}},Ne=async e=>{try{const t=await(0,q.A)({url:`${Y}special-exemptions-declarations/${e}`,method:"GET"});return t.data}catch(t){throw console.error("API error:",t),t}},Pe=async e=>{try{const t=await(0,q.A)({url:`${H}analyze-toyota-documents-LLM`,method:"POST",data:e});return t.data}catch(t){throw console.error("API error:",t),t}},Re=async e=>{try{const t=await(0,q.A)({url:`${H}classify-items`,method:"POST",data:e});return t.data}catch(t){if(t.response&&404===t.response.status||500===t.response.status)return null;throw console.error("API error:",t),t}},Ve=async e=>{try{const t=await(0,q.A)({url:`${Y}generate-caricom`,method:"POST",responseType:"blob",data:e});return t.data}catch(t){throw console.error("API error:",t),t}},Ue=async(e,t)=>{try{const o=await(0,q.A)({url:`${Y}customs-entry/${e}`,method:"PUT",data:t});return o.data}catch(o){throw console.error("API error:",o),o}},Be=async(e,t)=>{try{const o=await(0,q.A)({url:`${Y}waybill/${e}`,method:"PUT",data:t});return o.data}catch(o){throw console.error("API error:",o),o}},$e=async e=>{try{const t=await q.A.post(`${Y}upload-invoices`,e,{headers:{"Content-Type":"multipart/form-data"}});return t.data}catch(t){throw console.error("API error:",t),t}},Me=async e=>{console.log("DB Connector",e);try{const t=await(0,q.A)({url:`${Y}invoice-lines/`,method:"DELETE",data:e});return t.data}catch(t){throw console.error("API error:",t),t}},je=async e=>{try{return await(0,q.A)({url:`${Y}check-entry-number/${e}`,method:"GET"}),!0}catch(t){if(t.response&&409===t.response.status)return!1;throw console.error("API error:",t),t}},We=async()=>{try{const e=await(0,q.A)({url:`${Y}trade_agreements`,method:"GET"});return e.data}catch(e){throw console.error("API error:",e),e}},Xe=async e=>{try{const t=await(0,q.A)({url:`${Y}invoice-ai-performance`,method:"POST",data:e});return t.data}catch(t){throw console.error("API error:",t),t}},Ge=async e=>{try{const t=await(0,q.A)({url:`${Y}classification-performance`,method:"POST",data:e});return t.data}catch(t){throw console.error("API error:",t),t}},Je=async e=>{try{const t=await(0,q.A)({url:`${Y}invoice-lines`,method:"POST",data:e});return t.data}catch(t){throw console.error("API error:",t),t}},qe=async e=>{try{const t=await(0,q.A)({url:"https://gabrielle-flask.azurewebsites.net/read_waybill",method:"POST",data:e});return t.data}catch(t){throw console.error("API error:",t),t}},Ye=async e=>{try{const t=await(0,q.A)({url:`${Y}update-classification-accuracy-performance-metrics`,method:"PUT",data:e});return t.data}catch(t){throw console.error("API error:",t),t}};var He=o(5172),ze=o.n(He),Ke=o(1540),Qe=o(9207),Ze=o(9155);const et=(e,t,o,a,r,n,s,i,l,c,u,d,m,h,p,y,g,f,v,b,k,C,L,D)=>{const _={reference_number:e,country:t,declarant:{name:o,tin:a},regime:r,waybill:{importer:{name:n,tin:s},exporter:{name:i,tin:l},vessel:c,port_of_discharge:u,charges:{external_freight:{amount:parseFloat(tt(y)),currency:v,rate_of_exchange:b},insurance:{amount:parseFloat(tt(g)),currency:k,rate_of_exchange:C},other_charges:{amount:parseFloat(tt(f)),currency:L,rate_of_exchange:D}}},additional_local_charges:{deposit:d,container_charges:m,additional_charges:h,local_fee:p}};return _},tt=e=>void 0===e||null===e||""===e||"0.0"===e||isNaN(e)||"N/A"===e?0:e,ot=(e,t,o,a,r,n)=>{e=parseFloat(tt(e)),t=parseFloat(tt(t)),o=parseFloat(tt(o)),a=parseFloat(tt(a)),r=parseFloat(tt(r)),n=parseFloat(tt(n)),console.log("Calculating CIF..."),console.log(e,parseFloat(t),o,a,r,n);const s=e/parseFloat(t)*o;return e+s+a+r+parseFloat(n)},at=(e,t)=>{console.log("VAT Applicable: ",t),console.log("Charge Data: ",e);let o=[];for(const[a,r]of Object.entries(e)){let e={name:a,value:"0",id:null,operand_field:"",subjected_to_vat:!0};r.forEach((t=>{void 0!==t.charge_amount&&(e.value=t.charge_amount,e.id=t.tariff_charge_id)})),void 0!==r[1].operand_field&&(e.operand_field=r[1].operand_field),void 0!==r[1].subjected_to_vat&&(e.subjected_to_vat=r[1].subjected_to_vat),o.push(e)}return o},rt=(e,t,o,a,r,n,s,i,l,c,u,d)=>{console.log("Available CPC Codes: ",c),console.log("Total Gross Weight: ",a);let m=0,h=0;return e.map(((e,t,o)=>({exworks:parseFloat(e.invoice_total),invoice_currency:e.currency,rate_of_exchange:parseFloat(e.rate_of_exchange),supplementary_charges_and_deductions:{internal_freight:parseFloat(tt(e.inland)),insurance:parseFloat(tt(e.insurance)),other:parseFloat(tt(e.otherCharges)),deductions:0},line_items:e.lines.map(((e,r,l)=>{let p=parseFloat(e.extension_price)/u*parseFloat(a);h+=p,r===l.length-1&&t===o.length-1?(p=parseFloat(a)-m,p=Number(p.toFixed(2)),console.log("Total Gross Weight: ",a),console.log("Last Item Gross Weight: ",p),console.log("Cumulative Weight: ",m)):(p=Math.floor(100*p)/100,console.log(`Item Gross Weight: ${p} - Sum: ${h}`),m+=p);const y=parseFloat(p)-parseFloat(p)/10;return{description:e.description,quantity:parseFloat(e.quantity),unit_cost:parseFloat(e.unit_price),exworks:parseFloat(e.extension_price),cpc_code:parseInt(c.find((t=>t.cpcId===e.cpcCode))?.code),country_origin_code:e.country_of_origin,anc_code:e.npc_code,trade_agreement:d.find((t=>t.id===e.tradeAgreement))?.code||"",commodity:`${e.tariff_code.replace(/\./g,"")}`,gross_weight:parseFloat(p),net_weight:Math.floor(100*y)/100,package_quantity:0===t&&0===r?parseFloat(n):0,kind_of_package:s,marks_and_numbers:i}}))})))},nt=(e,t=200)=>e.length>t?e.substring(0,t):e,st=(e,t)=>e.flatMap((e=>e.details.map((o=>({description:nt(e.description,200),quantity:o.quantity,unit_cost:e.unitPrice,exworks:parseFloat(o.quantity)*parseFloat(e.unitPrice),cpc_code:parseInt(t.find((e=>e.cpcId===o.cpcCode))?.code),country_origin_code:"",anc_code:o.npcCode,commodity:e.thnNumber,gross_weight:e.grossWeight,net_weight:e.netWeight,package_quantity:1,kind_of_package:"CT",marks_and_numbers:`CHASSIS # ${o.chassisNumber}`,chassis_number:o.chassisNumber,curb_weight:e.curbWeight,engine_number:o.engineNumber,exterior_color:o.exteriorColor,customer:o.customerName,customer_tin:o.customerTIN,instruction_code:o.brokerInstructions,engine_displacement:parseFloat(e.engineDisplacement),manufacture_year:o.manufactureYear,number_of_seats:e.numberOfSeats,number_of_doors:e.numberOfDoors,tyre_size:e.tyreSize,model_code:e.modelCode,fuel_type:e.fuelType,seat_position:e.seatPosition,used_flag:!1}))))),it=(e,t)=>e.flatMap((e=>e.details.map((o=>({description:`${e.description} CN: ${o.chassisNumber}`,quantity:o.quantity,unit_cost:e.unitPrice,exworks:parseFloat(o.quantity)*parseFloat(e.unitPrice),cpc_code:`${parseInt(t.find((e=>e.cpcId===o.cpcCode))?.code)}`,country_of_origin:"US",anc_code:o.npcCode,commodity:e.commodity,gross_weight:e.grossWeight,net_weight:e.netWeight,package_quantity:1,kind_of_package:"CT",marks_and_numbers:`CHASSIS # ${o.chassisNumber}`,chassis_number:o.chassisNumber,curb_weight:e.curbWeight,engine_number:o.engineNumber,exterior_color:o.exteriorColor,customer:o.customerName,customer_tin:o.customerTIN,instruction_code:o.brokerInstructions,engine_displacement:parseFloat(e.engineDisplacement),manufacture_year:o.manufactureYear,number_of_seats:e.numberOfSeats,number_of_doors:e.numberOfDoors,tyre_size:e.tyreSize,model_code:e.modelCode,fuel_type:e.fuelType,seat_position:e.seatPosition,used_flag:!1}))))),lt=(e,t,o)=>(console.log("Invoices: ",e),e.map((e=>({name:e.invoice_number,supplier:e.supplier_name,exworks:parseFloat(e.invoice_total),invoice_currency:e.currency,cif_foreign_currency:ot(e.invoice_total,o,t,e.inland,e.insurance,e.otherCharges),rate_of_exchange:e.rate_of_exchange,cif_local_currency:ot(e.invoice_total,o,t,e.inland,e.insurance,e.otherCharges)*e.rate_of_exchange,supplementary_charges_and_deductions:{internal_freight:parseFloat(tt(e.inland)),insurance:parseFloat(tt(e.insurance)),other:parseFloat(tt(e.otherCharges)),deductions:0},line_items:e.lines.map((e=>({description:e.description,quantity:parseFloat(e.quantity),unit_cost:parseFloat(e.unit_price),exworks:parseFloat(e.extension_price),cpc_code:e.cpcCodeName,trade_agreement:e.tradeAgreementCode||"",country_of_origin:e.country_of_origin,anc_code:e.npcCode,commodity:e.commodity})))})))),ct=(e,t,o)=>e.map((e=>({name:e.invoice_id,supplier:e.vendor_name,exworks:e.invoice_total,invoice_currency:e.currency,cif_foreign_currency:ot(e.invoice_total,o,t,e.inland,e.insurance,e.otherCharges),rate_of_exchange:e.rate_of_exchange,cif_local_currency:ot(e.invoice_total,o,t,e.inland,e.insurance,e.otherCharges)*e.rate_of_exchange,supplementary_charges_and_deductions:{internal_freight:parseFloat(e.inland),insurance:parseFloat(e.insurance),other:parseFloat(e.otherCharges),deductions:0},line_items:e.lines.map((e=>({description:e.description,quantity:parseFloat(e.quantity),unit_cost:parseFloat(e.unit_price),exworks:parseFloat(e.extension_price),cpc_code:e.cpcCodeName,country_of_origin:e.country_of_origin,anc_code:e.npcCode,commodity:e.commodity})))})));function ut(){const e=new Date,t=String(e.getDate()).padStart(2,"0"),o=String(e.getMonth()+1).padStart(2,"0"),a=e.getFullYear(),r=`${t}/${o}/${a}`;return r}function dt(e=new Date){const t=e.getFullYear(),o=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return`${t}-${o}-${a}`}const mt=(e,t,o,a,r,n,s,i,l,c,u,d,m,h,p,y,g,f)=>({regimeType:e,waybillNumber:t,waybillDate:o,incoTerms:a,termsOfPayment:"SDT",importer:r,imorterNo:null===n?"":n,declarant:s,declarantNo:i,reference:l,consignor:c,countryOfConsignment:u,countryOfConsignmentCode:d,meansOfTransportation:m,rotation:"/24",mode:h,portOfImportation:p,portCode:y,dateOfImportation:ut(),depositAmount:parseFloat(g).toFixed(2),reason:f}),ht=(e,t,o,a,r,n,s,i,l,c,u,d,m,h,p,y,g,f)=>{let v=m.flatMap((e=>e.lines.map((t=>{let o=parseFloat(t.extension_price)/p*parseFloat(d),a=o-o/10;return{numberAndKindOfPackages:"",specificationOfCommodities:t.description,netWeight:a.toFixed(2),quantity:parseFloat(t.quantity).toLocaleString("en-US",{minimumFractionDigits:2}),unitPrice:parseFloat(t.unit_price).toLocaleString("en-US",{minimumFractionDigits:2}),amount:parseFloat(t.extension_price).toLocaleString("en-US",{minimumFractionDigits:2}),invoiceNumber:e.invoice_number}}))));const b=parseFloat(p)+parseFloat(y)+parseFloat(g)+parseFloat(f);return console.log("Other Charges:",f),console.log(p,y,g,f,b),v[0].numberAndKindOfPackages=`${h} pks`,{sellerNameAddress:t,invoiceNumber:`${ut()} ${o}`,customerOrderNumber:"",otherReferences:"",buyer:"",consigneeNameAddress:e,presentingBank:"",countryOfOrigin:a,incoterms:r,portOfLoading:n,countryOfFinalDestination:s,modeOfTransport:i,currencyOfSale:c,otherTransportInformation:l,marksAndNumbers:"As Addressed",descriptionOfGoods:u,grossWeight:d.toLocaleString("en-US",{minimumFractionDigits:2}),packages:v,fob:p.toLocaleString("en-US",{minimumFractionDigits:2}),packaging:"0.00",freight:y.toLocaleString("en-US",{minimumFractionDigits:2}),insurance:g.toLocaleString("en-US",{minimumFractionDigits:2}),otherCharges:f.toLocaleString("en-US",{minimumFractionDigits:2}),invoiceTotal:b.toLocaleString("en-US",{minimumFractionDigits:2})}},pt=()=>({exporters:[],importers:[],vessels:[],ports:[],declarants:[],incotermsList:[],ratesOfExchange:[],importerId:"",exporterId:"",importerName:"",exporterName:"",importerTaxIdentificationNumber:"",exporterTaxIdentificationNumber:"",exporterCountry:"",declarantId:"",declarantTaxIdentificationNumber:"",modeOfTransport:"",freightType:"",waybillNumber:"",waybillDate:"",vesselId:"",vesselName:"",incoTerms:"",portOfDischargeId:"",portOfDischargeName:"",netWeight:0,grossWeight:0,numberOfPackages:0,packageType:"",packageTypes:[],marksAndNumbers:"As Addressed",freightCurrency:"USD",insuranceCurrency:"USD",otherChargesCurrency:"USD",totalCargoValue:0,freightAmount:0,insuranceAmount:0,otherCharges:0,insuranceRateOfExchange:0,otherChargesRateOfExchange:0,freightRateOfExchange:0,rateOfExchange:0,regimeType:"",regimeTypeCode:"",regimeTypeOptions:[],depositAmount:0,containerCharges:0,additionalCharges:0,localFee:0,countryOfOrigin:"",countryOfFinalDestination:"TT",countryLastProvinance:"",tradingCountry:""}),yt=e=>e.some((e=>e.lines.some((e=>!e.tariff_code||""===e.tariff_code.trim())))),gt=e=>{const t={day:"2-digit",month:"short",year:"numeric"},o=new Date(e);return o.toLocaleDateString(void 0,t)},ft=e=>e.toLowerCase().replace(/\bltd\b/g,"limited").replace(/[^a-z0-9]/g,""),vt=(e,t,o="name")=>{const a=ft(e),r=t.map((e=>ft(e[o]))),{bestMatch:n}=ze().findBestMatch(a,r);return t.find((e=>ft(e[o])===n.target))},bt=e=>{const t=e.replace(/(\d+)(ST|ND|RD|TH)/gi,"$1"),o=["dd-MMM-yyyy","dd/MM/yyyy","MMM/dd/yyyy","yyyy-MM-dd","yyyy/MM/dd","dd MMM yyyy","MMM dd, yyyy","dd-MM-yyyy","yyyyMMdd","dd,MMM,yyyy"];for(const r of o){const e=(0,Ke.qg)(t,r,new Date,{locale:Ze.c});if(!isNaN(e))return e}const a=new Date(t);if(!isNaN(a))return a;throw new Error(`Unable to parse date: ${e}`)},kt=e=>(0,Qe.GP)(e,"yyyy-MM-dd"),Ct=e=>{const t=e.replace(/[^0-9.]/g,""),o=parseFloat(t);return isNaN(o)?0:o},Lt=(e,t,o,a,r,n,s,i,l,c)=>({exporter:e,importer:t,marksAndNumbers:o,vesselName:a,countryOfDestination:r,invoiceLines:n,freightPayableAt:s,grossWeight:i,portOfDischarge:l,date:ut(),referenceNumber:c});var Dt=o(4874),_t=o.n(Dt);function Et(e){_t().fire({position:"top-end",toast:!0,icon:"success",title:e,showConfirmButton:!1,timer:2e3,timerProgressBar:!0})}function Ft(e){_t().fire({html:e,allowOutsideClick:!0,backdrop:!1,showConfirmButton:!1,width:"300px",didOpen:()=>{_t().showLoading()},position:"top-end",customClass:{container:"swal2-top-end"}})}function Tt(){_t().close()}function St(e){_t().fire({icon:"error",title:"Oops...",text:e})}function xt(e){_t().fire({title:"One moment...",html:e,allowOutsideClick:!1,showConfirmButton:!1,willOpen:()=>{_t().showLoading()}})}async function It(){return await _t().fire({title:"I noticed you deleted something!",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((e=>e))}async function At(e,t){const o=Object.entries(e).map((([e,t])=>`<option value="${e}">${t}</option>`)).join(""),a=t.map((e=>`<option value="${e.id}">${e.name}</option>`)).join("");return await _t().fire({title:"Special Exemption Details",html:`\n            <select id="swal-input1" class="swal2-input">\n                <option value="" selected disabled>Please select declaration number</option>\n                ${o}\n            </select>\n            <div style="margin-top: 15px;"></div>\n            <select id="swal-input2" class="swal2-input">\n                <option value="" selected disabled>Please select signatory</option>\n                ${a}\n            </select>\n            <div style="margin-top: 15px;"></div>\n            <div id="swal-radio-group" class="swal2-input">\n                <label>Generate Pre-Signed:</label>\n                <div>\n                    <input type="radio" id="generate-yes" name="generate-pre-signed" value="yes">\n                    <label for="generate-yes">Yes</label>\n                    <input type="radio" id="generate-no" name="generate-pre-signed" value="no" checked>\n                    <label for="generate-no">No</label>\n                </div>\n            </div>\n        `,focusConfirm:!1,showCancelButton:!0,preConfirm:()=>{const e=_t().getPopup().querySelector("#swal-input1").value,t=_t().getPopup().querySelector("#swal-input2").value,o=_t().getPopup().querySelector('input[name="generate-pre-signed"]:checked').value;return e&&t||_t().showValidationMessage("Please select both declaration numbers"),{select1:e,select2:t,generatePreSigned:"yes"===o}}}).then((e=>{if(e.isConfirmed)return e.value}))}async function Ot(){return await _t().fire({title:"Cargo Details",html:'\n        <div style="display: flex; flex-direction: column; align-items: center;">\n            <label for="cargo-details" style="margin-bottom: 5px;">Please enter the cargo details:</label>\n            <input type="text" id="cargo-details" class="swal2-input" placeholder="Enter cargo details here..." style="margin-bottom: 15px;">\n            <label for="start-time" style="margin-bottom: 5px;">Please enter the start time:</label>\n            <input type="time" id="start-time" class="swal2-input" value="16:00">\n        </div>\n        ',focusConfirm:!1,showCancelButton:!0,preConfirm:()=>{const e=_t().getPopup().querySelector("#cargo-details").value,t=_t().getPopup().querySelector("#start-time").value;e&&t||_t().showValidationMessage("Please enter both cargo details and start time");const[o,a]=t.split(":"),r=parseInt(o,10),n=r>=12?"PM":"AM",s=r%12||12,i=`${s}:${a} ${n}`;return{cargoDetails:e,startTime:i}}}).then((e=>{if(e.isConfirmed)return console.log("Cargo Details:",e.value.cargoDetails),console.log("Start Time:",e.value.startTime),e.value}))}async function wt(){return await _t().fire({title:"Enter Cargo Details",input:"text",inputLabel:"Cargo Details",inputPlaceholder:"Enter the cargo details here...",showCancelButton:!0,inputValidator:e=>{if(!e)return"Cargo details are required!"}}).then((e=>{if(e.isConfirmed)return e.value}))}async function Nt(){return await _t().fire({title:"Enter Your Name",input:"text",inputLabel:"Name",inputPlaceholder:"Enter your name here...",showCancelButton:!0,inputValidator:e=>{if(!e)return"Name is required!"}}).then((e=>{if(e.isConfirmed)return e.value}))}async function Pt(){return await _t().fire({title:"Choose Document Format",text:"Please select the format in which you want to generate the document.",icon:"question",showCancelButton:!0,confirmButtonText:"Summarized",cancelButtonText:"Detailed"}).then((e=>e.isConfirmed?"summarized":e.dismiss===_t().DismissReason.cancel?"detailed":void 0))}async function Rt(){return await _t().fire({title:"Select Reason for Deposit",input:"select",inputOptions:{"PENDING CARICOM AREA INVOICE":"PENDING CARICOM AREA INVOICE","PENDING STATUS OF SIGNATORY ON CARICOM CARE INVOICE":"PENDING STATUS OF SIGNATORY ON CARICOM CARE INVOICE"},inputPlaceholder:"Select a reason...",showCancelButton:!0,inputValidator:e=>{if(!e)return"You need to select a reason!"}}).then((e=>{if(e.isConfirmed)return e.value}))}async function Vt(e){const t=`\n      <table border="1" style="width:100%; text-align:left;">\n        <thead>\n          <tr>\n            <th>Base Currency</th>\n            <th>Rate</th>\n            <th>Effective Date</th>\n          </tr>\n        </thead>\n        <tbody>\n          ${e.map((e=>`\n            <tr>\n              <td>${e.base_currency}</td>\n              <td>${e.rate}</td>\n              <td>${gt(e.last_updated)}</td>\n            </tr>\n          `)).join("")}\n        </tbody>\n      </table>\n    `;_t().fire({title:"Exchange Rates",html:t,width:"800px",showCloseButton:!0,focusConfirm:!1,confirmButtonText:"Close"})}async function Ut(e,t=0){const o=`\n        <table border="1" style="width:100%; text-align:left;">\n            <thead>\n                <tr>\n                    <th>Tax Name</th>\n                    <th>Tax Percentage</th>\n                    <th>Amount Payable</th>\n                </tr>\n            </thead>\n            <tbody>\n                ${Object.entries(e).map((([e,o],a)=>{console.log(a);const r=o[0],n=parseFloat(r.charge_amount),s=n/100*t;return n>0?`\n                            <tr>\n                                <td>${e}</td>\n                                <td><input type="number" id="chargeAmount-${a}" class="chargeAmount" data-index="${a}" value="${n}" /></td>\n                                <td class="taxAmount" id="taxAmount-${a}">${s.toFixed(2)}</td>\n                            </tr>\n                        `:""})).join("")}\n            </tbody>\n        </table>\n    `;await _t().fire({title:"Tax Information",html:o,width:"800px",showCloseButton:!0,focusConfirm:!1,confirmButtonText:"OK",didOpen:()=>{document.querySelectorAll(".chargeAmount").forEach((e=>{e.addEventListener("input",(function(){const e=this.dataset.index,o=parseFloat(this.value)||0;document.getElementById("taxAmount-"+e).innerHTML=(o/100*t).toFixed(2)}))}))}})}async function Bt(){return await _t().fire({title:"Scooner BL Details",html:'\n            <select id="freightPayableAt" class="swal2-input">\n                <option value="">Freight Payable At</option>\n                <option value="Freight Collect">Freight Collect</option>\n                <option value="Freight Pre-Paid">Freight Pre-Paid</option>\n            </select>\n            <input type="text" id="portOfDischarge" class="swal2-input" placeholder="Port of Discharge">\n        ',showCancelButton:!0,preConfirm:()=>{const e=_t().getPopup().querySelector("#freightPayableAt").value,t=_t().getPopup().querySelector("#portOfDischarge").value;return e&&t?{freightPayableAt:e,portOfDischarge:t}:(_t().showValidationMessage("Both fields are required!"),null)}}).then((e=>{if(e.isConfirmed)return e.value}))}var $t=o(144);function Mt(){const e=(0,$t.KR)([{value:"1A",text:"Drum, steel"},{value:"1B",text:"Drum, aluminium"},{value:"1D",text:"Drum, plywood"},{value:"1G",text:"Drum, fibre"},{value:"1W",text:"Drum, wooden"},{value:"2C",text:"Barrel, wooden"},{value:"3A",text:"Jerrican, steel"},{value:"3H",text:"Jerrican, plastic"},{value:"43",text:"Bag, super bulk"},{value:"4A",text:"Box, steel"},{value:"4B",text:"Box, aluminium"},{value:"4C",text:"Box, natural wood"},{value:"4D",text:"Box, plywood"},{value:"4F",text:"Box, reconstituted wood"},{value:"4G",text:"Box, fibreboard"},{value:"4H",text:"Box, plastic"},{value:"5H",text:"Bag, woven plastic"},{value:"5L",text:"Bag, textile"},{value:"5M",text:"Bag, paper"},{value:"6H",text:"Composite packaging, plastic receptacle"},{value:"6P",text:"Composite packaging, glass receptacle"},{value:"AA",text:"Intermediate bulk container, rigid"},{value:"AB",text:"Receptacle, fibre"},{value:"AC",text:"Receptacle, paper"},{value:"AD",text:"Receptacle, wooden"},{value:"AE",text:"Aerosol"},{value:"AF",text:"Pallet, modular, collars 80cms * 6"},{value:"AG",text:"Pallet, shrinkwrapped"},{value:"AH",text:"Pallet, 100cms * 110cms"},{value:"AI",text:"Clamshell"},{value:"AJ",text:"Cone"},{value:"AM",text:"Ampoule, non-protected"},{value:"AP",text:"Ampoule, protected"},{value:"AT",text:"Atomizer"},{value:"AV",text:"Capsule"},{value:"BA",text:"Barrel"},{value:"BB",text:"Bobbin"},{value:"BC",text:"Bottlecrate / bottlerack"},{value:"BD",text:"Board"},{value:"BE",text:"Bundle"},{value:"BF",text:"Balloon, non-protected"},{value:"BG",text:"Bag"},{value:"BH",text:"Bunch"},{value:"BI",text:"Bin"},{value:"BJ",text:"Bucket"},{value:"BK",text:"Basket"},{value:"BL",text:"Bale, compressed"},{value:"BM",text:"Basin"},{value:"BN",text:"Bale, non-compressed"},{value:"BO",text:"Bottle, non-protected, cylindrical"},{value:"BP",text:"Balloon, protected"},{value:"BQ",text:"Bottle, protected cylindrical"},{value:"BR",text:"Bar"},{value:"BS",text:"Bottle, non-protected, bulbous"},{value:"BT",text:"Bolt"},{value:"BU",text:"Butt"},{value:"BV",text:"Bottle, protected bulbous"},{value:"BW",text:"Box, for liquids"},{value:"BX",text:"Box"},{value:"BY",text:"Board, in bundle/bunch/truss"},{value:"BZ",text:"Bars, in bundle/bunch/truss"},{value:"CA",text:"Can, rectangular"},{value:"CB",text:"Crate, beer"},{value:"CC",text:"Churn"},{value:"CD",text:"Can, with handle and spout"},{value:"CE",text:"Creel"},{value:"CF",text:"Coffer"},{value:"CG",text:"Cage"},{value:"CH",text:"Chest"},{value:"CI",text:"Canister"},{value:"CJ",text:"Coffin"},{value:"CK",text:"Cask"},{value:"CL",text:"Coil"},{value:"CM",text:"Card"},{value:"CN",text:"Container, not otherwise specified"},{value:"CO",text:"Carboy, non-protected"},{value:"CP",text:"Carboy, protected"},{value:"CQ",text:"Cartridge"},{value:"CR",text:"Crate"},{value:"CS",text:"Case"},{value:"CT",text:"Carton"},{value:"CU",text:"Cup"},{value:"CV",text:"Cover"},{value:"CW",text:"Cage, roll"},{value:"CX",text:"Can, cylindrical"},{value:"CY",text:"Cylinder"},{value:"CZ",text:"Canvas"},{value:"DA",text:"Crate, multiple layer, plastic"},{value:"DB",text:"Crate, multiple layer, wooden"},{value:"DC",text:"Crate, multiple layer, cardboard"},{value:"DG",text:"Cage, Commonwealth Handling Equipment"},{value:"DH",text:"Box, Commonwealth Handling Equipment"},{value:"DI",text:"Drum, iron"},{value:"DJ",text:"Demijohn, non-protected"},{value:"DK",text:"Crate, bulk, cardboard"},{value:"DL",text:"Crate, bulk, plastic"},{value:"DM",text:"Crate, bulk, wooden"},{value:"DN",text:"Dispenser"},{value:"DP",text:"Demijohn, protected"},{value:"DR",text:"Drum"},{value:"DS",text:"Tray, one layer no cover, plastic"},{value:"DT",text:"Tray, one layer no cover, wooden"},{value:"DU",text:"Tray, one layer no cover, polystyrene"},{value:"DV",text:"Tray, one layer no cover, cardboard"},{value:"DW",text:"Tray, two layers no cover, plastic"},{value:"DX",text:"Tray, two layers no cover, wooden"},{value:"DY",text:"Tray, two layers no cover, cardboard"},{value:"EC",text:"Bag, plastic"},{value:"ED",text:"Case, with pallet base"},{value:"EE",text:"Case, with pallet base, wooden"},{value:"EF",text:"Case, with pallet base, cardboard"},{value:"EG",text:"Case, with pallet base, plastic"},{value:"EH",text:"Case, with pallet base, metal"},{value:"EI",text:"Case, isothermic"},{value:"EN",text:"Envelope"},{value:"FC",text:"Crate, fruit"},{value:"FD",text:"Crate, framed"},{value:"FI",text:"Firkin"},{value:"FL",text:"Flask"},{value:"FO",text:"Footlocker"},{value:"FP",text:"Filmpack"},{value:"FR",text:"Frame"},{value:"FT",text:"Foodtainer"},{value:"FW",text:"Cart, flatbed"},{value:"FX",text:"Bag, flexible container"},{value:"GB",text:"Bottle, gas"},{value:"GI",text:"Girder"},{value:"GR",text:"Receptacle, glass"},{value:"GU",text:"Tray, containing horizontally stacked"},{value:"GZ",text:"Girders, in bundle/bunch/truss"},{value:"HA",text:"Basket, with handle, plastic"},{value:"HB",text:"Basket, with handle, wooden"},{value:"HC",text:"Basket, with handle, cardboard"},{value:"HG",text:"Hogshead"},{value:"HR",text:"Hamper"},{value:"IA",text:"Package, display, wooden"},{value:"IB",text:"Package, display, cardboard"},{value:"IC",text:"Package, display, plastic"},{value:"ID",text:"Package, display, metal"},{value:"IE",text:"Package, show"},{value:"IF",text:"Package, flow"},{value:"IG",text:"Package, paper wrapped"},{value:"IH",text:"Drum, plastic"},{value:"IK",text:"Package, cardboard, with bottle grip"},{value:"IL",text:"Tray, rigid, lidded stackable (CEN)"},{value:"IN",text:"Ingot"},{value:"IZ",text:"Ingots, in bundle/bunch/truss"},{value:"JC",text:"Jerrican, rectangular"},{value:"JG",text:"Jug"},{value:"JR",text:"Jar"},{value:"JT",text:"Jutebag"},{value:"JY",text:"Jerrican, cylindrical"},{value:"KG",text:"Keg"},{value:"LG",text:"Log"},{value:"LT",text:"Lot"},{value:"LV",text:"Liftvan"},{value:"LZ",text:"Logs, in bundle/bunch/truss"},{value:"MB",text:"Bag, multiply"},{value:"MC",text:"Crate, milk"},{value:"MR",text:"Receptacle, metal"},{value:"MS",text:"Sack, multi-wall"},{value:"MT",text:"Mat"},{value:"MW",text:"Receptacle, plastic wrapped"},{value:"MX",text:"Matchbox"},{value:"NA",text:"Not available"},{value:"NE",text:"Unpacked or unpackaged"},{value:"NF",text:"Unpacked or unpackaged, single unit"},{value:"NG",text:"Unpacked or unpackaged, multiple units"},{value:"NS",text:"Nest"},{value:"NT",text:"Net"},{value:"NU",text:"Net, tube, plastic"},{value:"NV",text:"Net, tube, textile"},{value:"OA",text:"Pallet, CHEP 40 cm x 60 cm"},{value:"OB",text:"Pallet, CHEP 80 cm x 120 cm"},{value:"OC",text:"Pallet, CHEP 100 cm x 120 cm"},{value:"OD",text:"Pallet, AS 4068-1993"},{value:"OE",text:"Pallet, ISO T11"},{value:"OF",text:"Platform, unspecified weight or dimensions"},{value:"OK",text:"Block"},{value:"PA",text:"Packet"},{value:"PB",text:"Pallet, box Combined open-ended box"},{value:"PC",text:"Parcel"},{value:"PD",text:"Pallet, modular, collars 80cms * 1"},{value:"PE",text:"Pallet, modular, collars 80cms * 1"},{value:"PF",text:"Pen"},{value:"PG",text:"Plate"},{value:"PH",text:"Pitcher"},{value:"PI",text:"Pipe"},{value:"PJ",text:"Punnet"},{value:"PK",text:"Package"},{value:"PL",text:"Pail"},{value:"PN",text:"Plank"},{value:"PO",text:"Pouch"},{value:"PR",text:"Receptacle, plastic"},{value:"PT",text:"Pot"},{value:"PU",text:"Tray"},{value:"PV",text:"Pipes, in bundle/bunch/truss"},{value:"PX",text:"Pallet"},{value:"PY",text:"Plates, in bundle/bunch/truss"},{value:"PZ",text:"Planks, in bundle/bunch/truss"},{value:"QA",text:"Drum, steel, non-removable head"},{value:"QB",text:"Drum, steel, removable head"},{value:"QC",text:"Drum, aluminium, non-removable head"},{value:"QD",text:"Drum, aluminium, removable head"},{value:"QF",text:"Drum, plastic, non-removable head"},{value:"QG",text:"Drum, plastic, removable head"},{value:"QH",text:"Barrel, wooden, bung type"},{value:"QJ",text:"Barrel, wooden, removable head"},{value:"QK",text:"Jerrican, steel, non-removable head"},{value:"QL",text:"Jerrican, steel, removable head"},{value:"QM",text:"Jerrican, plastic, non-removable head"},{value:"QN",text:"Jerrican, plastic, removable head"},{value:"QP",text:"Box, wooden, natural wood, ordinary"},{value:"QQ",text:"Box, wooden, natural wood, with side"},{value:"QR",text:"Box, plastic, expanded"},{value:"QS",text:"Box, plastic, solid"},{value:"RD",text:"Rod"},{value:"RG",text:"Ring"},{value:"RJ",text:"Rack, clothing hanger"},{value:"RK",text:"Rack"},{value:"RL",text:"Reel"},{value:"RO",text:"Roll"},{value:"RT",text:"Rednet"},{value:"RZ",text:"Rods, in bundle/bunch/truss"},{value:"SA",text:"Sack"},{value:"SB",text:"Slab"},{value:"SC",text:"Crate, shallow"},{value:"SD",text:"Spindle"},{value:"SE",text:"Sea-chest"},{value:"SH",text:"Sachet"},{value:"SI",text:"Skid"},{value:"SK",text:"Case, skeleton"},{value:"SL",text:"Slipsheet"},{value:"SM",text:"Sheetmetal"},{value:"SO",text:"Spool"},{value:"SP",text:"Sheet, plastic wrapping"},{value:"SS",text:"Case, steel"},{value:"ST",text:"Sheet"},{value:"SU",text:"Suitcase"},{value:"SV",text:"Envelope, steel"},{value:"SW",text:"Shrinkwrapped"},{value:"SX",text:"Set"},{value:"SY",text:"Sleeve"},{value:"SZ",text:"Sheets, in bundle/bunch/truss"},{value:"TB",text:"Tub"},{value:"TC",text:"Tea-chest"},{value:"TD",text:"Tube, collapsible"},{value:"TI",text:"Tierce"},{value:"TK",text:"Tank, rectangular"},{value:"TL",text:"Tub, with lid"},{value:"TN",text:"Tin"},{value:"TO",text:"Tun"},{value:"TR",text:"Trunk"},{value:"TS",text:"Truss"},{value:"TU",text:"Tube"},{value:"TV",text:"Tube, with nozzle"},{value:"TY",text:"Tank, cylindrical"},{value:"TZ",text:"Tubes, in bundle/bunch/truss"},{value:"UC",text:"Uncaged"},{value:"UN",text:"Unit (single item or object)"},{value:"VA",text:"Vat"},{value:"VG",text:"Bulk, gas (at 1031 mbar and 15°C)"},{value:"VI",text:"Vial"},{value:"VK",text:"Vanpack"},{value:"VL",text:"Bulk, liquid"},{value:"VN",text:"Vehicle"},{value:"VO",text:"Bulk, solid, large particles"},{value:"VP",text:"Vacuum-packed"},{value:"VQ",text:"Bulk, liquefied gas (at abnormal temperature/pressure)"},{value:"VR",text:"Bulk, solid, granular particles (i.e., granulates)"},{value:"VY",text:"Bulk, solid, fine particles (i.e., powdered)"},{value:"WA",text:"Intermediate bulk container"},{value:"WB",text:"Wickerbottle"},{value:"WC",text:"Intermediate bulk container, steel"},{value:"WD",text:"Intermediate bulk container, aluminium"},{value:"WF",text:"Intermediate bulk container, metal"},{value:"WG",text:"Intermediate bulk container, steel"},{value:"WH",text:"Intermediate bulk container, aluminium"},{value:"WJ",text:"Intermediate bulk container, metal"},{value:"WK",text:"Intermediate bulk container, steel"},{value:"WL",text:"Intermediate bulk container, aluminium"},{value:"WM",text:"Intermediate bulk container, metal"},{value:"WN",text:"Intermediate bulk container, woven"},{value:"WP",text:"Intermediate bulk container, woven"},{value:"WQ",text:"Intermediate bulk container, woven"},{value:"WR",text:"Intermediate bulk container, woven"},{value:"WS",text:"Intermediate bulk container, plastic"},{value:"WT",text:"Intermediate bulk container, textile"},{value:"WU",text:"Intermediate bulk container, natural"},{value:"WV",text:"Intermediate bulk container, textile"},{value:"WW",text:"Intermediate bulk container, textile"},{value:"WX",text:"Intermediate bulk container, textile"},{value:"WY",text:"Intermediate bulk container, plywood"},{value:"WZ",text:"Intermediate bulk container, reconstructed"},{value:"XA",text:"Bag, woven plastic, without inner coat"},{value:"XB",text:"Bag, woven plastic, sift proof"},{value:"XC",text:"Bag, woven plastic, water resistant"},{value:"XD",text:"Bag, plastics film"},{value:"XF",text:"Bag, textile, without inner coat"},{value:"XG",text:"Bag, textile, sift proof"},{value:"XH",text:"Bag, textile, water resistant"},{value:"XJ",text:"Bag, paper, multi-wall"},{value:"XK",text:"Bag, paper, multi-wall, water resistant"},{value:"YA",text:"Composite packaging, plastic receptacle"},{value:"YB",text:"Composite packaging, plastic receptacle"},{value:"YC",text:"Composite packaging, plastic receptacle"},{value:"YD",text:"Composite packaging, plastic receptacle"},{value:"YF",text:"Composite packaging, plastic receptacle"},{value:"YG",text:"Composite packaging, plastic receptacle"},{value:"YH",text:"Composite packaging, plastic receptacle"},{value:"YJ",text:"Composite packaging, plastic receptacle"},{value:"YK",text:"Composite packaging, plastic receptacle"},{value:"YL",text:"Composite packaging, plastic receptacle"},{value:"YM",text:"Composite packaging, plastic receptacle"},{value:"YN",text:"Composite packaging, glass receptacle"},{value:"YP",text:"Composite packaging, glass receptacle"},{value:"YQ",text:"Composite packaging, glass receptacle"},{value:"YR",text:"Composite packaging, glass receptacle"},{value:"YS",text:"Composite packaging, glass receptacle"},{value:"YT",text:"Composite packaging, glass receptacle"},{value:"YV",text:"Composite packaging, glass receptacle"},{value:"YW",text:"Composite packaging, glass receptacle"},{value:"YX",text:"Composite packaging, glass receptacle"},{value:"YY",text:"Composite packaging, glass receptacle"},{value:"YZ",text:"Composite packaging, glass receptacle"},{value:"ZA",text:"Intermediate bulk container, paper"},{value:"ZB",text:"Bag, large"},{value:"ZC",text:"Intermediate bulk container, paper"},{value:"ZD",text:"Intermediate bulk container, rigid"},{value:"ZF",text:"Intermediate bulk container, rigid"},{value:"ZG",text:"Intermediate bulk container, rigid"},{value:"ZH",text:"Intermediate bulk container, rigid"},{value:"ZJ",text:"Intermediate bulk container, rigid"},{value:"ZK",text:"Intermediate bulk container, rigid"},{value:"ZL",text:"Intermediate bulk container, composite"},{value:"ZM",text:"Intermediate bulk container, composite"},{value:"ZN",text:"Intermediate bulk container, composite"},{value:"ZP",text:"Intermediate bulk container, composite"},{value:"ZQ",text:"Intermediate bulk container, composite"},{value:"ZR",text:"Intermediate bulk container, fibre"},{value:"ZS",text:"Intermediate bulk container, fibre"},{value:"ZT",text:"Intermediate bulk container, fibre"},{value:"ZU",text:"Intermediate bulk container, flexible"},{value:"ZV",text:"Intermediate bulk container, metal"},{value:"ZW",text:"Intermediate bulk container, natural"},{value:"ZX",text:"Intermediate bulk container, plywood"},{value:"ZY",text:"Intermediate bulk container, reconstructed"},{value:"ZZ",text:"Mutually defined"}]);return e}function jt(){const e={defaultCPCCode:"4000",boncedCPCCode:"7000",defaultRegimeType:"IM4",defaultNPCCode:"000"};return e}function Wt(){const e=[{modeOfTransport:"Ocean",freightTypes:[{code:"12",name:"FCL"},{code:"13",name:"LCL"},{code:"11",name:"Break Bulk"}]},{modeOfTransport:"Air",freightTypes:[{code:"41",name:"Express"},{code:"42",name:"Loose"}]}];return e}const Xt=(0,n.Lk)("h1",null,"Verify Document Data",-1),Gt={class:"container-fluid text-center verify-document-data-body"},Jt={class:"col"},qt=["src"],Yt={class:"col document-review-table"};function Ht(e,t,o,a,r,s){const i=(0,n.g2)("DocumentTableView");return(0,n.uX)(),(0,n.CE)(n.FK,null,[Xt,(0,n.Lk)("div",Gt,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.invoices,((e,t)=>((0,n.uX)(),(0,n.CE)("div",{class:"row review-document-item",key:e.name},[(0,n.Lk)("div",Jt,[(0,n.Lk)("embed",{src:o.pdfFiles[t].url,width:"100%",height:"100%",type:"application/pdf",class:"pdf-viewer"},null,8,qt)]),(0,n.Lk)("div",Yt,[(0,n.bF)(i,{invoiceDataArray:[e],customsEntryForm:o.customsEntryForm,documentVerificationFormat:!0},null,8,["invoiceDataArray","customsEntryForm"])])])))),128))])],64)}const zt={key:0},Kt=(0,n.Lk)("h3",null,"Header Information",-1),Qt={class:"form-row"},Zt={class:"row"},eo={class:"col-md-3"},to=(0,n.Lk)("label",{for:"InvoiceNumber"},[(0,n.Lk)("strong",null,"Invoice Number")],-1),oo=["onUpdate:modelValue"],ao={class:"col-md-3"},ro=(0,n.Lk)("label",{for:"SupplierName"},[(0,n.Lk)("strong",null,"Supplier Name")],-1),no=["onUpdate:modelValue"],so=(0,n.Lk)("label",{for:"InvoiceDate"},[(0,n.Lk)("strong",null,"Invoice Date")],-1),io=["onUpdate:modelValue"],lo=(0,n.Lk)("label",{for:"invoiceCurrency"},[(0,n.Lk)("strong",null,"Invoice Currency")],-1),co={key:0,class:"col-md-2"},uo=(0,n.Lk)("label",{for:"rateOfExchange",class:"form-label"},[(0,n.Lk)("strong",null,"Rate of Exchange")],-1),mo=["onUpdate:modelValue"],ho=(0,n.Lk)("h3",null,"Line Details",-1),po=(0,n.Lk)("th",null,"Line #",-1),yo=(0,n.Lk)("th",null,"Product Code",-1),go=(0,n.Lk)("th",null,"Description",-1),fo=(0,n.Lk)("th",null,"THN Code",-1),vo={key:0},bo={key:1},ko=(0,n.Lk)("th",null,"Unit Quantity",-1),Co=(0,n.Lk)("th",null,"Unit Price",-1),Lo=(0,n.Lk)("th",null,"Extension Price",-1),Do=(0,n.Lk)("th",null,null,-1),_o=(0,n.Lk)("th",null,"Actions",-1),Eo=["onBlur"],Fo=["onBlur"],To=["onBlur"],So={key:0},xo={key:1},Io=["onBlur"],Ao=["onBlur"],Oo=["onBlur"],wo=["onClick"],No=(0,n.Lk)("i",{class:"fa-solid fa-hammer green-icon"},null,-1),Po=[No],Ro=["onClick"],Vo={key:0},Uo=(0,n.Lk)("i",{class:"fas fa-chevron-up",style:{color:"gray"}},null,-1),Bo=[Uo],$o={key:1},Mo=(0,n.Lk)("i",{class:"fas fa-chevron-down",style:{color:"gray"}},null,-1),jo=[Mo],Wo={key:0},Xo={colspan:"10"},Go={class:"row"},Jo={class:"col-md-2"},qo=(0,n.Lk)("label",{for:"countryOfOrigin",class:"form-label"},[(0,n.Lk)("strong",null,"Country of Origin")],-1),Yo={class:"col-md-3"},Ho=(0,n.Lk)("label",{for:"cpcCode",class:"form-label"},[(0,n.Lk)("strong",null,"CPC Code")],-1),zo={class:"col-md-2"},Ko=(0,n.Lk)("label",{for:"npcCode",class:"form-label"},[(0,n.Lk)("strong",null,"NPC Code")],-1),Qo={class:"col-md-2"},Zo=(0,n.Lk)("label",{for:"tradeAgreement",class:"form-label"},[(0,n.Lk)("strong",null,"Trade Agreement")],-1),ea={class:"col-md-2"},ta=(0,n.Lk)("label",{for:"applicableTaxes",class:"form-label"},[(0,n.Lk)("strong",null,"Manually Exempt Tax")],-1),oa=["onClick"],aa={class:"col-md-1"},ra=(0,n.Lk)("label",{for:"delete",class:"form-label"},[(0,n.Lk)("strong",null,"Delete")],-1),na=["onClick"],sa=(0,n.Lk)("i",{class:"fa fa-trash"},null,-1),ia=[sa],la={colspan:"7"},ca=["onClick"],ua=(0,n.Lk)("h3",null,"Footer Information",-1),da=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Invoice Total"),(0,n.Lk)("th",null,"Inland"),(0,n.Lk)("th",null,"Insurance"),(0,n.Lk)("th",null,"Other Charges"),(0,n.Lk)("th",null,"Final Total")])],-1),ma=["onBlur"],ha=["onBlur"],pa=["onBlur"],ya=["onBlur"],ga=["onBlur"],fa=(0,n.Lk)("h3",null,"Calculated Check",-1),va=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Total Extension Prices"),(0,n.Lk)("th",null,"Number of Line Items"),(0,n.Lk)("th",null,"Matches Invoice Total?")])],-1);function ba(e,t,o,a,s,i){const l=(0,n.g2)("v-select");return(0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.invoiceDataArray,((a,c)=>((0,n.uX)(),(0,n.CE)("div",{key:c},[o.documentVerificationFormat?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("h2",zt,"Invoice Data #"+(0,x.v_)(c+1),1)),Kt,(0,n.Lk)("div",Qt,[(0,n.Lk)("div",Zt,[(0,n.Lk)("div",eo,[to,(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":e=>a.invoice_number=e,class:"form-control",id:"InvoiceNumber",placeholder:"Enter Invoice Number"},null,8,oo),[[r.Jo,a.invoice_number]])]),(0,n.Lk)("div",ao,[ro,(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":e=>a.vendor_name=e,class:"form-control",id:"SupplierName",placeholder:"Enter Supplier Name"},null,8,no),[[r.Jo,a.vendor_name]])]),(0,n.Lk)("div",{class:(0,x.C4)({"col-md-2":!o.documentVerificationFormat,"col-md-3":o.documentVerificationFormat})},[so,(0,n.bo)((0,n.Lk)("input",{type:"date","onUpdate:modelValue":e=>a.invoice_date=e,class:"form-control",id:"InvoiceDate"},null,8,io),[[r.Jo,a.invoice_date]])],2),(0,n.Lk)("div",{class:(0,x.C4)({"col-md-2":!o.documentVerificationFormat,"col-md-3":o.documentVerificationFormat})},[lo,(0,n.bF)(l,{modelValue:a.currency,"onUpdate:modelValue":e=>a.currency=e,options:s.currencies,label:"name",id:"invoiceCurrency",searchable:!0,reduce:e=>e.code,filterable:!0,placeholder:"Select a Currency"},null,8,["modelValue","onUpdate:modelValue","options","reduce"])],2),o.documentVerificationFormat?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",co,[uo,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"rateOfExchange","onUpdate:modelValue":e=>a.rate_of_exchange=e,required:""},null,8,mo),[[r.Jo,a.rate_of_exchange]])]))])]),ho,(0,n.Lk)("table",null,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[po,yo,go,fo,o.documentVerificationFormat?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("th",vo,"Duty")),o.documentVerificationFormat?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("th",bo,"VAT")),ko,Co,Lo,Do,_o])]),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.lines,((r,c)=>((0,n.uX)(),(0,n.CE)(n.FK,{key:c},[(0,n.Lk)("tr",null,[(0,n.Lk)("td",null,(0,x.v_)(c+1),1),(0,n.Lk)("td",{contenteditable:"true",onBlur:e=>i.updateItem(a,c,"product_code",e.target.innerText)},(0,x.v_)(r.product_code||"N/A"),41,Eo),(0,n.Lk)("td",{contenteditable:"true",onBlur:e=>i.updateItem(a,c,"description",e.target.innerText)},(0,x.v_)(r.description||"N/A"),41,Fo),(0,n.Lk)("td",{class:(0,x.C4)(["valid"===r.commodityCodeStatus?"valid-commodity-code":"invalid-commodity-code"]),contenteditable:"true",onInput:t[0]||(t[0]=e=>i.handleInput(e)),onBlur:e=>i.updateTariffCode(a,c,"tariff_code",e.target.innerText)},(0,x.v_)(r.tariff_code||"N/A"),43,To),o.documentVerificationFormat?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("td",So,(0,x.v_)(r.icdCharge)+"%",1)),o.documentVerificationFormat?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("td",xo,(0,x.v_)(r.vatCharge)+"%",1)),(0,n.Lk)("td",{contenteditable:"true",onBlur:e=>i.updateItem(a,c,"quantity",e.target.innerText),style:(0,x.Tr)(i.naStyle(r.quantity))},(0,x.v_)(r.quantity||"N/A"),45,Io),(0,n.Lk)("td",{contenteditable:"true",onBlur:e=>i.updateItem(a,c,"unit_price",e.target.innerText),style:(0,x.Tr)(i.naStyle(r.unit_price))},(0,x.v_)(r.unit_price||"N/A"),45,Ao),(0,n.Lk)("td",{contenteditable:"true",onBlur:e=>i.updateItem(a,c,"extension_price",e.target.innerText),style:(0,x.Tr)(i.extensionStyle(r))},(0,x.v_)(r.extension_price||"N/A"),45,Oo),(0,n.Lk)("td",null,[i.verifyExtensionPrice(r)?((0,n.uX)(),(0,n.CE)("button",{key:0,onClick:e=>i.fixExtensionPrice(r),class:"icon-button"},Po,8,wo)):(0,n.Q3)("",!0)]),(0,n.Lk)("td",null,[(0,n.Lk)("button",{onClick:e=>i.toggleDetails(c)},[s.expandedIndex===c?((0,n.uX)(),(0,n.CE)("span",Vo,Bo)):((0,n.uX)(),(0,n.CE)("span",$o,jo))],8,Ro)])]),s.expandedIndex===c?((0,n.uX)(),(0,n.CE)("tr",Wo,[(0,n.Lk)("td",Xo,[(0,n.Lk)("div",Go,[(0,n.Lk)("div",Jo,[qo,(0,n.bF)(l,{modelValue:r.country_of_origin,"onUpdate:modelValue":e=>r.country_of_origin=e,options:s.countries,label:"name",id:"countryOfOrigin",searchable:!0,reduce:e=>e.code,filterable:!0,placeholder:"Select a Country of Origin"},null,8,["modelValue","onUpdate:modelValue","options","reduce"])]),(0,n.Lk)("div",Yo,[Ho,(0,n.bF)(l,{modelValue:r.cpcCode,"onUpdate:modelValue":e=>r.cpcCode=e,options:i.availableCPCCodes,label:"cpcDisplay",id:"cpcCode",searchable:!0,reduce:e=>e.cpcId,filterable:!0,placeholder:"Select a CPC Code"},null,8,["modelValue","onUpdate:modelValue","options","reduce"])]),(0,n.Lk)("div",zo,[Ko,(0,n.bF)(l,{modelValue:r.npcCode,"onUpdate:modelValue":e=>r.npcCode=e,options:i.availableNPCCodes(r.cpcCode),label:"code_description",id:"npcCode",searchable:!0,reduce:e=>e.code,filterable:!0,placeholder:"Select a NPC Code"},null,8,["modelValue","onUpdate:modelValue","options","reduce"])]),(0,n.Lk)("div",Qo,[Zo,(0,n.bF)(l,{modelValue:r.tradeAgreement,"onUpdate:modelValue":e=>r.tradeAgreement=e,options:e.tradeAgreements,label:"name",id:"tradeAgreement",searchable:!0,reduce:e=>e.id,filterable:!0,placeholder:"Select a Trade Agreement"},null,8,["modelValue","onUpdate:modelValue","options","reduce"])]),(0,n.Lk)("div",ea,[ta,(0,n.Lk)("div",null,[(0,n.Lk)("button",{class:"btn btn-primary",onClick:e=>i.displayManualExemptionAlert(r)}," Manually Exempt Tax ",8,oa)])]),(0,n.Lk)("div",aa,[ra,(0,n.Lk)("div",null,[(0,n.Lk)("button",{class:"btn btn-danger",onClick:e=>i.deleteRow(a,c)},ia,8,na)])])])])])):(0,n.Q3)("",!0)],64)))),128))]),(0,n.Lk)("tfoot",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("td",la,[(0,n.Lk)("button",{onClick:e=>i.addNewLine(a)},"Add New Line",8,ca)])])])]),ua,(0,n.Lk)("table",null,[da,(0,n.Lk)("tbody",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("td",{contenteditable:"true",onBlur:e=>i.updateData(a,"invoice_total",e.target.innerText),style:(0,x.Tr)(i.naStyle(a.invoice_total))},(0,x.v_)(a.invoice_total||0),45,ma),(0,n.Lk)("td",{contenteditable:"true",onBlur:e=>i.updateData(a,"inland",e.target.innerText),style:(0,x.Tr)(i.naStyle(a.inland))},(0,x.v_)(a.inland||0),45,ha),(0,n.Lk)("td",{contenteditable:"true",onBlur:e=>i.updateData(a,"insurance",e.target.innerText),style:(0,x.Tr)(i.naStyle(a.insurance))},(0,x.v_)(a.insurance||0),45,pa),(0,n.Lk)("td",{contenteditable:"true",onBlur:e=>i.updateData(a,"otherCharges",e.target.innerText),style:(0,x.Tr)(i.naStyle(a.otherCharges))},(0,x.v_)(a.otherCharges||0),45,ya),(0,n.Lk)("td",{onBlur:e=>i.updateData(a,"final_total",e.target.innerText)},(0,x.v_)(i.calculateInvoiceTotal(a)),41,ga)])])]),fa,(0,n.Lk)("table",null,[va,(0,n.Lk)("tbody",null,[(0,n.Lk)("tr",{style:(0,x.Tr)(i.checkInvoiceTotal(a))},[(0,n.Lk)("td",null,(0,x.v_)(i.calculateTotalExtensionPrice(a.lines)),1),(0,n.Lk)("td",null,(0,x.v_)(a.lines.length),1),(0,n.Lk)("td",null,(0,x.v_)(i.calculateTotalExtensionPrice(a.lines)===parseFloat(a.invoice_total).toFixed(2)?"Yes":"No"),1)],4)])])])))),128)}function ka(){const e=(0,$t.KR)([{code:"USD",name:"United States Dollar"},{code:"EUR",name:"Euro"},{code:"JPY",name:"Japanese Yen"},{code:"GBP",name:"British Pound Sterling"},{code:"AUD",name:"Australian Dollar"},{code:"CAD",name:"Canadian Dollar"},{code:"CHF",name:"Swiss Franc"},{code:"CNY",name:"Chinese Yuan"},{code:"SEK",name:"Swedish Krona"},{code:"NZD",name:"New Zealand Dollar"},{code:"MXN",name:"Mexican Peso"},{code:"SGD",name:"Singapore Dollar"},{code:"HKD",name:"Hong Kong Dollar"},{code:"NOK",name:"Norwegian Krone"},{code:"KRW",name:"South Korean Won"},{code:"TRY",name:"Turkish Lira"},{code:"INR",name:"Indian Rupee"},{code:"RUB",name:"Russian Ruble"},{code:"BRL",name:"Brazilian Real"},{code:"ZAR",name:"South African Rand"},{code:"TTD",name:"Trinidad & Tobago Dollar"},{code:"XCD",name:"EC Dollar"},{code:"BBD",name:"Barbados Dollar"},{code:"CNY",name:"China Renminbi"},{code:"AED",name:"UAE Dirham"},{code:"EGP",name:"Egyptian Pound"},{code:"GYD",name:"Guyana Dollar"},{code:"BZD",name:"Belize Dollar"}]);return e}var Ca={props:["invoiceDataArray","customsEntryForm","documentVerificationFormat","linesToBeDeleted","linesToBeAdded"],data(){return{countries:[],expandedIndex:null,currencies:[],cpcCodeOptions:["4000"],npcCodeOptions:["000"],applicableTaxes:[]}},methods:{calculateTotalExtensionPrice:La,checkInvoiceTotal:Ea,calculateInvoiceTotal:Fa,naStyle:Ta,addNewLine:Sa,updateData:xa,deleteRow:Ia,toggleDetails:Aa,extensionStyle:Oa,updateTariffCode:wa,parseFloatFromString:Na,fetchCountries:Pa,updateItem:Ra,fetchNpcCodes:Wa,fetchTradeAgreements:Xa,handleInput:Ba,formatValue:$a,truncateString:Ma,moveCursorToEnd:ja,verifyExtensionPrice:_a,fixExtensionPrice:Da,displayManualExemptionAlert:Ga,availableNPCCodes:Ua},mounted(){this.fetchCountries(),this.currencies=ka(),this.fetchNpcCodes(),this.fetchTradeAgreements()},computed:{availableCPCCodes:Va}};function La(e){return e.reduce(((e,t)=>e+this.parseFloatFromString(t.extension_price||0)),0).toFixed(2)}function Da(e){const t=(parseFloat(e.unit_price)*parseFloat(e.quantity)).toFixed(2),o=parseFloat(e.extension_price).toFixed(2);t!==o&&(e.extension_price=t)}function _a(e){const t=(parseFloat(e.unit_price)*parseFloat(e.quantity)).toFixed(2),o=parseFloat(e.extension_price).toFixed(2);return t!==o||[e.unit_price,e.quantity,e.extension_price].some((e=>[null,void 0,"",!1].includes(e)))}function Ea(e){const t=this.calculateTotalExtensionPrice(e.lines),o=parseFloat(e.invoice_total||0).toFixed(2);return t!==o?{backgroundColor:"red",color:"white"}:{}}function Fa(e){const t=parseFloat(e.invoice_total)||0,o=parseFloat(e.inland)||0,a=parseFloat(e.insurance)||0,r=parseFloat(e.otherCharges)||0,n=t+o+a+r;return n.toFixed(2)}function Ta(e){return[null,void 0,"",!1].includes(e)?{"font-weight":"bold",color:"#B8860B"}:{}}function Sa(e){console.log("Adding New Line"),console.log("Data: ",e);const t={product_code:"",description:"",tariff_code:"",quantity:"",unit_price:"",extension_price:"",invoice_id:e.invoice_id,country_of_origin:"",cpcCode:30,npcCode:"000"};e.lines.push(t),this.linesToBeAdded.push(t)}function xa(e,t,o){e[t]=o}function Ia(e,t){console.log("Deleting Row: ",t),console.log("Data: ",e.lines),void 0!==e.lines[t].invoice_line_id&&this.linesToBeDeleted.push(e.lines[t].invoice_line_id),e.lines.splice(t,1)}function Aa(e){this.expandedIndex=this.expandedIndex===e?null:e}function Oa(e){if(void 0===e.extension_price||null===e.extension_price||""===e.extension_price||"N/A"===e.extension_price||"0.00"===e.extension_price||0===e.extension_price)return{"font-weight":"bold",color:"red"};const t=(parseFloat(e.unit_price)*parseFloat(e.quantity)).toFixed(2),o=parseFloat(e.extension_price).toFixed(2);return[e.unit_price,e.quantity,e.extension_price].some((e=>[null,void 0,"",!1].includes(e)))?{"font-weight":"bold",color:"#B8860B"}:t!==o?{"font-weight":"bold",color:"red"}:{}}function wa(e,t,o,a){if(console.log("Updating Tariff Code"),this.updateItem(e,t,o,a),void 0===a||null===a||0===a.trim().length||"N/A"===a)return e.icdCharge=0,void(e.vatCharge=0);console.log("Fetching charges for: ",a),xe(a.replace(/\./g,"")).then((o=>{let a=o.charges["import custom duty"];const r=void 0===a?0:parseFloat(a[0].charge_amount);let n=o.charges["value added tax"];const s=void 0===n?0:parseFloat(n[0].charge_amount);e.lines[t]["icdCharge"]=r,e.lines[t]["vatCharge"]=s,e.lines[t]["commodityCodeStatus"]="valid",e.lines[t]["applicableTaxes"]=o.charges})).catch((o=>{console.error("Failed to get commodity charges:",o),e.lines[t]["commodityCodeStatus"]="invalid",e.lines[t]["icdCharge"]=0,e.lines[t]["vatCharge"]=0}))}function Na(e){if(!e||void 0===e||null===e)return 0;if("number"===typeof e)return e;let t=e.replace(/[^0-9.]/g,""),o=parseFloat(t);return o}async function Pa(){try{const e=await fetch("https://restcountries.com/v3.1/all"),t=await e.json();this.countries=t.map((e=>({name:e.name.common,code:e.cca2})))}catch(e){console.error("Failed to fetch countries:",e)}}function Ra(e,t,o,a){e.lines[t][o]=a}function Va(){if(void 0!==this.customsEntryForm.regimeTypeCode&&null!==this.customsEntryForm.regimeTypeCode){const e=this.customsEntryForm.regimeTypeOptions.find((e=>e.regimeTypeCode===this.customsEntryForm.regimeTypeCode));return e?e.cpcCodes:[]}return this.customsEntryForm.regimeTypeOptions.flatMap((e=>e.cpcCodes))}function Ua(e){const t=this.npcCodeOptions.filter((t=>t.cpcId===e));if(t.length>0)return t;const o=this.npcCodeOptions.filter(((e,t,o)=>t===o.findIndex((t=>t.code===e.code))));return o}function Ba(e){const t=e.target.innerText,o=t.replace(/[^0-9]/g,""),a=this.formatValue(o);e.target.innerText=a,this.moveCursorToEnd(e.target)}function $a(e){let t="";for(let o=0;o<e.length;o++)4!==o&&6!==o&&8!==o||(t+="."),t+=e[o];return this.truncateString(t)}function Ma(e){return e.length>13?e.substring(0,14):e}function ja(e){const t=document.createRange(),o=window.getSelection();t.selectNodeContents(e),t.collapse(!1),o.removeAllRanges(),o.addRange(t)}async function Wa(){ve().then((e=>{this.npcCodeOptions=e}))}async function Xa(){We().then((e=>{this.tradeAgreements=e}))}function Ga(e){"invalid"!==e.commodityCodeStatus&&void 0!==e.applicableTaxes&&null!==e.applicableTaxes&&0!==e.applicableTaxes.length?(console.log("Displaying Manual Exemption Alert",e),console.log("Applicable Taxes: ",e.applicableTaxes),Ut(e.applicableTaxes,e.extension_price).then((e=>{console.log("Result: ",e)}))):St("Invalid or No Commodity Code Provided. Please enter a valid commodity code before proceeding.")}const Ja=(0,E.A)(Ca,[["render",ba]]);var qa=Ja,Ya={props:["invoices","customsEntryForm","pdfFiles"],components:{DocumentTableView:qa}};const Ha=(0,E.A)(Ya,[["render",Ht]]);var za=Ha;const Ka=e=>((0,n.Qi)("data-v-0fd0d03f"),e=e(),(0,n.jt)(),e),Qa={class:"card"},Za={key:0},er=Ka((()=>(0,n.Lk)("h3",null,"Drag & Drop files here or",-1))),tr=Ka((()=>(0,n.Lk)("h3",null,"Choose a file",-1))),or=[tr],ar={key:1,class:"select"},rr=Ka((()=>(0,n.Lk)("button",{type:"button",class:"upload-button"},"Upload",-1)));function nr(e,t,o,a,s,i){return(0,n.uX)(),(0,n.CE)("div",Qa,[(0,n.Lk)("div",{class:"drag-area",onDragover:t[2]||(t[2]=(0,r.D$)(((...e)=>i.onDragover&&i.onDragover(...e)),["prevent"])),onDragleave:t[3]||(t[3]=(0,r.D$)(((...e)=>i.onDragLeave&&i.onDragLeave(...e)),["prevent"])),onDrop:t[4]||(t[4]=(0,r.D$)(((...e)=>i.onDrop&&i.onDrop(...e)),["prevent"]))},[s.isDragging?((0,n.uX)(),(0,n.CE)("div",ar,"Drop files here")):((0,n.uX)(),(0,n.CE)("span",Za,[er,(0,n.Lk)("span",{class:"select",role:"button",onClick:t[0]||(t[0]=(...e)=>i.selectFiles&&i.selectFiles(...e))},or)])),(0,n.Lk)("input",{name:"file",type:"file",class:"file",ref:"fileInput",multiple:"",onChange:t[1]||(t[1]=(...e)=>i.onFileSelect&&i.onFileSelect(...e))},null,544)],32),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.images,((e,t)=>((0,n.uX)(),(0,n.CE)("div",{class:"file-item",key:t},[(0,n.Lk)("p",null,(0,x.v_)(e.name),1)])))),128)),rr])}var sr={data(){return{isDragging:!1,images:[]}},methods:{selectFiles(){this.$refs.fileInput.click()},onFileSelect(e){const t=e.target.files;this.handleFiles(t)},handleFiles(e){if(0!==e.length)for(let t=0;t<e.length;t++){const o=e[t];if(!this.images.includes(o)){this.images.push(o);const e=new FileReader;e.onload=e=>{const t=new Image;t.src=e.target.result},e.readAsDataURL(o)}}},onDragover(e){e.preventDefault(),this.isDragging=!0,e.dataTransfer.dropEffect="copy"},onDragLeave(e){e.preventDefault(),this.isDragging=!1},onDrop(e){e.preventDefault(),this.isDragging=!1;const t=e.dataTransfer.files;this.handleFiles(t)}}};const ir=(0,E.A)(sr,[["render",nr],["__scopeId","data-v-0fd0d03f"]]);var lr=ir,cr=o(2017);const ur=e=>((0,n.Qi)("data-v-40cc00ec"),e=e(),(0,n.jt)(),e),dr={class:"customs-entry-form"},mr={class:"row"},hr={class:"col-md-3"},pr={class:"form-group"},yr=ur((()=>(0,n.Lk)("label",{class:"required",for:"buyerNameAddress"},[(0,n.Lk)("strong",null,"Importer")],-1))),gr={class:"col-md-3"},fr={class:"form-group"},vr=ur((()=>(0,n.Lk)("label",{for:"sellerNameAddress"},[(0,n.Lk)("strong",null,"Exporter")],-1))),br={class:"col-md-3"},kr={class:"form-group"},Cr=ur((()=>(0,n.Lk)("label",{for:"modeOfTransport"},[(0,n.Lk)("strong",null,"Mode of Transport")],-1))),Lr=ur((()=>(0,n.Lk)("option",{value:"",disabled:""},"Select a Mode of Transport",-1))),Dr=["value"],_r={class:"col-md-3"},Er={class:"form-group"},Fr=ur((()=>(0,n.Lk)("label",{for:"freightType"},[(0,n.Lk)("strong",null,"Freight Type")],-1))),Tr=ur((()=>(0,n.Lk)("option",{value:"",disabled:""},"Select a Freight Type",-1))),Sr=["value"],xr={class:"row"},Ir={class:"col-md-3"},Ar={class:"form-group"},Or=ur((()=>(0,n.Lk)("label",{for:"waybillNumber"},[(0,n.Lk)("strong",null,"Waybill Numbers")],-1))),wr={class:"col-md-3"},Nr={class:"form-group"},Pr=ur((()=>(0,n.Lk)("label",{for:"waybillDate"},[(0,n.Lk)("strong",null,"Waybill Date")],-1))),Rr={class:"col-md-3"},Vr={class:"form-group"},Ur=ur((()=>(0,n.Lk)("label",{for:"vessel"},[(0,n.Lk)("strong",null,"Vessel")],-1))),Br={class:"col-md-3"},$r={class:"form-group"},Mr=ur((()=>(0,n.Lk)("label",{for:"portOfDischarge"},[(0,n.Lk)("strong",null,"Port of Discharge")],-1))),jr={class:"row"},Wr={class:"col-md-3"},Xr={class:"form-group"},Gr=ur((()=>(0,n.Lk)("label",{for:"grossWeight"},[(0,n.Lk)("strong",null,"Gross Weight")],-1))),Jr={class:"col-md-3"},qr={class:"form-group"},Yr=ur((()=>(0,n.Lk)("label",{for:"netWeight"},[(0,n.Lk)("strong",null,"Net Weight")],-1))),Hr={class:"col-md-3"},zr={class:"form-group"},Kr=ur((()=>(0,n.Lk)("label",{for:"numberOfPackages"},[(0,n.Lk)("strong",null,"Number of Packages")],-1))),Qr={class:"col-md-3"},Zr={class:"form-group"},en=ur((()=>(0,n.Lk)("label",{for:"packageType"},[(0,n.Lk)("strong",null,"Package Type")],-1))),tn={class:"row"},on={class:"col-md-3"},an={class:"form-group"},rn=ur((()=>(0,n.Lk)("label",{for:"totalCargoValue"},[(0,n.Lk)("strong",null,"Total Cargo Value")],-1))),nn={class:"col-md-1"},sn={class:"form-group"},ln=ur((()=>(0,n.Lk)("label",{for:"currency"},[(0,n.Lk)("strong",null,"Freight")],-1))),cn={class:"col-md-2"},un={class:"form-group"},dn={for:"freightAmount",class:"label-green-italic"},mn={class:"col-md-1"},hn={class:"form-group"},pn=ur((()=>(0,n.Lk)("label",{for:"currency"},[(0,n.Lk)("strong",null,"Insurance")],-1))),yn={class:"col-md-2"},gn={for:"InsuranceAmount",class:"label-green-italic"},fn={class:"col-md-1"},vn={class:"form-group"},bn=ur((()=>(0,n.Lk)("label",{for:"currency"},[(0,n.Lk)("strong",null,"Charges")],-1))),kn={class:"col-md-2"},Cn={class:"form-group"},Ln={for:"othercharges",class:"label-green-italic"},Dn={class:"row"},_n={class:"col-md-3"},En={class:"form-group"},Fn=ur((()=>(0,n.Lk)("label",{for:"declarant"},[(0,n.Lk)("strong",null,"Declarant")],-1))),Tn=ur((()=>(0,n.Lk)("option",{value:"",disabled:""},"Select a Declarant",-1))),Sn=["value"],xn={class:"col-md-3"},In={class:"form-group"},An=ur((()=>(0,n.Lk)("label",{for:"regimeType"},[(0,n.Lk)("strong",null,"Regime Type")],-1))),On={class:"col-md-3"},wn=ur((()=>(0,n.Lk)("label",{for:"incoTerms"},[(0,n.Lk)("strong",null,"Incoterms")],-1))),Nn={class:"col-md-3"},Pn=ur((()=>(0,n.Lk)("label",{for:"country"},[(0,n.Lk)("strong",null,"Country of Origin")],-1))),Rn={class:"row"},Vn={class:"col-md-3"},Un={class:"form-group"},Bn=ur((()=>(0,n.Lk)("label",{for:"containerCharges"},[(0,n.Lk)("strong",null,"Container Charges")],-1))),$n={class:"col-md-3"},Mn={class:"form-group"},jn=ur((()=>(0,n.Lk)("label",{for:"localFee"},[(0,n.Lk)("strong",null,"Local Fee")],-1))),Wn={class:"col-md-3"},Xn={class:"form-group"},Gn=ur((()=>(0,n.Lk)("label",{for:"depositAmount"},[(0,n.Lk)("strong",null,"Deposit Amount")],-1))),Jn={class:"col-md-3"},qn={class:"form-group"},Yn=ur((()=>(0,n.Lk)("label",{for:"additionalCharges"},[(0,n.Lk)("strong",null,"Additional Charges")],-1))),Hn={class:"row"},zn={class:"col-md-3"},Kn={class:"form-group"},Qn=ur((()=>(0,n.Lk)("label",{for:"marksAndNumbers"},[(0,n.Lk)("strong",null,"Marks and Numbers")],-1))),Zn={class:"col-md-3"},es=ur((()=>(0,n.Lk)("label",{for:"country"},[(0,n.Lk)("strong",null,"Country of Final Destination")],-1))),ts={class:"col-md-3"},os={class:"form-group"},as=ur((()=>(0,n.Lk)("label",{for:"countryLastProvinance"},[(0,n.Lk)("strong",null,"Country of Last Provinance")],-1))),rs={class:"col-md-3"},ns={class:"form-group"},ss=ur((()=>(0,n.Lk)("label",{for:"tradingCountry"},[(0,n.Lk)("strong",null,"Trading Country")],-1)));function is(e,t,o,a,s,i){const l=(0,n.g2)("v-select");return(0,n.uX)(),(0,n.CE)("div",dr,[(0,n.Lk)("div",mr,[(0,n.Lk)("div",hr,[(0,n.Lk)("div",pr,[yr,(0,n.bF)(l,{options:s.localData.importers,modelValue:s.localData.importerId,"onUpdate:modelValue":t[0]||(t[0]=e=>s.localData.importerId=e),label:"name",searchable:!0,reduce:e=>e.id,filterable:!0,placeholder:"Select an Importer"},null,8,["options","modelValue","reduce"])])]),(0,n.Lk)("div",gr,[(0,n.Lk)("div",fr,[vr,(0,n.bF)(l,{options:s.localData.exporters,modelValue:s.localData.exporterId,"onUpdate:modelValue":t[1]||(t[1]=e=>s.localData.exporterId=e),label:"name",searchable:!0,reduce:e=>e.id,filterable:!0,placeholder:"Select an Exporter"},null,8,["options","modelValue","reduce"])])]),(0,n.Lk)("div",br,[(0,n.Lk)("div",kr,[Cr,(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":t[2]||(t[2]=e=>s.localData.modeOfTransport=e),ref:"modeOfTransportSelect"},[Lr,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.localData.modeOfTransportOOptions,((e,t)=>((0,n.uX)(),(0,n.CE)("option",{key:t,value:e.modeOfTransport},(0,x.v_)(e.modeOfTransport),9,Dr)))),128))],512),[[r.u1,s.localData.modeOfTransport]])])]),(0,n.Lk)("div",_r,[(0,n.Lk)("div",Er,[Fr,(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":t[3]||(t[3]=e=>s.localData.freightType=e)},[Tr,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(this.availableFreightTypes,((e,t)=>((0,n.uX)(),(0,n.CE)("option",{key:t,value:e.name},(0,x.v_)(e.name),9,Sr)))),128))],512),[[r.u1,s.localData.freightType]])])])]),(0,n.Lk)("div",xr,[(0,n.Lk)("div",Ir,[(0,n.Lk)("div",Ar,[Or,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"waybillNumber","onUpdate:modelValue":t[4]||(t[4]=e=>s.localData.waybillNumber=e),placeholder:"Please Enter Waybill Number",required:""},null,512),[[r.Jo,s.localData.waybillNumber]])])]),(0,n.Lk)("div",wr,[(0,n.Lk)("div",Nr,[Pr,(0,n.bo)((0,n.Lk)("input",{type:"date",class:"form-control",id:"waybillDate","onUpdate:modelValue":t[5]||(t[5]=e=>s.localData.waybillDate=e),required:""},null,512),[[r.Jo,s.localData.waybillDate]])])]),(0,n.Lk)("div",Rr,[(0,n.Lk)("div",Vr,[Ur,(0,n.bF)(l,{options:s.localData.vessels,modelValue:s.localData.vesselId,"onUpdate:modelValue":t[6]||(t[6]=e=>s.localData.vesselId=e),label:"name",searchable:!0,reduce:e=>e.id,filterable:!0,placeholder:"Select a Vessel"},null,8,["options","modelValue","reduce"])])]),(0,n.Lk)("div",Br,[(0,n.Lk)("div",$r,[Mr,(0,n.bF)(l,{options:s.localData.ports,modelValue:s.localData.portOfDischargeId,"onUpdate:modelValue":t[7]||(t[7]=e=>s.localData.portOfDischargeId=e),label:"name",searchable:!0,reduce:e=>e.id,filterable:!0,placeholder:"Select a Port of Discharge"},null,8,["options","modelValue","reduce"])])])]),(0,n.Lk)("div",jr,[(0,n.Lk)("div",Wr,[(0,n.Lk)("div",Xr,[Gr,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"grossWeight","onUpdate:modelValue":t[8]||(t[8]=e=>s.localData.grossWeight=e),required:""},null,512),[[r.Jo,s.localData.grossWeight]])])]),(0,n.Lk)("div",Jr,[(0,n.Lk)("div",qr,[Yr,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"netWeight","onUpdate:modelValue":t[9]||(t[9]=e=>s.localData.netWeight=e),required:"",readonly:""},null,512),[[r.Jo,s.localData.netWeight]])])]),(0,n.Lk)("div",Hr,[(0,n.Lk)("div",zr,[Kr,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"numberOfPackages","onUpdate:modelValue":t[10]||(t[10]=e=>s.localData.numberOfPackages=e),required:""},null,512),[[r.Jo,s.localData.numberOfPackages]])])]),(0,n.Lk)("div",Qr,[(0,n.Lk)("div",Zr,[en,(0,n.bF)(l,{options:s.localData.packageTypes,modelValue:s.localData.packageType,"onUpdate:modelValue":t[11]||(t[11]=e=>s.localData.packageType=e),label:"text",searchable:!0,reduce:e=>e.value,filterable:!0,placeholder:"Select a Package Type"},null,8,["options","modelValue","reduce"])])])]),(0,n.Lk)("div",tn,[(0,n.Lk)("div",on,[(0,n.Lk)("div",an,[rn,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"totalCargoValue","onUpdate:modelValue":t[12]||(t[12]=e=>s.localData.totalCargoValue=e),required:""},null,512),[[r.Jo,s.localData.totalCargoValue]])])]),(0,n.Lk)("div",nn,[(0,n.Lk)("div",sn,[ln,(0,n.bF)(l,{clearable:!1,options:s.currencies,modelValue:s.localData.freightCurrency,"onUpdate:modelValue":t[13]||(t[13]=e=>s.localData.freightCurrency=e),label:"code",id:"invoiceCurrency",searchable:!0,filterable:!0,reduce:e=>e.code},null,8,["options","modelValue","reduce"])])]),(0,n.Lk)("div",cn,[(0,n.Lk)("div",un,[(0,n.Lk)("label",dn,(0,x.v_)(s.localData.freightRateOfExchange),1),(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"freightAmount","onUpdate:modelValue":t[14]||(t[14]=e=>s.localData.freightAmount=e),required:""},null,512),[[r.Jo,s.localData.freightAmount]])])]),(0,n.Lk)("div",mn,[(0,n.Lk)("div",hn,[pn,(0,n.bF)(l,{clearable:!1,options:s.currencies,modelValue:s.localData.insuranceCurrency,"onUpdate:modelValue":t[15]||(t[15]=e=>s.localData.insuranceCurrency=e),label:"code",id:"invoiceCurrency",searchable:!0,filterable:!0,reduce:e=>e.code},null,8,["options","modelValue","reduce"])])]),(0,n.Lk)("div",yn,[(0,n.Lk)("label",gn,(0,x.v_)(s.localData.insuranceRateOfExchange),1),(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"InsuranceAmount","onUpdate:modelValue":t[16]||(t[16]=e=>s.localData.insuranceAmount=e),required:""},null,512),[[r.Jo,s.localData.insuranceAmount]])]),(0,n.Lk)("div",fn,[(0,n.Lk)("div",vn,[bn,(0,n.bF)(l,{clearable:!1,options:s.currencies,modelValue:s.localData.otherChargesCurrency,"onUpdate:modelValue":t[17]||(t[17]=e=>s.localData.otherChargesCurrency=e),label:"code",id:"invoiceCurrency",searchable:!0,filterable:!0,reduce:e=>e.code},null,8,["options","modelValue","reduce"])])]),(0,n.Lk)("div",kn,[(0,n.Lk)("div",Cn,[(0,n.Lk)("label",Ln,(0,x.v_)(s.localData.otherChargesRateOfExchange),1),(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"otherCharges","onUpdate:modelValue":t[18]||(t[18]=e=>s.localData.otherCharges=e)},null,512),[[r.Jo,s.localData.otherCharges]])])])]),(0,n.Lk)("div",Dn,[(0,n.Lk)("div",_n,[(0,n.Lk)("div",En,[Fn,(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":t[19]||(t[19]=e=>s.localData.declarantId=e)},[Tn,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.localData.declarants,((e,t)=>((0,n.uX)(),(0,n.CE)("option",{key:t,value:e.id},(0,x.v_)(e.name),9,Sn)))),128))],512),[[r.u1,s.localData.declarantId]])])]),(0,n.Lk)("div",xn,[(0,n.Lk)("div",In,[An,(0,n.bF)(l,{options:s.localData.regimeTypeOptions,modelValue:s.localData.regimeType,"onUpdate:modelValue":t[20]||(t[20]=e=>s.localData.regimeType=e),label:"regimeType",searchable:!0,reduce:e=>e.regimeTypeId,filterable:!0,placeholder:"Select a Regime Type"},null,8,["options","modelValue","reduce"])])]),(0,n.Lk)("div",On,[wn,(0,n.bF)(l,{options:s.localData.incotermsList,modelValue:s.localData.incoTerms,"onUpdate:modelValue":t[21]||(t[21]=e=>s.localData.incoTerms=e),label:"name",searchable:!0,reduce:e=>e.code,filterable:!0,placeholder:"Select an Incoterm"},null,8,["options","modelValue","reduce"])]),(0,n.Lk)("div",Nn,[Pn,(0,n.bF)(l,{options:s.countryList,modelValue:s.localData.countryOfOrigin,"onUpdate:modelValue":t[22]||(t[22]=e=>s.localData.countryOfOrigin=e),label:"name",searchable:!0,reduce:e=>e.code,filterable:!0,placeholder:"Select a Country of Origin"},null,8,["options","modelValue","reduce"])])]),(0,n.Lk)("div",Rn,[(0,n.Lk)("div",Vn,[(0,n.Lk)("div",Un,[Bn,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"containerCharges","onUpdate:modelValue":t[23]||(t[23]=e=>s.localData.containerCharges=e),required:""},null,512),[[r.Jo,s.localData.containerCharges]])])]),(0,n.Lk)("div",$n,[(0,n.Lk)("div",Mn,[jn,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"localFee","onUpdate:modelValue":t[24]||(t[24]=e=>s.localData.localFee=e),required:""},null,512),[[r.Jo,s.localData.localFee]])])]),(0,n.Lk)("div",Wn,[(0,n.Lk)("div",Xn,[Gn,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"depositAmount","onUpdate:modelValue":t[25]||(t[25]=e=>s.localData.depositAmount=e),required:""},null,512),[[r.Jo,s.localData.depositAmount]])])]),(0,n.Lk)("div",Jn,[(0,n.Lk)("div",qn,[Yn,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"additionalCharges","onUpdate:modelValue":t[26]||(t[26]=e=>s.localData.additionalCharges=e),required:""},null,512),[[r.Jo,s.localData.additionalCharges]])])])]),(0,n.Lk)("div",Hn,[(0,n.Lk)("div",zn,[(0,n.Lk)("div",Kn,[Qn,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"marksAndNumbers","onUpdate:modelValue":t[27]||(t[27]=e=>s.localData.marksAndNumbers=e),required:""},null,512),[[r.Jo,s.localData.marksAndNumbers]])])]),(0,n.Lk)("div",Zn,[es,(0,n.bF)(l,{options:s.countryList,modelValue:s.localData.countryOfFinalDestination,"onUpdate:modelValue":t[28]||(t[28]=e=>s.localData.countryOfFinalDestination=e),label:"name",searchable:!0,reduce:e=>e.code,filterable:!0,placeholder:"Select a Country of Destination"},null,8,["options","modelValue","reduce"])]),(0,n.Lk)("div",ts,[(0,n.Lk)("div",os,[as,(0,n.bF)(l,{options:s.countryList,modelValue:s.localData.countryLastProvinance,"onUpdate:modelValue":t[29]||(t[29]=e=>s.localData.countryLastProvinance=e),label:"name",searchable:!0,reduce:e=>e.code,filterable:!0,placeholder:"Select a Country of Last Provinance"},null,8,["options","modelValue","reduce"])])]),(0,n.Lk)("div",rs,[(0,n.Lk)("div",ns,[ss,(0,n.bF)(l,{options:s.countryList,modelValue:s.localData.tradingCountry,"onUpdate:modelValue":t[30]||(t[30]=e=>s.localData.tradingCountry=e),label:"name",searchable:!0,reduce:e=>e.code,filterable:!0,placeholder:"Select a Trading Country"},null,8,["options","modelValue","reduce"])])])])])}function ls(){const e=(0,$t.KR)([{code:"EXW",name:"Ex Works"},{code:"FCA",name:"Free Carrier"},{code:"CPT",name:"Carriage Paid To"},{code:"CIP",name:"Carriage and Insurance Paid To"},{code:"DAP",name:"Delivered At Place"},{code:"DAT",name:"Delivered At Terminal"},{code:"DDP",name:"Delivered Duty Paid"},{code:"FAS",name:"Free Alongside Ship"},{code:"FOB",name:"Free On Board"},{code:"CFR",name:"Cost and Freight"},{code:"CIF",name:"Cost, Insurance and Freight"}]);return e}var cs={name:"CustomsEntryForm",props:["customsEntryForm"],mounted(){console.log("Mounting"),this.getConfigurations(),this.localData.packageTypes=Mt(),this.localData.incotermsList=ls(),this.currencies=ka(),this.localData.modeOfTransportOOptions=Wt()},data(){return{freightTypeOptions:[],localData:this.customsEntryForm,countryList:[],currencies:[]}},computed:{availableFreightTypes(){const e=this.localData.modeOfTransportOOptions?.find((e=>e.modeOfTransport===this.localData.modeOfTransport))?.freightTypes;return e}},methods:{setModeOfTransport(e){this.$nextTick((()=>{this.localData.modeOfTransport=e,this.$refs.modeOfTransportSelect.dispatchEvent(new Event("change"))}))},updateModeOfTransport(e){const t=this.localData.modeOfTransportOOptions.find((t=>t.modeOfTransport===e.target.value));this.freightTypeOptions=t.freightTypes},updateField(e,t){this.localData[e]=t,console.log(this.localData),this.$emit("update-section-one",this.localData)},async getConfigurations(){console.log("Fetching configurations..."),this.localData.ports=await be(),Promise.all([ue(),ie(),De(),ce(),me()]).then((([e,t,o,a,r])=>{this.localData.exporters=e,this.localData.importers=t,this.localData.vessels=o,this.localData.declarants=a,this.countryList=r}))}},watch:{customsEntryForm:{deep:!0,handler(e){this.localData=e,this.localData.portOfDischargeName=this.localData.ports.find((e=>e.id===this.localData.portOfDischargeId))?.name,this.localData.vesselName=this.localData.vessels.find((e=>e.id===this.localData.vesselId))?.name,this.localData.regimeTypeCode=this.localData.regimeTypeOptions.find((e=>e.regimeTypeId===this.localData.regimeType))?.regimeTypeCode;const t=this.localData.importers.find((e=>e.id===this.localData.importerId)),o=this.localData.exporters.find((e=>e.id===this.localData.exporterId));this.localData.importerName=void 0!==t?t.name:"",this.localData.importerTaxIdentificationNumber=void 0!==t?t.taxIdentificationNumber:"",this.localData.exporterName=void 0!==o?o.name:"",this.localData.exporterTaxIdentificationNumber=void 0!==o?o.taxIdentificationNumber:"",this.localData.exporterCountry=void 0!==o?o.country:"",null===this.localData.countryOfOrigin||null!=this.localData.countryLastProvinance&&""!=this.localData.countryLastProvinance&&void 0!=this.localData.countryLastProvinance||(this.localData.countryLastProvinance=this.localData.countryOfOrigin),null===this.localData.countryOfOrigin||null!=this.localData.tradingCountry&&""!=this.localData.tradingCountry&&void 0!=this.localData.tradingCountry||(this.localData.tradingCountry=this.localData.countryOfOrigin),null!==this.localData.grossWeight&&this.localData.grossWeight>0&&(this.localData.netWeight=this.localData.grossWeight-this.localData.grossWeight/10),null!==this.localData.ratesOfExchange&&this.localData.ratesOfExchange.length>0&&(this.localData.insuranceRateOfExchange=this.localData.insuranceCurrency?this.localData.ratesOfExchange.find((e=>e.base_currency===this.localData.insuranceCurrency)).rate:1,this.localData.freightRateOfExchange=this.localData.freightCurrency?this.localData.ratesOfExchange.find((e=>e.base_currency===this.localData.freightCurrency)).rate:1,this.localData.otherChargesRateOfExchange=this.localData.otherChargesCurrency?this.localData.ratesOfExchange.find((e=>e.base_currency===this.localData.otherChargesCurrency)).rate:1)}}}};const us=(0,E.A)(cs,[["render",is],["__scopeId","data-v-40cc00ec"]]);var ds=us;const ms={STANDARD:"STANDARD",VEHICLES:"VEHICLES"},hs={NOT_CLASSIFIED:"Not Classified",NOT_STARTED:"Classification Not Started",IN_PROGRESS:"Classification In Progress",COMPLETED:"Classification Completed",APPROVED:"Classififcation Approved"},ps={STORED_AND_NOT_CLASSIFIED:"STORED_AND_NOT_CLASSIFIED",CLASSIFICATION_OKAY:"CLASSIFICATION_OKAY",PARTIAL_STORAGE:"PARTIAL_STORAGE",FULL_STORAGE:"FULL_STORAGE"},ys={MICROSOFT_FORM_RECOGNIZER:"MICROSOFT_FORM_RECOGNIZER",CLAUDE_LLM:"CLAUDE_LLM"};var gs={name:"App",components:{CustomsEntryForm:ds,VerifyDocumentData:za,DocumentTableView:qa,FileDragAndDrop:lr},data(){return{displayDocumentVerificationView:!1,referenceNumber:"",selectedFiles:[],waybillFiles:[],pdfFiles:[],invoiceDataArray:[],linesToBeDeleted:[],isDragOver:!1,isValidReference:!1,invoicesDataExtractionCompleted:!1,waybillDataExtractionCompleted:!1,classificationCompleted:!1,waybillNumber:"",waybillDate:(new Date).toISOString().substr(0,10),modeOfTransport:"",freightType:"",marksAndNumbers:"As Addressed",countryOfOrigin:"",cpcCode:"4000",npcCode:"000",kindOfPackage:"CT",numberOfPackages:"",consignee:"",shipper:"",supplier:"",totalCargoValue:0,totalNumberOfLines:0,freightCharge:0,rateOfExchange:1,netWeight:0,grossWeight:0,editableContent:"0",countries:[],modeOfTransportOOptions:["Air","Ocean"],freightTypeOptions:["FCL","LCL","Bulk","Break Bulk"],cpcCodeOptions:["4000"],npcCodeOptions:["000"],packageTypeOptions:[],showModeofTransportDropdown:!1,invoicingProcessingStart:null,invoicingProcessingEnd:null,invoiceModelUtilized:"",classificationProcessingStart:null,classificationProcessingEnd:null,customsEntryForm:{exporters:[],importers:[],vessels:[],ports:[],declarants:[],incotermsList:[],ratesOfExchange:[],importerId:"",exporterId:"",importerName:"",exporterName:"",importerTaxIdentificationNumber:"",exporterTaxIdentificationNumber:"",declarantId:"",declarantTaxIdentificationNumber:"",modeOfTransport:"",freightType:"",waybillNumber:"",waybillDate:"",vesselId:"",vesselName:"",incoTerms:"",portOfDischargeId:"",portOfDischargeName:"",netWeight:0,grossWeight:0,numberOfPackages:0,packageType:"",packageTypes:[],marksAndNumbers:"As Addressed",totalCargoValue:0,freightAmount:0,insuranceAmount:0,otherCharges:0,freightCurrency:"USD",insuranceCurrency:"USD",otherChargesCurrency:"USD",insuranceRateOfExchange:0,otherChargesRateOfExchange:0,freightRateOfExchange:0,rateOfExchange:0,regimeType:"",regimeTypeCode:"",regimeTypeOptions:[],depositAmount:0,containerCharges:0,additionalCharges:0,localFee:0,countryOfOrigin:"",countryOfFinalDestination:"TT",countryLastProvinance:"",tradingCountry:""}}},watch:{"customsEntryForm.countryOfOrigin"(e,t){this.invoiceDataArray.forEach((t=>{t.lines.forEach((t=>{t.country_of_origin&&0!==t.country_of_origin.trim().length||(t.country_of_origin=e)}))}))},"customsEntryForm.regimeType"(e){this.invoiceDataArray.forEach((t=>{t.lines.forEach((t=>{const o=this.customsEntryForm.regimeTypeOptions.find((t=>t.regimeTypeId===e));o&&(t.cpcCode=o.cpcCodes[0].cpcId)}))}))},"customsEntryForm.waybillDate"(e){this.updateRates(e)},invoiceDataArray:{handler:function(e){this.customsEntryForm.ratesOfExchange.length>0&&e.forEach((e=>{this.$watch((()=>e.currency),(t=>{t&&(e.rate_of_exchange=this.customsEntryForm.ratesOfExchange.find((e=>e.base_currency===t)).rate)}),{deep:!0})}))},deep:!0,immediate:!0}},setup(){return{}},mounted(){this.packageTypeOptions=Mt(),this.updateEntryFields("marksAndNumbers","As Addressed"),this.getTotalNumberOfLines(),this.getRegimeTypes()},computed:{classificationStatus(){return 0===this.invoiceDataArray.length||this.thnCodesCompleted?hs.NOT_CLASSIFIED:hs.COMPLETED},thnCodesCompleted(){return this.invoiceDataArray.some((e=>e.lines.some((e=>!e.tariff_code||""===e.tariff_code.trim()))))},totalFOBValue(){return this.invoiceDataArray.reduce(((e,t)=>e+parseFloat(t.invoice_total)),0).toFixed(2)},entryButtonDisabled(){return!(this.hasInvoiceNumber||this.waybillNumber.trim().length>0||this.consignee.trim().length>0)},hasInvoiceNumber(){for(let e of this.invoiceDataArray)if(e.invoice_number&&e.invoice_number.trim().length>0)return console.log("Invoice Number Found"),!0;return!1},availableCPCCodes(){if(void 0!==this.customsEntryForm.regimeTypeCode&&null!==this.customsEntryForm.regimeTypeCode){const e=this.customsEntryForm.regimeTypeOptions.find((e=>e.regimeTypeCode===this.customsEntryForm.regimeTypeCode));return e?e.cpcCodes:[]}return this.customsEntryForm.regimeTypeOptions.flatMap((e=>e.cpcCodes))}},methods:{verifyInvoiceData:fs,dataExtractionLoadingMessage(){this.invoicesDataExtractionCompleted&&this.waybillDataExtractionCompleted?(Tt(),Et("Data Extraction Completed"),this.classificationCompleted||Ft("Classifying Invoice Items...")):this.invoicesDataExtractionCompleted&&!this.waybillDataExtractionCompleted?(Tt(),Ft("Invoice Data Read. Reading Waybill Data...")):!this.invoicesDataExtractionCompleted&&this.waybillDataExtractionCompleted&&(Tt(),Ft("Waybill Data Read. Reading Invoice Data..."))},triggerFileInput(e){console.log("Triggering File Input"),this.$refs[e].click()},updateTariffCode(e,t,o,a){if(this.updateItem(e,t,o,a),void 0===a||null===a||0===a.trim().length||"N/A"===a)return e.icdCharge=0,void(e.vatCharge=0);console.log("Fetching charges for: ",a),xe(a.replace(/\./g,"")).then((o=>{let a=o.charges["import custom duty"];const r=void 0===a?0:parseFloat(a[0].charge_amount);let n=o.charges["value added tax"];const s=void 0===n?0:parseFloat(n[0].charge_amount);e.lines[t]["icdCharge"]=r,e.lines[t]["vatCharge"]=s,e.lines[t]["commodityCodeStatus"]="valid"})).catch((t=>{console.error("Failed to get commodity charges:",t),e.commodityCodeStatus="invalid",e.icdCharge=0,e.vatCharge=0}))},updateRates(e){console.log("Updating Rates"),Ce(e).then((e=>{console.log("Rates:",e),this.customsEntryForm.ratesOfExchange=e,this.invoiceDataArray.forEach((t=>{t.currency&&(console.log("Invoice Currency: ",t.currency),t.rate_of_exchange=e.find((e=>e.base_currency===t.currency)).rate)}))}))},setDefaults(){const e=this.customsEntryForm.regimeTypeOptions.find((e=>e.regimeTypeCode===a.defaultRegimeTypeCode));this.customsEntryForm.regimeType=e.regimeTypeId,console.log("Regime Data: ",e)},async getRegimeTypes(){ge("TT").then((e=>{this.customsEntryForm.regimeTypeOptions=e;const t=e.find((e=>e.regimeTypeCode===jt().defaultRegimeType));this.customsEntryForm.regimeType=t.regimeTypeId}))},setInvoiceLineWorksheetData(){let e=[];return this.invoiceDataArray.forEach((t=>{t.lines.forEach((t=>{t.cpcCodeName=this.availableCPCCodes.find((e=>e.cpcId===t.cpcCode))?.code;const o=xe(t.tariff_code.replace(/\./g,"")).then((e=>{let o=at(e.charges);t.commodity={code:t.tariff_code.replace(/\./g,""),id:e.id,charges:o}}));e.push(o)}))})),Promise.all(e)},generateWorkSheet(){console.log("Generating WorkSheet"),this.setInvoiceLineWorksheetData();const e=et(this.referenceNumber,"TT","Ramnarine Rampersad","BR0285",this.customsEntryForm.regimeTypeCode,this.customsEntryForm.importerName,this.customsEntryForm.importerTaxIdentificationNumber,this.customsEntryForm.exporterName,this.customsEntryForm.exporterTaxIdentificationNumber,this.customsEntryForm.vesselName,this.customsEntryForm.portOfDischargeName,this.customsEntryForm.depositAmount,this.customsEntryForm.containerCharges,this.customsEntryForm.additionalCharges,this.customsEntryForm.localFee),t=ct(this.invoiceDataArray,this.customsEntryForm.freightAmount,this.totalFOBValue);e.invoices=t,console.log("Worksheet Object: ",e),Ee(e).then((e=>{Tt(),Et("Worksheet Generated Successfully!");const t=window.URL.createObjectURL(new Blob([e],{type:"application/pdf"})),o=document.createElement("a"),a=`Worksheet - ${this.entryDetails?.entry_number}.pdf`;o.href=t,o.setAttribute("download",a),document.body.appendChild(o),o.click(),o.remove()})).catch((e=>{console.error("Failed to generate worksheet:",e),St("Failed to generate worksheet!")}))},insertFullStops(e){if(11!==e.length)throw new Error("The string must contain exactly 11 numbers.");return e.slice(0,4)+"."+e.slice(4,6)+"."+e.slice(6,8)+"."+e.slice(8)},convertAWSData(e){return e.map((e=>e.map((e=>{const t=e.summary_fields,o=e.line_items.map((e=>{const t={product_code:"",quantity:"",unit_price:"",description:"",extension_price:"",tariff_code:""};return e.forEach((e=>{switch(e.field_type){case"PRODUCT_CODE":t.product_code=e.cell_data.text;break;case"QUANTITY":t.quantity=e.cell_data.text;break;case"UNIT_PRICE":t.unit_price=e.cell_data.text;break;case"ITEM":t.description=e.cell_data.text;break;case"PRICE":t.extension_price=e.cell_data.text;break;case"recommended_commodity_code":console.log("THN Code: ",e.code),tempitem.tariff_code=this.insertFullStops(e.code.toString());break}})),console.log("Item: ",e),console.log("Temp Item: ",t),t}));return{vendor_name:t.VENDOR_NAME,subtotal:t.SUBTOTAL,invoice_total:t.TOTAL,customer_name:t.RECEIVER_NAME,invoice_date:t.INVOICE_RECEIPT_DATE,invoice_number:t.INVOICE_RECEIPT_ID,lines:o}})))).flat()},formatInvoiceData(){const e=this.customsEntryForm.regimeTypeOptions.flatMap((e=>e.cpcCodes)),t=e.find((e=>e.code===jt().defaultCPCCode)).cpcId;console.log("Before Update",this.invoiceDataArray),this.renameInvoiceObjectKeys(),console.log("After Update",this.invoiceDataArray),console.log("All CPC Codes: ",e),console.log("Default CPC Code: ",t),this.invoiceDataArray.forEach((e=>{e.invoice_total=e.invoice_total?this.parseFloatFromString(e.invoice_total):e.invoice_exworks_amount?this.parseFloatFromString(e.invoice_exworks_amount):0,e.inland=e.invoice_internal_freight_amount?this.parseFloatFromString(e.invoice_internal_freight_amount):0,e.insurance=e.invoice_insurance_amount?this.parseFloatFromString(e.invoice_insurance_amount):0,e.otherCharges=e.invoice_other_charges_amount?this.parseFloatFromString(e.invoice_other_charges_amount):0,e.final_total=this.parseFloatFromString(e.final_total),e.invoice_number=e.invoice_id,console.log("Invoice Date: ",e.invoice_date),e.invoice_date=e.invoice_date?dt(bt(e.invoice_date)):null,console.log("Invoice Date: ",e.invoice_date),e.currency="USD",e.lines.forEach((e=>{e.country_of_origin="",e.quantity=this.parseFloatFromString(e.quantity),e.unit_price=this.parseFloatFromString(e.unit_price),e.extension_price=this.parseFloatFromString(e.amount).toFixed(2),e.vatApplicable=!0,e.cpcCode=t,e.npcCode="000"}))}))},renameInvoiceObjectKeys(){for(let e=0;e<this.invoiceDataArray.length;e++){let{invoice_items:t,...o}=this.invoiceDataArray[e];this.invoiceDataArray[e]={lines:t,...o}}},getTotalNumberOfLines(){let e=0;for(let t of this.invoiceDataArray)e+=t.lines.length;this.totalNumberOfLines=e},calculateTotalCargoValue(){let e=0;for(let t of this.invoiceDataArray)e+=this.parseFloatFromString(t.invoice_total);this.customsEntryForm.totalCargoValue=e},validateIntegerInput(e){let t=e.target.innerText.trim();/^\d+$/.test(t)?this.editableContent=t:e.target.innerText=this.editableContent,this.moveCursorToEnd(e.target)},updateEntryFields(e,t){this[e]=t},selectOption(e){this.$refs.editableDiv.innerText=e,this.showModeofTransportDropdown=!1},verifyData(e){return void 0!==e&&null!==e&&""!==e},validateData(){return console.log("Importer ID: ",this.verifyData(this.customsEntryForm.importerId)),this.verifyData(this.customsEntryForm.importerId)?!!this.verifyData(this.customsEntryForm.exporterId)||(St("Please select an exporter"),!1):(St("Please select an importer"),!1)},async saveFiles(){console.log("Saving Files...");const e=new FormData;return e.append("reference",this.referenceNumber),this.selectedFiles.forEach((t=>{e.append("files",t)})),$e(e).then((e=>e)).catch((e=>{console.error("Failed to upload the files:",e)}))},async createInvoices(e){if(!this.validateData())return;const t={referenceNumber:this.referenceNumber,waybillNumber:this.customsEntryForm.waybillNumber,waybillDate:this.customsEntryForm.waybillDate,modeOfTransport:this.customsEntryForm.modeOfTransport,freightType:this.customsEntryForm.freightType,marksAndNumbers:this.customsEntryForm.marksAndNumbers,countryOfOrigin:this.customsEntryForm.countryOfOrigin,countryOfFinalDestination:this.customsEntryForm.countryOfFinalDestination,countryLastProvenance:this.customsEntryForm.countryLastProvinance,tradingCountry:this.customsEntryForm.tradingCountry,kindOfPackage:this.customsEntryForm.packageType,numberOfPackages:this.customsEntryForm.numberOfPackages,totalCargoValue:this.customsEntryForm.totalCargoValue,freightCharge:this.customsEntryForm.freightAmount??0,insuranceAmount:this.customsEntryForm.insuranceAmount??0,otherCharges:this.customsEntryForm.otherCharges??0,rateOfExchange:this.customsEntryForm.rateOfExchange,netWeight:this.customsEntryForm.netWeight,grossWeight:this.customsEntryForm.grossWeight,invoiceList:e,declarant:this.customsEntryForm.declarantId,incoTerms:this.customsEntryForm.incoTerms,importer:this.customsEntryForm.importerId,shipper:this.customsEntryForm.exporterId,vessel:this.customsEntryForm.vesselId,portOfDischarge:this.customsEntryForm.portOfDischargeId,regimeType:this.customsEntryForm.regimeType,deposit:this.customsEntryForm.depositAmount,containerCharges:this.customsEntryForm.containerCharges,additionalCharges:this.customsEntryForm.additionalCharges,localFee:this.customsEntryForm.localFee,entryType:ms.STANDARD,classificationStatus:this.classificationStatus,classificationApproved:0,classificationApprovedBy:"",entryStatus:ps.STORED_AND_NOT_CLASSIFIED};console.log("Entry Data 1: ",t);try{xt("Saving your Entry..."),this.saveFiles().then((e=>{console.log("Files saved successfully:",e),t.files=e,K(t).then((e=>{console.log("Entry created successfully:",e);const t=this.selectedFiles.reduce(((e,t)=>e+t.size),0);this.saveInvoicePerformanceMetric(this.invoicingProcessingStart,this.invoicingProcessingEnd,this.totalNumberOfLines,this.invoiceDataArray.length,t,e.entryId),this.saveClassificationPerformanceMetric(this.classificationProcessingStart,this.classificationProcessingEnd,this.invoiceDataArray.length,this.totalNumberOfLines,e.entryId),this.redirectToEntryDetails(e.entryId),Tt(),Et("Entry created successfully")})).catch((e=>{console.error("Failed to create the Entry:",e),St("Failed to create the Entry. Please try again.")}))})).catch((e=>{console.error("Failed to save the files:",e),St("Failed to save the files. Please try again.")}))}catch(o){console.error("Failed to create the invoice:",o),St("Failed to create the Entry. Please try again.")}},redirectToEntryDetails(e){this.$router.push({name:"EntryDetails",params:{entryId:e}})},moveCursorToEnd(e){const t=document.createRange(),o=window.getSelection();t.selectNodeContents(e),t.collapse(!1),o.removeAllRanges(),o.addRange(t)},validateInput(){this.isValidReference=this.referenceNumber.trim().length>0},handleFileUpload(e){this.isValidReference&&(this.selectedFiles=Array.from(e.target.files),this.createFileUrl())},handleWaybillUpload(e){this.isValidReference&&(this.waybillFiles=Array.from(e.target.files))},createFileUrl(){for(let e of this.selectedFiles)if("application/pdf"===e.type){const t=URL.createObjectURL(e);this.pdfFiles.push({name:e.name,url:t})}else alert(`File "${e.name}" is not a valid PDF file.`)},async mergeAndOpenPDFs(){if(0!==this.selectedFiles.length)try{const e=await Promise.all(this.selectedFiles.map((async e=>{const t=await e.arrayBuffer();return cr.PDFDocument.load(t)}))),t=await cr.PDFDocument.create();for(const s of e){const e=await t.copyPages(s,s.getPageIndices());e.forEach((e=>t.addPage(e)))}const o=await t.save(),a=new Blob([o],{type:"application/pdf"}),r=URL.createObjectURL(a),n=window.open("","_blank","width=800,height=600");n?(n.document.write(`<iframe src="${r}" style="width:100%; height:100%;" frameborder="0"></iframe>`),n.document.title="Merged PDF"):console.error("Failed to open new window.")}catch(e){console.error("Error:",e)}else St("Please upload at least one file.")},dragOver(e){this.isValidReference&&(this.isDragOver=!0)},dragEnter(e){this.isValidReference&&(this.isDragOver=!0)},dragLeave(e){this.isValidReference&&(this.isDragOver=!1)},async saveClassificationPerformanceMetric(e,t,o,a,r){const n=(t-e)/1e3,s={entry_id:r,processing_start:e.toISOString(),processing_end:t.toISOString(),processing_time:n,number_of_invoices:o,number_of_lines:a};console.log("Classification Performance Metrics: ",s),await Ge(s),console.log("Classification Performance Metrics saved successfully.")},async saveInvoicePerformanceMetric(e,t,o,a,r,n){const s=(t-e)/1e3,i={file:{size:r},entryId:n,processing_start:e.toISOString(),processing_end:t.toISOString(),processing_time:s,number_of_lines:o,number_of_invoices:a,status:"success",error_message:null,model_utlized:this.invoiceModelUtilized};console.log("Invoice AI Performance Metrics: ",i),await Xe(i),console.log("Invoice AI Performance Metrics saved successfully.")},readWaybillModel(){const e=new FormData;this.waybillFiles.forEach((t=>{e.append("files",t)})),qe(e).then((e=>{this.waybillDataExtractionCompleted=!0,this.dataExtractionLoadingMessage();const t=e[0];console.log("Waybill Data",t),this.customsEntryForm.waybillNumber=t.waybill_number,this.customsEntryForm.numberOfPackages=this.parseFloatFromString(t.number_of_packages),this.customsEntryForm.modeOfTransport=t.mode_of_transport;const o=vt(t.consignee,this.customsEntryForm.importers);console.log("Selected Importer",o),this.customsEntryForm.importerId=o.id;const a=vt(t.exporter,this.customsEntryForm.exporters);console.log("Selected Exporter",a),this.customsEntryForm.exporterId=a.id;const r=vt(t.vessel,this.customsEntryForm.vessels);console.log("Selected Vessel",r),this.customsEntryForm.vesselId=r.id;const n=vt(t.port_of_discharge,this.customsEntryForm.ports);console.log("Selected Port",n),this.customsEntryForm.portOfDischargeId=n.id;const s=t.shipped_on_board_date;try{const e=bt(s);this.customsEntryForm.waybillDate=kt(e)}catch(i){console.error("Failed to parse date",i)}if(void 0!==t.freight_charges&&null!==t.freight_charges&&t.freight_charges.trim().length>0){const e=Ct(t.freight_charges);this.customsEntryForm.freightAmount=e}if(void 0!==t.gross_weight_in_kgs&&null!==t.gross_weight_in_kgs&&(this.customsEntryForm.grossWeight=this.parseFloatFromString(t.gross_weight_in_kgs)),void 0!==t.package_type&&null!==t.package_type){const e=vt(t.package_type,this.customsEntryForm.packageTypes,"text");console.log("Selected Package Type",e),this.customsEntryForm.packageType=e.value}})).catch((e=>{console.error("Failed to read waybill model",e),St("Failed to read waybill model. Please try again.")}))},async uploadInvoicesAndWaybills(e="https://gabrielle-flask.azurewebsites.net/read_vendor_invoice_optimized",t=ys.MICROSOFT_FORM_RECOGNIZER){this.isValidReference&&0!==this.selectedFiles.length?(xt("Verifying Reference Number..."),je(this.referenceNumber).then((o=>{if(!1===o)return Tt(),void St(`Reference Number ${this.referenceNumber} Already Exists. Please enter a new reference number.`);Tt(),xt("Reading your invoice and Waybill"),this.invoiceModelUtilized=t,this.uploadFilesMicrosoft(e),this.waybillFiles.length>0?this.readWaybillModel():(console.log("No Waybill Files"),this.waybillDataExtractionCompleted=!0)}))):St("Please enter a valid reference number and select files before uploading.")},transformArray(e){return Array.isArray(e)&&Array.isArray(e[0])?e.flat():e},async compressFile(e){return new Promise(((t,o)=>{const a=new FileReader;a.onload=o=>{const a=new Uint8Array(o.target.result),r=pako.deflate(a),n=r.buffer,s=new Blob([n],{type:e.type}),i=new Blob([s],{type:e.type});console.log("Original file size:",e.size,"bytes"),console.log("Compressed file size:",i.size,"bytes");const l=(e.size-i.size)/e.size*100;console.log("Percentage decrease in file size:",l.toFixed(2),"%");const c=document.createElement("a");c.href=URL.createObjectURL(i),c.download=`compressed_${e.name}`,document.body.appendChild(c),c.click(),document.body.removeChild(c),t(i)},a.onerror=o,a.readAsArrayBuffer(e)}))},async uploadFilesMicrosoft(e){console.log("Uploading Files",e);const t=new FormData;t.append("reference",this.referenceNumber);for(const o of this.selectedFiles)t.append("files",o),t.append("commercialInvoice",o);console.log("Form Data: ",t),this.invoicingProcessingStart=new Date,fetch(e,{method:"POST",body:t}).then((e=>e.json())).then((e=>{this.invoicingProcessingEnd=new Date,this.invoicesDataExtractionCompleted=!0,this.dataExtractionLoadingMessage(),console.log("Success:",e),this.invoiceDataArray=this.transformArray(e),this.formatInvoiceData(),console.log("Invoice Data: ",this.invoiceDataArray),this.calculateTotalCargoValue(),this.getTotalNumberOfLines(),this.invoicesDataExtractionCompleted&&this.waybillDataExtractionCompleted&&Ft("Classifying Invoice Items..."),this.classificationProcessingStart=new Date,this.classifyInvoiceItems().then((e=>{this.classificationCompleted=!0,Tt(),this.classificationProcessingEnd=new Date,console.log("Commodity Code: ",e),Et("Invoice data read and classified."),this.calculateTotalCargoValue(),this.getTotalNumberOfLines()}))})).catch((e=>{console.error("Error:",e),this.invoiceDataArray=[]}))},uploadFiles(){this.isValidReference&&0!==this.selectedFiles.length?je(this.referenceNumber).then((e=>{if(!1===e)return Tt(),void St(`Reference Number ${this.referenceNumber} Already Exists. Please enter a new reference number.`);Tt();const t=new FormData;t.append("reference",this.referenceNumber),this.selectedFiles.forEach((e=>{t.append("commercialInvoice",e)})),xt("Reading your invoice..."),fetch("https://mary-staging.whitestone-99c262a0.eastus.azurecontainerapps.io//analyze-document",{method:"POST",body:t}).then((e=>e.json())).then((e=>{console.log("Success:",e),this.invoiceDataArray=this.convertAWSData(e),this.formatInvoiceData(),Tt(),Et("Invoice data read successfully."),this.calculateTotalCargoValue(),this.getTotalNumberOfLines()})).catch((e=>{console.error("Error:",e),this.invoiceDataArray=[]}))})):alert("Please enter a valid reference number and select files before uploading.")},removeUnsafeCharacters(e){const t=/^[a-zA-Z0-9-_.~ ]*$/;return Array.from(e).filter((e=>t.test(e))).join("")},async classifyInvoiceItems(){console.log("Classifying Invoice Items"),console.log("Invoice Data Array: ",this.invoiceDataArray);const e=this.invoiceDataArray.flatMap((e=>{const t=e.lines.map((e=>({description:e.classification_description||e.description||"",commodity_code:e.commodity_code||"",product_number:e.product_number||""}))),o=20,a=[];for(let r=0;r<t.length;r+=o)a.push([t.slice(r,r+o)]);return a})),t=[];for(const o of e){console.log("Chunk: ",o);const e=await Re(o);t.push(...e),this.processCommodityCodes(e[0])}return t},processCommodityCodes(e){e.forEach((e=>{this.invoiceDataArray.forEach((t=>{t.lines.forEach(((o,a)=>{if((e.description===`${o?.classification_description}`||e.description===`${o.description}`)&&void 0!==e.classification_model_suggested_code&&null!==e.classification_model_suggested_code){o.tariff_code=this.insertFullStops(e.classification_model_suggested_code.toString());const r={llm_recommended_classification_code:o.tariff_code,approved_classification_code:""};o.performanceMetric=r,this.updateTariffCode(t,a,"tariff_code",o.tariff_code)}}))}))}))},updateItem(e,t,o,a){e.lines[t][o]=a},parseFloatFromString(e){if(!e||void 0===e||null===e)return 0;if("number"===typeof e)return e;let t=e.replace(/[^0-9.]/g,""),o=parseFloat(t);return o}},beforeUnmount(){this.pdfFiles.forEach((e=>URL.revokeObjectURL(e.url)))}};function fs(){this.displayDocumentVerificationView=!this.displayDocumentVerificationView}const vs=(0,E.A)(gs,[["render",J]]);var bs=vs;const ks=(0,n.Lk)("h1",null,"Entries",-1),Cs={class:"table table-bordered"},Ls=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Entry #"),(0,n.Lk)("th",null,"Consignee"),(0,n.Lk)("th",null,"Invoice Number"),(0,n.Lk)("th",null,"Waybill Number"),(0,n.Lk)("th",null,"Classififcation Status"),(0,n.Lk)("th",null,"Actions")])],-1),Ds=["onClick"],_s={key:0,class:"error-message"};function Es(e,t,o,a,s,i){return(0,n.uX)(),(0,n.CE)("div",null,[ks,(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>s.searchTerm=e),placeholder:"Search entries"},null,512),[[r.Jo,s.searchTerm]]),(0,n.Lk)("table",Cs,[Ls,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.filteredEntries,(e=>((0,n.uX)(),(0,n.CE)("tr",{key:e.entry_id},[(0,n.Lk)("td",null,(0,x.v_)(e.entry_number),1),(0,n.Lk)("td",null,(0,x.v_)(e.importerName),1),(0,n.Lk)("td",null,(0,x.v_)(e.invoice_number?e.invoice_number.split("; ")[0]:""),1),(0,n.Lk)("td",null,(0,x.v_)(e.waybill_number),1),(0,n.Lk)("td",null,[(0,n.Lk)("h5",null,[(0,n.Lk)("span",{class:(0,x.C4)({"badge bg-success":"Classififcation Approved"===i.getStatusText(e.classification_approved),"badge bg-warning text-dark":"Not Classified"===i.getStatusText(e.classification_approved)})},(0,x.v_)(i.getStatusText(e.classification_approved)),3)])]),(0,n.Lk)("td",null,[(0,n.Lk)("button",{type:"button",class:"btn btn-success",onClick:t=>i.openEntry(e.entry_id,e.entry_type)},"Edit",8,Ds)])])))),128))])]),s.error?((0,n.uX)(),(0,n.CE)("div",_s,(0,x.v_)(s.error),1)):(0,n.Q3)("",!0)])}var Fs={data(){return{entries:[],error:null,searchTerm:""}},created(){this.fetchEntries()},methods:{getStatusText(e){return e?hs.APPROVED:hs.NOT_CLASSIFIED},openEntry(e,t){t&&t===ms.VEHICLES?this.$router.push({name:"VehicleEntryEditPage",params:{entryId:e}}):this.$router.push({name:"EntryDetails",params:{entryId:e}})},async fetchEntries(){try{const e=await q.A.get("https://mawifrontentcontainerapp.whitestone-99c262a0.eastus.azurecontainerapps.io/api/entries/STORED_AND_NOT_CLASSIFIED");this.entries=e.data}catch(e){this.error=e.message,console.error("There was an error!",e)}}},computed:{filteredEntries(){if(!this.searchTerm)return this.entries;const e=this.searchTerm.toLowerCase();return this.entries.filter((t=>t.entry_number&&t.entry_number.toString().toLowerCase().includes(e)||t.waybill_number&&t.waybill_number.toString().toLowerCase().includes(e)||t.invoice_number&&t.invoice_number.split("; ").some((t=>t.toLowerCase().includes(e)))||t.consignee&&t.consignee.toString().toLowerCase().includes(e)))}}};const Ts=(0,E.A)(Fs,[["render",Es]]);var Ss=Ts;const xs={key:0},Is={class:"page-header-info-container"},As={class:"badge-container"},Os={key:1},ws=(0,n.Lk)("h1",null,"Entry Details",-1),Ns={key:0},Ps=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Number of Lines Read"),(0,n.Lk)("th",null,"Total Invoices Value")])],-1),Rs=["disabled"],Vs=["disabled"],Us=["disabled"],Bs=["disabled"],$s=["disabled"],Ms={key:0};function js(e,t,o,a,r,s){const i=(0,n.g2)("VerifyDocumentData"),l=(0,n.g2)("CustomsEntryForm"),c=(0,n.g2)("DocumentTableView");return r.dataRetrieved?((0,n.uX)(),(0,n.CE)("div",xs,[(0,n.Lk)("div",Is,[(0,n.Lk)("div",null,[(0,n.Lk)("button",{type:"button",class:"btn btn-primary upload-button",onClick:t[0]||(t[0]=(...e)=>s.verifyInvoiceData&&s.verifyInvoiceData(...e))}," Invoice Split Screen "),(0,n.Lk)("button",{type:"button",class:"btn btn-primary upload-button",onClick:t[1]||(t[1]=(...e)=>s.mergeAndOpenPDFs&&s.mergeAndOpenPDFs(...e))}," Open Invoices ")]),(0,n.Lk)("div",null,[(0,n.Lk)("div",As,[(0,n.Lk)("h3",null,[(0,n.Lk)("span",{class:(0,x.C4)(["badge",{"bg-success":"Classification Completed"===s.classificationStatus,"bg-warning text-dark":"Classification In Progress"===s.classificationStatus,"bg-danger":"Not Classified"===s.classificationStatus},"fixed-badge"])},(0,x.v_)(this.classificationStatus),3)])])])]),r.displayDocumentVerificationView?((0,n.uX)(),(0,n.Wv)(i,{key:0,invoices:r.commercialInvoices,customsEntryForm:r.customsEntryForm,pdfFiles:r.invoiceDocumentSourceURLs},null,8,["invoices","customsEntryForm","pdfFiles"])):(0,n.Q3)("",!0),r.displayDocumentVerificationView?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",Os,[ws,(0,n.Lk)("h2",null,"Reference Number: "+(0,x.v_)(this.entryDetails?.entry_number),1),(0,n.bF)(l,{ref:"myCustomsForm",customsEntryForm:r.customsEntryForm,onUpdateCustomsEntryForm:t[2]||(t[2]=e=>r.customsEntryForm=e)},null,8,["customsEntryForm"]),r.dataRetrieved?((0,n.uX)(),(0,n.CE)("div",Ns,[(0,n.bF)(c,{invoiceDataArray:r.commercialInvoices,customsEntryForm:r.customsEntryForm,documentVerificationFormat:!1,linesToBeDeleted:r.linesToBeDeleted,linesToBeAdded:r.linesToBeAdded},null,8,["invoiceDataArray","customsEntryForm","linesToBeDeleted","linesToBeAdded"]),(0,n.Lk)("div",null,[(0,n.Lk)("table",null,[Ps,(0,n.Lk)("tbody",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("td",null,(0,x.v_)(this.totalNumberOfLines),1),(0,n.Lk)("td",null,(0,x.v_)(this.totalFOBValue),1)])])]),(0,n.Lk)("table",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("td",null,[(0,n.Lk)("button",{type:"button",class:"btn btn-success",disabled:s.isGenerateCsvDisabled,onClick:t[3]||(t[3]=(...e)=>s.generateAsycudaXML&&s.generateAsycudaXML(...e))}," Generate Asycuda XML ",8,Rs)]),(0,n.Lk)("td",null,[(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[4]||(t[4]=(...e)=>s.saveData&&s.saveData(...e))},"Save Entry")]),(0,n.Lk)("td",null,[(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[5]||(t[5]=e=>s.goToCustomsDeclarationPage(this.entryId))}," Generate Valuation Form ")]),(0,n.Lk)("td",null,[(0,n.Lk)("button",{type:"button",class:"btn btn-primary",disabled:s.isGenerateCsvDisabled,onClick:t[6]||(t[6]=(...e)=>s.generateWorkSheet&&s.generateWorkSheet(...e))}," Generate Worksheet ",8,Vs)]),(0,n.Lk)("td",null,[(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[7]||(t[7]=(...e)=>s.generateDepositForm&&s.generateDepositForm(...e))}," Generate Deposit Form ")])]),(0,n.Lk)("tr",null,[(0,n.Lk)("td",null,[(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[8]||(t[8]=(...e)=>s.generateCARICOM&&s.generateCARICOM(...e))}," Generate CARICOM Invoice ")]),(0,n.Lk)("td",null,["Not Classified"===s.classificationStatus||"STORED_AND_NOT_CLASSIFIED"===r.entryStatus?((0,n.uX)(),(0,n.CE)("button",{key:0,type:"button",class:"btn btn-primary",disabled:s.isGenerateCsvDisabled,onClick:t[9]||(t[9]=(...e)=>s.approveClassification&&s.approveClassification(...e))}," Approve Classification ",8,Us)):(0,n.Q3)("",!0),"CLASSIFICATION_OKAY"===r.entryStatus?((0,n.uX)(),(0,n.CE)("button",{key:1,type:"button",class:"btn btn-primary",disabled:s.isGenerateCsvDisabled,onClick:t[10]||(t[10]=(...e)=>s.partialStorage&&s.partialStorage(...e))}," Partial Storage ",8,Bs)):(0,n.Q3)("",!0),"PARTIAL_STORAGE"===r.entryStatus?((0,n.uX)(),(0,n.CE)("button",{key:2,type:"button",class:"btn btn-primary",disabled:s.isGenerateCsvDisabled,onClick:t[11]||(t[11]=(...e)=>s.fullStorage&&s.fullStorage(...e))}," Full Storage ",8,$s)):(0,n.Q3)("",!0)]),(0,n.Lk)("td",null,[(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[12]||(t[12]=(...e)=>s.displayRatesTable&&s.displayRatesTable(...e))}," View Rates of Exchange ")]),(0,n.Lk)("td",null,[(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[13]||(t[13]=(...e)=>s.generateTTC84&&s.generateTTC84(...e))}," Generate Special Exemption ")]),(0,n.Lk)("td",null,[(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[14]||(t[14]=(...e)=>s.generateOvertimeForm&&s.generateOvertimeForm(...e))}," Generate Overtime Form ")]),"Export"===s.typeOfDeclaration?((0,n.uX)(),(0,n.CE)("td",Ms,[(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[15]||(t[15]=e=>s.generateScoonerBL())}," Generate Scooner BL ")])):(0,n.Q3)("",!0)])])])])):(0,n.Q3)("",!0)]))])):(0,n.Q3)("",!0)}var Ws=o(2830),Xs=o.n(Ws),Gs={name:"EntryDetails",components:{CustomsEntryForm:ds,DocumentTableView:qa,VerifyDocumentData:za},props:{entryId:{type:[String,Number],required:!0}},watch:{totalFOBValue(e){this.customsEntryForm.totalCargoValue=e},"customsEntryForm.waybillDate"(e){this.updateRates(e)},"customsEntryForm.countryOfOrigin"(e){this.commercialInvoices.forEach((t=>{t.lines.forEach((t=>{t.country_of_origin&&0!==t.country_of_origin.trim().length||(t.country_of_origin=e)}))}))},"customsEntryForm.regimeType"(e){this.commercialInvoices.forEach((t=>{t.lines.forEach((t=>{const o=this.customsEntryForm.regimeTypeOptions.find((t=>t.regimeTypeId===e));o&&(t.cpcCode=o.cpcCodes[0].cpcId)}))}))},commercialInvoices:{handler:function(e){this.customsEntryForm.ratesOfExchange.length>0&&e.forEach((e=>{this.$watch((()=>e.currency),(t=>{t&&(e.rate_of_exchange=this.customsEntryForm.ratesOfExchange.find((e=>e.base_currency===t)).rate)}),{deep:!0,immediate:!0})}))},deep:!0,immediate:!0}},computed:{typeOfDeclaration(){const e=void 0==this.customsEntryForm.regimeType?"":this.customsEntryForm.regimeTypeCode?.slice(0,2);return"EX"===e?"Export":"Import"},totalFOBValue(){return this.commercialInvoices.reduce(((e,t)=>e+parseFloat(t.invoice_total)),0).toFixed(2)},toalInsuranceValue(){return this.commercialInvoices.reduce(((e,t)=>e+parseFloat(t.insurance)),0).toFixed(2)},totalInlandValue(){return this.commercialInvoices.reduce(((e,t)=>e+parseFloat(t.inland)),0).toFixed(2)},totalOtherChargesValue(){return this.commercialInvoices.reduce(((e,t)=>e+parseFloat(t.otherCharges)),0).toFixed(2)},netInvoicePrice(){return parseFloat(this.totalFOBValue)+parseFloat(this.toalInsuranceValue)+parseFloat(this.totalInlandValue)+parseFloat(this.totalOtherChargesValue)},formattedDate:{get(){const e=new Date(this.entryDetails.waybill_date);return e.toISOString().split("T")[0]},set(e){this.entryDetails.waybill_date=e}},isGenerateCsvDisabled(){return this.commercialInvoices.some((e=>e.lines.some((e=>!e.tariff_code||""===e.tariff_code.trim()))))},classificationStatus(){const e=yt(this.commercialInvoices)?hs.NOT_CLASSIFIED:hs.COMPLETED;return!1===e?hs.NOT_CLASSIFIED:1===this.classificationApproved?hs.APPROVED:hs.NOT_CLASSIFIED},availableCPCCodes(){if(void 0!==this.customsEntryForm.regimeTypeCode&&null!==this.customsEntryForm.regimeTypeCode){const e=this.customsEntryForm.regimeTypeOptions.find((e=>e.regimeTypeCode===this.customsEntryForm.regimeTypeCode));return e?e.cpcCodes:[]}return this.customsEntryForm.regimeTypeOptions.flatMap((e=>e.cpcCodes))}},data(){return{invoiceDocumentSourceURLs:[],displayDocumentVerificationView:!1,entryDetails:null,waybill:{},entry:{},entryStatus:"",commercialInvoices:[],linesToBeDeleted:[],linesToBeAdded:[],dataRetrieved:!1,loading:!1,error:null,countries:[],totalNumberOfLines:0,modeOfTransportOOptions:["Air","Ocean"],freightTypeOptions:["FCL","LCL","Bulk","Break Bulk"],packageTypeOptions:[],currencies:[],tradeAgreements:[],classificationApprovedBy:"",dateClassified:"",expandedIndex:null,classificationApproved:0,customsEntryForm:{exporters:[],importers:[],vessels:[],ports:[],declarants:[],incotermsList:[],ratesOfExchange:[],importerId:"",exporterId:"",importerName:"",exporterName:"",importerTaxIdentificationNumber:"",exporterTaxIdentificationNumber:"",exporterCountry:"",declarantId:"",declarantTaxIdentificationNumber:"",modeOfTransport:"",freightType:"",waybillNumber:"",waybillDate:"",vesselId:"",vesselName:"",incoTerms:"",portOfDischargeId:"",portOfDischargeName:"",netWeight:0,grossWeight:0,numberOfPackages:0,packageType:"",packageTypes:[],marksAndNumbers:"As Addressed",freightCurrency:"USD",insuranceCurrency:"USD",otherChargesCurrency:"USD",totalCargoValue:0,freightAmount:0,insuranceAmount:0,otherCharges:0,insuranceRateOfExchange:0,otherChargesRateOfExchange:0,freightRateOfExchange:0,rateOfExchange:0,regimeType:"",regimeTypeCode:"",regimeTypeOptions:[],depositAmount:0,containerCharges:0,additionalCharges:0,localFee:0,countryOfOrigin:"",countryOfFinalDestination:"TT",countryLastProvinance:"",tradingCountry:""}}},mounted(){this.fetchAllDetails(),this.fetchCountries(),this.packageTypeOptions=Mt(),this.currencies=ka(),this.fetchTradeAgreements()},methods:{verifyInvoiceData:Js,async saveCommodityCodeAccuracyPerformanceMetrics(){console.log("Saving Classification Accuracy Performance Metrics");const e=[];this.commercialInvoices.forEach((t=>{t.lines.forEach((t=>{e.push({invoice_line_id:t.invoice_line_id,approved_classification_code:t.tariff_code})}))}));const t={metrics:e};return console.log("Classification Accuracy Request Data: ",t),Ye(t)},generateScoonerBL(){Bt().then((e=>{console.log("Scooner BL Response: ",e);const t=this.countries.find((e=>e.code===this.customsEntryForm.countryOfFinalDestination))?.name,o=`${this.customsEntryForm.grossWeight.toLocaleString("en-US")} KGS`,a=this.commercialInvoices.flatMap((e=>e.lines.map((e=>({quantity:e.quantity,description:e.description,packageType:"."})))));a[0].packageType="px";const r=Lt(this.customsEntryForm.exporterName,this.customsEntryForm.importerName,this.customsEntryForm.marksAndNumbers,this.customsEntryForm.vesselName,t,a,e.freightPayableAt.toUpperCase(),o,e.portOfDischarge,this.entryDetails?.entry_number);console.log("Scooner BL Details: ",r),xt("Generating Scooner BL..."),Ae(r).then((e=>{Tt(),Et("Scooner BL Generated Successfully!");const t=window.URL.createObjectURL(new Blob([e],{type:"application/pdf"})),o=document.createElement("a"),a=`Scooner BL - ${this.entryDetails?.entry_number}.pdf`;o.href=t,o.setAttribute("download",a),document.body.appendChild(o),o.click(),o.remove()})).catch((e=>{console.error("Failed to generate Scooner BL:",e),St("Failed to generate Scooner BL!")}))}))},checkMandatoryData(){return""===this.customsEntryForm.importerId||""===this.customsEntryForm.exporterId?(St("Please fill in all mandatory fields before proceeding!"),!1):!1===this.checkAllCPCCodes()?(St("Please ensure all CPC Codes are filled in before proceeding!"),!1):!1!==this.checkAllNPCCodes()||(St("Please ensure all NPC Codes are filled in before proceeding!"),!1)},checkAllCPCCodes(){let e=!0;return this.commercialInvoices.forEach((t=>{t.lines.forEach((t=>{console.log("Line: ",t),""!==t.cpcCode&&"N/A"!==t.cpcCode&&null!==t.cpcCode&&void 0!==t.cpcCode||(e=!1)}))})),e},checkAllNPCCodes(){let e=!0;return this.commercialInvoices.forEach((t=>{t.lines.forEach((t=>{""!==t.npcCode&&"N/A"!==t.npcCode&&null!==t.npcCode&&void 0!==t.npcCode&&""!==t.npcCode.trim()||(e=!1)}))})),e},setToPartialStorage(){this.entryStatus="PARTIAL_STORAGE",this.saveData()},setToFullStorage(){this.entryStatus="FULL_STORAGE",this.saveData()},mergeAndOpenPDFs:qs,fetchTradeAgreements(){We().then((e=>{this.tradeAgreements=e}))},displayRatesTable(){if(void 0===this.customsEntryForm.waybillDate||null===this.customsEntryForm.waybillDate||0===this.customsEntryForm.waybillDate.trim().length)return void St("Please Enter a valid Waybill Date to get rates of Exchange!");0===this.customsEntryForm.ratesOfExchange.length&&this.updateRates(this.customsEntryForm.waybillDate);const e=[this.customsEntryForm.freightCurrency,this.customsEntryForm.insuranceCurrency,this.customsEntryForm.otherChargesCurrency],t=this.customsEntryForm.ratesOfExchange.filter((t=>e.includes(t.base_currency)));Vt(t)},updateRates(e){console.log("Updating Rates"),Ce(e).then((e=>{console.log("Rates:",e),this.customsEntryForm.ratesOfExchange=e,this.commercialInvoices.forEach((t=>{t.currency&&e.length>0&&(console.log("Invoice Currency: ",t.currency),t.rate_of_exchange=e.find((e=>e.base_currency===t.currency)).rate)}))}))},verifyClassificationCodes(){let e=!1;return this.commercialInvoices.forEach((t=>{t.lines.forEach((t=>{console.log("Line: ",t.commodityCodeStatus),"invalid"===t.commodityCodeStatus&&(St(`The following commodity code does not exist on Asycuda - ${t.tariff_code}. Please update this and try again.`),e=!0)}))})),!e},partialStorage(){this.entryStatus=ps.PARTIAL_STORAGE,this.saveData()},fullStorage(){this.entryStatus=ps.FULL_STORAGE,this.saveData()},approveClassification(){this.verifyClassificationCodes()&&(console.log("Approving Classification"),Nt().then((e=>{const t=new Date,o=e;console.log("Name: ",o),this.classificationApprovedBy=o,this.classificationApproved=1,this.entryStatus=ps.CLASSIFICATION_OKAY,this.dateClassified=t.toISOString(),this.saveCommodityCodeAccuracyPerformanceMetrics(),this.saveData()})))},inializeTaxes(){this.commercialInvoices.forEach((e=>{e.lines.forEach((e=>{void 0!==e.tariff_code&&null!==e.tariff_code&&e.tariff_code.trim().length>0&&"N/A"!==e&&this.updateTariffCode(e,"tariff_code",e.tariff_code)}))}))},updateTariffCode(e,t,o){if(this.updateInvoiceData(e,t,o),void 0===o||null===o||0===o.trim().length||"N/A"===o)return e.icdCharge=0,void(e.vatCharge=0);xe(o.replace(/\./g,"")).then((t=>{let o=t.charges["import custom duty"];const a=void 0===o?0:parseFloat(o[0].charge_amount);let r=t.charges["value added tax"];const n=void 0===r?0:parseFloat(r[0].charge_amount);e.icdCharge=a,e.vatCharge=n,e.commodityCodeStatus="valid",e.applicableTaxes=t.charges})).catch((t=>{console.error("Failed to get commodity charges:",t),e.commodityCodeStatus="invalid",e.icdCharge=0,e.vatCharge=0}))},setInvoiceLineWorksheetData(){let e=[];return this.commercialInvoices.forEach((t=>{t.lines.forEach((t=>{t.cpcCodeName=this.availableCPCCodes.find((e=>e.cpcId===t.cpcCode))?.code,t.tradeAgreementCode=this.tradeAgreements.find((e=>e.id===t.tradeAgreement))?.code;const o=xe(t.tariff_code.replace(/\./g,"")).then((e=>{let o=at(e.charges,t.vatApplicable);t.commodity={code:t.tariff_code.replace(/\./g,""),id:e.id,charges:o}})).catch((e=>(Tt(),St(`The following commodity code does not exist on Asycuda - ${t.tariff_code}. Please update this and try again. `),console.error("Failed to get commodity charges:",e),Promise.reject(e))));e.push(o)}))})),Promise.all(e)},generateCARICOM(){console.log("Generating CARICOM");const e=this.countries.find((e=>e.code===this.customsEntryForm.countryOfOrigin))?.name,t=this.countries.find((e=>e.code===this.customsEntryForm.countryOfFinalDestination))?.name,o=this.customsEntryForm.incotermsList.find((e=>e.code===this.customsEntryForm.incoTerms))?.name,a=this.currencies.find((e=>e.code===this.commercialInvoices[0].currency))?.name,r=this.customsEntryForm.importers.find((e=>e.id===this.customsEntryForm.importerId)),n=void 0===r?"":r.address,s=this.countries.find((e=>e.code===r.country))?.name,i=`${this.customsEntryForm.importerName}\n${n}\n${s}`.toUpperCase(),l=this.customsEntryForm.exporters.find((e=>e.id===this.customsEntryForm.exporterId)),c=void 0===l?"":l.address,u=this.countries.find((e=>e.code===l.country))?.name,d=`${this.customsEntryForm.exporterName}\n${c}\n${u}`.toUpperCase();wt().then((r=>{const n=ht(i,d,this.entryDetails.entry_number,e,o,this.customsEntryForm.portOfDischargeName,t,this.customsEntryForm.modeOfTransport,this.customsEntryForm.vesselName,a,r,this.customsEntryForm.grossWeight,this.commercialInvoices,this.customsEntryForm.numberOfPackages,this.customsEntryForm.totalCargoValue,this.customsEntryForm.freightAmount,this.customsEntryForm.insuranceAmount,this.customsEntryForm.otherCharges);xt("Generating CARICOM Invoice..."),console.log("CARICOM Object: ",n),Ve(n).then((e=>{Tt(),Et("CARICOM Invoice Generated Successfully!");const t=window.URL.createObjectURL(new Blob([e],{type:"application/pdf"})),o=document.createElement("a"),a=`CARICOM Invoice - ${this.entryDetails.entry_number}.pdf`;o.href=t,o.setAttribute("download",a),document.body.appendChild(o),o.click(),o.remove()})).catch((e=>{console.error("Failed to generate CARICOM Invoice:",e),St("Failed to generate CARICOM Invoice!")}))})).catch((e=>{console.error("Failed to generate CARICOM Invoice:",e),St("Failed to generate CARICOM Invoice!")}))},buildWorksheetObject(){const e=et(this.entryDetails?.entry_number,"TT","Ramnarine Rampersad","BR0285",this.customsEntryForm.regimeTypeCode,this.customsEntryForm.importerName,this.customsEntryForm.importerTaxIdentificationNumber,this.customsEntryForm.exporterName,this.customsEntryForm.exporterTaxIdentificationNumber,this.customsEntryForm.vesselName,this.customsEntryForm.portOfDischargeName,this.customsEntryForm.depositAmount,this.customsEntryForm.containerCharges,this.customsEntryForm.additionalCharges,this.customsEntryForm.localFee,this.customsEntryForm.freightAmount,this.customsEntryForm.insuranceAmount,this.customsEntryForm.otherCharges),t=lt(this.commercialInvoices,this.customsEntryForm.freightAmount,this.totalFOBValue);return e.invoices=t,e},generateWorkSheet(){this.checkMandatoryData()&&(console.log("Generating WorkSheet"),console.log(this.commercialInvoices),this.setInvoiceLineWorksheetData().then((()=>{console.log("Setting Invoice Line Worksheet Data");const e=et(this.entryDetails?.entry_number,"TT","Ramnarine Rampersad","BR0285",this.customsEntryForm.regimeTypeCode,this.customsEntryForm.importerName,this.customsEntryForm.importerTaxIdentificationNumber,this.customsEntryForm.exporterName,this.customsEntryForm.exporterTaxIdentificationNumber,this.customsEntryForm.vesselName,this.customsEntryForm.portOfDischargeName,this.customsEntryForm.depositAmount,this.customsEntryForm.containerCharges,this.customsEntryForm.additionalCharges,this.customsEntryForm.localFee,this.customsEntryForm.freightAmount,this.customsEntryForm.insuranceAmount,this.customsEntryForm.otherCharges,this.customsEntryForm.freightCurrency,this.customsEntryForm.freightRateOfExchange,this.customsEntryForm.insuranceCurrency,this.customsEntryForm.insuranceRateOfExchange,this.customsEntryForm.otherChargesCurrency,this.customsEntryForm.otherChargesRateOfExchange),t=lt(this.commercialInvoices,this.customsEntryForm.freightAmount,this.totalFOBValue);e.invoices=t,console.log("Worksheet Object: ",e),Pt().then((t=>{xt("Generating worksheet..."),Ee(e,t).then((e=>{Tt(),Et("Worksheet Generated Successfully!");const o=window.URL.createObjectURL(new Blob([e],{type:"application/pdf"})),a=document.createElement("a"),r=`Worksheet - ${this.entryDetails?.entry_number} - ${t}.pdf`;a.href=o,a.setAttribute("download",r),document.body.appendChild(a),a.click(),a.remove()})).catch((e=>{console.error("Failed to generate worksheet:",e),Tt(),St("Failed to generate worksheet!")}))}))})).catch((e=>{console.error("Failed to set invoice line worksheet data:",e)})))},async getPackageTypes(){try{const e=await fetch("./assets/packageTypes.json"),t=await e.json();this.packageTypeOptions=t}catch(e){this.packageTypeOptions=[{value:"CT",text:"Carton"}],console.error("Error fetching data:",e)}},getInvoiceNumbers(){return this.commercialInvoices.map((e=>`${e.invoice_number} \t ${e.invoice_date} \t`)).join("\n")},async generateOvertimeForm(){let e={date:ut(),request:"TO OBTAIN SERVICES OF ONE CUSTOMS OFFICER TO EXAMINE AND RELEASE",details:"",shipper:this.customsEntryForm.exporterName,importer:this.customsEntryForm.importerName,referenceNumber:this.entryDetails?.entry_number,importerAddress:this.customsEntryForm.importerName,declarantNumber:"BR0285",declarantName:"RAMNARINE RAMPERSAD",port:this.customsEntryForm.portOfDischargeName,startTime:"4:00PM"};Ot().then((t=>{console.log("Importers List: ",this.customsEntryForm.importers);const o=this.customsEntryForm.importers.find((e=>e.id===this.customsEntryForm.importerId)),a=void 0===o?"":o.address;e.details=t.cargoDetails,e.startTime=t.startTime,e.importerAddress=`${this.customsEntryForm.importerName}\n${a}`,xt("Generating Overtime Form..."),we(e).then((e=>{Tt(),Et("Overtime Form Generated Successfully!");const t=window.URL.createObjectURL(new Blob([e],{type:"application/pdf"})),o=document.createElement("a"),a=`Overtime Form - ${this.entryDetails?.entry_number}.pdf`;o.href=t,o.setAttribute("download",a),document.body.appendChild(o),o.click(),o.remove()})).catch((e=>{console.error("Failed to generate Overtime Form:",e),St("Failed to generate Overtime Form!")}))}))},async generateTTC84(){console.log("Generating TTC84");let e={declarationNumber:this.entryDetails?.entry_number,declarationDate:ut(),regimeCode:"C4",declarantName:"RAMNARINE RAMPERSAD",declarantNumber:"BR0285",referenceNumber:this.entryDetails?.entry_number,importer:this.customsEntryForm.importerName,importNumber:"",declarationContent:"",CPCCode:"4000",extensionCode:"",signatoryName:"",signatoryStatus:"",presigned:!1};const t=this.customsEntryForm.importers.find((e=>e.id===this.customsEntryForm.importerId)),o=t?.taxIdentificationNumber;e.importNumber=o;let a=await le();console.log("Signatories: ",a),a=a.filter((e=>e.importerCode===this.customsEntryForm.importerId)),Ne(this.customsEntryForm.importerId).then((t=>{const o=t.map((e=>e.declaration_number));At(o,a).then((o=>{e.presigned=o.generatePreSigned;const r=parseInt(o.select1),n=t[r],s=this.commercialInvoices.reduce(((e,t)=>`${e} ${t.invoice_number} DD ${t.invoice_date}, `),"");e.declarationContent=`${n.content.replace(/\\n/g,"\n")}\n\nInvoice #${s}`,e.extensionCode=n.extensionCode;const i=a.find((e=>e.id===parseInt(o.select2)));e.signatoryName=i.name,e.signatoryStatus=i.status,Oe(e).then((e=>{Tt(),Et("C84 Form Generated Successfully!");const t=window.URL.createObjectURL(new Blob([e],{type:"application/pdf"})),o=document.createElement("a"),a=`C84 Form - ${this.entryDetails?.entry_number}.pdf`;o.href=t,o.setAttribute("download",a),document.body.appendChild(o),o.click(),o.remove()})).catch((e=>{console.error("Failed to generate C84 Form:",e),St("Failed to generate C84 Form!")}))}))})).catch((e=>{console.error("Failed to get special exemption declarations:",e)})),console.log("C84 Object: ",e)},async generateDepositForm(){console.log("Generating Deposit Form"),console.log(this.availableCPCCodes),console.log(this.customsEntryForm.regimeTypeOptions);const e=this.customsEntryForm.ports.find((e=>e.id===this.customsEntryForm.portOfDischargeId)),t=void 0==e?"":e.portCode,o=this.countries.find((e=>e.code===this.customsEntryForm.countryOfOrigin))?.name,a=this.customsEntryForm.modeOfTransportOOptions.find((e=>e.modeOfTransport===this.customsEntryForm.modeOfTransport)),r=a.freightTypes.find((e=>e.name===this.customsEntryForm.freightType))?.code;Rt().then((e=>{const a=mt(this.customsEntryForm.regimeTypeCode,this.customsEntryForm.waybillNumber,this.customsEntryForm.waybillDate,this.customsEntryForm.incoTerms,this.customsEntryForm.importerName,this.customsEntryForm.importerTaxIdentificationNumber,"Ramnarine Rampersad","BR0285",this.entryDetails?.entry_number,this.customsEntryForm.exporterName,o,this.customsEntryForm.exporterCountry,this.customsEntryForm.vesselName,r,this.customsEntryForm.portOfDischargeName,t,this.customsEntryForm.depositAmount,e);try{xt("Generating Deposit Form..."),Ie(a).then((e=>{Tt(),Et("Deposit Form Generated Successfully!");const t=window.URL.createObjectURL(new Blob([e],{type:"application/pdf"})),o=document.createElement("a"),a=`Deposit Form - ${this.entryDetails?.entry_number}.pdf`;o.href=t,o.setAttribute("download",a),document.body.appendChild(o),o.click(),o.remove()})).catch((e=>{St("Failed to generate Deposit Form!"),console.error("Failed to generate Deposit Form:",e)}))}catch(n){console.error("Failed to generate Deposit Form:",n)}}))},goToCustomsDeclarationPage(){const e=this.getInvoiceNumbers();let t=this.netInvoicePrice;"CIF"===this.customsEntryForm.incoTerms&&(t=t+this.customsEntryForm.freightAmount+this.customsEntryForm.insuranceAmount),console.log("Invoice Numbers: ",e),console.log("Incoterms: ",this.customsEntryForm.incoTerms),console.log("Invoice Total: ",this.netInvoicePrice),this.$router.push({name:"CustomsDeclarationForm",params:{entryId:this.entryId},query:{buyerId:this.customsEntryForm.importerId,sellerId:this.customsEntryForm.exporterId,invoiceNumber:e,invoiceTotal:t,currency:this.commercialInvoices[0].currency,rateOfExchange:this.commercialInvoices[0].rate_of_exchange,freight:this.customsEntryForm.freightAmount*this.customsEntryForm.freightRateOfExchange,insurance:this.customsEntryForm.insuranceAmount*this.customsEntryForm.insuranceRateOfExchange,incoTerms:this.customsEntryForm.incoTerms,referenceNumber:this.entryDetails.entry_number}})},updateWaybillDate(e){this.entryDetails.waybill_date=e.target.value},countryChange(){this.commercialInvoices.forEach((e=>{e.lines.forEach((e=>{e.country_of_origin&&0!==e.country_of_origin.trim().length&&"N/A"!==e.country_of_origin&&void 0!==e.country_of_origin&&null!==e.country_of_origin||(e.country_of_origin=this.entryDetails.country_of_origin)}))}))},async fetchCountries(){try{const e=await fetch("https://restcountries.com/v3/all"),t=await e.json();this.countries=t.map((e=>({name:e.name.common,code:e.cca2})))}catch(e){console.error("Failed to fetch countries:",e)}},formatInvoiceData(e){return{invoice_id:e.invoice_id,invoice_number:e.invoice_number,invoice_date:e.invoice_date,invoice_total:e.invoice_total,sub_total:e.sub_total,supplier_name:e.vendor_name,taxed_amount:e.taxed_amount,supplier_address:e.supplier_address,purchase_order_number:e.purchase_order_number,inland:e.inland,insurance:e.insurance,other_charges:parseFloat(e.otherCharges),entry_id:e.entry_id,currency:e.currency,rate_of_exchange:e.rate_of_exchange}},getTotalNumberOfLines(){console.log("Calculating total number of lines"),console.log(this.commercialInvoices);let e=0;for(let t of this.commercialInvoices)e+=t.lines.length;console.log("Total Number of Lines: ",e),this.totalNumberOfLines=e},formatInvoiceLinesData(e){return e.map((e=>({invoice_line_id:e.invoice_line_id,description:e.description,quantity:parseFloat(e.quantity),unit_price:parseFloat(e.unit_price),extension_price:parseFloat(e.extension_price),tariff_code:e.tariff_code,product_code:e.product_code,country_of_origin:e.country_of_origin,cpc_code:e.cpcCode,npc_code:e.npcCode,vat_applicable:e.vatApplicable})))},async addInvoiceLines(){return Je(this.linesToBeAdded).then((e=>(console.log("Invoice Lines Added:",e),this.linesToBeAdded=[],e))).catch((e=>(console.error("Failed to add invoice lines:",e),Promise.reject(e))))},saveData(){console.log("Saving data..."),this.loading=!0;let e=[this.updateEntryData(),this.updateWaybillData(),this.saveInvoiceDataOptimized()];this.linesToBeAdded.length>0&&e.push(this.addInvoiceLines()),this.linesToBeDeleted.length>0?It().then((t=>{t.isConfirmed&&e.push(this.deleteInvoiceLines()),xt("Saving Data..."),console.log(t),console.time("saveInvoiceData Execution Time"),Promise.all(e).then((([e,t])=>{console.log("Entry details updated:",e.data),console.log("Waybill details updated:",t.data),Tt(),console.timeEnd("saveInvoiceData Execution Time"),Et("All Data Saved successfully!")})).catch((e=>{console.timeEnd("saveInvoiceData Execution Time"),console.error("There was an error saving the data!",e),St("Failed to save Entry Data!")})).finally((()=>{this.loading=!1}))})):(xt("Saving Data..."),Promise.all(e).then((([e,t])=>{console.log("Entry details updated:",e.data),console.log("Waybill details updated:",t.data),Tt(),Et("All Data Saved successfully!")})).catch((e=>{console.error("There was an error saving the data!",e),St("Failed to save Entry Data!")})).finally((()=>{this.loading=!1})))},toggleOptions(){console.log(this.freightType)},updateEntryFields(e,t){this.entryDetails[e]=t},updateInvoiceData(e,t,o){e[t]=o,console.log(e)},convertTinyIntoBoolean(e){return 1===e},async fetchAllDetails(){const e="https://mawifrontentcontainerapp.whitestone-99c262a0.eastus.azurecontainerapps.io/api/";console.log("Fetching details"),this.loading=!0,this.dataRetrieved=!1;try{const t=q.A.get(`${e}entry-details/${this.entryId}`),o=q.A.get(`${e}commercial-invoices-with-lines/${this.entryId}`),[a,r]=await Promise.all([t,o]);this.dataRetrieved=!0;let n,s=a.data.waybill_date;if("0000-00-00"!==s&&s){let e=new Date(s);n=isNaN(e)?"":e.toISOString().split("T")[0]}else n="";this.entryDetails=a.data,this.customsEntryForm.importerId=this.entryDetails.importer,this.customsEntryForm.exporterId=this.entryDetails.shipper,this.customsEntryForm.waybillNumber=this.entryDetails.waybill_number,this.customsEntryForm.waybillDate=n,this.customsEntryForm.modeOfTransport=this.entryDetails.mode_of_transport,this.customsEntryForm.freightType=this.entryDetails.freight_type,this.customsEntryForm.vesselId=this.entryDetails.vessel,this.customsEntryForm.portOfDischargeId=this.entryDetails.port_of_discharge,this.customsEntryForm.netWeight=this.entryDetails.net_weight,this.customsEntryForm.grossWeight=this.entryDetails.gross_weight,this.customsEntryForm.numberOfPackages=this.entryDetails.package_quantity,this.customsEntryForm.packageType=this.entryDetails.package_type,this.customsEntryForm.marksAndNumbers=this.entryDetails.marks_and_numbers,this.customsEntryForm.totalCargoValue=this.entryDetails.invoice_total,this.customsEntryForm.freightAmount=this.entryDetails.freight_charge,this.customsEntryForm.insuranceAmount=this.entryDetails.insurance_amount??0,this.customsEntryForm.otherCharges=this.entryDetails.other_charges??0,this.customsEntryForm.rateOfExchange=this.entryDetails.rate_of_exchange,this.customsEntryForm.countryOfOrigin=this.entryDetails.country_of_origin,this.customsEntryForm.countryOfFinalDestination=this.entryDetails.country_of_final_destination,this.customsEntryForm.regimeType=this.entryDetails.regimeType,this.customsEntryForm.regimeTypeCode=this.entryDetails.regimeTypeCode,this.customsEntryForm.depositAmount=this.entryDetails.deposit,this.customsEntryForm.containerCharges=this.entryDetails.container_charges,this.customsEntryForm.additionalCharges=this.entryDetails.additional_charges,this.customsEntryForm.localFee=this.entryDetails.local_fee,this.customsEntryForm.declarantId=this.entryDetails.declarant,this.customsEntryForm.incoTerms=this.entryDetails.incoterms,this.customsEntryForm.countryLastProvinance=this.entryDetails.country_last_provenance,this.customsEntryForm.tradingCountry=this.entryDetails.trading_country,this.classificationApproved=this.entryDetails.classification_approved,this.classificationApprovedBy=this.entryDetails.classification_approved_by,this.entryStatus=this.entryDetails.entry_status||"",console.log("Commercial Invoice Raw Data: ",r.data),this.commercialInvoices=r.data,this.retrieveInvoiceDocumentSourceURL(),this.inializeTaxes(),this.parseInvoiceData(),this.getTotalNumberOfLines(),this.getRegimeTypes(),console.log("Entry details:",this.entryDetails),console.log("Customs Entry:",this.customsEntryForm),console.log("Commercial invoices:",this.commercialInvoices)}catch(t){this.error="Failed to load entry details: "+(t.response?.data||t.message),console.error("Failed to load entry details:",t),St("Failed to load Entry Details! Please Reach out to Administrator")}finally{this.loading=!1}},retrieveInvoiceDocumentSourceURL(){for(let e of this.commercialInvoices){const t={};t.name=e.invoice_number,t.url=e.file_url,this.invoiceDocumentSourceURLs.push(t)}},formatDate(e){const t=new Date(e),o=t.getFullYear(),a=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${o}-${a}-${r}`},formatDateForInput(e){return Xs()(e).tz("UTC").format("YYYY-MM-DD")},parseInvoiceData(){console.log("Parsing Invoice Data"),this.commercialInvoices.forEach((e=>{e.vendor_name=e.supplier_name,e.otherCharges=parseFloat(e.other_charges),e.lines.forEach((e=>{e.quantity=parseFloat(e.quantity).toFixed(2),e.unit_price=parseFloat(e.unit_price),e.extension_price=parseFloat(e.extension_price).toFixed(2),e.vatApplicable=this.convertTinyIntoBoolean(e.vat_applicable),e.cpcCode=e.cpc_code,e.npcCode=e.npc_code}))}))},async getRegimeTypes(){ge("TT").then((e=>{this.customsEntryForm.regimeTypeOptions=e}))},async updateWaybillData(){return this.waybill={waybill_number:this.customsEntryForm.waybillNumber,waybill_date:this.customsEntryForm.waybillDate,mode_of_transport:this.customsEntryForm.modeOfTransport,freight_type:this.customsEntryForm.freightType,marks_and_numbers:this.customsEntryForm.marksAndNumbers,package_type:this.customsEntryForm.packageType,cpc_code:this.entryDetails.cpc_code,npc_code:this.entryDetails.npc_code,package_quantity:this.customsEntryForm.numberOfPackages,country_of_origin:this.customsEntryForm.countryOfOrigin,country_of_final_destination:this.customsEntryForm.countryOfFinalDestination,importer:this.customsEntryForm.importerId,shipper:this.customsEntryForm.exporterId,vessel:this.customsEntryForm.vesselId,port_of_discharge:this.customsEntryForm.portOfDischargeId,entry_id:this.entryDetails.entry_id,waybill_id:this.entryDetails.waybill_id},console.log("Saving Waybill Data: ",this.waybill),console.log(`https://mawifrontentcontainerapp.whitestone-99c262a0.eastus.azurecontainerapps.io/api/waybill/${this.waybill.waybill_id}`),q.A.put(`https://mawifrontentcontainerapp.whitestone-99c262a0.eastus.azurecontainerapps.io/api/waybill/${this.waybill.waybill_id}`,this.waybill)},async deleteInvoiceLines(){return console.log("Deleting Invoice Lines"),console.log(this.linesToBeDeleted),Me(this.linesToBeDeleted)},async updateEntryData(){return this.entry={mawi_invoice:this.entryDetails.mawi_invoice,entry_date:this.entryDetails.entry_date,invoice_total:this.entryDetails.invoice_total,supplier_name:this.entryDetails.supplier_name,net_weight:this.customsEntryForm.netWeight,gross_weight:this.customsEntryForm.grossWeight,entry_number:this.entryDetails.entry_number,freight_charge:this.customsEntryForm.freightAmount,insurance_amount:this.customsEntryForm.insuranceAmount??0,other_charges:this.customsEntryForm.otherCharges??0,rate_of_exchange:this.entryDetails.rate_of_exchange,consignee:this.entryDetails.consignee,declarant:this.customsEntryForm.declarantId,incoterms:this.customsEntryForm.incoTerms,regime_type:this.customsEntryForm.regimeType,deposit:this.customsEntryForm.depositAmount,container_charges:this.customsEntryForm.containerCharges,additional_charges:this.customsEntryForm.additionalCharges,local_fee:this.customsEntryForm.localFee,country_last_provenance:this.customsEntryForm.countryLastProvinance,trading_country:this.customsEntryForm.tradingCountry,classification_status:this.classificationStatus,classification_approved:this.classificationApproved,classification_approved_by:this.classificationApprovedBy,date_classified:this.dateClassified,entry_status:this.entryStatus},console.log("Saving Entry",this.entry),q.A.put(`https://mawifrontentcontainerapp.whitestone-99c262a0.eastus.azurecontainerapps.io/api/customs-entry/${this.entryDetails.entry_id}`,this.entry)},async saveInvoiceData(){const e=this.commercialInvoices.map((e=>{const t=this.formatInvoiceData(e),o=this.formatInvoiceLinesData(e.lines),a={invoiceData:t,invoiceLines:o};return console.log("Updating invoice and invoice lines:",a),q.A.put(`https://mawifrontentcontainerapp.whitestone-99c262a0.eastus.azurecontainerapps.io/api/update-invoice-and-lines/${t.invoice_id}`,a)}));return Promise.all(e)},async saveInvoiceDataOptimized(){try{console.time("saveInvoiceData Execution Time");const e=this.commercialInvoices.map((e=>this.formatInvoiceData(e))),t=this.commercialInvoices.flatMap((e=>this.formatInvoiceLinesData(e.lines))),o={invoices:e},a={invoiceLines:t};console.log("Updating multiple invoices:",o),console.log("Updating multiple invoice lines:",a);const[r,n]=await Promise.all([q.A.put("https://mawifrontentcontainerapp.whitestone-99c262a0.eastus.azurecontainerapps.io/api/update-multiple-invoices",o),q.A.put("https://mawifrontentcontainerapp.whitestone-99c262a0.eastus.azurecontainerapps.io/api/update-multiple-invoice-lines",a)]);return console.log("Invoices update response:",r.data),console.log("Invoice lines update response:",n.data),console.timeEnd("saveInvoiceData Execution Time"),{invoicesResponse:r,invoiceLinesResponse:n}}catch(e){throw console.error("Error updating invoices and invoice lines:",e),e}},checkTHNCodes(){let e=this.commercialInvoices;return e.forEach((e=>{e.lines.forEach((e=>{if(!e.tariff_code||""===e.tariff_code.trim()||"N/A"===e.tariff_code||void 0===e.tariff_code||null===e.tariff_code)return!1}))})),!0},generateAsycudaXML(){if(console.log("Generating Asycuda XML"),!this.checkMandatoryData())return;const e=this.customsEntryForm.ports.find((e=>e.id===this.customsEntryForm.portOfDischargeId)),t=this.customsEntryForm.importers.find((e=>e.id===this.customsEntryForm.importerId)),o=this.customsEntryForm.exporters.find((e=>e.id===this.customsEntryForm.exporterId)),a=void 0==this.customsEntryForm.regimeType?"":this.customsEntryForm.regimeTypeCode?.slice(2),r=void 0==this.customsEntryForm.regimeType?"":this.customsEntryForm.regimeTypeCode?.slice(0,2);if(console.log("Tye Of Declaration: ",r),"IM"===r&&(void 0===t.taxIdentificationNumber||0===t.taxIdentificationNumber.trim().length))return void St("Missing Importer Tax Identification Number! Please Update Importer Details!");if(console.log("Exporter: ",o),"EX"===r&&(void 0===o.taxIdentificationNumber||0===o.taxIdentificationNumber.trim().length))return void St("Missing Exporter Tax Identification Number! Please Update Exporter Details!");const n=this.customsEntryForm.declarants.find((e=>e.id===this.customsEntryForm.declarantId)),s=this.countries.find((e=>e.code===this.customsEntryForm.countryOfOrigin)),i=rt(this.commercialInvoices,this.entryDetails?.entry_number,this.customsEntryForm.waybillNumber,this.customsEntryForm.grossWeight,this.customsEntryForm.netWeight,this.customsEntryForm.numberOfPackages,this.customsEntryForm.packageType,this.customsEntryForm.marksAndNumbers,this.customsEntryForm.freightAmount,this.availableCPCCodes,this.totalFOBValue,this.tradeAgreements),l={reference_number:this.entryDetails?.entry_number,group_items:!0,waybill:{number:this.customsEntryForm.waybillNumber,external_freight:this.customsEntryForm.freightAmount,insurance:void 0==this.customsEntryForm.insuranceAmount?0:this.customsEntryForm.insuranceAmount,other_charges:void 0==this.customsEntryForm.otherCharges?0:this.customsEntryForm.otherCharges,importer:{name:`${t?.name}\n${t?.address}`,tax_identification_number:void 0==t.taxIdentificationNumber?"":t.taxIdentificationNumber},exporter:{name:`${o?.name}\n${o?.address}`,tax_identification_number:void 0==o.taxIdentificationNumber?"":o.taxIdentificationNumber},declarant:{name:n?.name,tax_identification_number:void 0==n.taxIdentificationNumber?"":n.taxIdentificationNumber},charges:{external_freight:{amount:this.customsEntryForm.freightAmount,currency:this.customsEntryForm.freightCurrency,rate_of_exchange:this.customsEntryForm.freightRateOfExchange},insurance:{amount:this.customsEntryForm.insuranceAmount,currency:this.customsEntryForm.insuranceCurrency,rate_of_exchange:this.customsEntryForm.insuranceRateOfExchange},other_charges:{amount:this.customsEntryForm.otherCharges,currency:this.customsEntryForm.otherChargesCurrency,rate_of_exchange:this.customsEntryForm.otherChargesRateOfExchange}},mode_of_transport:"Ocean"===this.customsEntryForm.modeOfTransport?"1":"Air"===this.customsEntryForm.modeOfTransport?"4":"",container_flag:!1,vessel:this.customsEntryForm.vesselName,country_of_origin:this.customsEntryForm.countryOfOrigin,country_of_destination:void 0==this.customsEntryForm.countryOfFinalDestination?"":this.customsEntryForm.countryOfFinalDestination,number_of_packages:this.customsEntryForm.numberOfPackages+"",type_of_declaration:r,general_procedural_code:a,office_of_destination:e.asycudaCode,country_last_provinance:this.customsEntryForm.countryLastProvinance,trading_country:this.customsEntryForm.tradingCountry,country_export:this.customsEntryForm.countryOfOrigin,delivery_terms:this.customsEntryForm.incoTerms,delivery_terms_place:this.customsEntryForm.countryOfOrigin,place_of_terms:s?.name,local_currency:"TTD",office_of_entry:e.asycudaCode,location_of_goods:""},invoices:i};console.log("XML Data: ",l),xt("Generating Asycuda XML..."),Se(l).then((e=>{Tt(),Et("Asycuda XML Generated Successfully!");const t=window.URL.createObjectURL(new Blob([e],{type:"application/xml"})),o=document.createElement("a"),a=`Asycuda XML - ${this.entryDetails?.entry_number}.xml`;o.href=t,o.setAttribute("download",a),document.body.appendChild(o),o.click(),o.remove()})).catch((e=>{console.error("Failed to generate Asycuda XML:",e),St("Failed to generate Asycuda XML!")}))}}};function Js(){this.displayDocumentVerificationView=!this.displayDocumentVerificationView}async function qs(){console.log("Merging and Opening PDFs"),xt("Merging and Opening Invoices...");const e=this.invoiceDocumentSourceURLs.map((e=>e.url));console.log(e);try{const t="https://mawifrontentcontainerapp.whitestone-99c262a0.eastus.azurecontainerapps.io/api/",o=await fetch(`${t}merge-pdfs`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pdfUrls:e})});if(!o.ok)throw new Error("Failed to merge PDFs");Tt(),Et("PDFs Merged Successfully!");const a=await o.blob(),r=URL.createObjectURL(a),n=window.open("","_blank","width=800,height=600");n?(n.document.write(`<iframe src="${r}" style="width:100%; height:100%;" frameborder="0"></iframe>`),n.document.title="Merged PDF"):console.error("Failed to open new window.")}catch(t){console.error("Error:",t),Tt(),St("Failed to merge and open PDFs!")}}const Ys=(0,E.A)(Gs,[["render",js]]);var Hs=Ys;const zs=e=>((0,n.Qi)("data-v-b59096ae"),e=e(),(0,n.jt)(),e),Ks={class:"container mt-4"},Qs=zs((()=>(0,n.Lk)("h1",{class:"text-center mb-4"},"Trinidad & Tobago",-1))),Zs=zs((()=>(0,n.Lk)("h1",{class:"text-center mb-4"},"Customs Declaration Form E-C75",-1)));function ei(e,t,o,a,s,i){const l=(0,n.g2)("CustomsDeclarationSectionOne"),c=(0,n.g2)("CustomsDeclarationSectionTwo"),u=(0,n.g2)("CustomsDeclarationSectionThree"),d=(0,n.g2)("CustomsDeclarationSectionFour");return(0,n.uX)(),(0,n.CE)("div",Ks,[Qs,Zs,(0,n.Lk)("form",{onSubmit:t[4]||(t[4]=(0,r.D$)(((...e)=>i.generateC75Declaration&&i.generateC75Declaration(...e)),["prevent"])),class:"my-form-container"},[(0,n.bF)(l,{buyerIdProp:this.$route.query.buyerId,customsDeclarationSectionOne:s.form.customsDeclarationSectionOne,onUpdateSectionOne:t[0]||(t[0]=e=>s.form.customsDeclarationSectionOne=e)},null,8,["buyerIdProp","customsDeclarationSectionOne"]),(0,n.bF)(c,{customsDeclarationSectionTwo:s.form.customsDeclarationSectionTwo,customsDeclarationSectionOne:s.form.customsDeclarationSectionOne,onUpdateSectionTwo:t[1]||(t[1]=e=>s.form.customsDeclarationSectionTwo=e)},null,8,["customsDeclarationSectionTwo","customsDeclarationSectionOne"]),(0,n.bF)(u,{customsDeclarationSectionThree:s.form.customsDeclarationSectionThree,onUpdateSectionThree:t[2]||(t[2]=e=>s.form.customsDeclarationSectionThree=e)},null,8,["customsDeclarationSectionThree"]),(0,n.bF)(d,{customsDeclarationSectionFour:s.form.customsDeclarationSectionFour,customsDeclarationSectionThree:s.form.customsDeclarationSectionThree,onUpdateSectionFour:t[3]||(t[3]=e=>s.form.customsDeclarationSectionFour=e)},null,8,["customsDeclarationSectionFour","customsDeclarationSectionThree"])],32),(0,n.Lk)("table",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("td",null,[(0,n.Lk)("button",{class:"btn btn-primary",onClick:t[5]||(t[5]=(...e)=>i.generateC75Declaration&&i.generateC75Declaration(...e))},"Generate Valuation Form")]),(0,n.Lk)("td",null,[(0,n.Lk)("button",{class:"btn btn-primary",onClick:t[6]||(t[6]=(...e)=>i.generatePreSignedValuation&&i.generatePreSignedValuation(...e))},"Generate Pre-Signed Valuation Form")]),(0,n.Lk)("td",null,[(0,n.Lk)("button",{class:"btn btn-primary",onClick:t[7]||(t[7]=(...e)=>i.generatePreSignedValuationVersionTwo&&i.generatePreSignedValuationVersionTwo(...e))},"Generate Pre-Signed Valuation Form Version 2")]),(0,n.Lk)("td",null,[(0,n.Lk)("button",{class:"btn btn-primary",onClick:t[8]||(t[8]=(...e)=>i.generateBlanlValuationForPreSigning&&i.generateBlanlValuationForPreSigning(...e))},"Generate Blank Valuation for Pre-Signing")])])])])}const ti=e=>((0,n.Qi)("data-v-0942edb1"),e=e(),(0,n.jt)(),e),oi={class:"row"},ai={class:"col-md-6"},ri={class:"form-group"},ni=ti((()=>(0,n.Lk)("label",{for:"sellerNameAddress"},[(0,n.Lk)("strong",null,"1. Name and Address of Seller (Block Letters)")],-1))),si=ti((()=>(0,n.Lk)("option",{value:"",disabled:""},"Select a Seller",-1))),ii=["value"],li={class:"form-group"},ci=["value"],ui={class:"col-md-6"},di={class:"form-group"},mi=ti((()=>(0,n.Lk)("label",{for:"buyerNameAddress"},[(0,n.Lk)("strong",null,"2(a) Name and Address of Buyer (Block Letters)")],-1))),hi=ti((()=>(0,n.Lk)("option",{value:"",disabled:""},"Select a Buyer",-1))),pi=["value"],yi={class:"form-group"},gi=["value"],fi={class:"row"},vi={class:"col-md-6"},bi={class:"form-group"},ki=ti((()=>(0,n.Lk)("label",{for:"declarantNameAddress"},[(0,n.Lk)("strong",null,"2(b) Name and Address of Declarant (Block Letters)")],-1))),Ci=ti((()=>(0,n.Lk)("option",{value:"",disabled:""},"Select a Declarant",-1))),Li=["value"],Di={class:"form-group"},_i=["value"],Ei=ti((()=>(0,n.Lk)("div",{class:"col-md-6"},null,-1))),Fi={class:"row"},Ti={class:"col-md-4"},Si={class:"form-group"},xi=ti((()=>(0,n.Lk)("label",{for:"termsOfDelivery",class:"form-label"},[(0,n.Lk)("strong",null,"3. Terms of Delivery (INCOTERM)")],-1))),Ii=ti((()=>(0,n.Lk)("option",{value:"",disabled:""},"Select an Incoterm",-1))),Ai=["value"],Oi={class:"col-md-4"},wi={class:"form-group"},Ni=ti((()=>(0,n.Lk)("label",{for:"invoiceNumber",class:"form-label"},[(0,n.Lk)("strong",null,"4. Number and Date of Invoice")],-1))),Pi={class:"col-md-4"},Ri={class:"form-group"},Vi=ti((()=>(0,n.Lk)("label",{for:"contractNumber",class:"form-label"},[(0,n.Lk)("strong",null,"5. Number and Date of Contract")],-1)));function Ui(e,t,o,a,s,i){return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",oi,[(0,n.Lk)("div",ai,[(0,n.Lk)("div",ri,[ni,(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":t[0]||(t[0]=e=>s.localData.sellerId=e),onChange:t[1]||(t[1]=e=>i.updateField("sellerNameAddress",e.target.value))},[si,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.localData.sellers,((e,t)=>((0,n.uX)(),(0,n.CE)("option",{key:t,value:e.id},(0,x.v_)(e.name),9,ii)))),128))],544),[[r.u1,s.localData.sellerId]])]),(0,n.Lk)("div",li,[(0,n.Lk)("textarea",{class:"form-control",id:"sellerNameAddress",rows:"4",onInput:t[2]||(t[2]=e=>i.updateField("sellerNameAddress",e.target.value)),required:"",readonly:"",value:i.selectedSeller},null,40,ci)]),(0,n.eW)('" ')]),(0,n.Lk)("div",ui,[(0,n.Lk)("div",di,[mi,(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":t[3]||(t[3]=e=>s.localData.buyerId=e),onChange:t[4]||(t[4]=e=>i.updateField("buyerNameAddress",e.target.value))},[hi,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.localData.buyers,((e,t)=>((0,n.uX)(),(0,n.CE)("option",{key:t,value:e.id},(0,x.v_)(e.name),9,pi)))),128))],544),[[r.u1,s.localData.buyerId]])]),(0,n.Lk)("div",yi,[(0,n.Lk)("textarea",{class:"form-control",id:"buyerNameAddress",rows:"4",onInput:t[5]||(t[5]=e=>i.updateField("buyerNameAddress",e.target.value)),required:"",readonly:"",value:i.selectedBuyer},null,40,gi)])])]),(0,n.Lk)("div",fi,[(0,n.Lk)("div",vi,[(0,n.Lk)("div",bi,[ki,(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":t[6]||(t[6]=e=>s.localData.declarantId=e),onChange:t[7]||(t[7]=e=>i.updateField("declarantNameAddress",e.target.value))},[Ci,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.localData.declarants,((e,t)=>((0,n.uX)(),(0,n.CE)("option",{key:t,value:e.id},(0,x.v_)(e.name),9,Li)))),128))],544),[[r.u1,s.localData.declarantId]])]),(0,n.Lk)("div",Di,[(0,n.Lk)("textarea",{class:"form-control",id:"declarantNameAddress",rows:"4",onInput:t[8]||(t[8]=e=>i.updateField("declarantNameAddress",e.target.value)),required:"",readonly:"",value:i.selectedDeclarant},null,40,_i)])]),Ei]),(0,n.Lk)("div",Fi,[(0,n.Lk)("div",Ti,[(0,n.Lk)("div",Si,[xi,(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":t[9]||(t[9]=e=>s.localData.termsOfDelivery=e),onChange:t[10]||(t[10]=e=>i.updateField("termsOfDelivery",e.target.value))},[Ii,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.incoterms,((e,t)=>((0,n.uX)(),(0,n.CE)("option",{key:t,value:e.code},(0,x.v_)(e.code)+" - "+(0,x.v_)(e.name),9,Ai)))),128))],544),[[r.u1,s.localData.termsOfDelivery]])])]),(0,n.Lk)("div",Oi,[(0,n.Lk)("div",wi,[Ni,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"invoiceNumber",placeholder:"e.g., 202313 2024/10/20","onUpdate:modelValue":t[11]||(t[11]=e=>s.localData.invoiceNumber=e),onInput:t[12]||(t[12]=e=>i.updateField("invoiceNumber",e.target.value)),required:""},null,544),[[r.Jo,s.localData.invoiceNumber]])])]),(0,n.Lk)("div",Pi,[(0,n.Lk)("div",Ri,[Vi,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"contractNumber",placeholder:"e.g., 123456 2024/10/22","onUpdate:modelValue":t[13]||(t[13]=e=>s.localData.contractNumber=e),onInput:t[14]||(t[14]=e=>i.updateField("contractNumber",e.target.value)),required:""},null,544),[[r.Jo,s.localData.contractNumber]])])])])])}var Bi={props:["customsDeclarationSectionOne","buyerIdProp"],name:"CustomsDeclarationSectionOne",mounted(){this.incoterms=ls()},data(){return{localData:this.customsDeclarationSectionOne,myBuyerId:this.buyerIdProp,incoterms:[]}},computed:{selectedSeller(){const e=this.localData.sellers.find((e=>e.id===this.localData.sellerId)),t=e?`${e.name} \n ${e.address}`:"";return t},selectedBuyer(){const e=this.localData.buyers.find((e=>e.id===this.localData.buyerId));return e?`${e.name} \n ${e.address}`:""},selectedDeclarant(){const e=this.localData.declarants.find((e=>e.id===this.localData.declarantId));return e?`${e.name} \n ${e.address}`:""},declarantStatus(){const e=this.declarants.find((e=>e.id===this.localData.declarantId));return e?e.status:""}},methods:{updateField(e,t){this.localData[e]=t,this.$emit("update-section-one",this.localData)},async getConfigurations(){console.log("Fetching sellers, buyers, and declarants"),Promise.all([ue(),ie(),De(),le(),me()]).then((([e,t,o,a,r])=>{this.localData.sellers=e,this.localData.buyers=t,console.log("Buyers:",t),this.localData.vessels=o,this.localData.declarants=a,this.countryList=r}))}},watch:{customsDeclarationSectionOne:{deep:!0,handler(e){this.localData={...e}}}}};const $i=(0,E.A)(Bi,[["render",Ui],["__scopeId","data-v-0942edb1"]]);var Mi=$i;const ji=e=>((0,n.Qi)("data-v-54aa40c3"),e=e(),(0,n.jt)(),e),Wi={class:"row"},Xi={class:"col-md-6"},Gi={class:"form-group"},Ji=ji((()=>(0,n.Lk)("label",null,[(0,n.Lk)("strong",null,"7 (a) Are the buyer and seller RELATED?")],-1))),qi={class:"form-check"},Yi=ji((()=>(0,n.Lk)("label",{for:"related-yes"},"YES",-1))),Hi=ji((()=>(0,n.Lk)("label",{for:"related-no"},"NO",-1))),zi={key:0},Ki=ji((()=>(0,n.Lk)("label",{for:"influencePrice"},[(0,n.Lk)("strong",null,"7 (b) Did the relationship INFLUENCE the price of the imported goods?")],-1))),Qi={class:"form-check"},Zi=ji((()=>(0,n.Lk)("label",{for:"influence-price-yes"},"YES",-1))),el=ji((()=>(0,n.Lk)("label",{for:"influence-price-no"},"NO",-1))),tl={key:1},ol=ji((()=>(0,n.Lk)("label",{for:"transactionValueApproximate"},[(0,n.Lk)("strong",null,"7 (c) Does the transaction value of the imported goods closely approximate to a value mentioned in Paragraph 3(2)(b)?")],-1))),al={class:"form-check"},rl=ji((()=>(0,n.Lk)("label",{for:"transaction-value-yes"},"YES",-1))),nl=ji((()=>(0,n.Lk)("label",{for:"transaction-value-no"},"NO",-1))),sl={key:2},il={class:"col-md-6"},ll={class:"form-group"},cl=ji((()=>(0,n.Lk)("label",{for:"restrictions"},[(0,n.Lk)("strong",null,"8 (a) Are there any RESTRICTIONS to the disposition or use of the goods?")],-1))),ul={class:"form-check"},dl=ji((()=>(0,n.Lk)("label",{for:"restrictions-yes"},"YES",-1))),ml=ji((()=>(0,n.Lk)("label",{for:"restrictions-no"},"NO",-1))),hl={key:0},pl=ji((()=>(0,n.Lk)("label",{for:"conditions"},[(0,n.Lk)("strong",null,"8 (b) Is the sale or price subject to some CONDITION or CONSIDERATION?")],-1))),yl={class:"form-check"},gl=ji((()=>(0,n.Lk)("label",{for:"conditions-yes"},"YES",-1))),fl=ji((()=>(0,n.Lk)("label",{for:"conditions-no"},"NO",-1))),vl={key:1},bl=ji((()=>(0,n.Lk)("label",{for:"royalties"},[(0,n.Lk)("strong",null,"9 (a) Are any ROYALTIES AND LICENCE FEES related to the imported goods payable?")],-1))),kl={class:"form-check"},Cl=ji((()=>(0,n.Lk)("label",{for:"royalties-yes"},"YES",-1))),Ll=ji((()=>(0,n.Lk)("label",{for:"royalties-no"},"NO",-1))),Dl={key:2},_l=ji((()=>(0,n.Lk)("label",{for:"royalties"},[(0,n.Lk)("strong",null,"9 (b) Is the sale subject to an arrangement under which part of the proceeds of any subsequent RESALE, DISPOSAL or USE accures directy or indirectly to the seller?")],-1))),El={class:"form-check"},Fl=ji((()=>(0,n.Lk)("label",{for:"resale-yes"},"YES",-1))),Tl=ji((()=>(0,n.Lk)("label",{for:"resale-no"},"NO",-1))),Sl={key:3},xl={class:"row"},Il={class:"col-md-6"},Al={class:"form-group"},Ol=ji((()=>(0,n.Lk)("label",{for:"signatory_name"},[(0,n.Lk)("strong",null,"Name of Signatory")],-1))),wl={class:"form-group"},Nl=ji((()=>(0,n.Lk)("label",{for:"date_signed"},[(0,n.Lk)("strong",null,"Date Signed")],-1))),Pl={class:"col-md-6"},Rl={class:"form-group"},Vl=ji((()=>(0,n.Lk)("label",{for:"status_of_signatory"},[(0,n.Lk)("strong",null,"Status of Signatory")],-1))),Ul={class:"form-group"},Bl=ji((()=>(0,n.Lk)("label",{for:"signatory_phone_number"},[(0,n.Lk)("strong",null,"Signatory Phone Number")],-1)));function $l(e,t,o,a,s,i){return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",Wi,[(0,n.Lk)("div",Xi,[(0,n.Lk)("div",Gi,[Ji,(0,n.Lk)("div",qi,[(0,n.bo)((0,n.Lk)("input",{type:"radio",id:"related-yes",value:"yes","onUpdate:modelValue":t[0]||(t[0]=e=>s.localData.relatedParties=e),onChange:t[1]||(t[1]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.XL,s.localData.relatedParties]]),Yi,(0,n.bo)((0,n.Lk)("input",{type:"radio",id:"related-no",value:"no","onUpdate:modelValue":t[2]||(t[2]=e=>s.localData.relatedParties=e),onChange:t[3]||(t[3]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.XL,s.localData.relatedParties]]),Hi]),"yes"===s.localData.relatedParties?((0,n.uX)(),(0,n.CE)("div",zi,[(0,n.bo)((0,n.Lk)("textarea",{class:"form-control",id:"related-notes",placeholder:"If 'YES', give details.","onUpdate:modelValue":t[4]||(t[4]=e=>s.localData.relatedDetails=e),rows:"3",onInput:t[5]||(t[5]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.relatedDetails]])])):(0,n.Q3)("",!0),Ki,(0,n.Lk)("div",Qi,[(0,n.bo)((0,n.Lk)("input",{type:"radio",id:"influence-price-yes",value:"yes","onUpdate:modelValue":t[6]||(t[6]=e=>s.localData.influencePrice=e),onChange:t[7]||(t[7]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.XL,s.localData.influencePrice]]),Zi,(0,n.bo)((0,n.Lk)("input",{type:"radio",id:"influence-price-no",value:"no","onUpdate:modelValue":t[8]||(t[8]=e=>s.localData.influencePrice=e),onChange:t[9]||(t[9]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.XL,s.localData.influencePrice]]),el]),"yes"===s.localData.influencePrice?((0,n.uX)(),(0,n.CE)("div",tl,[(0,n.bo)((0,n.Lk)("textarea",{class:"form-control",id:"influence-price-details",placeholder:"If 'YES', give details.","onUpdate:modelValue":t[10]||(t[10]=e=>s.localData.influencePriceDetails=e),rows:"3",onInput:t[11]||(t[11]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.influencePriceDetails]])])):(0,n.Q3)("",!0),ol,(0,n.Lk)("div",al,[(0,n.bo)((0,n.Lk)("input",{type:"radio",id:"transaction-value-yes",value:"yes","onUpdate:modelValue":t[12]||(t[12]=e=>s.localData.transactionValueApproximate=e),onChange:t[13]||(t[13]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.XL,s.localData.transactionValueApproximate]]),rl,(0,n.bo)((0,n.Lk)("input",{type:"radio",id:"transaction-value-no",value:"no","onUpdate:modelValue":t[14]||(t[14]=e=>s.localData.transactionValueApproximate=e),onChange:t[15]||(t[15]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.XL,s.localData.transactionValueApproximate]]),nl]),"yes"===s.localData.transactionValueApproximate?((0,n.uX)(),(0,n.CE)("div",sl,[(0,n.bo)((0,n.Lk)("textarea",{class:"form-control",id:"transaction-value-details",placeholder:"If 'YES', give details.","onUpdate:modelValue":t[16]||(t[16]=e=>s.localData.transactionValueDetails=e),rows:"3",onInput:t[17]||(t[17]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.transactionValueDetails]])])):(0,n.Q3)("",!0)])]),(0,n.Lk)("div",il,[(0,n.Lk)("div",ll,[cl,(0,n.Lk)("div",ul,[(0,n.bo)((0,n.Lk)("input",{type:"radio",id:"restrictions-yes",value:"yes","onUpdate:modelValue":t[18]||(t[18]=e=>s.localData.restrictions=e),onChange:t[19]||(t[19]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.XL,s.localData.restrictions]]),dl,(0,n.bo)((0,n.Lk)("input",{type:"radio",id:"restrictions-no",value:"no","onUpdate:modelValue":t[20]||(t[20]=e=>s.localData.restrictions=e),onChange:t[21]||(t[21]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.XL,s.localData.restrictions]]),ml]),"yes"===s.localData.restrictions?((0,n.uX)(),(0,n.CE)("div",hl,[(0,n.bo)((0,n.Lk)("textarea",{class:"form-control",id:"restrictions-details",placeholder:"Specify the nature of the restrictions.","onUpdate:modelValue":t[22]||(t[22]=e=>s.localData.restrictionsDetails=e),rows:"3",onInput:t[23]||(t[23]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.restrictionsDetails]])])):(0,n.Q3)("",!0),pl,(0,n.Lk)("div",yl,[(0,n.bo)((0,n.Lk)("input",{type:"radio",id:"conditions-yes",value:"yes","onUpdate:modelValue":t[24]||(t[24]=e=>s.localData.conditions=e),onChange:t[25]||(t[25]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.XL,s.localData.conditions]]),gl,(0,n.bo)((0,n.Lk)("input",{type:"radio",id:"conditions-no",value:"no","onUpdate:modelValue":t[26]||(t[26]=e=>s.localData.conditions=e),onChange:t[27]||(t[27]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.XL,s.localData.conditions]]),fl]),"yes"===s.localData.conditions?((0,n.uX)(),(0,n.CE)("div",vl,[(0,n.bo)((0,n.Lk)("textarea",{class:"form-control",id:"conditions-details",placeholder:"Specify the nature of the conditions or considerations.","onUpdate:modelValue":t[28]||(t[28]=e=>s.localData.conditionsDetails=e),rows:"3",onInput:t[29]||(t[29]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.conditionsDetails]])])):(0,n.Q3)("",!0),bl,(0,n.Lk)("div",kl,[(0,n.bo)((0,n.Lk)("input",{type:"radio",id:"royalties-yes",value:"yes","onUpdate:modelValue":t[30]||(t[30]=e=>s.localData.royalties=e),onChange:t[31]||(t[31]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.XL,s.localData.royalties]]),Cl,(0,n.bo)((0,n.Lk)("input",{type:"radio",id:"royalties-no",value:"no","onUpdate:modelValue":t[32]||(t[32]=e=>s.localData.royalties=e),onChange:t[33]||(t[33]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.XL,s.localData.royalties]]),Ll]),"yes"===s.localData.royalties?((0,n.uX)(),(0,n.CE)("div",Dl,[(0,n.bo)((0,n.Lk)("textarea",{class:"form-control",id:"royalties-details",placeholder:"Specify conditions and, if possible, amounts.","onUpdate:modelValue":t[34]||(t[34]=e=>s.localData.royaltiesDetails=e),rows:"3",onInput:t[35]||(t[35]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.royaltiesDetails]])])):(0,n.Q3)("",!0),_l,(0,n.Lk)("div",El,[(0,n.bo)((0,n.Lk)("input",{type:"radio",id:"resale-yes",value:"yes","onUpdate:modelValue":t[36]||(t[36]=e=>s.localData.resale_disposal_boolean=e),onChange:t[37]||(t[37]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.XL,s.localData.resale_disposal_boolean]]),Fl,(0,n.bo)((0,n.Lk)("input",{type:"radio",id:"resale-no",value:"no","onUpdate:modelValue":t[38]||(t[38]=e=>s.localData.resale_disposal_boolean=e),onChange:t[39]||(t[39]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.XL,s.localData.resale_disposal_boolean]]),Tl]),"yes"===s.localData.resale_disposal_boolean?((0,n.uX)(),(0,n.CE)("div",Sl,[(0,n.bo)((0,n.Lk)("textarea",{class:"form-control",id:"resale-details",placeholder:"Please Specify conditions","onUpdate:modelValue":t[40]||(t[40]=e=>s.localData.resaleDetails=e),rows:"3",onInput:t[41]||(t[41]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.resaleDetails]])])):(0,n.Q3)("",!0)])])]),(0,n.Lk)("div",xl,[(0,n.Lk)("div",Il,[(0,n.Lk)("div",Al,[Ol,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"signatory_name","onUpdate:modelValue":t[42]||(t[42]=e=>s.localData.signatory_name=e),onInput:t[43]||(t[43]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.signatory_name]])]),(0,n.Lk)("div",wl,[Nl,(0,n.bo)((0,n.Lk)("input",{type:"date",class:"form-control",id:"date_signed","onUpdate:modelValue":t[44]||(t[44]=e=>s.localData.date_signed=e),onInput:t[45]||(t[45]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.date_signed]])])]),(0,n.Lk)("div",Pl,[(0,n.Lk)("div",Rl,[Vl,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"status_of_signatory","onUpdate:modelValue":t[46]||(t[46]=e=>s.localData.status_of_signatory=e),onInput:t[47]||(t[47]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.status_of_signatory]])]),(0,n.Lk)("div",Ul,[Bl,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"signatory_phone_number","onUpdate:modelValue":t[48]||(t[48]=e=>s.localData.signatory_phone_number=e),onInput:t[49]||(t[49]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.signatory_phone_number]])])])])])}var Ml={props:["customsDeclarationSectionTwo","customsDeclarationSectionOne"],name:"CustomsDeclarationSectionTwo",data(){return{localData:this.customsDeclarationSectionTwo}},methods:{updateSection(){this.$emit("update-section-two",this.localData),console.log(this.localData)}},watch:{customsDeclarationSectionOne:{deep:!0,handler(e){const t=e.declarantId,o=e.declarants?.find((e=>e.id===t));console.log(o),this.localData.status_of_signatory=o?.status,this.localData.signatory_name=o?.name,this.localData.signatory_phone_number=o?.phoneContact}},customsDeclarationSectionTwo:{deep:!0,handler(e){this.localData={...e}}}}};const jl=(0,E.A)(Ml,[["render",$l],["__scopeId","data-v-54aa40c3"]]);var Wl=jl;const Xl=e=>((0,n.Qi)("data-v-ba557e10"),e=e(),(0,n.jt)(),e),Gl={class:"row"},Jl={class:"col-md-4"},ql={class:"form-group"},Yl=Xl((()=>(0,n.Lk)("label",{for:"netPrice"},[(0,n.Lk)("strong",null,"11(a) Net price in CURRENCY OF INVOICE")],-1))),Hl={class:"col-md-4"},zl={class:"form-group"},Kl=Xl((()=>(0,n.Lk)("label",{for:"invoiceCurrency",class:"form-label"},[(0,n.Lk)("strong",null,"Invoice Currency")],-1))),Ql=Xl((()=>(0,n.Lk)("option",{value:"",disabled:""},"Select a Currency",-1))),Zl=["value"],ec={class:"col-md-4"},tc={class:"form-group"},oc=Xl((()=>(0,n.Lk)("label",{for:"exchangeRate"},[(0,n.Lk)("strong",null,"Rate of exchange")],-1))),ac={class:"row"},rc={class:"col-md-6"},nc={class:"form-group"},sc=Xl((()=>(0,n.Lk)("label",{for:"indirectPayments"},[(0,n.Lk)("strong",null,"11(b) Indirect payments - see box 8 (b)")],-1))),ic={class:"col-md-6"},lc={class:"form-group"},cc=Xl((()=>(0,n.Lk)("label",{for:"totalNationalCurrency"},[(0,n.Lk)("strong",null,"12. TOTAL A in National Currency (TTS)")],-1))),uc={class:"row form-group"},dc=Xl((()=>(0,n.Lk)("label",{for:"costsIncurred"},[(0,n.Lk)("strong",null,"13. Costs incurred by the buyer")],-1))),mc={class:"col-md-4"},hc={class:"col-md-4"},pc={class:"col-md-4"},yc={class:"row"},gc=Xl((()=>(0,n.Lk)("label",{for:"goodsServices"},[(0,n.Lk)("strong",null,"14. Goods and services supplied by the buyer")],-1))),fc={class:"col-md-6"},vc={class:"col-md-6 form-group"},bc={class:"row form-group"},kc={class:"col-md-6"},Cc=Xl((()=>(0,n.Lk)("label",{for:"royalties"},[(0,n.Lk)("strong",null,"15. Royalties and licence fees")],-1))),Lc={class:"col-md-6"},Dc=Xl((()=>(0,n.Lk)("label",{for:"proceedsResale"},[(0,n.Lk)("strong",null,"16. Proceeds of any subsequent resale, disposal or use accruing to the seller")],-1))),_c={class:"row"},Ec=Xl((()=>(0,n.Lk)("label",{for:"costOfDelivery"},[(0,n.Lk)("strong",null,"17. Cost of delivery to Trinidad and Tobago")],-1))),Fc={class:"col-md-6"},Tc={class:"form-group"},Sc=Xl((()=>(0,n.Lk)("label",{for:"transport"},[(0,n.Lk)("strong",null,"Transport")],-1))),xc=["disabled"],Ic={class:"form-group"},Ac={class:"form-check"},Oc=Xl((()=>(0,n.Lk)("label",{class:"form-check-label",for:"includeTransportInTotal"},"Transportation cost included in the invoice total",-1))),wc={class:"form-group"},Nc=Xl((()=>(0,n.Lk)("label",{for:"loadingHandling"},[(0,n.Lk)("strong",null,"Loading and handling charges")],-1))),Pc={class:"col-md-6"},Rc={class:"form-group"},Vc=Xl((()=>(0,n.Lk)("label",{for:"insurance"},[(0,n.Lk)("strong",null,"Insurance")],-1))),Uc=["disabled"],Bc={class:"form-check"},$c=Xl((()=>(0,n.Lk)("label",{class:"form-check-label",for:"includeInsuranceInTotal"},"Insurance cost included in the invoice total",-1))),Mc={class:"form-group"},jc=Xl((()=>(0,n.Lk)("label",{for:"totalB"},[(0,n.Lk)("strong",null,"18. TOTAL B")],-1)));function Wc(e,t,o,a,s,i){return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",Gl,[(0,n.Lk)("div",Jl,[(0,n.Lk)("div",ql,[Yl,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"netPrice","onUpdate:modelValue":t[0]||(t[0]=e=>s.localData.netPrice=e),onInput:t[1]||(t[1]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.netPrice]])])]),(0,n.Lk)("div",Hl,[(0,n.Lk)("div",zl,[Kl,(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":t[2]||(t[2]=e=>s.localData.invoiceCurrency=e),onChange:t[3]||(t[3]=e=>i.updateField("invoiceCurrency",e.target.value))},[Ql,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.currencies,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e.code,value:e.code},(0,x.v_)(e.code)+" - "+(0,x.v_)(e.name),9,Zl)))),128))],544),[[r.u1,s.localData.invoiceCurrency]])])]),(0,n.Lk)("div",ec,[(0,n.Lk)("div",tc,[oc,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"exchangeRate","onUpdate:modelValue":t[4]||(t[4]=e=>s.localData.exchangeRate=e),onInput:t[5]||(t[5]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.exchangeRate]])])])]),(0,n.Lk)("div",ac,[(0,n.Lk)("div",rc,[(0,n.Lk)("div",nc,[sc,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"indirectPayments","onUpdate:modelValue":t[6]||(t[6]=e=>s.localData.indirectPayments=e),onInput:t[7]||(t[7]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.indirectPayments]])])]),(0,n.Lk)("div",ic,[(0,n.Lk)("div",lc,[cc,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",readonly:"",id:"totalNationalCurrency","onUpdate:modelValue":t[8]||(t[8]=e=>s.localData.totalNationalCurrency=e),onInput:t[9]||(t[9]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.totalNationalCurrency]])])])]),(0,n.Lk)("div",uc,[dc,(0,n.Lk)("div",mc,[(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control mb-2",id:"commissions","onUpdate:modelValue":t[10]||(t[10]=e=>s.localData.commissions=e),placeholder:"commissions, except buying commissions",onInput:t[11]||(t[11]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.commissions]])]),(0,n.Lk)("div",hc,[(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control mb-2",id:"brokerage","onUpdate:modelValue":t[12]||(t[12]=e=>s.localData.brokerage=e),placeholder:"brokerage",onInput:t[13]||(t[13]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.brokerage]])]),(0,n.Lk)("div",pc,[(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"containersPacking","onUpdate:modelValue":t[14]||(t[14]=e=>s.localData.containersPacking=e),placeholder:"containers and packing",onInput:t[15]||(t[15]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.containersPacking]])])]),(0,n.Lk)("div",yc,[gc,(0,n.Lk)("div",fc,[(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control mb-2",id:"materials","onUpdate:modelValue":t[16]||(t[16]=e=>s.localData.materials=e),placeholder:"materials, component, parts incorporated in the good",onInput:t[17]||(t[17]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.materials]]),(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control mb-2",id:"tools","onUpdate:modelValue":t[18]||(t[18]=e=>s.localData.tools=e),placeholder:"tools, dies, moulds used in the production",onInput:t[19]||(t[19]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.tools]])]),(0,n.Lk)("div",vc,[(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control mb-2",id:"materialsConsumed","onUpdate:modelValue":t[20]||(t[20]=e=>s.localData.materialsConsumed=e),placeholder:"materials consumed in the production",onInput:t[21]||(t[21]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.materialsConsumed]]),(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"engineering","onUpdate:modelValue":t[22]||(t[22]=e=>s.localData.engineering=e),placeholder:"engineering, development, artwork, design work",onInput:t[23]||(t[23]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.engineering]])])]),(0,n.Lk)("div",bc,[(0,n.Lk)("div",kc,[Cc,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"royalties","onUpdate:modelValue":t[24]||(t[24]=e=>s.localData.royalties=e),onInput:t[25]||(t[25]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.royalties]])]),(0,n.Lk)("div",Lc,[Dc,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"proceedsResale","onUpdate:modelValue":t[26]||(t[26]=e=>s.localData.proceedsResale=e),onInput:t[27]||(t[27]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.proceedsResale]])])]),(0,n.Lk)("div",_c,[Ec,(0,n.Lk)("div",Fc,[(0,n.Lk)("div",Tc,[Sc,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control mb-2",id:"transport",disabled:s.localData.transportIncluded,"onUpdate:modelValue":t[28]||(t[28]=e=>s.localData.transport=e),placeholder:"transport",onInput:t[29]||(t[29]=(...e)=>i.updateSection&&i.updateSection(...e))},null,40,xc),[[r.Jo,s.localData.transport]])]),(0,n.Lk)("div",Ic,[(0,n.Lk)("div",Ac,[(0,n.Lk)("input",{type:"checkbox",class:"form-check-input",id:"includeTransportInTotal",onChange:t[30]||(t[30]=(...e)=>i.handleTransportCheckboxChange&&i.handleTransportCheckboxChange(...e))},null,32),Oc])]),(0,n.Lk)("div",wc,[Nc,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control mb-2",id:"loadingHandling","onUpdate:modelValue":t[31]||(t[31]=e=>s.localData.loadingHandling=e),placeholder:"loading and handling charges",onInput:t[32]||(t[32]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.loadingHandling]])])]),(0,n.Lk)("div",Pc,[(0,n.Lk)("div",Rc,[Vc,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"insurance",disabled:s.localData.insuranceIncluded,"onUpdate:modelValue":t[33]||(t[33]=e=>s.localData.insurance=e),placeholder:"insurance",onInput:t[34]||(t[34]=(...e)=>i.updateSection&&i.updateSection(...e))},null,40,Uc),[[r.Jo,s.localData.insurance]])]),(0,n.Lk)("div",Bc,[(0,n.Lk)("input",{type:"checkbox",class:"form-check-input",id:"includeInsuranceInTotal",onChange:t[35]||(t[35]=(...e)=>i.handleInsuranceCheckboxChange&&i.handleInsuranceCheckboxChange(...e))},null,32),$c]),(0,n.Lk)("div",Mc,[jc,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",readonly:"",id:"totalB","onUpdate:modelValue":t[36]||(t[36]=e=>s.localData.totalB=e),onInput:t[37]||(t[37]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.totalB]])])])])])}var Xc={props:["customsDeclarationSectionThree"],name:"CustomsDeclarationSectionThree",data(){return{localData:this.customsDeclarationSectionThree,currencies:[{code:"USD",name:"United States Dollar"},{code:"EUR",name:"Euro"},{code:"JPY",name:"Japanese Yen"},{code:"GBP",name:"British Pound Sterling"},{code:"AUD",name:"Australian Dollar"},{code:"CAD",name:"Canadian Dollar"},{code:"CHF",name:"Swiss Franc"},{code:"CNY",name:"Chinese Yuan"},{code:"SEK",name:"Swedish Krona"},{code:"NZD",name:"New Zealand Dollar"},{code:"MXN",name:"Mexican Peso"},{code:"SGD",name:"Singapore Dollar"},{code:"HKD",name:"Hong Kong Dollar"},{code:"NOK",name:"Norwegian Krone"},{code:"KRW",name:"South Korean Won"},{code:"TRY",name:"Turkish Lira"},{code:"INR",name:"Indian Rupee"},{code:"RUB",name:"Russian Ruble"},{code:"BRL",name:"Brazilian Real"},{code:"ZAR",name:"South African Rand"},{code:"TTD",name:"Trinidad and Tobago Dollar"}]}},methods:{handleTransportCheckboxChange(e){this.localData.transportIncluded=e.target.checked,this.localData.transportIncluded&&(this.localData.transport=0),this.updateSection()},handleInsuranceCheckboxChange(e){this.localData.insuranceIncluded=e.target.checked,this.localData.insuranceIncluded&&(this.localData.insurance=0),this.updateSection()},updateField(e,t){this.localData[e]=t,this.updateSection()},updateSection(){this.$emit("update-section-three",this.localData),console.log(this.localData)}},watch:{customsDeclarationSectionThree:{deep:!0,handler(e){console.log(this.localData.transportIncluded,e.transportIncluded),this.localData={...e};let t=(parseFloat(this.localData.netPrice)+parseFloat(this.localData.indirectPayments))*parseFloat(this.localData.exchangeRate),o=parseFloat(this.localData.transport)+parseFloat(this.localData.loadingHandling)+parseFloat(this.localData.insurance);console.log(t,o),this.localData.totalNationalCurrency=parseFloat(t).toFixed(2),this.localData.totalB=parseFloat(o).toFixed(2)}}}};const Gc=(0,E.A)(Xc,[["render",Wc],["__scopeId","data-v-ba557e10"]]);var Jc=Gc;const qc=e=>((0,n.Qi)("data-v-2e2fd940"),e=e(),(0,n.jt)(),e),Yc={class:"row"},Hc={class:"col-md-6"},zc={class:"form-group"},Kc=qc((()=>(0,n.Lk)("label",{for:"costAfterArrival"},[(0,n.Lk)("strong",null,"19. Cost of transport after arrival at place of introduction on importation")],-1))),Qc={class:"form-group"},Zc=qc((()=>(0,n.Lk)("label",{for:"chargesAfterImportation"},[(0,n.Lk)("strong",null,"20. Charges for construction, erection, assembly, maintenance or technical assistance undertaken after importation")],-1))),eu={class:"form-group"},tu=qc((()=>(0,n.Lk)("label",{for:"otherCharges"},[(0,n.Lk)("strong",null,"21. Other charges (specify)")],-1))),ou={class:"col-md-6"},au={class:"form-group"},ru=qc((()=>(0,n.Lk)("label",{for:"customsDutiesTaxes"},[(0,n.Lk)("strong",null,"22. Customs duties and taxes payable in Trinidad and Tobago by reason of the importation or sale of the goods")],-1))),nu={class:"form-group"},su=qc((()=>(0,n.Lk)("label",{for:"totalC"},[(0,n.Lk)("strong",null,"23. TOTAL C")],-1))),iu={class:"form-group"},lu=qc((()=>(0,n.Lk)("label",{for:"valueDeclared"},[(0,n.Lk)("strong",null,"24. VALUE DECLARED (A + B - C)")],-1))),cu={class:"mb-3"},uu=qc((()=>(0,n.Lk)("p",null,[(0,n.Lk)("strong",null,"NOTES to Box 10")],-1))),du=qc((()=>(0,n.Lk)("p",null,"Declaration may be made by:",-1))),mu=qc((()=>(0,n.Lk)("ul",null,[(0,n.Lk)("li",null,"(a) the actual importer if an individual;"),(0,n.Lk)("li",null,"(b) a partner in the case of partnership;"),(0,n.Lk)("li",null,"(c) a director or the secretary in the case of an incorporated Company"),(0,n.Lk)("li",null,"(d) any employee duly authorised in writing by one of the aforementioned persons.")],-1))),hu=qc((()=>(0,n.Lk)("p",null," (*): Where amounts are payable in FOREIGN CURRENCY, indicate in this section the amount in foreign currency and the rate of exchange by reference to each relevant element and item. ",-1))),pu=qc((()=>(0,n.Lk)("label",{for:"foreignCurrency",class:"form-label"},"Reference",-1)));function yu(e,t,o,a,s,i){return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",Yc,[(0,n.Lk)("div",Hc,[(0,n.Lk)("div",zc,[Kc,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"costAfterArrival","onUpdate:modelValue":t[0]||(t[0]=e=>s.localData.costAfterArrival=e),onInput:t[1]||(t[1]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.costAfterArrival]])]),(0,n.Lk)("div",Qc,[Zc,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"chargesAfterImportation","onUpdate:modelValue":t[2]||(t[2]=e=>s.localData.chargesAfterImportation=e),onInput:t[3]||(t[3]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.chargesAfterImportation]])]),(0,n.Lk)("div",eu,[tu,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"otherCharges","onUpdate:modelValue":t[4]||(t[4]=e=>s.localData.otherCharges=e),onInput:t[5]||(t[5]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.otherCharges]])])]),(0,n.Lk)("div",ou,[(0,n.Lk)("div",au,[ru,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"customsDutiesTaxes","onUpdate:modelValue":t[6]||(t[6]=e=>s.localData.customsDutiesTaxes=e),onInput:t[7]||(t[7]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.customsDutiesTaxes]])]),(0,n.Lk)("div",nu,[su,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"totalC","onUpdate:modelValue":t[8]||(t[8]=e=>s.localData.totalC=e),onInput:t[9]||(t[9]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.totalC]])]),(0,n.Lk)("div",iu,[lu,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control",id:"valueDeclared","onUpdate:modelValue":t[10]||(t[10]=e=>s.localData.valueDeclared=e),onInput:t[11]||(t[11]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.valueDeclared]])])])]),(0,n.Lk)("div",cu,[uu,du,mu,hu,pu,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control mb-2",id:"foreignCurrency",placeholder:"11(a)","onUpdate:modelValue":t[12]||(t[12]=e=>s.localData.foreignCurrency=e),onInput:t[13]||(t[13]=(...e)=>i.updateSection&&i.updateSection(...e))},null,544),[[r.Jo,s.localData.foreignCurrency]])])])}var gu={props:["customsDeclarationSectionFour","customsDeclarationSectionThree"],name:"CustomsDeclarationSectionFour",data(){return{localData:this.customsDeclarationSectionFour}},methods:{updateSection(){this.$emit("update-section-four",this.localData)}},watch:{customsDeclarationSectionThree:{deep:!0,handler(e){let t=(parseFloat(e.netPrice)+parseFloat(e.indirectPayments))*parseFloat(e.exchangeRate),o=parseFloat(e.transport)+parseFloat(e.loadingHandling)+parseFloat(e.insurance),a=t+parseFloat(o)-parseFloat(this.localData.totalC);this.localData.valueDeclared=parseFloat(a).toFixed(2)}},customsDeclarationSectionFour:{deep:!0,handler(e){this.localData={...e};let t=(parseFloat(this.customsDeclarationSectionThree.netPrice)+parseFloat(this.customsDeclarationSectionThree.indirectPayments))*parseFloat(this.customsDeclarationSectionThree.exchangeRate),o=parseFloat(this.customsDeclarationSectionThree.transport)+parseFloat(this.customsDeclarationSectionThree.loadingHandling)+parseFloat(this.customsDeclarationSectionThree.insurance),a=parseFloat(this.localData.costAfterArrival)+parseFloat(this.localData.chargesAfterImportation)+parseFloat(this.localData.otherCharges)+parseFloat(this.localData.customsDutiesTaxes);this.localData.totalC=parseFloat(a).toFixed(2);let r=t+o-parseFloat(a).toFixed(2);this.localData.valueDeclared=r.toFixed(2)}}}};const fu=(0,E.A)(gu,[["render",yu],["__scopeId","data-v-2e2fd940"]]);var vu=fu,bu={name:"CustomsDeclarationForm",components:{CustomsDeclarationSectionOne:Mi,CustomsDeclarationSectionTwo:Wl,CustomsDeclarationSectionThree:Jc,CustomsDeclarationSectionFour:vu},props:{entryId:{type:[String,Number],required:!0},buyerId:{type:[String,Number],required:!0},sellerId:{type:[String,Number],required:!0},invoiceNumber:{type:[String,Number],required:!0},invoiceTotal:{type:[String,Number],required:!0},currency:{type:[String,Number],required:!0},rateOfExchange:{type:[String,Number],required:!0},freight:{type:[String,Number],required:!0},insurance:{type:[String,Number],required:!0}},mounted(){this.syncData(),this.currencies=ka(),this.getCountries()},data(){return{newC75:!0,entryNumber:"",currencies:[],countries:[],form:{customsDeclarationSectionOne:{sellers:[],buyers:[],declarants:[],sellerNameAddress:"",buyerNameAddress:"",declarantNameAddress:""},customsDeclarationSectionTwo:{date_signed:this.getCurrentDate(),relatedParties:"no",influencePrice:"no",transactionValueApproximate:"no",restrictions:"no",conditions:"no",royalties:"no",resale_disposal_boolean:"no"},customsDeclarationSectionThree:{totalNationalCurrency:0,netPrice:0,indirectPayments:0,exchangeRate:1,transport:0,loadingHandling:0,insurance:0,totalB:0,transportIncluded:!1,insuranceIncluded:!1,invoiceCurrency:"USD"},customsDeclarationSectionFour:{costAfterArrival:0,chargesAfterImportation:0,otherCharges:0,customsDutiesTaxes:0,totalC:0,valueDeclared:0}}}},methods:{save75Declaration(){this.newC75?this.create75Declaration():this.updateC75Declaration()},getCountries(){me().then((e=>{this.countries=e})).catch((e=>{console.error("Failed to get countries:",e)}))},getCurrentDate(){const e=new Date,t=String(e.getDate()).padStart(2,"0"),o=String(e.getMonth()+1).padStart(2,"0"),a=e.getFullYear();return`${a}-${o}-${t}`},async create75Declaration(){console.log("Saving C75 Declaration...");const e=this.form.customsDeclarationSectionOne.sellers.find((e=>e.id===this.form.customsDeclarationSectionOne.sellerId)),t=this.form.customsDeclarationSectionOne.buyers.find((e=>e.id===this.form.customsDeclarationSectionOne.buyerId)),o=this.form.customsDeclarationSectionOne.declarants.find((e=>e.id===this.form.customsDeclarationSectionOne.declarantId)),a=e?`${e.name} \n ${e.address}`:"",r=t?`${t.name} \n ${t.address}`:"",n=o?`${o.name} \n ${o.address}`:"",s=o?o.status:"",i=o?.phone?o.phone:"",l=o?o.name:"";xt("Saving Data...");const c={sellerNameAddress:a,buyerNameAddress:r,declarantNameAddress:n,incoTerms:void 0!==this.form.customsDeclarationSectionOne.termsOfDelivery?this.form.customsDeclarationSectionOne.termsOfDelivery:"",invoiceNumbersDates:void 0!==this.form.customsDeclarationSectionOne.invoiceNumber?this.form.customsDeclarationSectionOne.invoiceNumber:"",numberAndDateofContract:void 0!==this.form.customsDeclarationSectionOne.contractNumber?this.form.customsDeclarationSectionOne.contractNumber:"",sellerId:void 0!==this.form.customsDeclarationSectionOne.sellerId?this.form.customsDeclarationSectionOne.sellerId:"",buyerId:void 0!==this.form.customsDeclarationSectionOne.buyerId?this.form.customsDeclarationSectionOne.buyerId:"",declarantId:void 0!==this.form.customsDeclarationSectionOne.declarantId?this.form.customsDeclarationSectionOne.declarantId:"",relatedParties:void 0!==this.form.customsDeclarationSectionTwo.relatedParties?this.form.customsDeclarationSectionTwo.relatedParties:"",influencePrice:void 0!==this.form.customsDeclarationSectionTwo.influencePrice?this.form.customsDeclarationSectionTwo.influencePrice:"",transactionValueApproximate:void 0!==this.form.customsDeclarationSectionTwo.transactionValueApproximate?this.form.customsDeclarationSectionTwo.transactionValueApproximate:"",restrictions:void 0!==this.form.customsDeclarationSectionTwo.restrictions?this.form.customsDeclarationSectionTwo.restrictions:"",conditions:void 0!==this.form.customsDeclarationSectionTwo.conditions?this.form.customsDeclarationSectionTwo.conditions:"",royalties_boolean:void 0!==this.form.customsDeclarationSectionTwo.royalties?this.form.customsDeclarationSectionTwo.royalties:"",resale_disposal_boolean:void 0!==this.form.customsDeclarationSectionTwo.resale_disposal_boolean?this.form.customsDeclarationSectionTwo.resale_disposal_boolean:"",date_signed:void 0!==this.form.customsDeclarationSectionTwo.date_signed?this.form.customsDeclarationSectionTwo.date_signed:"",status_of_signatory:s,signatory_phone_number:i,signatory_name:l,net_invoice_price:void 0!==this.form.customsDeclarationSectionThree.netPrice?this.form.customsDeclarationSectionThree.netPrice:"",indirect_payment:void 0!==this.form.customsDeclarationSectionThree.indirectPayment?this.form.customsDeclarationSectionThree.indirectPayment:"",exchange_rate:void 0!==this.form.customsDeclarationSectionThree.exchangeRate?this.form.customsDeclarationSectionThree.exchangeRate:"",costs_commissions:void 0!==this.form.customsDeclarationSectionThree.commissions?this.form.customsDeclarationSectionThree.commissions:"",costs_brokerage:void 0!==this.form.customsDeclarationSectionThree.brokerage?this.form.customsDeclarationSectionThree.brokerage:"",costs_containers_packing:void 0!==this.form.customsDeclarationSectionThree.containersPacking?this.form.customsDeclarationSectionThree.containersPacking:"",goods_free_of_charge_materials:void 0!==this.form.customsDeclarationSectionThree.materials?this.form.customsDeclarationSectionThree.materials:"",goods_free_of_charge_tools:void 0!==this.form.customsDeclarationSectionThree.tools?this.form.customsDeclarationSectionThree.tools:"",goods_free_of_charge_materials_consumed:void 0!==this.form.customsDeclarationSectionThree.materialsConsumed?this.form.customsDeclarationSectionThree.materialsConsumed:"",goods_engineering_development:void 0!==this.form.customsDeclarationSectionThree.engineering?this.form.customsDeclarationSectionThree.engineering:"",royalties_license_fee:void 0!==this.form.customsDeclarationSectionThree.royalties?this.form.customsDeclarationSectionThree.royalties:"",procees_resale_disposal:void 0!==this.form.customsDeclarationSectionThree.proceedsResale?this.form.customsDeclarationSectionThree.proceedsResale:"",cost_delivery_transport:void 0!==this.form.customsDeclarationSectionThree.transport?this.form.customsDeclarationSectionThree.transport:"",cost_delivery_loading:void 0!==this.form.customsDeclarationSectionThree.loadingHandling?this.form.customsDeclarationSectionThree.loadingHandling:"",cost_delivery_insurance:void 0!==this.form.customsDeclarationSectionThree.insurance?this.form.customsDeclarationSectionThree.insurance:"",cost_transport_after_arrival:void 0!==this.form.customsDeclarationSectionFour.costAfterArrival?this.form.customsDeclarationSectionFour.costAfterArrival:"",charges_construction:void 0!==this.form.customsDeclarationSectionFour.chargesAfterImportation?this.form.customsDeclarationSectionFour.chargesAfterImportation:"",other_charges:void 0!==this.form.customsDeclarationSectionFour.otherCharges?this.form.customsDeclarationSectionFour.otherCharges:"",customs_duties_taxes:void 0!==this.form.customsDeclarationSectionFour.customsDutiesTaxes?this.form.customsDeclarationSectionFour.customsDutiesTaxes:"",entryId:this.entryId};try{console.log("Saving customs declaration..."),await ne(c),Tt(),Et("All Data Saved successfully!"),console.log("Customs declaration saved successfully."),this.newC75=!1}catch(u){St("Failed to save Entry Data!"),console.error("Failed to save the declaration:",u)}},prepareDeclarationObject(){console.log("Prearing Declaration Object...");const e=this.form.customsDeclarationSectionOne.sellers.find((e=>e.id===this.form.customsDeclarationSectionOne.sellerId)),t=this.form.customsDeclarationSectionOne.buyers.find((e=>e.id===this.form.customsDeclarationSectionOne.buyerId)),o=this.form.customsDeclarationSectionOne.declarants.find((e=>e.id===this.form.customsDeclarationSectionOne.declarantId)),a=e.country?this.countries.find((t=>t.code===e.country))?.name:"",r=t.country?this.countries.find((e=>e.code===t.country))?.name:"",n=e?`${e.name}\n${e.address}, ${a}`:"",s=t?`${t.name}\n${t.address}, ${r}`:"",i=o?`${o.name}\n${o.address}\n${o.country}`:"",l=o?o.status:"",c=o?.phoneContact?o.phoneContact:"",u=o?o.name:"",d=this.currencies.find((e=>e.code===this.form.customsDeclarationSectionThree.invoiceCurrency)),m=d?d.name:"",h=void 0!==this.form.customsDeclarationSectionThree.transport?this.form.customsDeclarationSectionThree.transport:0,p=void 0!==this.form.customsDeclarationSectionThree.exchangeRate?this.form.customsDeclarationSectionThree.exchangeRate:1,y=parseFloat(h);console.log("Transport Converted:",y,h,p),console.log("Selected Seller:",e),console.log("Selected Buyer:",t),console.log("Selected Declarant:",o);let g={sellerNameAddress:n,buyerNameAddress:s,declarantNameAddress:i,incoTerms:void 0!==this.form.customsDeclarationSectionOne.termsOfDelivery?this.form.customsDeclarationSectionOne.termsOfDelivery:"",invoiceNumbersDates:void 0!==this.form.customsDeclarationSectionOne.invoiceNumber?this.form.customsDeclarationSectionOne.invoiceNumber:"",numberAndDateofContract:void 0!==this.form.customsDeclarationSectionOne.contractNumber?this.form.customsDeclarationSectionOne.contractNumber:"",sellerId:void 0!==this.form.customsDeclarationSectionOne.sellerId?this.form.customsDeclarationSectionOne.sellerId:"",buyerId:void 0!==this.form.customsDeclarationSectionOne.buyerId?this.form.customsDeclarationSectionOne.buyerId:"",declarantId:void 0!==this.form.customsDeclarationSectionOne.declarantId?this.form.customsDeclarationSectionOne.declarantId:"",relatedParties:void 0!==this.form.customsDeclarationSectionTwo.relatedParties?this.form.customsDeclarationSectionTwo.relatedParties:"",influencePrice:void 0!==this.form.customsDeclarationSectionTwo.influencePrice?this.form.customsDeclarationSectionTwo.influencePrice:"",transactionValueApproximate:void 0!==this.form.customsDeclarationSectionTwo.transactionValueApproximate?this.form.customsDeclarationSectionTwo.transactionValueApproximate:"",restrictions:void 0!==this.form.customsDeclarationSectionTwo.restrictions?this.form.customsDeclarationSectionTwo.restrictions:"",conditions:void 0!==this.form.customsDeclarationSectionTwo.conditions?this.form.customsDeclarationSectionTwo.conditions:"",royalties_boolean:void 0!==this.form.customsDeclarationSectionTwo.royalties?this.form.customsDeclarationSectionTwo.royalties:"",resale_disposal_boolean:void 0!==this.form.customsDeclarationSectionTwo.resale_disposal_boolean?this.form.customsDeclarationSectionTwo.resale_disposal_boolean:"",date_signed:void 0!==this.form.customsDeclarationSectionTwo.date_signed?this.form.customsDeclarationSectionTwo.date_signed:"",status_of_signatory:l,signatory_phone_number:void 0!==c?c:"",signatory_name:u,net_invoice_price:void 0!==this.form.customsDeclarationSectionThree.netPrice?this.form.customsDeclarationSectionThree.netPrice:"",indirect_payment:void 0!==this.form.customsDeclarationSectionThree.indirectPayment?this.form.customsDeclarationSectionThree.indirectPayment:"",exchange_rate:void 0!==this.form.customsDeclarationSectionThree.exchangeRate?this.form.customsDeclarationSectionThree.exchangeRate:"",costs_commissions:void 0!==this.form.customsDeclarationSectionThree.commissions?this.form.customsDeclarationSectionThree.commissions:"",costs_brokerage:void 0!==this.form.customsDeclarationSectionThree.brokerage?this.form.customsDeclarationSectionThree.brokerage:"",costs_containers_packing:void 0!==this.form.customsDeclarationSectionThree.containersPacking?this.form.customsDeclarationSectionThree.containersPacking:"",goods_free_of_charge_materials:void 0!==this.form.customsDeclarationSectionThree.materials?this.form.customsDeclarationSectionThree.materials:"",goods_free_of_charge_tools:void 0!==this.form.customsDeclarationSectionThree.tools?this.form.customsDeclarationSectionThree.tools:"",goods_free_of_charge_materials_consumed:void 0!==this.form.customsDeclarationSectionThree.materialsConsumed?this.form.customsDeclarationSectionThree.materialsConsumed:"",goods_engineering_development:void 0!==this.form.customsDeclarationSectionThree.engineering?this.form.customsDeclarationSectionThree.engineering:"",royalties_license_fee:void 0!==this.form.customsDeclarationSectionThree.royalties?this.form.customsDeclarationSectionThree.royalties:"",procees_resale_disposal:void 0!==this.form.customsDeclarationSectionThree.proceedsResale?this.form.customsDeclarationSectionThree.proceedsResale:"",cost_delivery_transport:y.toFixed(2),cost_delivery_loading:void 0!==this.form.customsDeclarationSectionThree.loadingHandling?this.form.customsDeclarationSectionThree.loadingHandling:"",cost_delivery_insurance:void 0!==this.form.customsDeclarationSectionThree.insurance?this.form.customsDeclarationSectionThree.insurance:"",cost_transport_after_arrival:void 0!==this.form.customsDeclarationSectionFour.costAfterArrival?this.form.customsDeclarationSectionFour.costAfterArrival:"",charges_construction:void 0!==this.form.customsDeclarationSectionFour.chargesAfterImportation?this.form.customsDeclarationSectionFour.chargesAfterImportation:"",other_charges:void 0!==this.form.customsDeclarationSectionFour.otherCharges?this.form.customsDeclarationSectionFour.otherCharges:"",customs_duties_taxes:void 0!==this.form.customsDeclarationSectionFour.customsDutiesTaxes?this.form.customsDeclarationSectionFour.customsDutiesTaxes:"",transportIncluded:void 0!==this.form.customsDeclarationSectionThree.transportIncluded?this.form.customsDeclarationSectionThree.transportIncluded:"",insuranceIncluded:void 0!==this.form.customsDeclarationSectionThree.insuranceIncluded?this.form.customsDeclarationSectionThree.insuranceIncluded:"",invoice_currency:void 0!==m?m:"",referenceNumber:void 0!==this.$route.query.referenceNumber?this.$route.query.referenceNumber:""};return console.log(g),g},async generateBlanlValuationForPreSigning(){console.log("Generating C75 Declaration...");try{console.log("Generating customs declaration..."),xt("Generating customs declaration...");const e=await oe();Tt(),Et("Valuation Form Generated Successfully!");const t=window.URL.createObjectURL(new Blob([e],{type:"application/pdf"})),o=document.createElement("a");o.href=t;const a="Blank Valuation Form.pdf";o.setAttribute("download",a),document.body.appendChild(o),o.click(),o.remove()}catch(e){St("Failed to generate document!"),console.error("Failed to generate the declaration:",e)}},async generateC75Declaration(){const e=this.prepareDeclarationObject();if(""!==e.declarantNameAddress&&void 0!==e.declarantNameAddress){console.log("Generating C75 Declaration...");try{console.log("Generating customs declaration..."),xt("Generating customs declaration...");const t=await te(e),o=this.$route.query.referenceNumber;Tt(),Et("C75 Generated Successfully!");const a=window.URL.createObjectURL(new Blob([t],{type:"application/pdf"})),r=document.createElement("a");r.href=a;const n=`Customs Declaration - ${o}.pdf`;r.setAttribute("download",n),document.body.appendChild(r),r.click(),r.remove()}catch(t){St("Failed to save Entry Data!"),console.error("Failed to generate the declaration:",t)}}else St("Please select a declarant!")},async generatePreSignedValuation(){const e=this.prepareDeclarationObject();console.log("Generating C75 Declaration...");try{console.log("Generating customs declaration..."),xt("Generating customs declaration...");const t=await ae(e);Tt(),Et("C75 Generated Successfully!");const o=window.URL.createObjectURL(new Blob([t],{type:"application/pdf"})),a=document.createElement("a");a.href=o;const r=`Customs Declaration - ${this.entryNumber}.pdf`;a.setAttribute("download",r),document.body.appendChild(a),a.click(),a.remove()}catch(t){St("Failed to save Entry Data!"),console.error("Failed to generate the declaration:",t)}},async generatePreSignedValuationVersionTwo(){const e=this.prepareDeclarationObject();console.log("Generating C75 Declaration...");try{console.log("Generating customs declaration..."),xt("Generating customs declaration...");const t=await re(e);Tt(),Et("C75 Generated Successfully!");const o=window.URL.createObjectURL(new Blob([t],{type:"application/pdf"})),a=document.createElement("a");a.href=o;const r=`Customs Declaration - ${this.entryNumber}.pdf`;a.setAttribute("download",r),document.body.appendChild(a),a.click(),a.remove()}catch(t){St("Failed to save Entry Data!"),console.error("Failed to generate the declaration:",t)}},async updateC75Declaration(){console.log("Updating C75 Declaration...");const e=this.prepareDeclarationObject();try{xt("Saving Data..."),console.log("Updating customs declaration..."),await de(this.entryId,e),Tt(),Et("All Data Saved successfully!"),console.log("Customs declaration updated successfully.")}catch(t){St("Failed to save Entry Data!"),console.error("Failed to update the declaration:",t)}},async fetchCustomsDeclarations(){try{console.log("Getting C75 Entry...");const e=await se(this.entryId);if(206===e.status)return console.log("No C75 Entry found."),this.newC75=!0,this.form.customsDeclarationSectionThree.netPrice=e.data.invoiceTotal,this.form.customsDeclarationSectionOne.invoiceNumber=e.data.invoiceNumbers,this.form.customsDeclarationSectionThree.exchangeRate=e.data.rate_of_exchange,this.entryNumber=e.data.entry_number?e.data.entry_number:"",void console.log("Entry Number:",this.entryNumber);this.newC75=!1,console.log("C75 Entry found."),this.updateFields(e.data)}catch(e){console.error("Failed to get the C75 Entry:",e)}},syncData(){this.form.customsDeclarationSectionOne.buyerId=parseInt(this.$route.query.buyerId),this.form.customsDeclarationSectionOne.sellerId=parseInt(this.$route.query.sellerId),this.form.customsDeclarationSectionOne.invoiceNumber=this.$route.query.invoiceNumber,this.form.customsDeclarationSectionThree.netPrice=this.$route.query.invoiceTotal,this.form.customsDeclarationSectionThree.invoiceCurrency=this.$route.query.currency,this.form.customsDeclarationSectionThree.exchangeRate=this.$route.query.rateOfExchange,this.form.customsDeclarationSectionThree.transport=this.$route.query.freight,this.form.customsDeclarationSectionThree.insurance=this.$route.query.insurance,this.form.customsDeclarationSectionOne.termsOfDelivery=this.$route.query.incoTerms?this.$route.query.incoTerms:"",Promise.all([ue(),ie(),De(),le(),me()]).then((([e,t,o,a,r])=>{this.form.customsDeclarationSectionOne.sellers=e,this.form.customsDeclarationSectionOne.buyers=t,this.form.customsDeclarationSectionOne.vessels=o,this.form.customsDeclarationSectionOne.declarants=a,this.form.customsDeclarationSectionOne.countryList=r}))},convertTinyIntoString(e){return 1===e?"yes":"no"},updateFields(e){console.log("Updating fields..."),this.form.customsDeclarationSectionOne.sellerNameAddress=e.seller_name_and_address,this.form.customsDeclarationSectionOne.buyerNameAddress=e.buyer_name_address,this.form.customsDeclarationSectionOne.declarantNameAddress=e.declarant_name_address,this.form.customsDeclarationSectionOne.termsOfDelivery=e.terms_of_delivery,this.form.customsDeclarationSectionOne.contractNumber=e.name_date_contract,this.form.customsDeclarationSectionOne.invoiceNumber=e.invoiceNumbers,this.form.customsDeclarationSectionOne.sellerId=e.seller_id,this.form.customsDeclarationSectionOne.buyerId=e.buyer_id,this.form.customsDeclarationSectionOne.declarantId=e.declarant_id,this.form.customsDeclarationSectionTwo.relatedParties=this.convertTinyIntoString(e.related_parties_boolean),this.form.customsDeclarationSectionTwo.influencePrice=this.convertTinyIntoString(e.influence_price_boolean),this.form.customsDeclarationSectionTwo.transactionValueApproximate=this.convertTinyIntoString(e.transaction_value_approximate_boolean),this.form.customsDeclarationSectionTwo.restrictions=this.convertTinyIntoString(e.restrictions_disposal_boolean),this.form.customsDeclarationSectionTwo.conditions=this.convertTinyIntoString(e.sale_price_condition_boolean),this.form.customsDeclarationSectionTwo.royalties=this.convertTinyIntoString(e.royalties_boolean),this.form.customsDeclarationSectionTwo.resale_disposal_boolean=this.convertTinyIntoString(e.resale_disposal_boolean),this.form.customsDeclarationSectionTwo.date_signed=e.date_signed,this.form.customsDeclarationSectionTwo.status_of_signatory=e.status_of_signatory,this.form.customsDeclarationSectionTwo.signatory_phone_number=e.signatory_phone_number,this.form.customsDeclarationSectionTwo.signatory_name=e.signatory_name,this.form.customsDeclarationSectionThree.netPrice=e.invoiceTotal,this.form.customsDeclarationSectionThree.indirectPayment=e.indirect_payment,this.form.customsDeclarationSectionThree.exchangeRate=e.rate_of_exchange,this.form.customsDeclarationSectionThree.commissions=e.costs_commissions,this.form.customsDeclarationSectionThree.brokerage=e.costs_brokerage,this.form.customsDeclarationSectionThree.containersPacking=e.costs_containers_packing,this.form.customsDeclarationSectionThree.materials=e.goods_free_of_charge_materials,this.form.customsDeclarationSectionThree.tools=e.goods_free_of_charge_tools,this.form.customsDeclarationSectionThree.materialsConsumed=e.goods_free_of_charge_materials_consumed,this.form.customsDeclarationSectionThree.engineering=e.goods_engineering_development,this.form.customsDeclarationSectionThree.royalties=e.royalties_license_fee,this.form.customsDeclarationSectionThree.proceedsResale=e.procees_resale_disposal,this.form.customsDeclarationSectionThree.transport=e.cost_delivery_transport,this.form.customsDeclarationSectionThree.loadingHandling=e.cost_delivery_loading,this.form.customsDeclarationSectionThree.insurance=e.cost_delivery_insurance,this.form.customsDeclarationSectionFour.costAfterArrival=e.cost_transport_after_arrival,this.form.customsDeclarationSectionFour.chargesAfterImportation=e.charges_construction,this.form.customsDeclarationSectionFour.otherCharges=e.other_charges,this.form.customsDeclarationSectionFour.customsDutiesTaxes=e.customs_duties_taxes}}};const ku=(0,E.A)(bu,[["render",ei],["__scopeId","data-v-b59096ae"]]);var Cu=ku;const Lu=e=>((0,n.Qi)("data-v-b9f2e906"),e=e(),(0,n.jt)(),e),Du={class:"buyers-page"},_u=Lu((()=>(0,n.Lk)("h1",null,"Importers List",-1))),Eu={class:"row"},Fu={class:"col-md-2"},Tu={class:"form-group"},Su=Lu((()=>(0,n.Lk)("label",{for:"buyerName"},[(0,n.Lk)("strong",null,"Name")],-1))),xu={class:"col-md-2"},Iu={class:"form-group"},Au=Lu((()=>(0,n.Lk)("label",{for:"buyerAddressLine1"},[(0,n.Lk)("strong",null,"Address Line 1")],-1))),Ou={class:"col-md-2"},wu={class:"form-group"},Nu=Lu((()=>(0,n.Lk)("label",{for:"buyerAddressLine2"},[(0,n.Lk)("strong",null,"Address Line 2")],-1))),Pu={class:"col-md-2"},Ru={class:"form-group"},Vu=Lu((()=>(0,n.Lk)("label",{for:"buyerCity"},[(0,n.Lk)("strong",null,"City")],-1))),Uu={class:"col-md-2"},Bu={class:"form-group"},$u=Lu((()=>(0,n.Lk)("label",{for:"buyerCountry"},[(0,n.Lk)("strong",null,"Country")],-1))),Mu=Lu((()=>(0,n.Lk)("option",{disabled:"",value:""},"Please select one",-1))),ju=["value"],Wu={class:"col-md-1"},Xu={class:"form-group"},Gu=Lu((()=>(0,n.Lk)("label",{for:"tinNumber"},[(0,n.Lk)("strong",null,"TIN Number")],-1))),Ju=Lu((()=>(0,n.Lk)("div",{class:"col-md-1"},[(0,n.Lk)("div",{class:"form-group"},[(0,n.Lk)("p",null,[(0,n.Lk)("strong")]),(0,n.Lk)("button",{class:"btn btn-primary",type:"submit"},"Add Importer")])],-1))),qu={class:"table table-striped"},Yu=Lu((()=>(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",{scope:"col"},"#"),(0,n.Lk)("th",{scope:"col"},"Name"),(0,n.Lk)("th",{scope:"col"},"Address "),(0,n.Lk)("th",{scope:"col"},"Country"),(0,n.Lk)("th",{scope:"col"},"TIN Number")])],-1))),Hu={scope:"row"};function zu(e,t,o,a,s,i){return(0,n.uX)(),(0,n.CE)("div",Du,[_u,(0,n.Lk)("form",{class:"my-form-container",onSubmit:t[6]||(t[6]=(0,r.D$)(((...e)=>i.addBuyer&&i.addBuyer(...e)),["prevent"]))},[(0,n.Lk)("div",Eu,[(0,n.Lk)("div",Fu,[(0,n.Lk)("div",Tu,[Su,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"buyerName",placeholder:"Please Enter Buyer Name","onUpdate:modelValue":t[0]||(t[0]=e=>s.buyerName=e)},null,512),[[r.Jo,s.buyerName]])])]),(0,n.Lk)("div",xu,[(0,n.Lk)("div",Iu,[Au,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"buyerAddressLine1",placeholder:"Please Enter Address Line 1","onUpdate:modelValue":t[1]||(t[1]=e=>s.buyerAddressLine1=e)},null,512),[[r.Jo,s.buyerAddressLine1]])])]),(0,n.Lk)("div",Ou,[(0,n.Lk)("div",wu,[Nu,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"buyerAddressLine2",placeholder:"Please Enter Address Line 2","onUpdate:modelValue":t[2]||(t[2]=e=>s.buyerAddressLine2=e)},null,512),[[r.Jo,s.buyerAddressLine2]])])]),(0,n.Lk)("div",Pu,[(0,n.Lk)("div",Ru,[Vu,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"buyerCity",placeholder:"Please Enter City","onUpdate:modelValue":t[3]||(t[3]=e=>s.buyerCity=e)},null,512),[[r.Jo,s.buyerCity]])])]),(0,n.Lk)("div",Uu,[(0,n.Lk)("div",Bu,[$u,(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":t[4]||(t[4]=e=>s.buyerCountry=e),id:"buyerCountry"},[Mu,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(this.countries,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e.code,value:e.code},(0,x.v_)(e.code)+" - "+(0,x.v_)(e.name),9,ju)))),128))],512),[[r.u1,s.buyerCountry]])])]),(0,n.Lk)("div",Wu,[(0,n.Lk)("div",Xu,[Gu,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"tinNumber",placeholder:"TIN Number","onUpdate:modelValue":t[5]||(t[5]=e=>s.tinNumber=e)},null,512),[[r.Jo,s.tinNumber]])])]),Ju])],32),(0,n.Lk)("table",qu,[Yu,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.buyers,((e,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:t},[(0,n.Lk)("th",Hu,(0,x.v_)(t+1),1),(0,n.Lk)("td",null,(0,x.v_)(e.name),1),(0,n.Lk)("td",null,(0,x.v_)(e.address),1),(0,n.Lk)("td",null,(0,x.v_)(e.country),1),(0,n.Lk)("td",null,(0,x.v_)(e.taxIdentificationNumber),1)])))),128))])])])}var Ku={name:"BuyersPage",data(){return{buyers:[],countries:[],buyerName:"",buyerAddressLine1:"",buyerAddressLine2:"",buyerCity:"",buyerCountry:"",tinNumber:""}},methods:{async getBuyers(){this.buyers=await ie(),console.log(this.buyers)},async addBuyer(){const e={name:this.buyerName,address:`${this.buyerAddressLine1}\n${this.buyerAddressLine2}\n${this.buyerCity}`,country:this.buyerCountry,taxIdentificationNumber:this.tinNumber};xt("Adding Buyer"),he(e).then((()=>{this.buyerName="",this.buyerAddressLine1="",this.buyerAddressLine2="",this.buyerCity="",this.buyerCountry="",Et("Buyer Added Successfully"),this.getBuyers()})).catch((e=>{St("Failed to Add Buyer",e)}))},async getCountries(){this.countries=await me(),console.log("Countries",this.contries)}},mounted(){this.getBuyers(),this.getCountries()}};const Qu=(0,E.A)(Ku,[["render",zu],["__scopeId","data-v-b9f2e906"]]);var Zu=Qu;const ed=e=>((0,n.Qi)("data-v-3fc590de"),e=e(),(0,n.jt)(),e),td={class:"sellers-page"},od=ed((()=>(0,n.Lk)("h1",null,"Shippers List",-1))),ad={class:"row"},rd={class:"col-md-2"},nd={class:"form-group"},sd=ed((()=>(0,n.Lk)("label",{for:"sellerName"},[(0,n.Lk)("strong",null,"Name")],-1))),id={class:"col-md-2"},ld={class:"form-group"},cd=ed((()=>(0,n.Lk)("label",{for:"sellerAddressLine1"},[(0,n.Lk)("strong",null,"Address Line 1")],-1))),ud={class:"col-md-2"},dd={class:"form-group"},md=ed((()=>(0,n.Lk)("label",{for:"sellerAddressLine2"},[(0,n.Lk)("strong",null,"Address Line 2")],-1))),hd={class:"col-md-2"},pd={class:"form-group"},yd=ed((()=>(0,n.Lk)("label",{for:"sellerCity"},[(0,n.Lk)("strong",null,"City")],-1))),gd={class:"col-md-2"},fd={class:"form-group"},vd=ed((()=>(0,n.Lk)("label",{for:"sellerCountry"},[(0,n.Lk)("strong",null,"Country")],-1))),bd=ed((()=>(0,n.Lk)("option",{disabled:"",value:""},"Please select one",-1))),kd=["value"],Cd={class:"col-md-1"},Ld={class:"form-group"},Dd=ed((()=>(0,n.Lk)("label",{for:"tinNumber"},[(0,n.Lk)("strong",null,"TIN Number")],-1))),_d=ed((()=>(0,n.Lk)("div",{class:"col-md-1"},[(0,n.Lk)("div",{class:"form-group"},[(0,n.Lk)("p",null,[(0,n.Lk)("strong")]),(0,n.Lk)("button",{class:"btn btn-primary",type:"submit"},"Add Shipper")])],-1))),Ed={class:"table table-striped"},Fd=ed((()=>(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",{scope:"col"},"#"),(0,n.Lk)("th",{scope:"col"},"Name"),(0,n.Lk)("th",{scope:"col"},"Address "),(0,n.Lk)("th",{scope:"col"},"Country"),(0,n.Lk)("th",{scope:"col"},"TIN Number")])],-1))),Td={scope:"row"};function Sd(e,t,o,a,s,i){return(0,n.uX)(),(0,n.CE)("div",td,[od,(0,n.Lk)("form",{class:"my-form-container",onSubmit:t[6]||(t[6]=(0,r.D$)(((...e)=>i.addSeller&&i.addSeller(...e)),["prevent"]))},[(0,n.Lk)("div",ad,[(0,n.Lk)("div",rd,[(0,n.Lk)("div",nd,[sd,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"sellerName",placeholder:"Please Enter Seller Name","onUpdate:modelValue":t[0]||(t[0]=e=>s.sellerName=e)},null,512),[[r.Jo,s.sellerName]])])]),(0,n.Lk)("div",id,[(0,n.Lk)("div",ld,[cd,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"sellerAddressLine1",placeholder:"Please Enter Address Line 1","onUpdate:modelValue":t[1]||(t[1]=e=>s.sellerAddressLine1=e)},null,512),[[r.Jo,s.sellerAddressLine1]])])]),(0,n.Lk)("div",ud,[(0,n.Lk)("div",dd,[md,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"sellerAddressLine2",placeholder:"Please Enter Address Line 2","onUpdate:modelValue":t[2]||(t[2]=e=>s.sellerAddressLine2=e)},null,512),[[r.Jo,s.sellerAddressLine2]])])]),(0,n.Lk)("div",hd,[(0,n.Lk)("div",pd,[yd,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"sellerCity",placeholder:"Please Enter City","onUpdate:modelValue":t[3]||(t[3]=e=>s.sellerCity=e)},null,512),[[r.Jo,s.sellerCity]])])]),(0,n.Lk)("div",gd,[(0,n.Lk)("div",fd,[vd,(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":t[4]||(t[4]=e=>s.sellerCountry=e),id:"sellerCountry"},[bd,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(this.countries,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e.code,value:e.code},(0,x.v_)(e.code)+" - "+(0,x.v_)(e.name),9,kd)))),128))],512),[[r.u1,s.sellerCountry]])])]),(0,n.Lk)("div",Cd,[(0,n.Lk)("div",Ld,[Dd,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"tinNumber",placeholder:"TIN Number","onUpdate:modelValue":t[5]||(t[5]=e=>s.tinNumber=e)},null,512),[[r.Jo,s.tinNumber]])])]),_d])],32),(0,n.Lk)("table",Ed,[Fd,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.sellers,((e,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:t},[(0,n.Lk)("th",Td,(0,x.v_)(t+1),1),(0,n.Lk)("td",null,(0,x.v_)(e.name),1),(0,n.Lk)("td",null,(0,x.v_)(e.address),1),(0,n.Lk)("td",null,(0,x.v_)(e.country),1),(0,n.Lk)("td",null,(0,x.v_)(e.taxIdentificationNumber),1)])))),128))])])])}var xd={name:"SellersPage",data(){return{sellers:[],countries:[],sellerName:"",sellerAddressLine1:"",sellerAddressLine2:"",sellerCity:"",sellerCountry:"",tinNumber:""}},methods:{async getSellers(){this.sellers=await ue()},async getContries(){this.countries=await me()},async addSeller(){const e={name:this.sellerName,address:`${this.sellerAddressLine1}\n${this.sellerAddressLine2}\n${this.sellerCity}`,country:this.sellerCountry,phoneContact:"",emailContact:"",taxIdentificationNumber:this.tinNumber};console.log("Seller",e),xt("Saving Data..."),pe(e).then((()=>{this.sellerName="",this.sellerAddressLine1="",this.sellerAddressLine2="",this.sellerCity="",this.sellerCountry="",this.tinNumber="",this.getSellers(),Et("Shipper added successfully")})).catch((e=>{St("Error adding shipper",e)}))}},mounted(){this.getSellers(),this.getContries()}};const Id=(0,E.A)(xd,[["render",Sd],["__scopeId","data-v-3fc590de"]]);var Ad=Id;const Od=e=>((0,n.Qi)("data-v-9a803886"),e=e(),(0,n.jt)(),e),wd={class:"declarants-page"},Nd=Od((()=>(0,n.Lk)("h1",null,"Declarants List",-1))),Pd={class:"row"},Rd={class:"col-md-3"},Vd={class:"form-group"},Ud=Od((()=>(0,n.Lk)("label",{for:"declarantName"},[(0,n.Lk)("strong",null,"Name")],-1))),Bd={class:"col-md-3"},$d={class:"form-group"},Md=Od((()=>(0,n.Lk)("label",{for:"declarantAddressLine1"},[(0,n.Lk)("strong",null,"Address Line")],-1))),jd={class:"col-md-3"},Wd={class:"form-group"},Xd=Od((()=>(0,n.Lk)("label",{for:"declarantAddressLine2"},[(0,n.Lk)("strong",null,"Address Line 2")],-1))),Gd={class:"col-md-3"},Jd={class:"form-group"},qd=Od((()=>(0,n.Lk)("label",{for:"declarantCity"},[(0,n.Lk)("strong",null,"City")],-1))),Yd={class:"row"},Hd={class:"col-md-3"},zd={class:"form-group"},Kd=Od((()=>(0,n.Lk)("label",{for:"declarantCountry"},[(0,n.Lk)("strong",null,"Country")],-1))),Qd={class:"col-md-3"},Zd={class:"form-group"},em=Od((()=>(0,n.Lk)("label",{for:"declarantStatus"},[(0,n.Lk)("strong",null,"Status")],-1))),tm={class:"col-md-3"},om={class:"form-group"},am=Od((()=>(0,n.Lk)("label",{for:"declarantImporter"},[(0,n.Lk)("strong",null,"Importer")],-1))),rm=Od((()=>(0,n.Lk)("div",{class:"col-md-3"},[(0,n.Lk)("div",{class:"form-group"},[(0,n.Lk)("p",null,[(0,n.Lk)("strong")]),(0,n.Lk)("button",{class:"btn btn-primary",type:"submit"},"Add New Declarant")])],-1))),nm={class:"table table-striped"},sm=Od((()=>(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",{scope:"col"},"#"),(0,n.Lk)("th",{scope:"col"},"Name"),(0,n.Lk)("th",{scope:"col"},"Address "),(0,n.Lk)("th",{scope:"col"},"Country"),(0,n.Lk)("th",{scope:"col"},"Status")])],-1))),im={scope:"row"};function lm(e,t,o,a,s,i){const l=(0,n.g2)("v-select");return(0,n.uX)(),(0,n.CE)("div",wd,[Nd,(0,n.Lk)("form",{class:"my-form-container",onSubmit:t[7]||(t[7]=(0,r.D$)(((...e)=>i.addDeclarant&&i.addDeclarant(...e)),["prevent"]))},[(0,n.Lk)("div",Pd,[(0,n.Lk)("div",Rd,[(0,n.Lk)("div",Vd,[Ud,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"declarantName",placeholder:"Please Enter Declarant Name","onUpdate:modelValue":t[0]||(t[0]=e=>s.declarantName=e)},null,512),[[r.Jo,s.declarantName]])])]),(0,n.Lk)("div",Bd,[(0,n.Lk)("div",$d,[Md,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"declarantAddressLine1",placeholder:"Please Enter Address Line","onUpdate:modelValue":t[1]||(t[1]=e=>s.declarantAddressLine1=e)},null,512),[[r.Jo,s.declarantAddressLine1]])])]),(0,n.Lk)("div",jd,[(0,n.Lk)("div",Wd,[Xd,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"declarantAddressLine2",placeholder:"Please Enter Address Line 2","onUpdate:modelValue":t[2]||(t[2]=e=>s.declarantAddressLine2=e)},null,512),[[r.Jo,s.declarantAddressLine2]])])]),(0,n.Lk)("div",Gd,[(0,n.Lk)("div",Jd,[qd,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"declarantCity",placeholder:"Please Enter City","onUpdate:modelValue":t[3]||(t[3]=e=>s.declarantCity=e)},null,512),[[r.Jo,s.declarantCity]])])])]),(0,n.Lk)("div",Yd,[(0,n.Lk)("div",Hd,[(0,n.Lk)("div",zd,[Kd,(0,n.bF)(l,{modelValue:s.declarantCountry,"onUpdate:modelValue":t[4]||(t[4]=e=>s.declarantCountry=e),options:s.countries,label:"name",placeholder:"Select Country",searchable:!0,reduce:e=>e.name,filterable:!0},null,8,["modelValue","options","reduce"])])]),(0,n.Lk)("div",Qd,[(0,n.Lk)("div",Zd,[em,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"declarantStatus",placeholder:"Please Enter Status","onUpdate:modelValue":t[5]||(t[5]=e=>s.declarantStatus=e)},null,512),[[r.Jo,s.declarantStatus]])])]),(0,n.Lk)("div",tm,[(0,n.Lk)("div",om,[am,(0,n.bF)(l,{modelValue:s.declarantImporter,"onUpdate:modelValue":t[6]||(t[6]=e=>s.declarantImporter=e),options:s.importers,label:"name",placeholder:"Select Importer",searchable:!0,reduce:e=>e.id,filterable:!0},null,8,["modelValue","options","reduce"])])]),rm])],32),(0,n.Lk)("table",nm,[sm,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.declarants,((e,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:t},[(0,n.Lk)("th",im,(0,x.v_)(t+1),1),(0,n.Lk)("td",null,(0,x.v_)(e.name),1),(0,n.Lk)("td",null,(0,x.v_)(e.address),1),(0,n.Lk)("td",null,(0,x.v_)(e.country),1),(0,n.Lk)("td",null,(0,x.v_)(e.status),1)])))),128))])])])}var cm={name:"DeclarantsPage",data(){return{declarants:[],countries:[],importers:[],declarantName:"",declarantAddressLine1:"",declarantAddressLine2:"",declarantCity:"",declarantCountry:"",declarantStatus:"",declarantImporter:""}},methods:{async getDeclarants(){this.declarants=await le()},async getContries(){this.countries=await me()},async fetchImporters(){this.importers=await ie()},async addDeclarant(){if(!this.declarantName||!this.declarantAddressLine1||!this.declarantCity||!this.declarantCountry||!this.declarantStatus||!this.declarantImporter)return void St("All fields are required");const e={name:this.declarantName,address:`${this.declarantAddressLine1}\n${this.declarantAddressLine2}`,city:this.declarantCity,country:this.declarantCountry,status:this.declarantStatus,importerId:this.declarantImporter};xt("Adding Declarant..."),ye(e).then((()=>{this.declarantName="",this.declarantAddressLine1="",this.declarantAddressLine2="",this.declarantCity="",this.declarantCountry="",this.declarantStatus="",this.declarantImporter="",Et("Declarant Added Successfully"),this.getDeclarants()})).catch((e=>{St("Failed to Add Declarant",e)}))}},mounted(){this.getDeclarants(),this.getContries(),this.fetchImporters()}};const um=(0,E.A)(cm,[["render",lm],["__scopeId","data-v-9a803886"]]);var dm=um;const mm=e=>((0,n.Qi)("data-v-167acab7"),e=e(),(0,n.jt)(),e),hm={class:"vessels-page"},pm=mm((()=>(0,n.Lk)("h1",null,"Vessels List",-1))),ym={class:"row"},gm={class:"col-md-5"},fm={class:"form-group"},vm=mm((()=>(0,n.Lk)("label",{for:"vesselName"},[(0,n.Lk)("strong",null,"Vessel Name")],-1))),bm={class:"col-md-5"},km={class:"form-group"},Cm=mm((()=>(0,n.Lk)("label",{for:"imoNumber"},[(0,n.Lk)("strong",null,"IMO Number")],-1))),Lm=mm((()=>(0,n.Lk)("div",{class:"col-md-2"},[(0,n.Lk)("div",{class:"form-group"},[(0,n.Lk)("p",null,[(0,n.Lk)("strong")]),(0,n.Lk)("button",{class:"btn btn-primary",type:"submit"},"Add Vessel")])],-1))),Dm={class:"table table-striped"},_m=mm((()=>(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",{scope:"col"},"#"),(0,n.Lk)("th",{scope:"col"},"Vessel Name"),(0,n.Lk)("th",{scope:"col"},"IMO Number ")])],-1))),Em={scope:"row"};function Fm(e,t,o,a,s,i){return(0,n.uX)(),(0,n.CE)("div",hm,[pm,(0,n.Lk)("form",{class:"my-form-container",onSubmit:t[2]||(t[2]=(0,r.D$)(((...e)=>i.addVessel&&i.addVessel(...e)),["prevent"]))},[(0,n.Lk)("div",ym,[(0,n.Lk)("div",gm,[(0,n.Lk)("div",fm,[vm,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"vesselName",placeholder:"Please Enter Vessel Name","onUpdate:modelValue":t[0]||(t[0]=t=>e.vesselName=t)},null,512),[[r.Jo,e.vesselName]])])]),(0,n.Lk)("div",bm,[(0,n.Lk)("div",km,[Cm,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"imoNumber",placeholder:"Please Enter IMO Number","onUpdate:modelValue":t[1]||(t[1]=t=>e.imoNumber=t)},null,512),[[r.Jo,e.imoNumber]])])]),Lm])],32),(0,n.Lk)("table",Dm,[_m,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.vessels,((e,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:t},[(0,n.Lk)("th",Em,(0,x.v_)(t+1),1),(0,n.Lk)("td",null,(0,x.v_)(e.name),1),(0,n.Lk)("td",null,(0,x.v_)(e.imoNumber),1)])))),128))])])])}var Tm={name:"VesselsPage",data(){return{vessels:[]}},mounted(){this.getVessels()},methods:{async getVessels(){this.vessels=await De()},async addVessel(){const e={name:this.vesselName,imoNumber:this.imoNumber};xt("Adding Vessel"),_e(e).then((()=>{Et("Vessel Added Successfully"),this.vesselName="",this.imoNumber="",this.getVessels()})).catch((e=>{St("Failed to Add Vessel",e)}))}}};const Sm=(0,E.A)(Tm,[["render",Fm],["__scopeId","data-v-167acab7"]]);var xm=Sm;const Im=e=>((0,n.Qi)("data-v-b84d4fca"),e=e(),(0,n.jt)(),e),Am={class:"exchange-rates-page"},Om=Im((()=>(0,n.Lk)("h1",null,"Exchange Rates",-1))),wm={class:"row"},Nm={class:"col-md-3"},Pm={class:"form-group"},Rm=Im((()=>(0,n.Lk)("label",{for:"baseCurrency"},[(0,n.Lk)("strong",null,"Currency")],-1))),Vm={class:"col-md-3"},Um={class:"form-group"},Bm=Im((()=>(0,n.Lk)("label",{for:"rate"},[(0,n.Lk)("strong",null,"Exchange Rate")],-1))),$m={class:"col-md-3"},Mm={class:"form-group"},jm=Im((()=>(0,n.Lk)("label",{for:"effectiveDate"},[(0,n.Lk)("strong",null,"Effective Date")],-1))),Wm=Im((()=>(0,n.Lk)("div",{class:"col-md-3"},[(0,n.Lk)("div",{class:"form-group"},[(0,n.Lk)("p",null,[(0,n.Lk)("strong")]),(0,n.Lk)("button",{class:"btn btn-primary",type:"submit"},"Add Rate")])],-1))),Xm={class:"table table-striped"},Gm=Im((()=>(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",{scope:"col"},"#"),(0,n.Lk)("th",{scope:"col"},"Currency Code"),(0,n.Lk)("th",{scope:"col"},"Currency Name"),(0,n.Lk)("th",{scope:"col"},"Exchange Rate"),(0,n.Lk)("th",{scope:"col"},"Effective Date")])],-1))),Jm={scope:"row"};function qm(e,t,o,a,s,i){const l=(0,n.g2)("v-select");return(0,n.uX)(),(0,n.CE)("div",Am,[Om,(0,n.Lk)("form",{class:"my-form-container",onSubmit:t[3]||(t[3]=(0,r.D$)(((...e)=>i.addExchangeRate&&i.addExchangeRate(...e)),["prevent"]))},[(0,n.Lk)("div",wm,[(0,n.Lk)("div",Nm,[(0,n.Lk)("div",Pm,[Rm,(0,n.bF)(l,{options:s.currencies,modelValue:s.baseCurrency,"onUpdate:modelValue":t[0]||(t[0]=e=>s.baseCurrency=e),label:"name",id:"invoiceCurrency",searchable:!0,filterable:!0,reduce:e=>e.code},null,8,["options","modelValue","reduce"])])]),(0,n.Lk)("div",Vm,[(0,n.Lk)("div",Um,[Bm,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"rate",placeholder:"Please Enter Exchange Rate","onUpdate:modelValue":t[1]||(t[1]=e=>s.rate=e)},null,512),[[r.Jo,s.rate]])])]),(0,n.Lk)("div",$m,[(0,n.Lk)("div",Mm,[jm,(0,n.bo)((0,n.Lk)("input",{type:"date",class:"form-control",id:"effectiveDate",placeholder:"Please Enter Effective Date","onUpdate:modelValue":t[2]||(t[2]=e=>s.effectiveDate=e)},null,512),[[r.Jo,s.effectiveDate]])])]),Wm])],32),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.groupedExchangeRates,((e,t)=>((0,n.uX)(),(0,n.CE)("div",{key:t,class:"rate-group"},[(0,n.Lk)("h3",null,(0,x.v_)(t),1),(0,n.Lk)("table",Xm,[Gm,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e,((e,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:e.id},[(0,n.Lk)("th",Jm,(0,x.v_)(t+1),1),(0,n.Lk)("td",null,(0,x.v_)(e.base_currency),1),(0,n.Lk)("td",null,(0,x.v_)(e.base_currency_name),1),(0,n.Lk)("td",null,(0,x.v_)(e.rate),1),(0,n.Lk)("td",null,(0,x.v_)(i.formatDate(e.last_updated)),1)])))),128))])])])))),128))])}var Ym={name:"ExchangeRatesPage",data(){return{exchangeRates:[],currencies:[],baseCurrency:"",rate:"",effectiveDate:this.getCurrentDate()}},computed:{sortedExchangeRates(){return[...this.exchangeRates].sort(((e,t)=>new Date(t.last_updated)-new Date(e.last_updated)))},groupedExchangeRates(){return this.sortedExchangeRates.reduce(((e,t)=>{const o=this.formatDate(t.last_updated);return e[o]||(e[o]=[]),e[o].push(t),e}),{})}},methods:{getCurrentDate(){const e=new Date,t=e.getFullYear(),o=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getDate().toString().padStart(2,"0");return`${t}-${o}-${a}`},getCurrencyName(e){const t=this.currencies.find((t=>t.code===e));return t?t.name:""},modifyExchangeRates(){this.exchangeRates=this.exchangeRates.map((e=>({...e,base_currency_name:this.getCurrencyName(e.base_currency)})))},formatDate(e){return gt(e)},async getExchangeRates(){this.exchangeRates=await ke(),console.log("Exchange Rates",this.exchangeRates),this.modifyExchangeRates()},async addExchangeRate(){const e=new Date(this.effectiveDate).toISOString(),t={baseCurrency:this.baseCurrency,targetCurrency:"TTD",rate:this.rate,lastUpdated:e};console.log("Rate",t),Le(t).then((()=>{Et("Exchange Rate Added Successfully"),this.getExchangeRates(),this.baseCurrency="",this.rate=""})).catch((()=>{St("Failed to Add Exchange Rate")})),this.getExchangeRates()}},mounted(){this.getExchangeRates(),console.log("Currencies",ka()),this.currencies=ka()}};const Hm=(0,E.A)(Ym,[["render",qm],["__scopeId","data-v-b84d4fca"]]);var zm=Hm;function Km(e,t,o,a,r,s){const i=(0,n.g2)("VehicleEntry");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(i,{onSubmit:s.handleCreate},null,8,["onSubmit"])])}const Qm=(0,n.Lk)("h1",null,"Entry Details",-1),Zm={key:0},eh={key:1,class:"vehicle-form"},th={class:"row vehicleAttchments"},oh={class:"col-md-3"},ah=(0,n.Lk)("label",{for:"referenceNumber"},[(0,n.Lk)("strong",null,"Reference Number")],-1),rh={class:"col-md-3"},nh=(0,n.Lk)("label",{for:"commercialInvoiceAttachment"},[(0,n.Lk)("strong",null,"Commercial Invoice Attachment")],-1),sh={class:"col-md-3"},ih=(0,n.Lk)("label",{for:"attachedSheet"},[(0,n.Lk)("strong",null,"Attached Sheet")],-1),lh={class:"col-md-3"},ch=(0,n.Lk)("label",{for:"instructionSheet"},[(0,n.Lk)("strong",null,"Instruction Sheet")],-1),uh={class:"row"},dh={class:"col-md-3"},mh={class:"form-row"},hh={class:"row"},ph={class:"col-md-3"},yh=(0,n.Lk)("label",{for:"InvoiceNumber",class:"form-label"},[(0,n.Lk)("strong",null,"Invoice Number")],-1),gh={class:"col-md-3"},fh=(0,n.Lk)("label",{for:"supplierName",class:"form-label"},[(0,n.Lk)("strong",null,"Supplier Name")],-1),vh={class:"col-md-2"},bh=(0,n.Lk)("label",{for:"InvoiceDate",class:"form-label"},[(0,n.Lk)("strong",null,"Invoice Date")],-1),kh={class:"col-md-2"},Ch=(0,n.Lk)("label",{for:"invoiceCurrency",class:"form-label"},[(0,n.Lk)("strong",null,"Invoice Currency")],-1),Lh={class:"col-md-2"},Dh=(0,n.Lk)("label",{for:"rateOfExchange",class:"form-label"},[(0,n.Lk)("strong",null,"Rate of Exchange")],-1),_h=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Line #"),(0,n.Lk)("th",null,"Product Code"),(0,n.Lk)("th",null,"Description"),(0,n.Lk)("th",null,"THN Number"),(0,n.Lk)("th",null,"Duty"),(0,n.Lk)("th",null,"VAT"),(0,n.Lk)("th",null,"MVT"),(0,n.Lk)("th",null,"Quantity"),(0,n.Lk)("th",null,"Unit Price"),(0,n.Lk)("th",null,"Total Cost"),(0,n.Lk)("th"),(0,n.Lk)("th")])],-1),Eh=["onUpdate:modelValue"],Fh=["onUpdate:modelValue"],Th=["onUpdate:modelValue","onBlur","onInput"],Sh=["onUpdate:modelValue"],xh=["onUpdate:modelValue"],Ih=["onClick"],Ah={key:0},Oh=(0,n.Lk)("i",{class:"fas fa-chevron-up",style:{color:"gray"}},null,-1),wh=[Oh],Nh={key:1},Ph=(0,n.Lk)("i",{class:"fas fa-chevron-down",style:{color:"gray"}},null,-1),Rh=[Ph],Vh=(0,n.Lk)("i",{class:"fa fa-trash"},null,-1),Uh=[Vh],Bh={key:0},$h={colspan:"12"},Mh=(0,n.Lk)("label",{for:""},"Fuel Type",-1),jh=["onUpdate:modelValue"],Wh=(0,n.Lk)("option",{disabled:"",value:""},"Please select one",-1),Xh=["value"],Gh=(0,n.Lk)("label",{for:""},"Seat Position",-1),Jh=["onUpdate:modelValue"],qh=(0,n.Lk)("option",{disabled:"",value:""},"Please select one",-1),Yh=["value"],Hh=(0,n.Lk)("label",{for:"vehicleCode"},"Model Code",-1),zh=(0,n.Lk)("label",{for:"numberOfSeats"},"Number of Seats",-1),Kh=["onUpdate:modelValue"],Qh=(0,n.Lk)("label",{for:"numberOfDoors"},"Number of Doors",-1),Zh=["onUpdate:modelValue"],ep=(0,n.Lk)("label",{for:"tyreSize"},"Tyre Size",-1),tp=["onUpdate:modelValue"],op=(0,n.Lk)("label",{for:"engineDisplacement"},"Engine Displacement",-1),ap=["onUpdate:modelValue"],rp={key:1},np={colspan:"12"},sp=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Chassis Number"),(0,n.Lk)("th",null,"Engine Number"),(0,n.Lk)("th",null,"Exterior Color"),(0,n.Lk)("th",null,"Customer Name"),(0,n.Lk)("th",null,"Customer TIN"),(0,n.Lk)("th",null,"Broker Instructions"),(0,n.Lk)("th",null,"CPC Code"),(0,n.Lk)("th",null,"NPC Code"),(0,n.Lk)("th",null,"ED Number"),(0,n.Lk)("th",null,"Manufacture Year"),(0,n.Lk)("th")])],-1),ip=["onUpdate:modelValue"],lp=["onUpdate:modelValue"],cp=["onUpdate:modelValue"],up=["onUpdate:modelValue"],dp=["onUpdate:modelValue"],mp=["onUpdate:modelValue"],hp=(0,n.Lk)("option",{disabled:"",value:""},"Please select one",-1),pp=["value"],yp=["onUpdate:modelValue"],gp=["onClick"],fp=(0,n.Lk)("i",{class:"fa fa-trash"},null,-1),vp=[fp],bp={key:0},kp={colspan:"12"},Cp=["onClick"],Lp={class:"form-row"},Dp={class:"col-md-1"},_p=(0,n.Lk)("h3",null,"Footer Information",-1),Ep=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Invoice Total"),(0,n.Lk)("th",null,"Inland"),(0,n.Lk)("th",null,"Insurance"),(0,n.Lk)("th",null,"Other Charges"),(0,n.Lk)("th",null,"Final Total")])],-1),Fp=(0,n.Lk)("h3",null,"Calculated Check",-1),Tp=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Total Extension Prices"),(0,n.Lk)("th",null,"Number of Line Items"),(0,n.Lk)("th",null,"Matches Invoice Total?")])],-1),Sp=(0,n.Lk)("h3",null,"Entry Summary",-1),xp=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Number of Lines Read"),(0,n.Lk)("th",null,"Total Number of Vehicles Read"),(0,n.Lk)("th",null,"Total Invoices Value")])],-1),Ip={key:0};function Ap(e,t,o,a,s,i){const l=(0,n.g2)("CustomsEntryForm"),c=(0,n.g2)("v-select");return(0,n.uX)(),(0,n.CE)(n.FK,null,[Qm,1==o.isEditMode?((0,n.uX)(),(0,n.CE)("h2",Zm,"Reference Number: "+(0,x.v_)(this.referenceNumber),1)):(0,n.Q3)("",!0),0==o.isEditMode?((0,n.uX)(),(0,n.CE)("div",eh,[(0,n.Lk)("div",th,[(0,n.Lk)("div",oh,[ah,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>s.referenceNumber=e),placeholder:"Enter Reference Number"},null,512),[[r.Jo,s.referenceNumber]])]),(0,n.Lk)("div",rh,[nh,(0,n.Lk)("input",{type:"file",id:"commercialInvoiceAttachment",class:"form-control",onChange:t[1]||(t[1]=e=>i.handleFileChange(e,"commercialInvoice"))},null,32)]),(0,n.Lk)("div",sh,[ih,(0,n.Lk)("input",{type:"file",id:"attachedSheet",class:"form-control",onChange:t[2]||(t[2]=e=>i.handleFileChange(e,"attachedSheet"))},null,32)]),(0,n.Lk)("div",lh,[ch,(0,n.Lk)("input",{type:"file",id:"instructionSheet",class:"form-control",onChange:t[3]||(t[3]=e=>i.handleFileChange(e,"instructionSheet"))},null,32)])]),(0,n.Lk)("div",null,[(0,n.Lk)("div",uh,[(0,n.Lk)("div",dh,[(0,n.Lk)("button",{type:"button",class:"btn btn-primary upload-button",onClick:t[4]||(t[4]=(...e)=>i.readToyotaFiles&&i.readToyotaFiles(...e))},"Upload Files")])])])])):(0,n.Q3)("",!0),(0,n.bF)(l,{ref:"myCustomsForm",customsEntryForm:s.customsEntryForm,onUpdateCustomsEntryForm:t[5]||(t[5]=e=>s.customsEntryForm=e)},null,8,["customsEntryForm"]),(0,n.Lk)("div",mh,[(0,n.Lk)("div",hh,[(0,n.Lk)("div",ph,[yh,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[6]||(t[6]=e=>s.invoiceNumber=e),id:"InvoiceNumber",placeholder:"Please Enter Invoice Number"},null,512),[[r.Jo,s.invoiceNumber]])]),(0,n.Lk)("div",gh,[fh,(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[7]||(t[7]=e=>s.supplierName=e),id:"supplierName",placeholder:"Please Enter Supplier Name"},null,512),[[r.Jo,s.supplierName]])]),(0,n.Lk)("div",vh,[bh,(0,n.bo)((0,n.Lk)("input",{type:"date",class:"form-control","onUpdate:modelValue":t[8]||(t[8]=e=>s.invoiceDate=e),id:"InvoiceDate",placeholder:"Please Enter Invoice Date"},null,512),[[r.Jo,s.invoiceDate]])]),(0,n.Lk)("div",kh,[Ch,(0,n.bF)(c,{options:s.currencies,modelValue:s.invoiceCurrency,"onUpdate:modelValue":t[9]||(t[9]=e=>s.invoiceCurrency=e),label:"name",id:"invoiceCurrency",searchable:!0,filterable:!0,reduce:e=>e.code},null,8,["options","modelValue","reduce"])]),(0,n.Lk)("div",Lh,[Dh,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control","onUpdate:modelValue":t[10]||(t[10]=e=>s.rateOfExchange=e),id:"rateOfExchange",placeholder:"Please Enter Rate of Exchange"},null,512),[[r.Jo,s.rateOfExchange]])])])]),(0,n.Lk)("div",null,[(0,n.Lk)("table",null,[_h,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.vehicles,((o,a)=>((0,n.uX)(),(0,n.CE)(n.FK,{key:a},[(0,n.Lk)("tr",null,[(0,n.Lk)("td",null,(0,x.v_)(a+1),1),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":e=>o.vehicleCode=e,class:"form-control",placeholder:"Please Enter Vehicle Code"},null,8,Eh),[[r.Jo,o.vehicleCode]])]),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":e=>o.description=e,class:"form-control",placeholder:"Please Enter Vehicle Model"},null,8,Fh),[[r.Jo,o.description]])]),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":e=>o.thnNumber=e,onBlur:e=>i.updateTariffCode(o),onInput:e=>i.handleTariffInput(o),class:"form-control",placeholder:"Please Enter THN Number"},null,40,Th),[[r.Jo,o.thnNumber]])]),(0,n.Lk)("td",null,(0,x.v_)(o.icdCharge)+"% ",1),(0,n.Lk)("td",null,(0,x.v_)(o.vatCharge)+"% ",1),(0,n.Lk)("td",null,(0,x.v_)(o.mvtCharge)+"% ",1),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{type:"number","onUpdate:modelValue":e=>o.quantity=e,class:"form-control",placeholder:"Please Enter Quantity"},null,8,Sh),[[r.Jo,o.quantity]])]),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{type:"number","onUpdate:modelValue":e=>o.unitPrice=e,class:"form-control",placeholder:"Please Enter Unit Price"},null,8,xh),[[r.Jo,o.unitPrice]])]),(0,n.Lk)("td",null,(0,x.v_)(i.caclulateVehicleTotalCost(o)),1),(0,n.Lk)("td",null,[(0,n.Lk)("button",{onClick:e=>i.toggleDetails(a)},[s.expandedIndex===a?((0,n.uX)(),(0,n.CE)("span",Ah,wh)):((0,n.uX)(),(0,n.CE)("span",Nh,Rh))],8,Ih)]),(0,n.Lk)("td",null,[(0,n.Lk)("button",{class:"btn btn-danger",onClick:t[11]||(t[11]=t=>e.deleteRow(e.data,e.itemIndex))},Uh)])]),s.expandedIndex===a?((0,n.uX)(),(0,n.CE)("tr",Bh,[(0,n.Lk)("td",$h,[(0,n.Lk)("table",null,[(0,n.Lk)("tbody",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("td",null,[Mh,(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":e=>o.fuelType=e,class:"form-control"},[Wh,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.fuelTypeOptions,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e.code,value:e.code},(0,x.v_)(e.detail),9,Xh)))),128))],8,jh),[[r.u1,o.fuelType]])]),(0,n.Lk)("td",null,[Gh,(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":e=>o.seatPosition=e,class:"form-control"},[qh,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.seatPositionOptions,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e.code,value:e.code},(0,x.v_)(e.detail),9,Yh)))),128))],8,Jh),[[r.u1,o.seatPosition]])]),(0,n.Lk)("td",null,[Hh,(0,n.bF)(c,{options:s.vehicleCodeOptions,modelValue:o.modelCode,"onUpdate:modelValue":e=>o.modelCode=e,style:{width:"300px"},label:"description",searchable:!0,filterable:!0,placeholder:"Please select one",reduce:e=>e.code},null,8,["options","modelValue","onUpdate:modelValue","reduce"])]),(0,n.Lk)("td",null,[zh,(0,n.bo)((0,n.Lk)("input",{type:"number","onUpdate:modelValue":e=>o.numberOfSeats=e,class:"form-control",placeholder:"Please Enter Number of Seats"},null,8,Kh),[[r.Jo,o.numberOfSeats]])]),(0,n.Lk)("td",null,[Qh,(0,n.bo)((0,n.Lk)("input",{type:"number","onUpdate:modelValue":e=>o.numberOfDoors=e,class:"form-control",placeholder:"Please Enter Number of Doors"},null,8,Zh),[[r.Jo,o.numberOfDoors]])]),(0,n.Lk)("td",null,[ep,(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":e=>o.tyreSize=e,class:"form-control",placeholder:"Please Enter Tyre Size"},null,8,tp),[[r.Jo,o.tyreSize]])]),(0,n.Lk)("td",null,[op,(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":e=>o.engineDisplacement=e,class:"form-control",placeholder:"Please Enter Engine Displacement"},null,8,ap),[[r.Jo,o.engineDisplacement]])])])])])])])):(0,n.Q3)("",!0),s.expandedIndex===a?((0,n.uX)(),(0,n.CE)("tr",rp,[(0,n.Lk)("td",np,[(0,n.Lk)("table",null,[sp,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.details,(t=>((0,n.uX)(),(0,n.CE)("tr",{key:t.chassisNumber},[(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":e=>t.chassisNumber=e,class:"form-control",placeholder:"Please Enter Chassis Number"},null,8,ip),[[r.Jo,t.chassisNumber]])]),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":e=>t.engineNumber=e,class:"form-control",placeholder:"Please Enter Engine Number"},null,8,lp),[[r.Jo,t.engineNumber]])]),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":e=>t.exteriorColor=e,class:"form-control",placeholder:"Please Enter Exterior Color"},null,8,cp),[[r.Jo,t.exteriorColor]])]),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":e=>t.customerName=e,class:"form-control",placeholder:"Please Enter Customer Name"},null,8,up),[[r.Jo,t.customerName]])]),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":e=>t.customerTIN=e,class:"form-control",placeholder:"Please Enter Customer TIN"},null,8,dp),[[r.Jo,t.customerTIN]])]),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":e=>t.brokerInstructions=e,class:"form-control"},[hp,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.instructionList,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e.code,value:e.code},(0,x.v_)(e.code),9,pp)))),128))],8,mp),[[r.u1,t.brokerInstructions]])]),(0,n.Lk)("td",null,[(0,n.bF)(c,{options:i.availableCPCCodes,modelValue:t.cpcCode,"onUpdate:modelValue":e=>t.cpcCode=e,label:"code",id:"cpcCode",searchable:!0,filterable:!0,reduce:e=>e.cpcId},null,8,["options","modelValue","onUpdate:modelValue","reduce"])]),(0,n.Lk)("td",null,[(0,n.bF)(c,{modelValue:t.npcCode,"onUpdate:modelValue":e=>t.npcCode=e,options:s.npcCodeOptions,label:"code",id:"npcCode",searchable:!0,reduce:e=>e.code,filterable:!0,placeholder:"Select a NPC Code"},null,8,["modelValue","onUpdate:modelValue","options","reduce"])]),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":e=>t.edNumber=e,class:"form-control",placeholder:"Please Enter ED Number"},null,8,yp),[[r.Jo,t.edNumber]])]),(0,n.Lk)("td",null,[(0,n.bF)(c,{options:s.years,modelValue:t.manufactureYear,"onUpdate:modelValue":e=>t.manufactureYear=e,searchable:!0,filterable:!0,placeholder:"Please select one"},null,8,["options","modelValue","onUpdate:modelValue"])]),(0,n.Lk)("td",null,[(0,n.Lk)("button",{class:"btn btn-danger",onClick:t=>e.deleteRow(o.details,a)},vp,8,gp)])])))),128)),s.expandedIndex===a?((0,n.uX)(),(0,n.CE)("tr",bp,[(0,n.Lk)("td",kp,[(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e=>i.addChassis(o)},"Add Chassis",8,Cp)])])):(0,n.Q3)("",!0)])])])])):(0,n.Q3)("",!0)],64)))),128))])]),(0,n.Lk)("div",Lp,[(0,n.Lk)("div",Dp,[(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[12]||(t[12]=e=>i.addVehicle())}," Add Vehicle ")])]),_p,(0,n.Lk)("table",null,[Ep,(0,n.Lk)("tbody",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("td",{contenteditable:"true",onBlur:t[13]||(t[13]=e=>i.updateInvoiceData("invoiceTotal",e.target.innerText)),style:(0,x.Tr)(i.naStyle(s.invoiceTotal))},(0,x.v_)(s.invoiceTotal||0),37),(0,n.Lk)("td",{contenteditable:"true",onBlur:t[14]||(t[14]=e=>i.updateInvoiceData("inlandAmount",e.target.innerText)),style:(0,x.Tr)(i.naStyle(s.inlandAmount))},(0,x.v_)(s.inlandAmount||0),37),(0,n.Lk)("td",{contenteditable:"true",onBlur:t[15]||(t[15]=e=>i.updateInvoiceData("insuranceAmount",e.target.innerText)),style:(0,x.Tr)(i.naStyle(s.insuranceAmount))},(0,x.v_)(s.insuranceAmount||0),37),(0,n.Lk)("td",{contenteditable:"true",onBlur:t[16]||(t[16]=e=>i.updateInvoiceData("otherCharges",e.target.innerText)),style:(0,x.Tr)(i.naStyle(s.otherCharges))},(0,x.v_)(s.otherCharges||0),37),(0,n.Lk)("td",null,(0,x.v_)(i.finalTotal),1)])])]),Fp,(0,n.Lk)("table",null,[Tp,(0,n.Lk)("tbody",null,[(0,n.Lk)("tr",{style:(0,x.Tr)(i.compareInvoiceStyle())},[(0,n.Lk)("td",null,(0,x.v_)(i.calculatedTotal.toLocaleString("en-US",{minimumFractionDigits:2})),1),(0,n.Lk)("td",null,(0,x.v_)(s.vehicles.length),1),(0,n.Lk)("td",null,(0,x.v_)(i.compareInvoiceTotal()?"Yes":"No"),1)],4)])])]),(0,n.Lk)("div",null,[Sp,(0,n.Lk)("table",null,[xp,(0,n.Lk)("tbody",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("td",null,(0,x.v_)(s.vehicles.length),1),(0,n.Lk)("td",null,(0,x.v_)(i.totalNumberOfVehicles),1),(0,n.Lk)("td",null,(0,x.v_)(i.calculatedTotal.toLocaleString("en-US",{minimumFractionDigits:2})),1)])])]),(0,n.Lk)("table",null,[(0,n.Lk)("tbody",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("td",null,[(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[17]||(t[17]=e=>i.handleButtonClick())},(0,x.v_)(o.isEditMode?"Update Entry":"Create Entry"),1)]),(0,n.Lk)("td",null,[(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[18]||(t[18]=e=>i.generateWorksheet())},"Generate WorkSheet")]),(0,n.Lk)("td",null,[(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[19]||(t[19]=e=>i.generateAsycudaXML())},"Generate Asycuda XML")]),!0===o.isEditMode?((0,n.uX)(),(0,n.CE)("td",Ip,[(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[20]||(t[20]=e=>i.goToValuationFormPage())},"Generate Valuation Form")])):(0,n.Q3)("",!0)])])])])],64)}function Op(){const e=(0,$t.KR)([{code:"328FG18",description:"FORKLIFT TRUCK"},{code:"3BAAGH30W",description:"ALPHARD MINIVAN"},{code:"4RUNNER",description:"4RUNNER"},{code:"6FGL18",description:"FORKLIFT"},{code:"7FBEHU18",description:"ELECTRIC FORKLIFT"},{code:"7FDU70",description:"FORKLIFT"},{code:"86",description:"TOYOTA 86"},{code:"8FBE20U",description:"FORKLIFT"},{code:"8FGC45U",description:"2014 LPG FORKLIFT"},{code:"8FGCU 30",description:"TOYOTA FORKLIFT 8FGCU 30"},{code:"8FGCU25",description:"TOYOTA FORLIFT"},{code:"8FGU15",description:"TOYOTA FORKLIFT TRUCK"},{code:"AGYA",description:"HATCHBACK"},{code:"AQUA",description:"AQUA"},{code:"AURIS",description:"TOYOTA AURIS MOTOR CAR"},{code:"AVALON",description:"AVALON"},{code:"AXIO",description:"TOYOTA AXIO"},{code:"AXIO HYBRID",description:"TOYOTA AXIO GASOLINE ELECTRIC HYBRID"},{code:"AGYO",description:"TOYOTA AYGO"},{code:"B101RAGQSGJ",description:"5 DR RHD"},{code:"B101RAGQSGT",description:"5DR GAS RHD"},{code:"BB",description:"MINI MPV"},{code:"BZ4X PURE",description:"ELECTRIC SUV"},{code:"CALYA ASTRA",description:"SUV"},{code:"CAMRY",description:"CAMRY"},{code:"CAMRY HYBRID",description:"CAMRY HYBRID"},{code:"CAMRY SOLARA",description:"CAMRY SOLARA"},{code:"CELICA",description:"CELICA"},{code:"CHR",description:"CROSSOVER SUV"},{code:"CHR HYBRID",description:"C-HR HYBRID"},{code:"COASTER",description:"COASTER"},{code:"COMMUTER",description:"CUMMUTER PANEL VAN"},{code:"COROLLA",description:"COROLLA"},{code:"COROLLA CROSS",description:"COROLLA CROSS"},{code:"CRESSIDA",description:"CRESSIDA"},{code:"CROWN",description:"SEDAN"},{code:"CROWN HYBRID",description:"TOYOTA CROWN HYBRID"},{code:"DYNA",description:"DYNA TRUCK"},{code:"ECHO",description:"ECHO"},{code:"ESTIMA",description:"SEDAN"},{code:"FIELDER",description:"FIELDER"},{code:"FJ CRUISER",description:"FJ CRUISER"},{code:"FORKLIFT",description:"TOYOTA FORKLIFT"},{code:"FORTUNER",description:"FORTUNER"},{code:"GRAND",description:"GRAND HIACE"},{code:"GRANDE",description:"GRANDE ACE"},{code:"HARRIER",description:"HARRIER SUV"},{code:"HIACE",description:"HIACE"},{code:"HIGHLANDER",description:"HIGHLANDER"},{code:"HIGHLANDER HYBRID",description:"HIGHLANDER HYBRID"},{code:"HILUX",description:"HILUX SINGLE CAB"},{code:"HILUX DOUBLE",description:"HILUX DOUBLE CAB"},{code:"HINO",description:"HINO TRUCK"},{code:"IPSUM",description:"IPSUM"},{code:"IST",description:"IST"},{code:"LAND CRUISER",description:"LAND CRUISER"},{code:"LC200",description:"LC200"},{code:"LC70",description:"LC70"},{code:"LEXUS",description:"LEXUS"},{code:"LITEACE",description:"TOYOTA LITEACE"},{code:"MARKX",description:"MARKX"},{code:"MATRIX",description:"MATRIX"},{code:"MR2",description:"MR2"},{code:"NOAH",description:"NOAH MINIBUS"},{code:"PASEO",description:"PASEO"},{code:"PASSO",description:"TOYOTA PASSO"},{code:"PIXIS EPOCH",description:"PIXIS EPOCH"},{code:"PRADO",description:"PRADO"},{code:"PREVIA",description:"PREVIA"}]);return e}var wp={name:"VehicleEntry",components:{CustomsEntryForm:ds},props:{record:{type:Object,default:()=>pt()},vehicleDetails:{type:Array,default:()=>[]},isEditMode:{type:Boolean,default:!1},referenceNumberRecord:{type:String,default:""},invoiceDetails:{type:Object,default:()=>({supplierName:"",invoiceNumber:"",invoiceDate:"",invoiceCurrency:"",rateOfExchange:0,invoiceTotal:0,inlandAmount:0,insuranceAmount:0,otherCharges:0})}},watch:{record:{handler:function(e){this.customsEntryForm=e},deep:!0},vehicleDetails:{handler:function(e){this.vehicles=e},deep:!0},referenceNumberRecord:{handler:function(e){this.referenceNumber=e}},invoiceDetails:{handler:function(e){this.supplierName=e.supplierName,this.invoiceNumber=e.invoiceNumber,this.invoiceDate=e.invoiceDate,this.invoiceCurrency=e.invoiceCurrency,this.rateOfExchange=e.rateOfExchange,this.invoiceTotal=e.invoiceTotal,this.inlandAmount=e.inlandAmount,this.insuranceAmount=e.insuranceAmount,this.otherCharges=e.otherCharges},deep:!0},"customsEntryForm.waybillDate"(e){this.updateRates(e)}},emits:["submit"],data(){return{files:{commercialInvoice:null,attachedSheet:null,instructionSheet:null},referenceNumber:"",supplierName:"",invoiceNumber:"",invoiceDate:"",invoiceCurrency:"USD",rateOfExchange:0,invoiceTotal:0,inlandAmount:0,insuranceAmount:0,otherCharges:0,vehicles:[],seatPositionOptions:[{detail:"Left Hand Drive",code:"LHD"},{detail:"Right Hand Drive",code:"RHD"}],instructionList:[{detail:"Exempted but Bond then Extract",code:"EB"},{detail:"Exempted clear off the Port",code:"EC"},{detail:"Exempted from all duties and taxes but processing like a duty paid",code:"DP"},{detail:"Bond",code:"B"},{detail:"Duty Paid",code:"DP"}],fuelTypeOptions:[{detail:"CNG",code:"CNG"},{detail:"Diesel",code:"DSL"},{detail:"Electric",code:"ELC"},{detail:"Hybrid",code:"HYB"},{detail:"Petrol",code:"PET"},{detail:"Other",code:"OTH"},{detail:"Liquified Petroleum Gas",code:"LPG"}],vehicleCodeOptions:[],currencies:[],years:[],countries:[],npcCodeOptions:["000"],expandedIndex:null,customsEntryForm:{...this.record}}},mounted(){this.setYears(),this.vehicleCodeOptions=Op(),this.currencies=ka(),this.pageSetup(),this.fetchNpcCodes(),this.fetchCountries()},computed:{totalNumberOfVehicles(){return this.vehicles.reduce(((e,t)=>e+t.details.length),0)},finalTotal(){const e=parseFloat(this.invoiceTotal)||0,t=parseFloat(this.inlandAmount)||0,o=parseFloat(this.insuranceAmount)||0,a=parseFloat(this.otherCharges)||0,r=e+t+o+a;return r.toLocaleString("en-US",{minimumFractionDigits:2})},calculatedTotal(){const e=this.vehicles.reduce(((e,t)=>{const o=parseFloat(t.quantity)*parseFloat(t.unitPrice);return e+o}),0);return e},availableCPCCodes(){return this.customsEntryForm.regimeTypeOptions.flatMap((e=>e.cpcCodes))}},methods:{goToValuationFormPage(){const e=this.invoiceNumber;let t=this.invoiceTotal;"CIF"===this.customsEntryForm.incoTerms&&(t=parseFloat(this.invoiceTotal)+parseFloat(this.customsEntryForm.freightAmount)+parseFloat(this.customsEntryForm.insuranceAmount)+parseFloat(this.customsEntryForm.otherCharges)),this.$router.push({name:"CustomsDeclarationForm",query:{buyerId:this.customsEntryForm.importerId,sellerId:this.customsEntryForm.exporterId,invoiceNumber:e,invoiceTotal:t,currency:this.invoiceCurrency,rateOfExchange:this.rateOfExchange,freightAmount:this.customsEntryForm.freightAmount*this.customsEntryForm.freightRateOfExchange,insurance:this.customsEntryForm.insuranceAmount*this.customsEntryForm.insuranceRateOfExchange,incoTerms:this.customsEntryForm.incoTerms,referenceNumber:this.referenceNumber}})},handleTariffInput(e){console.log("Handling Tariff Input");const t=e.thnNumber;console.log("Value: ",t);const o=t.replace(/[^0-9]/g,"");console.log("Sanitized Value: ",o);const a=this.formatTariffCode(o);console.log("Formatted Value: ",a),e.thnNumber=a},formatTariffCode(e){let t="";for(let o=0;o<e.length;o++)4!==o&&6!==o&&8!==o||(t+="."),t+=e[o];return this.truncateString(t)},updateTariffCode(e){const t=e.thnNumber;if(console.log("Updating Tariff Code",t),void 0===t||null===t||0===t.trim().length||"N/A"===t)return e.icdCharge=0,e.vatCharge=0,void(e.mvtCharge=0);xe(t.replace(/\./g,"")).then((t=>{let o=t.charges["import custom duty"];const a=void 0===o?0:parseFloat(o[0].charge_amount);let r=t.charges["value added tax"];const n=void 0===r?0:parseFloat(r[0].charge_amount);let s=t.charges["motor vehicle tax"];const i=void 0===s?0:parseFloat(s[0].charge_amount);e.icdCharge=a,e.vatCharge=n,e.mvtCharge=i})).catch((t=>{console.error("Error fetching charges: ",t),e.icdCharge=0,e.vatCharge=0,e.mvtCharge=0}))},createBlankChassis(){const e={chassisNumber:"",engineNumber:"",exteriorColor:"",interiorColor:"",customerName:"",customerTIN:"",brokerInstructions:"DP",cpcCode:jt().defaultCPCCode,npcCode:"000",edNumber:"",quantity:1,grossWeight:0,netWeight:0,engineDisplacement:"",manufactureYear:"2000"};return e},updateRates(e){console.log("Updating Rates",e),Ce(e).then((e=>{console.log("Rates:",e),this.customsEntryForm.ratesOfExchange=e,""!=this.invoiceCurrency&&e.length>0&&(this.rateOfExchange=e.find((e=>e.base_currency===this.invoiceCurrency)).rate)}))},createBlankVehicle(){const e={vehicleCode:"",description:"",thnNumber:"",quantity:1,unitPrice:0,grossWeight:0,netWeight:0,curbWeight:0,engineDisplacement:"",fuelType:"PET",numberOfSeats:5,numberOfDoors:4,tyreSize:"",details:[this.createBlankChassis()]};return e},addVehicle(){this.vehicles.push(this.createBlankVehicle())},addChassis(e){e.details.push(this.createBlankChassis())},compareInvoiceStyle(){return this.compareInvoiceTotal()?{}:{backgroundColor:"red",color:"white"}},compareInvoiceTotal(){const e=parseFloat(this.invoiceTotal)||0,t=parseFloat(this.calculatedTotal)||0;return console.log("Invoice Total: ",e,"Calculated Total: ",t),console.log("Comparison: ",e===t),e===t},updateInvoiceData(e,t){this[e]=t},naStyle(e){return[null,void 0,"",!1].includes(e)?{backgroundColor:"yellow",color:"black"}:{}},caclulateVehicleTotalCost(e){let t=parseFloat(e.quantity)*parseFloat(e.unitPrice);return e.extensionPrice=t,parseFloat(t).toLocaleString("en-US",{minimumFractionDigits:2})},handleButtonClick(){this.isEditMode?(console.log("Updating Entry"),this.updateEntry()):(console.log("Saving Entry"),this.saveEntry())},sanitizeVehicleData(){return console.log("Sanitizing Vehicle Data"),console.log("Vehicles: ",this.vehicles),this.vehicles.flatMap((e=>e.details.map((t=>({description:e.description,quantity:t.quantity,unit_price:e.unitPrice,amount:parseFloat(t.quantity)*parseFloat(e.unitPrice),thn_code:e.thnNumber,product_code:e.vehicleCode,country_of_origin:"",cpcCode:t.cpcCode,npcCode:t.npcCode,vatApplicable:!0,grossWeight:e.grossWeight,netWeight:e.netWeight,curbWeight:e.curbWeight,fuelType:e.fuelType,seatPosition:e.seatPosition,modelCode:e.modelCode,numberOfSeats:e.numberOfSeats,numberOfDoors:e.numberOfDoors,tyreSize:e.tyreSize,engineDisplacement:e.engineDisplacement,chassisNumber:t.chassisNumber,engineNumber:t.engineNumber,exteriorColor:t.exteriorColor,customerName:t.customerName,tinNumber:t.customerTIN,brokerInstructions:t.brokerInstructions,edNumber:t.edNumber,manufactureYear:t.manufactureYear})))))},updateWaybill(){return{waybill_number:this.customsEntryForm.waybillNumber,waybill_date:this.customsEntryForm.waybillDate,mode_of_transport:this.customsEntryForm.modeOfTransport,freight_type:this.customsEntryForm.freightType,marks_and_numbers:this.customsEntryForm.marksAndNumbers,package_type:this.customsEntryForm.packageType,package_quantity:this.customsEntryForm.numberOfPackages,country_of_origin:this.customsEntryForm.country_of_origin,country_of_final_destination:this.customsEntryForm.countryOfFinalDestination,importer:this.customsEntryForm.importerId,shipper:this.customsEntryForm.exporterId,vessel:this.customsEntryForm.vesselId,port_of_discharge:this.customsEntryForm.portOfDischargeId,waybill_id:this.customsEntryForm.waybill_id}},updateEntryData(){return{net_weight:this.customsEntryForm.netWeight,gross_weight:this.customsEntryForm.grossWeight,entry_number:this.referenceNumber,freight_charge:this.customsEntryForm.freightAmount,declarant:this.customsEntryForm.declarantId,incoterms:this.customsEntryForm.incoTerms,regime_type:this.customsEntryForm.regimeType,deposit:this.customsEntryForm.depositAmount,container_charges:this.customsEntryForm.containerCharges,additional_charges:this.customsEntryForm.additionalCharges,local_fee:this.customsEntryForm.localFee,country_last_provenance:this.customsEntryForm.countryLastProvinance,trading_country:this.customsEntryForm.tradingCountry}},updateEntry(){const e=this.updateWaybill(),t=this.updateEntryData(),o={waybill:e,entry:t};console.log("Generating Payload",o),this.$emit("submit",o)},saveEntry(){const e={invoice_total:this.invoiceTotal,invoice_id:this.invoiceNumber,invoice_date:this.invoiceDate,subtotal:this.invoiceTotal,vendor_name:this.supplierName,total_tax:0,vendor_address:"",purchase_order:"",inland:this.inlandAmount,insurance:this.insuranceAmount,otherCharges:this.otherCharges,currency:this.invoiceCurrency,rate_of_exchange:this.rateOfExchange,invoice_items:this.sanitizeVehicleData()},t={referenceNumber:this.referenceNumber,waybillNumber:this.customsEntryForm.waybillNumber,waybillDate:this.customsEntryForm.waybillDate,modeOfTransport:this.customsEntryForm.modeOfTransport,freightType:this.customsEntryForm.freightType,marksAndNumbers:this.customsEntryForm.marksAndNumbers,countryOfOrigin:this.customsEntryForm.countryOfOrigin,countryOfFinalDestination:this.customsEntryForm.countryOfFinalDestination,countryLastProvenance:this.customsEntryForm.countryLastProvinance,tradingCountry:this.customsEntryForm.tradingCountry,kindOfPackage:this.customsEntryForm.packageType,numberOfPackages:this.customsEntryForm.numberOfPackages,totalCargoValue:this.customsEntryForm.totalCargoValue,freightCharge:this.customsEntryForm.freightAmount,insuranceAmount:this.customsEntryForm.insuranceAmount,otherCharges:this.customsEntryForm.otherCharges,rateOfExchange:this.customsEntryForm.rateOfExchange,netWeight:this.customsEntryForm.netWeight,grossWeight:this.customsEntryForm.grossWeight,declarant:this.customsEntryForm.declarantId,incoTerms:this.customsEntryForm.incoTerms,importer:this.customsEntryForm.importerId,shipper:this.customsEntryForm.exporterId,vessel:this.customsEntryForm.vesselId,portOfDischarge:this.customsEntryForm.portOfDischargeId,regimeType:this.customsEntryForm.regimeType,deposit:this.customsEntryForm.depositAmount,containerCharges:this.customsEntryForm.containerCharges,additionalCharges:this.customsEntryForm.additionalCharges,localFee:this.customsEntryForm.localFee,entryType:ms.VEHICLES,entryStatus:ps.STORED_AND_NOT_CLASSIFIED,invoiceList:[e]};console.log("Entry Data",t),this.$emit("submit",t)},pageSetup(){this.getRegimeTypes().then((()=>{this.setDefaults()}))},async fetchCountries(){try{const e=await fetch("https://restcountries.com/v3/all"),t=await e.json();this.countries=t.map((e=>({name:e.name.common,code:e.cca2})))}catch(e){console.error("Failed to fetch countries:",e)}},setDefaults(){const e=this.customsEntryForm.regimeTypeOptions.find((e=>e.regimeTypeCode===jt().defaultRegimeType));this.customsEntryForm.regimeType=e.regimeTypeId},setYears(){const e=(new Date).getFullYear(),t=1990;for(let o=t;o<=e;o++)this.years.push(o)},async fetchNpcCodes(){fe().then((e=>{this.npcCodeOptions=e,console.log("NPC Codes: ",e)}))},async getRegimeTypes(){return ge("TT").then((e=>{this.customsEntryForm.regimeTypeOptions=e}))},toggleDetails(e){this.expandedIndex=this.expandedIndex===e?null:e},handleFileChange(e,t){this.files[t]=e.target.files[0]},async readToyotaFiles(){const e=new FormData;e.append("commercialInvoice",this.files.commercialInvoice),e.append("pdfAttachments",this.files.attachedSheet),e.append("toyotaInstructionExcel",this.files.instructionSheet),e.append("reference_number","RLL76568"),xt("Uploading Files"),Pe(e).then((e=>{Et("Files Uploaded Successfully"),console.log(e),this.vehicles=this.convertVehicleData(e),this.customsEntryForm.totalCargoValue=this.invoiceTotal,console.log(this.compareInvoiceTotal())})).catch((e=>{St("Error Uploading Files"),console.error("Error details:",e),e.response&&(console.error("Error response data:",e.response.data),console.error("Error response status:",e.response.status),console.error("Error response headers:",e.response.headers))}))},convertVehicleData(e){const t=[],o=this.customsEntryForm.regimeTypeOptions.flatMap((e=>e.cpcCodes)),a=o.find((e=>e.code===jt().defaultCPCCode)).cpcId;return e.forEach((e=>{const o=e["model_code"],r={chassisNumber:e["chassis number"],engineNumber:e["Engine No"],exteriorColor:"",interiorColor:"",customerName:e["Customer Name"],customerTIN:e.customer_tin??"",brokerInstructions:e.instruction_code||"DP",cpcCode:a,npcCode:"000",edNumber:e["ED No"],quantity:e["quantity"],grossWeight:e["gross_weight"],netWeight:e["net_weight"],engineDisplacement:e["engine_displacement"],manufactureYear:e.manufacture_year??"2000"},n=e["model_code"],s=t.find((e=>e.vehicleCode===n));if(s)return s.quantity+=parseInt(e["quantity"]),void s.details.push(r);t.push({vehicleCode:o,description:e["description"],thnNumber:null===e["commodity_code"]?"":e["commodity_code"],quantity:1,unitPrice:e["Unit Price"],grossWeight:null===e["gross_weight"]?0:e["gross_weight"],netWeight:null===e["net_weight"]?0:e["net_weight"],curbWeight:null===e["curb_weight"]?0:e["curb_weight"],engineDisplacement:e["engine_displacement"],fuelType:this.fuelTypeOptions.find((t=>t.detail.toLowerCase()===e["fuel_type"].toLowerCase()))?.code||"PET",numberOfSeats:null===e["number_of_seats"]?5:e["number_of_seats"],numberOfDoors:null===e["number_of_doors"]?4:e["number_of_doors"],tyreSize:null===e["tyre_size"]?"":e["tyre_size"],modelCode:null===e["model_code"]?"":e["model_code"],seatPosition:null===e["seat_position"]?"RHD":e["seat_position"],details:[r]})})),console.log("Vehicle Data Read",t),t},commodityCodeChange(e){const t=e.target.innerText,o=t.replace(/[^0-9]/g,""),a=this.includeFullStops(o);e.target.innerText=a,this.moveCursorToEnd(e.target)},includeFullStops(e){let t="";for(let o=0;o<e.length;o++)4!==o&&6!==o&&8!==o||(t+="."),t+=e[o];return this.truncateString(t)},getChargeData(){let e=[];return this.vehicles.forEach((t=>{const o=xe(t.thnNumber.replace(/\./g,"")).then((e=>{console.log(e);let o=at(e.charges,!0);t.commodity={code:t.thnNumber.replace(/\./g,""),id:e.id,charges:o},console.log("Vehicle Commodity",t.commodity)})).catch((e=>(Tt(),St(`The following commodity code does not exist on Asycuda - ${t.thnNumber}. Please update this and try again. `),console.error("Error details:",e),Promise.reject(e))));e.push(o)})),Promise.all(e)},generateAsycudaXML(){console.log("Generating Asycuda XML"),xt("Generating Asycuda XML");const e=this.customsEntryForm.ports.find((e=>e.id===this.customsEntryForm.portOfDischargeId));console.log("Selected Port: ",e);const t=this.customsEntryForm.importers.find((e=>e.id===this.customsEntryForm.importerId)),o=this.customsEntryForm.exporters.find((e=>e.id===this.customsEntryForm.exporterId)),a=this.customsEntryForm.declarants.find((e=>e.id===this.customsEntryForm.declarantId)),r=this.countries.find((e=>e.code===this.customsEntryForm.countryOfOrigin)),n=st(this.vehicles,this.availableCPCCodes),s=void 0==this.customsEntryForm.regimeType?"":this.customsEntryForm.regimeTypeCode?.slice(0,2),i=void 0==this.customsEntryForm.regimeType?"":this.customsEntryForm.regimeTypeCode?.slice(2),l={exworks:this.invoiceTotal,rate_of_exchange:this.rateOfExchange,supplementary_charges_and_deductions:{internal_freight:this.inlandAmount,insurance:this.insuranceAmount,other:this.otherCharges,deductions:0},line_items:n},c={reference_number:"RLL7656",group_items:!0,waybill:{number:this.customsEntryForm.waybillNumber,external_freight:this.customsEntryForm.freightAmount,insurance:void 0==this.customsEntryForm.insuranceAmount?0:this.customsEntryForm.insuranceAmount,other_charges:void 0==this.customsEntryForm.otherCharges?0:this.customsEntryForm.otherCharges,importer:{name:t?.name,tax_identification_number:void 0==t.taxIdentificationNumber?"":t.taxIdentificationNumber},exporter:{name:`${o?.name}\n${o?.address}`,tax_identification_number:void 0==o.taxIdentificationNumber?"":o.taxIdentificationNumber},declarant:{name:a?.name,tax_identification_number:void 0==a.taxIdentificationNumber?"":a.taxIdentificationNumber},mode_of_transport:"Ocean"===this.customsEntryForm.modeOfTransport?"1":"Air"===this.customsEntryForm.modeOfTransport?"4":"",container_flag:!1,vessel:this.customsEntryForm.vesselName,country_of_origin:this.customsEntryForm.countryOfOrigin,country_of_destination:void 0==this.customsEntryForm.countryOfFinalDestination?"":this.customsEntryForm.countryOfFinalDestination,number_of_packages:this.customsEntryForm.numberOfPackages+"",type_of_declaration:s,general_procedural_code:i,office_of_destination:e.asycudaCode,country_last_provinance:this.customsEntryForm.countryLastProvinance,trading_country:this.customsEntryForm.tradingCountry,country_export:this.customsEntryForm.countryOfOrigin,delivery_terms:this.customsEntryForm.incoTerms,delivery_terms_place:this.customsEntryForm.countryOfOrigin,place_of_terms:r?.name,local_currency:"TTD",office_of_entry:e.asycudaCode,location_of_goods:""},invoices:[l]};console.log("Request Data",c),Fe(c).then((e=>{Tt(),Et("Asycuda XML ZIP File Generated Successfully!");const t=window.URL.createObjectURL(new Blob([e],{type:"application/zip"})),o=document.createElement("a"),a="Asycuda-XML.zip";o.href=t,o.setAttribute("download",a),document.body.appendChild(o),o.click(),o.remove()})).catch((()=>{St("Error Generating Asycuda XML")}))},generateWorksheet(){console.log("Generating Worksheet"),xt("Generating Worksheet"),this.getChargeData().then((()=>{const e=et("RLL7656","TT","Ramnarine Rampersad","BR0285",this.customsEntryForm.regimeTypeCode,this.customsEntryForm.importerName,this.customsEntryForm.importerTaxIdentificationNumber,this.customsEntryForm.exporterName,this.customsEntryForm.exporterTaxIdentificationNumber,this.customsEntryForm.vesselName,this.customsEntryForm.portOfDischargeName,this.customsEntryForm.depositAmount,this.customsEntryForm.containerCharges,this.customsEntryForm.additionalCharges,this.customsEntryForm.localFee,this.customsEntryForm.freightAmount,this.customsEntryForm.insuranceAmount,this.customsEntryForm.otherCharges,this.customsEntryForm.freightCurrency,this.customsEntryForm.freightRateOfExchange,this.customsEntryForm.insuranceCurrency,this.customsEntryForm.insuranceRateOfExchange,this.customsEntryForm.otherChargesCurrency,this.customsEntryForm.otherChargesRateOfExchange),t=it(this.vehicles,this.availableCPCCodes);console.log("Vehicle Lines",t);const o={name:this.invoiceNumber,supplier:this.supplierName,exworks:parseFloat(this.invoiceTotal),invoice_currency:this.invoiceCurrency,cif_foreign_currency:0,cif_local_currency:0,rate_of_exchange:this.rateOfExchange,supplementary_charges_and_deductions:{internal_freight:parseFloat(this.inlandAmount),insurance:this.insuranceAmount,other:this.otherCharges,deductions:0},line_items:t};e.invoices=[o],console.log("Worksheet Object",e),Te(e).then((e=>{Tt(),Et("Worksheet Generated Successfully!");const t=window.URL.createObjectURL(new Blob([e],{type:"application/zip"})),o=document.createElement("a"),a="Worksheet.zip";o.href=t,o.setAttribute("download",a),document.body.appendChild(o),o.click(),o.remove()})).catch((()=>{St("Error Generating Worksheet")}))})).catch((()=>{St("Error Generating Worksheet")}))},truncateString(e){return e.length>14?e.substring(0,14):e},moveCursorToEnd(e){const t=document.createRange(),o=window.getSelection();t.selectNodeContents(e),t.collapse(!1),o.removeAllRanges(),o.addRange(t)}}};const Np=(0,E.A)(wp,[["render",Ap]]);var Pp=Np,Rp={components:{VehicleEntry:Pp},methods:{async handleCreate(e){try{xt("Saving your Entry..."),Q(e).then((e=>{console.log("Entry created successfully:",e),Tt(),Et("Entry created successfully")})).catch((e=>{console.error("Failed to create the Entry:",e),St("Failed to create the Entry. Please try again.")}))}catch(t){console.error("Failed to create the invoice:",t),St("Failed to create the Entry. Please try again.")}}}};const Vp=(0,E.A)(Rp,[["render",Km]]);var Up=Vp;function Bp(e,t,o,a,r,s){const i=(0,n.g2)("VehicleEntry");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(i,{record:r.record,vehicleDetails:r.vehicleDetails,invoiceDetails:r.invoiceDetails,referenceNumberRecord:r.referenceNumberRecord,isEditMode:!0,onSubmit:s.handleEdit},null,8,["record","vehicleDetails","invoiceDetails","referenceNumberRecord","onSubmit"])])}var $p={components:{VehicleEntry:Pp},data(){return{entryId:"",waybillId:"",record:pt(),vehicleDetails:[],invoiceDetails:{supplierName:"",invoiceNumber:"",invoiceDate:"",invoiceCurrency:"",rateOfExchange:0,invoiceTotal:0,inlandAmount:0,insuranceAmount:0,otherCharges:0},referenceNumberRecord:""}},mounted(){this.entryId=this.$route.params.entryId,this.fetchEntryDetails(),this.getRegimeTypes(),this.fetchPorts()},methods:{async fetchEntryDetails(){console.log("Fetching details for entry ID:",this.entryId),xt("Fetching Entry details...");try{const e=Z(this.entryId),t=ee(this.entryId),[o,a]=await Promise.all([e,t]);Tt(),Et("Entry details fetched successfully"),console.log("Entry details:",o),this.record=pt(),this.record.incotermsList=ls(),this.record.modeOfTransportOOptions=Wt(),this.record.packageTypes=Mt(),this.record.importerId=o.importer,this.record.exporterId=o.shipper,this.record.waybillNumber=o.waybill_number,this.record.modeOfTransport=o.mode_of_transport,this.record.freightType=o.freight_type,this.record.vesselId=o.vessel,this.record.portOfDischargeId=o.port_of_discharge,this.record.netWeight=o.net_weight,this.record.grossWeight=o.gross_weight,this.record.numberOfPackages=o.package_quantity,this.record.packageType=o.package_type,this.record.marksAndNumbers=o.marks_and_numbers,this.record.totalCargoValue=o.invoice_total??0,this.record.freightAmount=o.freight_charge??0,this.record.insuranceAmount=o.insurance_amount??0,this.record.otherCharges=o.other_charges??0,this.record.rateOfExchange=o.rate_of_exchange,this.record.countryOfOrigin=o.country_of_origin,this.record.countryOfFinalDestination=o.country_of_final_destination,this.record.regimeType=o.regimeType,this.record.regimeTypeCode=o.regimeTypeCode,this.record.depositAmount=o.deposit??0,this.record.containerCharges=o.container_charges??0,this.record.additionalCharges=o.additional_charges??0,this.record.localFee=o.local_fee??0,this.record.declarantId=o.declarant,this.record.incoTerms=o.incoterms,this.record.countryLastProvinance=o.country_last_provenance,this.record.tradingCountry=o.trading_country,this.fetchPorts(),console.log("Commercial Invoice details:",a),this.vehicleDetails=this.processVehicleData(a[0].lines),this.invoiceDetails={supplierName:a[0].supplier_name,invoiceNumber:a[0].invoice_number,invoiceDate:a[0].invoice_date,invoiceCurrency:a[0].currency,rateOfExchange:a[0].rate_of_exchange,invoiceTotal:a[0].invoice_total,inlandAmount:a[0].inland,insuranceAmount:a[0].insurance,otherCharges:a[0].other_charges},this.referenceNumberRecord=o.entry_number,this.waybillId=o.waybill_id,console.log("Vehicle details:",this.vehicleDetails)}catch(e){console.error("Failed to fetch the Entry details:",e),St("Failed to fetch the Entry details. Please try again.")}},async getRegimeTypes(){return ge("TT").then((e=>{this.record.regimeTypeOptions=e}))},async fetchPorts(){return be().then((e=>{this.record.ports=e}))},processVehicleData(e){const t=[];return e.forEach((e=>{const o=e["product_code"],a={chassisNumber:e.chassis_number,engineNumber:e.engine_number,exteriorColor:e.exterior_color,customerName:e.customer_name??"",customerTIN:e.customer_tin??"",brokerInstructions:e.broker_instructions,cpcCode:e.cpc_code,npcCode:e.npc_code,edNumber:e.ed_number,quantity:e.quantity,grossWeight:e.gross_weight??0,netWeight:e.net_weight??0,engineDisplacement:e.engine_displacement,manufactureYear:e.manufacture_year??"2000",engine_number:e.engine_number},r=e["product_code"],n=t.find((e=>e.vehicleCode===r));if(n)return n.quantity+=parseInt(e["quantity"]),void n.details.push(a);t.push({vehicleCode:o,description:e.description,thnNumber:null===e["tariff_code"]?"":e["tariff_code"],quantity:1,unitPrice:null===e.unit_price?0:e.unit_price,grossWeight:null===e["gross_weight"]?0:e["gross_weight"],netWeight:null===e["net_weight"]?0:e["net_weight"],curbWeight:null===e["curb_weight"]?0:e["curb_weight"],engineDisplacement:e["engine_displacement"],fuelType:null===e["fuel_type"]?"":e["fuel_type"],numberOfSeats:null===e["number_of_seats"]?5:e["number_of_seats"],numberOfDoors:null===e["number_of_doors"]?4:e["number_of_doors"],tyreSize:null===e["tyre_size"]?"":e["tyre_size"],modelCode:null===e["model_code"]?"":e["model_code"],seatPosition:null===e["seat_position"]?"RHD":e["seat_position"],details:[a]})})),t},mapResponseToRecord(e){return{exporters:[],importers:[],vessels:[],ports:[],declarants:[],incotermsList:ls(),modeOfTransportOOptions:Wt(),importerId:e.importer,exporterId:e.shipper,importerName:"",exporterName:"",importerTaxIdentificationNumber:"",exporterTaxIdentificationNumber:"",exporterCountry:"",declarantTaxIdentificationNumber:"",waybillNumber:e.waybill_number,waybillDate:"",modeOfTransport:e.mode_of_transport,freightType:e.freight_type,vesselId:e.vessel,vesselName:"",packageTypes:Mt(),portOfDischargeId:e.port_of_discharge,portOfDischargeName:"",netWeight:e.net_weight,grossWeight:e.gross_weight,numberOfPackages:e.package_quantity,packageType:e.package_type,marksAndNumbers:e.marks_and_numbers,totalCargoValue:e.invoice_total,freightAmount:e.freight_charge,insuranceAmount:e.insurance_amount,otherCharges:e.other_charges,rateOfExchange:e.rate_of_exchange,countryOfOrigin:e.country_of_origin,countryOfFinalDestination:e.country_of_final_destination,regimeType:e.regimeType,regimeTypeCode:e.regimeTypeCode,regimeTypeOptions:[],depositAmount:e.deposit,containerCharges:e.container_charges,additionalCharges:e.additional_charges,localFee:e.local_fee,declarantId:e.declarant,incoTerms:e.incoterms,countryLastProvinance:e.country_last_provenance,tradingCountry:e.trading_country}},async handleEdit(e){console.log("Edit payload:",e);const t=e.waybill;console.log("Waybill data:",t);const o=e.entry;console.log("Entry data:",o),xt("Updating Entry details..."),Promise.all([Ue(this.entryId,o),Be(this.waybillId,t)]).then((()=>{Tt(),Et("Entry details updated successfully")})).catch((e=>{console.error("Failed to update the Entry details:",e),St("Failed to update the Entry details. Please try again.")}))}}};const Mp=(0,E.A)($p,[["render",Bp]]);var jp=Mp;const Wp=(0,n.Lk)("h1",null,"Classified Entries",-1),Xp={class:"table table-bordered"},Gp=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Entry #"),(0,n.Lk)("th",null,"Consignee"),(0,n.Lk)("th",null,"Invoice Number"),(0,n.Lk)("th",null,"Waybill Number"),(0,n.Lk)("th",null,"Classififcation Status"),(0,n.Lk)("th",null,"Classified By"),(0,n.Lk)("th",null,"Actions")])],-1),Jp=["onClick"],qp={key:0,class:"error-message"};function Yp(e,t,o,a,s,i){return(0,n.uX)(),(0,n.CE)("div",null,[Wp,(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>s.searchTerm=e),placeholder:"Search entries"},null,512),[[r.Jo,s.searchTerm]]),(0,n.Lk)("table",Xp,[Gp,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.filteredEntries,(e=>((0,n.uX)(),(0,n.CE)("tr",{key:e.entry_id},[(0,n.Lk)("td",null,(0,x.v_)(e.entry_number),1),(0,n.Lk)("td",null,(0,x.v_)(e.importerName),1),(0,n.Lk)("td",null,(0,x.v_)(e.invoice_number?e.invoice_number.split("; ")[0]:""),1),(0,n.Lk)("td",null,(0,x.v_)(e.waybill_number),1),(0,n.Lk)("td",null,[(0,n.Lk)("h5",null,[(0,n.Lk)("span",{class:(0,x.C4)({"badge bg-success":"Classififcation Approved"===i.getStatusText(e.classification_approved),"badge bg-warning text-dark":"Not Classified"===i.getStatusText(e.classification_approved)})},(0,x.v_)(i.getStatusText(e.classification_approved)),3)])]),(0,n.Lk)("td",null,(0,x.v_)(e.classification_approved_by),1),(0,n.Lk)("td",null,[(0,n.Lk)("button",{type:"button",class:"btn btn-success",onClick:t=>i.openEntry(e.entry_id,e.entry_type)},"Edit",8,Jp)])])))),128))])]),s.error?((0,n.uX)(),(0,n.CE)("div",qp,(0,x.v_)(s.error),1)):(0,n.Q3)("",!0)])}var Hp={data(){return{entries:[],error:null,searchTerm:""}},created(){this.fetchEntries()},methods:{getStatusText(e){return e?hs.APPROVED:hs.NOT_CLASSIFIED},openEntry(e,t){t&&t===ms.VEHICLES?this.$router.push({name:"VehicleEntryEditPage",params:{entryId:e}}):this.$router.push({name:"EntryDetails",params:{entryId:e}})},async fetchEntries(){try{const e=await q.A.get("https://mawifrontentcontainerapp.whitestone-99c262a0.eastus.azurecontainerapps.io/api/entries/CLASSIFICATION_OKAY");this.entries=e.data}catch(e){this.error=e.message,console.error("There was an error!",e)}}},computed:{filteredEntries(){if(!this.searchTerm)return this.entries.filter((e=>1===e.classification_approved));const e=this.searchTerm.toLowerCase();return this.entries.filter((t=>1===t.classification_approved&&(t.entry_number&&t.entry_number.toString().toLowerCase().includes(e)||t.waybill_number&&t.waybill_number.toString().toLowerCase().includes(e)||t.invoice_number&&t.invoice_number.split("; ").some((t=>t.toLowerCase().includes(e)))||t.consignee&&t.consignee.toString().toLowerCase().includes(e))))}}};const zp=(0,E.A)(Hp,[["render",Yp]]);var Kp=zp;const Qp=(0,n.Lk)("h1",null,"Partially Stored Entries",-1),Zp={class:"table table-bordered"},ey=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Entry #"),(0,n.Lk)("th",null,"Consignee"),(0,n.Lk)("th",null,"Invoice Number"),(0,n.Lk)("th",null,"Waybill Number"),(0,n.Lk)("th",null,"Actions")])],-1),ty=["onClick"],oy={key:0,class:"error-message"};function ay(e,t,o,a,s,i){return(0,n.uX)(),(0,n.CE)("div",null,[Qp,(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>s.searchTerm=e),placeholder:"Search entries"},null,512),[[r.Jo,s.searchTerm]]),(0,n.Lk)("table",Zp,[ey,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.filteredEntries,(e=>((0,n.uX)(),(0,n.CE)("tr",{key:e.entry_id},[(0,n.Lk)("td",null,(0,x.v_)(e.entry_number),1),(0,n.Lk)("td",null,(0,x.v_)(e.importerName),1),(0,n.Lk)("td",null,(0,x.v_)(e.invoice_number?e.invoice_number.split("; ")[0]:""),1),(0,n.Lk)("td",null,(0,x.v_)(e.waybill_number),1),(0,n.Lk)("td",null,[(0,n.Lk)("button",{type:"button",class:"btn btn-success",onClick:t=>i.openEntry(e.entry_id,e.entry_type)},"Edit",8,ty)])])))),128))])]),s.error?((0,n.uX)(),(0,n.CE)("div",oy,(0,x.v_)(s.error),1)):(0,n.Q3)("",!0)])}var ry={data(){return{entries:[],error:null,searchTerm:""}},created(){this.fetchEntries()},methods:{openEntry(e,t){t&&t===ms.VEHICLES?this.$router.push({name:"VehicleEntryEditPage",params:{entryId:e}}):this.$router.push({name:"EntryDetails",params:{entryId:e}})},async fetchEntries(){try{const e=await q.A.get("https://mawifrontentcontainerapp.whitestone-99c262a0.eastus.azurecontainerapps.io/api/entries/PARTIAL_STORAGE");this.entries=e.data}catch(e){this.error=e.message,console.error("There was an error!",e)}}},computed:{filteredEntries(){if(!this.searchTerm)return this.entries;const e=this.searchTerm.toLowerCase();return this.entries.filter((t=>t.entry_number&&t.entry_number.toString().toLowerCase().includes(e)||t.waybill_number&&t.waybill_number.toString().toLowerCase().includes(e)||t.invoice_number&&t.invoice_number.split("; ").some((t=>t.toLowerCase().includes(e)))||t.consignee&&t.consignee.toString().toLowerCase().includes(e)))}}};const ny=(0,E.A)(ry,[["render",ay]]);var sy=ny;const iy=(0,n.Lk)("h1",null,"Fully Stored Entries",-1),ly={class:"table table-bordered"},cy=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Entry #"),(0,n.Lk)("th",null,"Consignee"),(0,n.Lk)("th",null,"Invoice Number"),(0,n.Lk)("th",null,"Waybill Number"),(0,n.Lk)("th",null,"Actions")])],-1),uy=["onClick"],dy={key:0,class:"error-message"};function my(e,t,o,a,s,i){return(0,n.uX)(),(0,n.CE)("div",null,[iy,(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>s.searchTerm=e),placeholder:"Search entries"},null,512),[[r.Jo,s.searchTerm]]),(0,n.Lk)("table",ly,[cy,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.filteredEntries,(e=>((0,n.uX)(),(0,n.CE)("tr",{key:e.entry_id},[(0,n.Lk)("td",null,(0,x.v_)(e.entry_number),1),(0,n.Lk)("td",null,(0,x.v_)(e.importerName),1),(0,n.Lk)("td",null,(0,x.v_)(e.invoice_number?e.invoice_number.split("; ")[0]:""),1),(0,n.Lk)("td",null,(0,x.v_)(e.waybill_number),1),(0,n.Lk)("td",null,[(0,n.Lk)("button",{type:"button",class:"btn btn-success",onClick:t=>i.openEntry(e.entry_id,e.entry_type)},"Edit",8,uy)])])))),128))])]),s.error?((0,n.uX)(),(0,n.CE)("div",dy,(0,x.v_)(s.error),1)):(0,n.Q3)("",!0)])}var hy={data(){return{entries:[],error:null,searchTerm:""}},created(){this.fetchEntries()},methods:{openEntry(e,t){t&&t===ms.VEHICLES?this.$router.push({name:"VehicleEntryEditPage",params:{entryId:e}}):this.$router.push({name:"EntryDetails",params:{entryId:e}})},async fetchEntries(){try{const e=await q.A.get("https://mawifrontentcontainerapp.whitestone-99c262a0.eastus.azurecontainerapps.io/api/entries/FULL_STORAGE");this.entries=e.data}catch(e){this.error=e.message,console.error("There was an error!",e)}}},computed:{filteredEntries(){if(!this.searchTerm)return this.entries;const e=this.searchTerm.toLowerCase();return this.entries.filter((t=>t.entry_number&&t.entry_number.toString().toLowerCase().includes(e)||t.waybill_number&&t.waybill_number.toString().toLowerCase().includes(e)||t.invoice_number&&t.invoice_number.split("; ").some((t=>t.toLowerCase().includes(e)))||t.consignee&&t.consignee.toString().toLowerCase().includes(e)))}}};const py=(0,E.A)(hy,[["render",my]]);var yy=py;const gy=[{path:"/",name:"NewEntry",component:bs},{path:"/view-entries",name:"ViewEntries",component:Ss},{path:"/entries/:entryId",name:"EntryDetails",component:Hs,props:!0},{path:"/customs-declaration/:entryId",name:"CustomsDeclarationForm",component:Cu,props:!0},{path:"/buyers",name:"BuyersPage",component:Zu},{path:"/sellers",name:"SellersPage",component:Ad},{path:"/declarants",name:"DeclarantsPage",component:dm},{path:"/vessels",name:"VesselsPage",component:xm},{path:"/rate-of-exchange",name:"RateOfExchnagePage",component:zm},{path:"/create-vehicle-entry",name:"VehicleEntry",component:Up},{path:"/edit-vehicle-entry/:entryId",name:"VehicleEntryEditPage",component:jp},{path:"/approved-classification-entries",name:"ApprovedClassificationEntries",component:Kp},{path:"/partial-storage-entries",name:"PartialStorageEntries",component:sy},{path:"/full-storage-entries",name:"FullStorageEntries",component:yy}],fy=(0,S.aE)({history:(0,S.LA)(),routes:gy});var vy=fy,by=o(6845);const ky=(0,r.Ef)(T);ky.use(vy),ky.component("v-select",by.A),ky.mount("#app")}},t={};function o(a){var r=t[a];if(void 0!==r)return r.exports;var n=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(n.exports,n,n.exports,o),n.loaded=!0,n.exports}o.m=e,function(){var e=[];o.O=function(t,a,r,n){if(!a){var s=1/0;for(u=0;u<e.length;u++){a=e[u][0],r=e[u][1],n=e[u][2];for(var i=!0,l=0;l<a.length;l++)(!1&n||s>=n)&&Object.keys(o.O).every((function(e){return o.O[e](a[l])}))?a.splice(l--,1):(i=!1,n<s&&(s=n));if(i){e.splice(u--,1);var c=r();void 0!==c&&(t=c)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[a,r,n]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){o.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,a){var r,n,s=a[0],i=a[1],l=a[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(r in i)o.o(i,r)&&(o.m[r]=i[r]);if(l)var u=l(o)}for(t&&t(a);c<s.length;c++)n=s[c],o.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return o.O(u)},a=self["webpackChunkasycuda_xml_automation"]=self["webpackChunkasycuda_xml_automation"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=o.O(void 0,[504],(function(){return o(2097)}));a=o.O(a)})();
//# sourceMappingURL=app.e0f6d39e.js.map